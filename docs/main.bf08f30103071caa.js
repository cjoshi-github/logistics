"use strict";(self.webpackChunklogistics_primeng=self.webpackChunklogistics_primeng||[]).push([[179],{2011:(wt,xe,V)=>{V.d(xe,{Dh:()=>de,GT:()=>re,cc:()=>Me,hO:()=>Ye,on:()=>j,pX:()=>se,xv:()=>ue});var o=V(4650),te=V(9260),L=V(2122);wt=V.hmd(wt);const oe=["ngOnDestroy"],se=(Re,ke,je,Ae={})=>new Proxy(Re,{get:(Te,Oe)=>je.runOutsideAngular(()=>{var Ge;if(Re[Oe])return!(null===(Ge=Ae?.spy)||void 0===Ge)&&Ge.get&&Ae.spy.get(Oe,Re[Oe]),Re[Oe];if(oe.indexOf(Oe)>-1)return()=>{};const He=ke.toPromise().then(G=>{const Ce=G&&G[Oe];return"function"==typeof Ce?Ce.bind(G):Ce&&Ce.then?Ce.then(Ke=>je.run(()=>Ke)):je.run(()=>Ce)});return new Proxy(()=>{},{get:(G,Ce)=>He[Ce],apply:(G,Ce,Ke)=>He.then(nt=>{var Ct;const lt=nt&&nt(...Ke);return!(null===(Ct=Ae?.spy)||void 0===Ct)&&Ct.apply&&Ae.spy.apply(Oe,Ke,lt),lt})})})}),re=(Re,ke)=>{ke.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(Ae=>{Object.defineProperty(Re.prototype,Ae,Object.getOwnPropertyDescriptor(je.prototype||je,Ae))})})};class me{constructor(ke){return ke}}const de=new o.OlP("angularfire2.app.options"),ue=new o.OlP("angularfire2.app.name");function j(Re,ke,je){const Te="object"==typeof je&&je||{};Te.name=Te.name||"string"==typeof je&&je||"[DEFAULT]";const Ge=te.Z.apps.filter(He=>He&&He.name===Te.name)[0]||ke.runOutsideAngular(()=>te.Z.initializeApp(Re,Te));try{JSON.stringify(Re)!==JSON.stringify(Ge.options)&&q("error",`${Ge.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Ge)}const q=(Re,...ke)=>{(0,o.X6Q)()&&typeof console<"u"&&console[Re](...ke)},Q={provide:me,useFactory:j,deps:[de,o.R0b,[new o.FiY,ue]]};let Ye=(()=>{class Re{constructor(je){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",o.q4F.full,je.toString())}static initializeApp(je,Ae){return{ngModule:Re,providers:[{provide:de,useValue:je},{provide:ue,useValue:Ae}]}}}return Re.\u0275fac=function(je){return new(je||Re)(o.LFG(o.Lbi))},Re.\u0275mod=o.oAB({type:Re}),Re.\u0275inj=o.cJS({providers:[Q]}),Re})();function Me(Re,ke,je,Ae,Te){const[,Oe,Ge]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===Re)||[];if(Oe)return function Xe(Re,ke){try{return Re.toString()===ke.toString()}catch{return Re===ke}}(Te,Ge)||(ge("error",`${ke} was already initialized on the ${je} Firebase App with different settings.${mt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Te,was:Ge})),Oe;{const He=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Re,He,Te]),He}}const mt=!!wt.hot,ge=(Re,...ke)=>{(0,o.X6Q)()&&typeof console<"u"&&console[Re](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(wt,xe,V)=>{V.d(xe,{q4:()=>ac,iC:()=>Zn,fc:()=>gm,HU:()=>Kf,vb:()=>Kn,JM:()=>cr});var o=V(4650),te=V(259),L=V(5861),oe=V(9681),se=V(2090),re=V(4859),me=V(1877),de=V(8766);const ue="@firebase/installations",j="0.6.3",Q=`w:${j}`,Ye="FIS_v2",ke=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function je(S){return S instanceof se.ZR&&S.code.includes("request-failed")}function Ae({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Te(S){return{token:S.token,requestStatus:2,expiresIn:nt(S.expiresIn),creationTime:Date.now()}}function Oe(S,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,L.Z)(function*(S,D){const U=(yield D.json()).error;return ke.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function G(S,{refreshToken:D}){const k=He(S);return k.append("Authorization",function Ct(S){return`${Ye} ${S}`}(D)),k}function Ce(S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,L.Z)(function*(S){const D=yield S();return D.status>=500&&D.status<600?S():D})).apply(this,arguments)}function nt(S){return Number(S.replace("s","000"))}function lt(S,D){return le.apply(this,arguments)}function le(){return(le=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},{fid:k}){const U=Ae(S),J=He(S),ee=D.getImmediate({optional:!0});if(ee){const Ee=yield ee.getHeartbeatsHeader();Ee&&J.append("x-firebase-client",Ee)}const et={method:"POST",headers:J,body:JSON.stringify({fid:k,authVersion:Ye,appId:S.appId,sdkVersion:Q})},bt=yield Ce(()=>fetch(U,et));if(bt.ok){const Ee=yield bt.json();return{fid:Ee.fid||k,registrationStatus:2,refreshToken:Ee.refreshToken,authToken:Te(Ee.authToken)}}throw yield Oe("Create Installation",bt)})).apply(this,arguments)}function fe(S){return new Promise(D=>{setTimeout(D,S)})}const Pe=/^[cdef][\w-]{21}$/;function Qe(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const k=function st(S){return function ve(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Pe.test(k)?k:""}catch{return""}}function tt(S){return`${S.appName}!${S.appId}`}const _n=new Map;function At(S,D){const k=tt(S);Ht(k,D),function kn(S,D){const k=function Rn(){return!Ln&&"BroadcastChannel"in self&&(Ln=new BroadcastChannel("[Firebase] FID Change"),Ln.onmessage=S=>{Ht(S.data.key,S.data.fid)}),Ln}();k&&k.postMessage({key:S,fid:D}),function On(){0===_n.size&&Ln&&(Ln.close(),Ln=null)}()}(k,D)}function Ht(S,D){const k=_n.get(S);if(k)for(const U of k)U(D)}let Ln=null;const Dr="firebase-installations-store";let nr=null;function Ks(){return nr||(nr=(0,de.X3)("firebase-installations-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(Dr)}})),nr}function Tn(S,D){return mr.apply(this,arguments)}function mr(){return(mr=(0,L.Z)(function*(S,D){const k=tt(S),J=(yield Ks()).transaction(Dr,"readwrite"),ee=J.objectStore(Dr),we=yield ee.get(k);return yield ee.put(D,k),yield J.done,(!we||we.fid!==D.fid)&&At(S,D.fid),D})).apply(this,arguments)}function It(S){return Es.apply(this,arguments)}function Es(){return(Es=(0,L.Z)(function*(S){const D=tt(S),U=(yield Ks()).transaction(Dr,"readwrite");yield U.objectStore(Dr).delete(D),yield U.done})).apply(this,arguments)}function $r(S,D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,L.Z)(function*(S,D){const k=tt(S),J=(yield Ks()).transaction(Dr,"readwrite"),ee=J.objectStore(Dr),we=yield ee.get(k),et=D(we);return void 0===et?yield ee.delete(k):yield ee.put(et,k),yield J.done,et&&(!we||we.fid!==et.fid)&&At(S,et.fid),et})).apply(this,arguments)}function Gi(S){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,L.Z)(function*(S){let D;const k=yield $r(S.appConfig,U=>{const J=Bt(U),ee=Dt(S,J);return D=ee.registrationPromise,ee.installationEntry});return""===k.fid?{installationEntry:yield D}:{installationEntry:k,registrationPromise:D}})).apply(this,arguments)}function Bt(S){return Mi(S||{fid:Qe(),registrationStatus:0})}function Dt(S,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ke.create("app-offline"))};const k={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function kt(S,D){return Is.apply(this,arguments)}(S,k);return{installationEntry:k,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Bn(S)}:{installationEntry:D}}function Is(){return(Is=(0,L.Z)(function*(S,D){try{const k=yield lt(S,D);return Tn(S.appConfig,k)}catch(k){throw je(k)&&409===k.customData.serverCode?yield It(S.appConfig):yield Tn(S.appConfig,{fid:D.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Bn(S){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,L.Z)(function*(S){let D=yield jr(S.appConfig);for(;1===D.registrationStatus;)yield fe(100),D=yield jr(S.appConfig);if(0===D.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Gi(S);return U||k}return D})).apply(this,arguments)}function jr(S){return $r(S,D=>{if(!D)throw ke.create("installation-not-found");return Mi(D)})}function Mi(S){return function Jo(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function mn(S,D){return cs.apply(this,arguments)}function cs(){return(cs=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},k){const U=ln(S,k),J=G(S,k),ee=D.getImmediate({optional:!0});if(ee){const Ee=yield ee.getHeartbeatsHeader();Ee&&J.append("x-firebase-client",Ee)}const et={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:S.appId}})},bt=yield Ce(()=>fetch(U,et));if(bt.ok)return Te(yield bt.json());throw yield Oe("Generate Auth Token",bt)})).apply(this,arguments)}function ln(S,{fid:D}){return`${Ae(S)}/${D}/authTokens:generate`}function zi(S){return us.apply(this,arguments)}function us(){return(us=(0,L.Z)(function*(S,D=!1){let k;const U=yield $r(S.appConfig,ee=>{if(!Wt(ee))throw ke.create("not-registered");const we=ee.authToken;if(!D&&$(we))return ee;if(1===we.requestStatus)return k=Je(S,D),ee;{if(!navigator.onLine)throw ke.create("app-offline");const et=Z(ee);return k=Rt(S,et),et}});return k?yield k:U.authToken})).apply(this,arguments)}function Je(S,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*(S,D){let k=yield ht(S.appConfig);for(;1===k.authToken.requestStatus;)yield fe(100),k=yield ht(S.appConfig);const U=k.authToken;return 0===U.requestStatus?zi(S,D):U})).apply(this,arguments)}function ht(S){return $r(S,D=>{if(!Wt(D))throw ke.create("not-registered");return function _e(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Rt(S,D){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,L.Z)(function*(S,D){try{const k=yield mn(S,D),U=Object.assign(Object.assign({},D),{authToken:k});return yield Tn(S.appConfig,U),k}catch(k){if(!je(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Tn(S.appConfig,U)}else yield It(S.appConfig);throw k}})).apply(this,arguments)}function Wt(S){return void 0!==S&&2===S.registrationStatus}function $(S){return 2===S.requestStatus&&!function H(S){const D=Date.now();return D<S.creationTime||S.creationTime+S.expiresIn<D+36e5}(S)}function Z(S){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:D})}function pt(){return(pt=(0,L.Z)(function*(S){const D=S,{installationEntry:k,registrationPromise:U}=yield Gi(D);return U?U.catch(console.error):zi(D).catch(console.error),k.fid})).apply(this,arguments)}function sn(){return(sn=(0,L.Z)(function*(S,D=!1){const k=S;return yield Un(k),(yield zi(k,D)).token})).apply(this,arguments)}function Un(S){return xt.apply(this,arguments)}function xt(){return(xt=(0,L.Z)(function*(S){const{registrationPromise:D}=yield Gi(S);D&&(yield D)})).apply(this,arguments)}function Ol(S){return ke.create("missing-app-config-values",{valueName:S})}const nu="installations",Hn=S=>{const D=S.getProvider("app").getImmediate(),k=function Ua(S){if(!S||!S.options)throw Ol("App Configuration");if(!S.name)throw Ol("App Name");const D=["projectId","apiKey","appId"];for(const k of D)if(!S.options[k])throw Ol(k);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(D);return{app:D,appConfig:k,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},zd=S=>{const D=S.getProvider("app").getImmediate(),k=(0,oe._getProvider)(D,nu).getImmediate();return{getId:()=>function ie(S){return pt.apply(this,arguments)}(k),getToken:J=>function Kt(S){return sn.apply(this,arguments)}(k,J)}};(function iu(){(0,oe._registerComponent)(new re.wA(nu,Hn,"PUBLIC")),(0,oe._registerComponent)(new re.wA("installations-internal",zd,"PRIVATE"))})(),(0,oe.registerVersion)(ue,j),(0,oe.registerVersion)(ue,j,"esm2017");const Ha="@firebase/remote-config",ii=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mo{constructor(D,k,U,J){this.client=D,this.storage=k,this.storageCache=U,this.logger=J}isCachedDataFresh(D,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,J=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var k=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(D.cacheMaxAgeMillis,U))return J;D.eTag=J&&J.eTag;const ee=yield k.client.fetch(D),we=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&we.push(k.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(we),ee})()}}function Ar(S=navigator){return S.languages&&S.languages[0]||S.language}class zn{constructor(D,k,U,J,ee,we){this.firebaseInstallations=D,this.sdkVersion=k,this.namespace=U,this.projectId=J,this.apiKey=ee,this.appId=we}fetch(D){var k=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),we=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},bt={sdk_version:k.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:k.appId,language_code:Ar()},Ee={method:"POST",headers:et,body:JSON.stringify(bt)},jt=fetch(we,Ee),Pt=new Promise((ct,Jr)=>{D.signal.addEventListener(()=>{const no=new Error("The operation was aborted.");no.name="AbortError",Jr(no)})});let Cr;try{yield Promise.race([jt,Pt]),Cr=yield jt}catch(ct){let Jr="fetch-client-network";throw"AbortError"===ct?.name&&(Jr="fetch-timeout"),ii.create(Jr,{originalErrorMessage:ct?.message})}let Xn=Cr.status;const Ki=Cr.headers.get("ETag")||void 0;let Rs,an;if(200===Cr.status){let ct;try{ct=yield Cr.json()}catch(Jr){throw ii.create("fetch-client-parse",{originalErrorMessage:Jr?.message})}Rs=ct.entries,an=ct.state}if("INSTANCE_STATE_UNSPECIFIED"===an?Xn=500:"NO_CHANGE"===an?Xn=304:("NO_TEMPLATE"===an||"EMPTY_CONFIG"===an)&&(Rs={}),304!==Xn&&200!==Xn)throw ii.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:Ki,config:Rs}})()}}class ds{constructor(D,k){this.client=D,this.storage=k}fetch(D){var k=this;return(0,L.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:k,backoffCount:U}){var J=this;return(0,L.Z)(function*(){yield function $n(S,D){return new Promise((k,U)=>{const J=Math.max(D-Date.now(),0),ee=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(ee),U(ii.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,k);try{const ee=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Cn(S){if(!(S instanceof se.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ee))throw ee;const we={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(we),J.attemptFetch(D,we)}})()}}class na{constructor(D,k,U,J,ee){this.app=D,this._client=k,this._storageCache=U,this._storage=J,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _o(S,D){const k=S.target.error||void 0;return ii.create(D,{originalErrorMessage:k&&k?.message})}const rr="app_namespace_store";class Wr{constructor(D,k,U,J=function _r(){return new Promise((S,D)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=U=>{D(_o(U,"storage-open"))},k.onsuccess=U=>{S(U.target.result)},k.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(rr,{keyPath:"compositeKey"})}}catch(k){D(ii.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=D,this.appName=k,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var k=this;return(0,L.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,ee)=>{const et=U.transaction([rr],"readonly").objectStore(rr),bt=k.createCompositeKey(D);try{const Ee=et.get(bt);Ee.onerror=jt=>{ee(_o(jt,"storage-get"))},Ee.onsuccess=jt=>{const Pt=jt.target.result;J(Pt?Pt.value:void 0)}}catch(Ee){ee(ii.create("storage-get",{originalErrorMessage:Ee?.message}))}})})()}set(D,k){var U=this;return(0,L.Z)(function*(){const J=yield U.openDbPromise;return new Promise((ee,we)=>{const bt=J.transaction([rr],"readwrite").objectStore(rr),Ee=U.createCompositeKey(D);try{const jt=bt.put({compositeKey:Ee,value:k});jt.onerror=Pt=>{we(_o(Pt,"storage-set"))},jt.onsuccess=()=>{ee()}}catch(jt){we(ii.create("storage-set",{originalErrorMessage:jt?.message}))}})})()}delete(D){var k=this;return(0,L.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,ee)=>{const et=U.transaction([rr],"readwrite").objectStore(rr),bt=k.createCompositeKey(D);try{const Ee=et.delete(bt);Ee.onerror=jt=>{ee(_o(jt,"storage-delete"))},Ee.onsuccess=()=>{J()}}catch(Ee){ee(ii.create("storage-delete",{originalErrorMessage:Ee?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class za{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const k=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),ee=yield k;ee&&(D.lastFetchStatus=ee);const we=yield U;we&&(D.lastSuccessfulFetchTimestampMillis=we);const et=yield J;et&&(D.activeConfig=et)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function $a(){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,L.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Kr(){(0,oe._registerComponent)(new re.wA("remote-config",function S(D,{instanceIdentifier:k}){const U=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ii.create("registration-window");if(!(0,se.hl)())throw ii.create("indexed-db-unavailable");const{projectId:ee,apiKey:we,appId:et}=U.options;if(!ee)throw ii.create("registration-project-id");if(!we)throw ii.create("registration-api-key");if(!et)throw ii.create("registration-app-id");const bt=new Wr(et,U.name,k=k||"firebase"),Ee=new za(bt),jt=new me.Yd(Ha);jt.logLevel=me.in.ERROR;const Pt=new zn(J,oe.SDK_VERSION,k,ee,we,et),Cr=new ds(Pt,bt),Xn=new mo(Cr,bt,Ee,jt),Ki=new na(U,Xn,Ee,bt,jt);return function Gn(S){const D=(0,se.m9)(S);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ki),Ki},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ha,"0.4.3"),(0,oe.registerVersion)(Ha,"0.4.3","esm2017")}();const au="/firebase-messaging-sw.js",Ds="/firebase-cloud-messaging-push-scope",ia="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lu="google.c.a.c_id",Of="google.c.a.c_l",Pf="google.c.a.ts",lm="google.c.a.e";var yo=(()=>{return(S=yo||(yo={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",yo;var S})();function hs(S){const D=new Uint8Array(S);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cm(S){const k=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),J=new Uint8Array(U.length);for(let ee=0;ee<U.length;++ee)J[ee]=U.charCodeAt(ee);return J}const En="fcm_token_details_db",or="fcm_token_object_Store";function uu(S){return qd.apply(this,arguments)}function qd(){return qd=(0,L.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(En))return null;let D=null;return(yield(0,de.X3)(En,5,{upgrade:(U=(0,L.Z)(function*(J,ee,we,et){var bt;if(ee<2||!J.objectStoreNames.contains(or))return;const Ee=et.objectStore(or),jt=yield Ee.index("fcmSenderId").get(S);if(yield Ee.clear(),jt)if(2===ee){const Pt=jt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;D={token:Pt.fcmToken,createTime:null!==(bt=Pt.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:hs(Pt.vapidKey)}}}else if(3===ee){const Pt=jt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:hs(Pt.auth),p256dh:hs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:hs(Pt.vapidKey)}}}else if(4===ee){const Pt=jt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:hs(Pt.auth),p256dh:hs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:hs(Pt.vapidKey)}}}}),function(ee,we,et,bt){return U.apply(this,arguments)})})).close(),yield(0,de.Lj)(En),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Nf(D)?D:null;var U}),qd.apply(this,arguments)}function Nf(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:D}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const wo="firebase-messaging-store";let Nl=null;function sa(){return Nl||(Nl=(0,de.X3)("firebase-messaging-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(wo)}})),Nl}function Fl(S){return oa.apply(this,arguments)}function oa(){return(oa=(0,L.Z)(function*(S){const D=la(S),U=yield(yield sa()).transaction(wo).objectStore(wo).get(D);if(U)return U;{const J=yield uu(S.appConfig.senderId);if(J)return yield bo(S,J),J}})).apply(this,arguments)}function bo(S,D){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(S,D){const k=la(S),J=(yield sa()).transaction(wo,"readwrite");return yield J.objectStore(wo).put(D,k),yield J.done,D})).apply(this,arguments)}function Wd(S){return aa.apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(S){const D=la(S),U=(yield sa()).transaction(wo,"readwrite");yield U.objectStore(wo).delete(D),yield U.done})).apply(this,arguments)}function la({appConfig:S}){return S.appId}const Wn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ll(S,D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,L.Z)(function*(S,D){const k=yield To(S),U=Wa(D),J={method:"POST",headers:k,body:JSON.stringify(U)};let ee;try{ee=yield(yield fetch(ca(S.appConfig),J)).json()}catch(we){throw Wn.create("token-subscribe-failed",{errorInfo:we?.toString()})}if(ee.error)throw Wn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Wn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Vl(S,D){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(S,D){const k=yield To(S),U=Wa(D.subscriptionOptions),J={method:"PATCH",headers:k,body:JSON.stringify(U)};let ee;try{ee=yield(yield fetch(`${ca(S.appConfig)}/${D.token}`,J)).json()}catch(we){throw Wn.create("token-update-failed",{errorInfo:we?.toString()})}if(ee.error)throw Wn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Wn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function oi(S,D){return du.apply(this,arguments)}function du(){return(du=(0,L.Z)(function*(S,D){const U={method:"DELETE",headers:yield To(S)};try{const ee=yield(yield fetch(`${ca(S.appConfig)}/${D}`,U)).json();if(ee.error)throw Wn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(J){throw Wn.create("token-unsubscribe-failed",{errorInfo:J?.toString()})}})).apply(this,arguments)}function ca({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function To(S){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,L.Z)(function*({appConfig:S,installations:D}){const k=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Wa({p256dh:S,auth:D,endpoint:k,vapidKey:U}){const J={web:{endpoint:k,auth:D,p256dh:S}};return U!==ia&&(J.web.applicationPubKey=U),J}const ua=6048e5;function Bl(S){return xs.apply(this,arguments)}function xs(){return(xs=(0,L.Z)(function*(S){const D=yield hu(S.swRegistration,S.vapidKey),k={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:D.endpoint,auth:hs(D.getKey("auth")),p256dh:hs(D.getKey("p256dh"))},U=yield Fl(S.firebaseDependencies);if(U){if(Gl(U.subscriptionOptions,k))return Date.now()>=U.createTime+ua?Vt(S,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield oi(S.firebaseDependencies,U.token)}catch(J){console.warn(J)}return Kd(S.firebaseDependencies,k)}return Kd(S.firebaseDependencies,k)})).apply(this,arguments)}function Ka(S){return Za.apply(this,arguments)}function Za(){return(Za=(0,L.Z)(function*(S){const D=yield Fl(S.firebaseDependencies);D&&(yield oi(S.firebaseDependencies,D.token),yield Wd(S.firebaseDependencies));const k=yield S.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Vt(S,D){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,L.Z)(function*(S,D){try{const k=yield Vl(S.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:k,createTime:Date.now()});return yield bo(S.firebaseDependencies,U),k}catch(k){throw yield Ka(S),k}})).apply(this,arguments)}function Kd(S,D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,L.Z)(function*(S,D){const U={token:yield Ll(S,D),createTime:Date.now(),subscriptionOptions:D};return yield bo(S,U),U.token})).apply(this,arguments)}function hu(S,D){return fu.apply(this,arguments)}function fu(){return(fu=(0,L.Z)(function*(S,D){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cm(D)})})).apply(this,arguments)}function Gl(S,D){return D.vapidKey===S.vapidKey&&D.endpoint===S.endpoint&&D.auth===S.auth&&D.p256dh===S.p256dh}function Ff(S){const D={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function pu(S,D){if(!D.notification)return;S.notification={};const k=D.notification.title;k&&(S.notification.title=k);const U=D.notification.body;U&&(S.notification.body=U);const J=D.notification.image;J&&(S.notification.image=J);const ee=D.notification.icon;ee&&(S.notification.icon=ee)}(D,S),function ye(S,D){D.data&&(S.data=D.data)}(D,S),function un(S,D){var k,U,J,ee,we;if(!(D.fcmOptions||null!==(k=D.notification)&&void 0!==k&&k.click_action))return;S.fcmOptions={};const et=null!==(J=null===(U=D.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==J?J:null===(ee=D.notification)||void 0===ee?void 0:ee.click_action;et&&(S.fcmOptions.link=et);const bt=null===(we=D.fcmOptions)||void 0===we?void 0:we.analytics_label;bt&&(S.fcmOptions.analyticsLabel=bt)}(D,S),D}function gu(S){return"object"==typeof S&&!!S&&lu in S}function Zd(S,D){const k=[];for(let U=0;U<S.length;U++)k.push(S.charAt(U)),U<D.length&&k.push(D.charAt(U));return k.join("")}function Ya(S){return Wn.create("missing-app-config-values",{valueName:S})}Zd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zl{constructor(D,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function ki(S){if(!S||!S.options)throw Ya("App Configuration Object");if(!S.name)throw Ya("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:k}=S;for(const U of D)if(!k[U])throw Ya(U);return{appName:S.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function vr(S){return $l.apply(this,arguments)}function $l(){return($l=(0,L.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(au,{scope:Ds}),S.swRegistration.update().catch(()=>{})}catch(D){throw Wn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function jl(S,D){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,L.Z)(function*(S,D){if(!D&&!S.swRegistration&&(yield vr(S)),D||!S.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Wn.create("invalid-sw-registration");S.swRegistration=D}})).apply(this,arguments)}function mu(S,D){return ql.apply(this,arguments)}function ql(){return(ql=(0,L.Z)(function*(S,D){D?S.vapidKey=D:S.vapidKey||(S.vapidKey=ia)})).apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(S,D){if(!navigator)throw Wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wn.create("permission-blocked");return yield mu(S,D?.vapidKey),yield jl(S,D?.serviceWorkerRegistration),Bl(S)})).apply(this,arguments)}function Qs(S,D,k){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,L.Z)(function*(S,D,k){const U=fs(D);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[lu],message_name:k[Of],message_time:k[Pf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fs(S){switch(S){case yo.NOTIFICATION_CLICKED:return"notification_open";case yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qa(){return(Qa=(0,L.Z)(function*(S,D){const k=D.data;if(!k.isFirebaseMessaging)return;S.onMessageHandler&&k.messageType===yo.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Ff(k)):S.onMessageHandler.next(Ff(k)));const U=k.data;gu(U)&&"1"===U[lm]&&(yield Qs(S,k.messageType,U))})).apply(this,arguments)}const Jd="@firebase/messaging",yu=S=>{const D=new zl(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Qd(S,D){return Qa.apply(this,arguments)}(D,k)),D},As=S=>{const D=S.getProvider("messaging").getImmediate();return{getToken:U=>function mi(S,D){return wr.apply(this,arguments)}(D,U)}};function vu(){return eh.apply(this,arguments)}function eh(){return(eh=(0,L.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xd(){(0,oe._registerComponent)(new re.wA("messaging",yu,"PUBLIC")),(0,oe._registerComponent)(new re.wA("messaging-internal",As,"PRIVATE")),(0,oe.registerVersion)(Jd,"0.12.3"),(0,oe.registerVersion)(Jd,"0.12.3","esm2017")}();const th="analytics",ar="firebase_id",ha="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bu="https://www.googletagmanager.com/gtag/js",Ri=new me.Yd("@firebase/analytics");function Bf(S){return Promise.all(S.map(D=>D.catch(k=>k)))}function hm(S,D){const k=document.createElement("script");k.src=`${bu}?l=${S}&id=${D}`,k.async=!0,document.head.appendChild(k)}function Ja(S,D,k,U,J,ee){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(S,D,k,U,J,ee){const we=U[J];try{if(we)yield D[we];else{const bt=(yield Bf(k)).find(Ee=>Ee.measurementId===J);bt&&(yield D[bt.appId])}}catch(et){Ri.error(et)}S("config",J,ee)})).apply(this,arguments)}function fa(S,D,k,U,J){return kr.apply(this,arguments)}function kr(){return(kr=(0,L.Z)(function*(S,D,k,U,J){try{let ee=[];if(J&&J.send_to){let we=J.send_to;Array.isArray(we)||(we=[we]);const et=yield Bf(k);for(const bt of we){const Ee=et.find(Pt=>Pt.measurementId===bt),jt=Ee&&D[Ee.appId];if(!jt){ee=[];break}ee.push(jt)}}0===ee.length&&(ee=Object.values(D)),yield Promise.all(ee),S("event",U,J||{})}catch(ee){Ri.error(ee)}})).apply(this,arguments)}function pa(S){const D=window.document.getElementsByTagName("script");for(const k of Object.values(D))if(k.src&&k.src.includes(bu)&&k.src.includes(S))return k;return null}const Rr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xa=new class Io{constructor(D={},k=1e3){this.throttleMetadata=D,this.intervalMillis=k}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,k){this.throttleMetadata[D]=k}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Zl(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function el(S){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,L.Z)(function*(S){var D;const{appId:k,apiKey:U}=S,J={method:"GET",headers:Zl(U)},ee=ha.replace("{app-id}",k),we=yield fetch(ee,J);if(200!==we.status&&304!==we.status){let et="";try{const bt=yield we.json();null!==(D=bt.error)&&void 0!==D&&D.message&&(et=bt.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:we.status,responseMessage:et})}return we.json()})).apply(this,arguments)}function In(S){return tl.apply(this,arguments)}function tl(){return(tl=(0,L.Z)(function*(S,D=Xa,k){const{appId:U,apiKey:J,measurementId:ee}=S.options;if(!U)throw Rr.create("no-app-id");if(!J){if(ee)return{measurementId:ee,appId:U};throw Rr.create("no-api-key")}const we=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Yl;return setTimeout((0,L.Z)(function*(){et.abort()}),void 0!==k?k:6e4),So({appId:U,apiKey:J,measurementId:ee},we,et,D)})).apply(this,arguments)}function So(S,D,k){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,L.Z)(function*(S,{throttleEndTimeMillis:D,backoffCount:k},U,J=Xa){var ee;const{appId:we,measurementId:et}=S;try{yield nl(U,D)}catch(bt){if(et)return Ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:we,measurementId:et};throw bt}try{const bt=yield el(S);return J.deleteThrottleMetadata(we),bt}catch(bt){const Ee=bt;if(!Iu(Ee)){if(J.deleteThrottleMetadata(we),et)return Ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${Ee?.message}]`),{appId:we,measurementId:et};throw bt}const jt=503===Number(null===(ee=Ee?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,se.$s)(k,J.intervalMillis,30):(0,se.$s)(k,J.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+jt,backoffCount:k+1};return J.setThrottleMetadata(we,Pt),Ri.debug(`Calling attemptFetch again in ${jt} millis`),So(S,Pt,U,J)}})).apply(this,arguments)}function nl(S,D){return new Promise((k,U)=>{const J=Math.max(D-Date.now(),0),ee=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(ee),U(Rr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Iu(S){if(!(S instanceof se.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Yl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ql,Ao;function Xs(){return(Xs=(0,L.Z)(function*(S,D,k,U,J){if(J&&J.global)S("event",k,U);else{const ee=yield D;S("event",k,Object.assign(Object.assign({},U),{send_to:ee}))}})).apply(this,arguments)}function ec(S){Ao=S}function il(S){Ql=S}function Du(){return ih.apply(this,arguments)}function ih(){return(ih=(0,L.Z)(function*(){if(!(0,se.hl)())return Ri.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(S){return Ri.warn(Rr.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function ya(){return(ya=(0,L.Z)(function*(S,D,k,U,J,ee,we){var et;const bt=In(S);bt.then(Xn=>{k[Xn.measurementId]=Xn.appId,S.options.measurementId&&Xn.measurementId!==S.options.measurementId&&Ri.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>Ri.error(Xn)),D.push(bt);const Ee=Du().then(Xn=>{if(Xn)return U.getId()}),[jt,Pt]=yield Promise.all([bt,Ee]);pa(ee)||hm(ee,jt.measurementId),Ao&&(J("consent","default",Ao),ec(void 0)),J("js",new Date);const Cr=null!==(et=we?.config)&&void 0!==et?et:{};return Cr.origin="firebase",Cr.update=!0,null!=Pt&&(Cr[ar]=Pt),J("config",jt.measurementId,Cr),Ql&&(J("set",Ql),il(void 0)),jt.measurementId})).apply(this,arguments)}class Uf{constructor(D){this.app=D}_delete(){return delete ks[this.app.options.appId],Promise.resolve()}}let ks={},rl=[];const tc={};let Au,Yr,Zr="dataLayer",Qr=!1;function nc(S,D,k){!function Mu(){const S=[];if((0,se.ru)()&&S.push("This is a browser extension environment."),(0,se.zI)()||S.push("Cookies are not available."),S.length>0){const D=S.map((U,J)=>`(${J+1}) ${U}`).join(" "),k=Rr.create("invalid-analytics-context",{errorInfo:D});Ri.warn(k.message)}}();const U=S.options.appId;if(!U)throw Rr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Rr.create("no-api-key");Ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ks[U])throw Rr.create("already-exists",{id:U});if(!Qr){!function fm(S){let D=[];Array.isArray(window[S])?D=window[S]:window[S]=D}(Zr);const{wrappedGtag:ee,gtagCore:we}=function Kl(S,D,k,U,J){let ee=function(...we){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ee=window[J]),window[J]=function Cu(S,D,k,U){function ee(){return(ee=(0,L.Z)(function*(we,et,bt){try{"event"===we?yield fa(S,D,k,et,bt):"config"===we?yield Ja(S,D,k,U,et,bt):"consent"===we?S("consent","update",bt):S("set",et)}catch(Ee){Ri.error(Ee)}})).apply(this,arguments)}return function J(we,et,bt){return ee.apply(this,arguments)}}(ee,S,D,k),{gtagCore:ee,wrappedGtag:window[J]}}(ks,rl,tc,Zr,"gtag");Yr=ee,Au=we,Qr=!0}return ks[U]=function Mo(S,D,k,U,J,ee,we){return ya.apply(this,arguments)}(S,rl,tc,D,Au,Zr,k),new Uf(S)}function Ru(){return ko.apply(this,arguments)}function ko(){return(ko=(0,L.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function pm(){(0,oe._registerComponent)(new re.wA(th,(D,{options:k})=>nc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,oe._registerComponent)(new re.wA("analytics-internal",function S(D){try{const k=D.getProvider(th).getImmediate();return{logEvent:(U,J,ee)=>function pv(S,D,k,U){S=(0,se.m9)(S),function Jl(S,D,k,U,J){return Xs.apply(this,arguments)}(Yr,ks[S.app.options.appId],D,k,U).catch(J=>Ri.error(J))}(k,U,J,ee)}}catch(k){throw Rr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,oe.registerVersion)(on,"0.9.3"),(0,oe.registerVersion)(on,"0.9.3","esm2017")}();var rc=V(4408),$f=V(7565);const jf=new class oh extends $f.v{}(class zf extends rc.o{constructor(D,k){super(D,k),this.scheduler=D,this.work=k}schedule(D,k=0){return k>0?super.schedule(D,k):(this.delay=k,this.state=D,this.scheduler.flush(this),this)}execute(D,k){return k>0||this.closed?super.execute(D,k):this._execute(D,k)}requestAsyncId(D,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,k,U):(D.flush(this),0)}});var qf=V(4986),Nu=V(8505),Sn=V(5363),oc=V(9468);const ac=new o.GfV("7.5.0"),Fu="__angularfire_symbol__analyticsIsSupportedValue",br="__angularfire_symbol__analyticsIsSupported",ps="__angularfire_symbol__remoteConfigIsSupportedValue",lc="__angularfire_symbol__remoteConfigIsSupported",ol="__angularfire_symbol__messagingIsSupportedValue",wa="__angularfire_symbol__messagingIsSupported";function cr(S,D,k){if(D){if(1===D.length)return D[0];const ee=D.filter(we=>we.app===k);if(1===ee.length)return ee[0]}return k.container.getProvider(S).getImmediate({optional:!0})}globalThis[br]||(globalThis[br]=Ru().then(S=>globalThis[Fu]=S).catch(()=>globalThis[Fu]=!1)),globalThis[wa]||(globalThis[wa]=vu().then(S=>globalThis[ol]=S).catch(()=>globalThis[ol]=!1)),globalThis[lc]||(globalThis[lc]=$a().then(S=>globalThis[ps]=S).catch(()=>globalThis[ps]=!1));const Kn=(S,D)=>{const k=D?[D]:(0,te.C6)(),U=[];return k.forEach(J=>{J.container.getProvider(S).instances.forEach(we=>{U.includes(we)||U.push(we)})}),U};function ze(){}class ba{constructor(D,k=jf){this.zone=D,this.delegate=k}now(){return this.delegate.now()}schedule(D,k,U){const J=this.zone;return this.delegate.schedule(function(we){J.runGuarded(()=>{D.apply(this,[we])})},k,U)}}class uc{constructor(D){this.zone=D,this.task=null}call(D,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ze,{},ze,ze)),k.pipe((0,Nu.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kf=(()=>{class S{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new ba(Zone.current)),this.insideAngular=k.run(()=>new ba(Zone.current,qf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(k){return new(k||S)(o.LFG(o.R0b))},S.\u0275prov=o.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function _i(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function gm(S){return S.pipe((0,Sn.Q)(_i().outsideAngular))}function Zn(S){return _i(),function Ca(S){return function(k){return(k=k.lift(new uc(S.ngZone))).pipe((0,oc.R)(S.outsideAngular),(0,Sn.Q)(S.insideAngular))}}(_i())(S)}},2090:(wt,xe,V)=>{V.d(xe,{$s:()=>ht,BH:()=>Te,DV:()=>Dr,Dv:()=>Bn,G6:()=>ve,GJ:()=>gr,L:()=>de,LL:()=>_n,Pz:()=>Ae,Sg:()=>Oe,UG:()=>G,UI:()=>Ks,US:()=>re,Wj:()=>Mi,Wl:()=>Ht,Yr:()=>fe,ZB:()=>q,ZR:()=>tt,aH:()=>je,b$:()=>nt,cI:()=>ut,dS:()=>mn,eu:()=>qe,g5:()=>L,gK:()=>Pn,gQ:()=>Gi,h$:()=>me,hl:()=>Pe,hu:()=>te,jU:()=>Ce,lb:()=>Jo,m9:()=>Wt,ne:()=>Zs,p$:()=>j,pd:()=>Vn,r3:()=>Ws,ru:()=>Ke,tV:()=>ue,uI:()=>He,ug:()=>cs,vZ:()=>Tn,w1:()=>lt,w9:()=>On,xO:()=>Es,xb:()=>nr,z$:()=>Ge,zI:()=>Qe,zd:()=>$r});const te=function($,H){if(!$)throw L(H)},L=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},oe=function($){const H=[];let Z=0;for(let _e=0;_e<$.length;_e++){let ie=$.charCodeAt(_e);ie<128?H[Z++]=ie:ie<2048?(H[Z++]=ie>>6|192,H[Z++]=63&ie|128):55296==(64512&ie)&&_e+1<$.length&&56320==(64512&$.charCodeAt(_e+1))?(ie=65536+((1023&ie)<<10)+(1023&$.charCodeAt(++_e)),H[Z++]=ie>>18|240,H[Z++]=ie>>12&63|128,H[Z++]=ie>>6&63|128,H[Z++]=63&ie|128):(H[Z++]=ie>>12|224,H[Z++]=ie>>6&63|128,H[Z++]=63&ie|128)}return H},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let ie=0;ie<$.length;ie+=3){const pt=$[ie],Kt=ie+1<$.length,sn=Kt?$[ie+1]:0,Un=ie+2<$.length,xt=Un?$[ie+2]:0;let pi=(15&sn)<<2|xt>>6,Xo=63&xt;Un||(Xo=64,Kt||(pi=64)),_e.push(Z[pt>>2],Z[(3&pt)<<4|sn>>4],Z[pi],Z[Xo])}return _e.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(oe($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let Z=0,_e=0;for(;Z<$.length;){const ie=$[Z++];if(ie<128)H[_e++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const pt=$[Z++];H[_e++]=String.fromCharCode((31&ie)<<6|63&pt)}else if(ie>239&&ie<365){const Un=((7&ie)<<18|(63&$[Z++])<<12|(63&$[Z++])<<6|63&$[Z++])-65536;H[_e++]=String.fromCharCode(55296+(Un>>10)),H[_e++]=String.fromCharCode(56320+(1023&Un))}else{const pt=$[Z++],Kt=$[Z++];H[_e++]=String.fromCharCode((15&ie)<<12|(63&pt)<<6|63&Kt)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const Z=H?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let ie=0;ie<$.length;){const pt=Z[$.charAt(ie++)],sn=ie<$.length?Z[$.charAt(ie)]:0;++ie;const xt=ie<$.length?Z[$.charAt(ie)]:64;++ie;const Qt=ie<$.length?Z[$.charAt(ie)]:64;if(++ie,null==pt||null==sn||null==xt||null==Qt)throw Error();_e.push(pt<<2|sn>>4),64!==xt&&(_e.push(sn<<4&240|xt>>2),64!==Qt&&_e.push(xt<<6&192|Qt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},me=function($){const H=oe($);return re.encodeByteArray(H,!0)},de=function($){return me($).replace(/\./g,"")},ue=function($){try{return re.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function j($){return q(void 0,$)}function q($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const Z in H)!H.hasOwnProperty(Z)||!Q(Z)||($[Z]=q($[Z],H[Z]));return $}function Q($){return"__proto__"!==$}const ge=()=>{try{return function Ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=$&&ue($[1]);return H&&JSON.parse(H)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},je=()=>{var $;return null===($=ge())||void 0===$?void 0:$.config},Ae=$=>{var H;return null===(H=ge())||void 0===H?void 0:H[`_${$}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Z)=>{this.resolve=H,this.reject=Z})}wrapCallback(H){return(Z,_e)=>{Z?this.reject(Z):this.resolve(_e),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Z):H(Z,_e))}}}function Oe($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=H||"demo-project",ie=$.iat||0,pt=$.sub||$.user_id;if(!pt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Kt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:ie,exp:ie+3600,auth_time:ie,sub:pt,user_id:pt,firebase:{sign_in_provider:"custom",identities:{}}},$);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(Kt)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function G(){var $;const H=null===($=ge())||void 0===$?void 0:$.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ce(){return"object"==typeof self&&self.self===self}function Ke(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lt(){const $=Ge();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function fe(){return!1}function ve(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function qe(){return new Promise(($,H)=>{try{let Z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(_e);ie.onsuccess=()=>{ie.result.close(),Z||self.indexedDB.deleteDatabase(_e),$(!0)},ie.onupgradeneeded=()=>{Z=!1},ie.onerror=()=>{var pt;H((null===(pt=ie.error)||void 0===pt?void 0:pt.message)||"")}}catch(Z){H(Z)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class tt extends Error{constructor(H,Z,_e){super(Z),this.code=H,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(H,Z,_e){this.service=H,this.serviceName=Z,this.errors=_e}create(H,...Z){const _e=Z[0]||{},ie=`${this.service}/${H}`,pt=this.errors[H],Kt=pt?function At($,H){return $.replace(dn,(Z,_e)=>{const ie=H[_e];return null!=ie?String(ie):`<${_e}?>`})}(pt,_e):"Error";return new tt(ie,`${this.serviceName}: ${Kt} (${ie}).`,_e)}}const dn=/\{\$([^}]+)}/g;function ut($){return JSON.parse($)}function Ht($){return JSON.stringify($)}const kn=function($){let H={},Z={},_e={},ie="";try{const pt=$.split(".");H=ut(ue(pt[0])||""),Z=ut(ue(pt[1])||""),ie=pt[2],_e=Z.d||{},delete Z.d}catch{}return{header:H,claims:Z,data:_e,signature:ie}},On=function($){const Z=kn($).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},gr=function($){const H=kn($).claims;return"object"==typeof H&&!0===H.admin};function Ws($,H){return Object.prototype.hasOwnProperty.call($,H)}function Dr($,H){if(Object.prototype.hasOwnProperty.call($,H))return $[H]}function nr($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function Ks($,H,Z){const _e={};for(const ie in $)Object.prototype.hasOwnProperty.call($,ie)&&(_e[ie]=H.call(Z,$[ie],ie,$));return _e}function Tn($,H){if($===H)return!0;const Z=Object.keys($),_e=Object.keys(H);for(const ie of Z){if(!_e.includes(ie))return!1;const pt=$[ie],Kt=H[ie];if(mr(pt)&&mr(Kt)){if(!Tn(pt,Kt))return!1}else if(pt!==Kt)return!1}for(const ie of _e)if(!Z.includes(ie))return!1;return!0}function mr($){return null!==$&&"object"==typeof $}function Es($){const H=[];for(const[Z,_e]of Object.entries($))Array.isArray(_e)?_e.forEach(ie=>{H.push(encodeURIComponent(Z)+"="+encodeURIComponent(ie))}):H.push(encodeURIComponent(Z)+"="+encodeURIComponent(_e));return H.length?"&"+H.join("&"):""}function $r($){const H={};return $.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[ie,pt]=_e.split("=");H[decodeURIComponent(ie)]=decodeURIComponent(pt)}}),H}function Vn($){const H=$.indexOf("?");if(!H)return"";const Z=$.indexOf("#",H);return $.substring(H,Z>0?Z:void 0)}class Gi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Z){Z||(Z=0);const _e=this.W_;if("string"==typeof H)for(let Qt=0;Qt<16;Qt++)_e[Qt]=H.charCodeAt(Z)<<24|H.charCodeAt(Z+1)<<16|H.charCodeAt(Z+2)<<8|H.charCodeAt(Z+3),Z+=4;else for(let Qt=0;Qt<16;Qt++)_e[Qt]=H[Z]<<24|H[Z+1]<<16|H[Z+2]<<8|H[Z+3],Z+=4;for(let Qt=16;Qt<80;Qt++){const pi=_e[Qt-3]^_e[Qt-8]^_e[Qt-14]^_e[Qt-16];_e[Qt]=4294967295&(pi<<1|pi>>>31)}let xt,Ti,ie=this.chain_[0],pt=this.chain_[1],Kt=this.chain_[2],sn=this.chain_[3],Un=this.chain_[4];for(let Qt=0;Qt<80;Qt++){Qt<40?Qt<20?(xt=sn^pt&(Kt^sn),Ti=1518500249):(xt=pt^Kt^sn,Ti=1859775393):Qt<60?(xt=pt&Kt|sn&(pt|Kt),Ti=2400959708):(xt=pt^Kt^sn,Ti=3395469782);const pi=(ie<<5|ie>>>27)+xt+Un+Ti+_e[Qt]&4294967295;Un=sn,sn=Kt,Kt=4294967295&(pt<<30|pt>>>2),pt=ie,ie=pi}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+pt&4294967295,this.chain_[2]=this.chain_[2]+Kt&4294967295,this.chain_[3]=this.chain_[3]+sn&4294967295,this.chain_[4]=this.chain_[4]+Un&4294967295}update(H,Z){if(null==H)return;void 0===Z&&(Z=H.length);const _e=Z-this.blockSize;let ie=0;const pt=this.buf_;let Kt=this.inbuf_;for(;ie<Z;){if(0===Kt)for(;ie<=_e;)this.compress_(H,ie),ie+=this.blockSize;if("string"==typeof H){for(;ie<Z;)if(pt[Kt]=H.charCodeAt(ie),++Kt,++ie,Kt===this.blockSize){this.compress_(pt),Kt=0;break}}else for(;ie<Z;)if(pt[Kt]=H[ie],++Kt,++ie,Kt===this.blockSize){this.compress_(pt),Kt=0;break}}this.inbuf_=Kt,this.total_+=Z}digest(){const H=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&Z,Z/=256;this.compress_(this.buf_);let _e=0;for(let ie=0;ie<5;ie++)for(let pt=24;pt>=0;pt-=8)H[_e]=this.chain_[ie]>>pt&255,++_e;return H}}function Zs($,H){const Z=new Bt($,H);return Z.subscribe.bind(Z)}class Bt{constructor(H,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{H(this)}).catch(_e=>{this.error(_e)})}next(H){this.forEachObserver(Z=>{Z.next(H)})}error(H){this.forEachObserver(Z=>{Z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Z,_e){let ie;if(void 0===H&&void 0===Z&&void 0===_e)throw new Error("Missing Observer.");ie=function kt($,H){if("object"!=typeof $||null===$)return!1;for(const Z of H)if(Z in $&&"function"==typeof $[Z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Z,complete:_e},void 0===ie.next&&(ie.next=Is),void 0===ie.error&&(ie.error=Is),void 0===ie.complete&&(ie.complete=Is);const pt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch{}}),this.observers.push(ie),pt}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,H)}sendOne(H,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Z(this.observers[H])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Is(){}const Bn=function($,H,Z,_e){let ie;if(_e<H?ie="at least "+H:_e>Z&&(ie=0===Z?"none":"no more than "+Z),ie)throw new Error($+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+ie+".")};function Pn($,H){return`${$} failed: ${H} argument `}function Mi($,H,Z,_e){if((!_e||Z)&&"function"!=typeof Z)throw new Error(Pn($,H)+"must be a valid function.")}function Jo($,H,Z,_e){if((!_e||Z)&&("object"!=typeof Z||null===Z))throw new Error(Pn($,H)+"must be a valid context object.")}const mn=function($){const H=[];let Z=0;for(let _e=0;_e<$.length;_e++){let ie=$.charCodeAt(_e);if(ie>=55296&&ie<=56319){const pt=ie-55296;_e++,te(_e<$.length,"Surrogate pair missing trail surrogate."),ie=65536+(pt<<10)+($.charCodeAt(_e)-56320)}ie<128?H[Z++]=ie:ie<2048?(H[Z++]=ie>>6|192,H[Z++]=63&ie|128):ie<65536?(H[Z++]=ie>>12|224,H[Z++]=ie>>6&63|128,H[Z++]=63&ie|128):(H[Z++]=ie>>18|240,H[Z++]=ie>>12&63|128,H[Z++]=ie>>6&63|128,H[Z++]=63&ie|128)}return H},cs=function($){let H=0;for(let Z=0;Z<$.length;Z++){const _e=$.charCodeAt(Z);_e<128?H++:_e<2048?H+=2:_e>=55296&&_e<=56319?(H+=4,Z++):H+=3}return H};function ht($,H=1e3,Z=2){const _e=H*Math.pow(Z,$),ie=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+ie)}function Wt($){return $&&$._delegate?$._delegate:$}},4179:(wt,xe,V)=>{var o=V(4650);let te=null;function L(){return te}class se{}const re=new o.OlP("DocumentToken");let me=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function de(){return(0,o.LFG)(j)}()},providedIn:"platform"}),n})();const ue=new o.OlP("Location Initialized");let j=(()=>{class n extends me{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){q()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){q()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Q(){return new j((0,o.LFG)(re))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Ye(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Me(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let mt=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(Re)},providedIn:"root"}),n})();const ge=new o.OlP("appBaseHref");let Re=(()=>{class n extends mt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ye(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Xe(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+Xe(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+Xe(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me),o.LFG(ge,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ke=(()=>{class n extends mt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Ye(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+Xe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+Xe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(me),o.LFG(ge,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(e){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function Ge(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Me(Oe(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Xe(i))}normalize(e){return n.stripTrailingSlash(function Te(n,t){return n&&new RegExp(`^${n}([/;?#]|$)`).test(t)?t.substring(n.length):t}(this._basePath,Oe(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Xe(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Xe(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Ye,n.stripTrailingSlash=Me,n.\u0275fac=function(e){return new(e||n)(o.LFG(mt))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ae(){return new je((0,o.LFG)(mt))}()},providedIn:"root"}),n})();function Oe(n){return n.replace(/\/index.html$/,"")}var Ke=(()=>((Ke=Ke||{})[Ke.Format=0]="Format",Ke[Ke.Standalone=1]="Standalone",Ke))(),nt=(()=>((nt=nt||{})[nt.Narrow=0]="Narrow",nt[nt.Abbreviated=1]="Abbreviated",nt[nt.Wide=2]="Wide",nt[nt.Short=3]="Short",nt))(),Ct=(()=>((Ct=Ct||{})[Ct.Short=0]="Short",Ct[Ct.Medium=1]="Medium",Ct[Ct.Long=2]="Long",Ct[Ct.Full=3]="Full",Ct))(),lt=(()=>((lt=lt||{})[lt.Decimal=0]="Decimal",lt[lt.Group=1]="Group",lt[lt.List=2]="List",lt[lt.PercentSign=3]="PercentSign",lt[lt.PlusSign=4]="PlusSign",lt[lt.MinusSign=5]="MinusSign",lt[lt.Exponential=6]="Exponential",lt[lt.SuperscriptingExponent=7]="SuperscriptingExponent",lt[lt.PerMille=8]="PerMille",lt[lt.Infinity=9]="Infinity",lt[lt.NaN=10]="NaN",lt[lt.TimeSeparator=11]="TimeSeparator",lt[lt.CurrencyDecimal=12]="CurrencyDecimal",lt[lt.CurrencyGroup=13]="CurrencyGroup",lt))();function _n(n,t){return Tn((0,o.cg1)(n)[o.wAp.DateFormat],t)}function At(n,t){return Tn((0,o.cg1)(n)[o.wAp.TimeFormat],t)}function dn(n,t){return Tn((0,o.cg1)(n)[o.wAp.DateTimeFormat],t)}function ut(n,t){const e=(0,o.cg1)(n),i=e[o.wAp.NumberSymbols][t];if(typeof i>"u"){if(t===lt.CurrencyDecimal)return e[o.wAp.NumberSymbols][lt.Decimal];if(t===lt.CurrencyGroup)return e[o.wAp.NumberSymbols][lt.Group]}return i}function Ws(n){if(!n[o.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[o.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function mr(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const Vn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gi={},Zs=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Bt=(()=>((Bt=Bt||{})[Bt.Short=0]="Short",Bt[Bt.ShortGMT=1]="ShortGMT",Bt[Bt.Long=2]="Long",Bt[Bt.Extended=3]="Extended",Bt))(),Dt=(()=>((Dt=Dt||{})[Dt.FullYear=0]="FullYear",Dt[Dt.Month=1]="Month",Dt[Dt.Date=2]="Date",Dt[Dt.Hours=3]="Hours",Dt[Dt.Minutes=4]="Minutes",Dt[Dt.Seconds=5]="Seconds",Dt[Dt.FractionalSeconds=6]="FractionalSeconds",Dt[Dt.Day=7]="Day",Dt))(),kt=(()=>((kt=kt||{})[kt.DayPeriods=0]="DayPeriods",kt[kt.Days=1]="Days",kt[kt.Months=2]="Months",kt[kt.Eras=3]="Eras",kt))();function Is(n,t,e,i){let r=function pt(n){if(sn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,c=1]=n.split("-").map(d=>+d);return Bn(r,s-1,c)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(Vn))return function Kt(n){const t=new Date(0);let e=0,i=0;const r=n[8]?t.setUTCFullYear:t.setFullYear,s=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-e,d=Number(n[5]||0)-i,p=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(t,c,d,p,y),t}(i)}const t=new Date(n);if(!sn(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Pn(e,t)||t;let d,c=[];for(;t;){if(d=Zs.exec(t),!d){c.push(t);break}{c=c.concat(d.slice(1));const b=c.pop();if(!b)break;t=b}}let p=r.getTimezoneOffset();i&&(p=Z(i,p),r=function ie(n,t,e){const i=e?-1:1,r=n.getTimezoneOffset();return function _e(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,i*(Z(t,r)-r))}(r,i,!0));let y="";return c.forEach(b=>{const E=function H(n){if($[n])return $[n];let t;switch(n){case"G":case"GG":case"GGG":t=ln(kt.Eras,nt.Abbreviated);break;case"GGGG":t=ln(kt.Eras,nt.Wide);break;case"GGGGG":t=ln(kt.Eras,nt.Narrow);break;case"y":t=mn(Dt.FullYear,1,0,!1,!0);break;case"yy":t=mn(Dt.FullYear,2,0,!0,!0);break;case"yyy":t=mn(Dt.FullYear,3,0,!1,!0);break;case"yyyy":t=mn(Dt.FullYear,4,0,!1,!0);break;case"Y":t=Wt(1);break;case"YY":t=Wt(2,!0);break;case"YYY":t=Wt(3);break;case"YYYY":t=Wt(4);break;case"M":case"L":t=mn(Dt.Month,1,1);break;case"MM":case"LL":t=mn(Dt.Month,2,1);break;case"MMM":t=ln(kt.Months,nt.Abbreviated);break;case"MMMM":t=ln(kt.Months,nt.Wide);break;case"MMMMM":t=ln(kt.Months,nt.Narrow);break;case"LLL":t=ln(kt.Months,nt.Abbreviated,Ke.Standalone);break;case"LLLL":t=ln(kt.Months,nt.Wide,Ke.Standalone);break;case"LLLLL":t=ln(kt.Months,nt.Narrow,Ke.Standalone);break;case"w":t=Lt(1);break;case"ww":t=Lt(2);break;case"W":t=Lt(1,!0);break;case"d":t=mn(Dt.Date,1);break;case"dd":t=mn(Dt.Date,2);break;case"c":case"cc":t=mn(Dt.Day,1);break;case"ccc":t=ln(kt.Days,nt.Abbreviated,Ke.Standalone);break;case"cccc":t=ln(kt.Days,nt.Wide,Ke.Standalone);break;case"ccccc":t=ln(kt.Days,nt.Narrow,Ke.Standalone);break;case"cccccc":t=ln(kt.Days,nt.Short,Ke.Standalone);break;case"E":case"EE":case"EEE":t=ln(kt.Days,nt.Abbreviated);break;case"EEEE":t=ln(kt.Days,nt.Wide);break;case"EEEEE":t=ln(kt.Days,nt.Narrow);break;case"EEEEEE":t=ln(kt.Days,nt.Short);break;case"a":case"aa":case"aaa":t=ln(kt.DayPeriods,nt.Abbreviated);break;case"aaaa":t=ln(kt.DayPeriods,nt.Wide);break;case"aaaaa":t=ln(kt.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":t=ln(kt.DayPeriods,nt.Abbreviated,Ke.Standalone,!0);break;case"bbbb":t=ln(kt.DayPeriods,nt.Wide,Ke.Standalone,!0);break;case"bbbbb":t=ln(kt.DayPeriods,nt.Narrow,Ke.Standalone,!0);break;case"B":case"BB":case"BBB":t=ln(kt.DayPeriods,nt.Abbreviated,Ke.Format,!0);break;case"BBBB":t=ln(kt.DayPeriods,nt.Wide,Ke.Format,!0);break;case"BBBBB":t=ln(kt.DayPeriods,nt.Narrow,Ke.Format,!0);break;case"h":t=mn(Dt.Hours,1,-12);break;case"hh":t=mn(Dt.Hours,2,-12);break;case"H":t=mn(Dt.Hours,1);break;case"HH":t=mn(Dt.Hours,2);break;case"m":t=mn(Dt.Minutes,1);break;case"mm":t=mn(Dt.Minutes,2);break;case"s":t=mn(Dt.Seconds,1);break;case"ss":t=mn(Dt.Seconds,2);break;case"S":t=mn(Dt.FractionalSeconds,1);break;case"SS":t=mn(Dt.FractionalSeconds,2);break;case"SSS":t=mn(Dt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=us(Bt.Short);break;case"ZZZZZ":t=us(Bt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=us(Bt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=us(Bt.Long);break;default:return null}return $[n]=t,t}(b);y+=E?E(r,e,p):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function Bn(n,t,e){const i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function Pn(n,t){const e=function fe(n){return(0,o.cg1)(n)[o.wAp.LocaleId]}(n);if(Gi[e]=Gi[e]||{},Gi[e][t])return Gi[e][t];let i="";switch(t){case"shortDate":i=_n(n,Ct.Short);break;case"mediumDate":i=_n(n,Ct.Medium);break;case"longDate":i=_n(n,Ct.Long);break;case"fullDate":i=_n(n,Ct.Full);break;case"shortTime":i=At(n,Ct.Short);break;case"mediumTime":i=At(n,Ct.Medium);break;case"longTime":i=At(n,Ct.Long);break;case"fullTime":i=At(n,Ct.Full);break;case"short":const r=Pn(n,"shortTime"),s=Pn(n,"shortDate");i=jr(dn(n,Ct.Short),[r,s]);break;case"medium":const c=Pn(n,"mediumTime"),d=Pn(n,"mediumDate");i=jr(dn(n,Ct.Medium),[c,d]);break;case"long":const p=Pn(n,"longTime"),y=Pn(n,"longDate");i=jr(dn(n,Ct.Long),[p,y]);break;case"full":const b=Pn(n,"fullTime"),E=Pn(n,"fullDate");i=jr(dn(n,Ct.Full),[b,E])}return i&&(Gi[e][t]=i),i}function jr(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return null!=t&&i in t?t[i]:e})),n}function Mi(n,t,e="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=e));let c=String(n);for(;c.length<t;)c="0"+c;return i&&(c=c.slice(c.length-t)),s+c}function mn(n,t,e=0,i=!1,r=!1){return function(s,c){let d=function cs(n,t){switch(n){case Dt.FullYear:return t.getFullYear();case Dt.Month:return t.getMonth();case Dt.Date:return t.getDate();case Dt.Hours:return t.getHours();case Dt.Minutes:return t.getMinutes();case Dt.Seconds:return t.getSeconds();case Dt.FractionalSeconds:return t.getMilliseconds();case Dt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((e>0||d>-e)&&(d+=e),n===Dt.Hours)0===d&&-12===e&&(d=12);else if(n===Dt.FractionalSeconds)return function Jo(n,t){return Mi(n,3).substring(0,t)}(d,t);const p=ut(c,lt.MinusSign);return Mi(d,t,p,i,r)}}function ln(n,t,e=Ke.Format,i=!1){return function(r,s){return function zi(n,t,e,i,r,s){switch(e){case kt.Months:return function qe(n,t,e){const i=(0,o.cg1)(n),s=Tn([i[o.wAp.MonthsFormat],i[o.wAp.MonthsStandalone]],t);return Tn(s,e)}(t,r,i)[n.getMonth()];case kt.Days:return function Pe(n,t,e){const i=(0,o.cg1)(n),s=Tn([i[o.wAp.DaysFormat],i[o.wAp.DaysStandalone]],t);return Tn(s,e)}(t,r,i)[n.getDay()];case kt.DayPeriods:const c=n.getHours(),d=n.getMinutes();if(s){const y=function Dr(n){const t=(0,o.cg1)(n);return Ws(t),(t[o.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?mr(i):[mr(i[0]),mr(i[1])])}(t),b=function nr(n,t,e){const i=(0,o.cg1)(n);Ws(i);const s=Tn([i[o.wAp.ExtraData][0],i[o.wAp.ExtraData][1]],t)||[];return Tn(s,e)||[]}(t,r,i),E=y.findIndex(M=>{if(Array.isArray(M)){const[P,F]=M,z=c>=P.hours&&d>=P.minutes,K=c<F.hours||c===F.hours&&d<F.minutes;if(P.hours<F.hours){if(z&&K)return!0}else if(z||K)return!0}else if(M.hours===c&&M.minutes===d)return!0;return!1});if(-1!==E)return b[E]}return function ve(n,t,e){const i=(0,o.cg1)(n),s=Tn([i[o.wAp.DayPeriodsFormat],i[o.wAp.DayPeriodsStandalone]],t);return Tn(s,e)}(t,r,i)[c<12?0:1];case kt.Eras:return function Qe(n,t){return Tn((0,o.cg1)(n)[o.wAp.Eras],t)}(t,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,n,t,e,i)}}function us(n){return function(t,e,i){const r=-1*i,s=ut(e,lt.MinusSign),c=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case Bt.Short:return(r>=0?"+":"")+Mi(c,2,s)+Mi(Math.abs(r%60),2,s);case Bt.ShortGMT:return"GMT"+(r>=0?"+":"")+Mi(c,1,s);case Bt.Long:return"GMT"+(r>=0?"+":"")+Mi(c,2,s)+":"+Mi(Math.abs(r%60),2,s);case Bt.Extended:return 0===i?"Z":(r>=0?"+":"")+Mi(c,2,s)+":"+Mi(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function Rt(n){return Bn(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Lt(n,t=!1){return function(e,i){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,c=e.getDate();r=1+Math.floor((c+s)/7)}else{const s=Rt(e),c=function ht(n){const t=Bn(n,0,1).getDay();return Bn(n,0,1+(t<=4?4:11)-t)}(s.getFullYear()),d=s.getTime()-c.getTime();r=1+Math.round(d/6048e5)}return Mi(r,n,ut(i,lt.MinusSign))}}function Wt(n,t=!1){return function(e,i){return Mi(Rt(e).getFullYear(),n,ut(i,lt.MinusSign),t)}}const $={};function Z(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function sn(n){return n instanceof Date&&!isNaN(n.valueOf())}const xr=/\s+/,ot=[];let vt=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=ot,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(xr):ot}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(xr):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(xr).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ri{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let si=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ri(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Gn(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Gn(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gn(n,t){n.context.$implicit=t.item}let An=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ru("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ru("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Zt{constructor(){this.$implicit=null,this.ngIf=null}}function ru(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let zn=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split("."),c=-1===r.indexOf("-")?void 0:o.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,c):this._renderer.removeStyle(this._ngEl.nativeElement,r,c)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),$n=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,s,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[o.TTD]}),n})();const Kr=new o.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),ou=new o.OlP("DATE_PIPE_DEFAULT_OPTIONS");let sr=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,s){if(null==e||""===e||e!=e)return null;try{return Is(e,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(c){throw function ds(n,t){return new o.vHH(2100,!1)}()}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.soG,16),o.Y36(Kr,24),o.Y36(ou,24))},n.\u0275pipe=o.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),En=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Pl(n){return"server"===n}let sa=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Fl((0,o.LFG)(re),window)}),n})();class Fl{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function bo(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=oa(this.window.history)||oa(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fa extends Js{static makeCurrent(){!function oe(n){te||(te=n)}(new fa)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Cu(){return kr=kr||document.querySelector("base"),kr?kr.getAttribute("href"):null}();return null==e?null:function pa(n){Kl=Kl||document.createElement("a"),Kl.setAttribute("href",n);const t=Kl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){kr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function ji(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Kl,kr=null;const ga=new o.OlP("TRANSITION_ID"),Tu=[{provide:o.ip1,useFactory:function Rr(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=L(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[ga,re,o.zs3],multi:!0}];let Io=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=new o.OlP("EventManagerPlugins");let Zl=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xa),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class el{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=L().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Eu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),In=(()=>{class n extends Eu{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(tl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(tl))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function tl(n){L().remove(n)}const So={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ms=/%COMP%/g;function Do(n,t){return t.flat(100).map(e=>e.replace(Ms,n))}function xo(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let eo=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ma(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new _a(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case o.ifc.ShadowDom:return new Ao(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Do(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Zl),o.LFG(In),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ma{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(So[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Xl(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Xl(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=So[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=So[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xo(i)):this.eventManager.addEventListener(t,e,xo(i))}}function Xl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _a extends ma{constructor(t,e,i,r){super(t),this.component=i;const s=Do(r+"-"+i.id,i.styles);e.addStyles(s),this.contentAttr=function Jl(n){return"_ngcontent-%COMP%".replace(Ms,n)}(r+"-"+i.id),this.hostAttr=function Xs(n){return"_nghost-%COMP%".replace(Ms,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Ao extends ma{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Do(r.id,r.styles);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ec=(()=>{class n extends el{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const il=["alt","control","meta","shift"],Du={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ih={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mo=(()=>{class n extends el{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),il.forEach(y=>{const b=i.indexOf(y);b>-1&&(i.splice(b,1),c+=y+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=Du[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),il.forEach(c=>{c!==r&&(0,ih[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Qr=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function Zr(){fa.makeCurrent()},multi:!0},{provide:re,useFactory:function Au(){return(0,o.RDi)(document),document},deps:[]}]),Hf=new o.OlP(""),Mu=[{provide:o.rWj,useClass:class nh{addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?L().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],nc=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function xu(){return new o.qLn},deps:[]},{provide:Xa,useClass:ec,multi:!0,deps:[re,o.R0b,o.Lbi]},{provide:Xa,useClass:Mo,multi:!0,deps:[re]},{provide:eo,useClass:eo,deps:[Zl,In,o.AFp]},{provide:o.FYo,useExisting:eo},{provide:Eu,useExisting:In},{provide:In,useClass:In,deps:[re]},{provide:Zl,useClass:Zl,deps:[Xa,o.R0b]},{provide:class Wd{},useClass:Io,deps:[]},[]];let ku=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:ga,useExisting:o.AFp},Tu]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Hf,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...nc,...Mu],imports:[En,o.hGG]}),n})(),va=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function sl(){return new va((0,o.LFG)(re))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Kn=V(7579);class ze{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,c,d,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((c=t.length)!=e.length)return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var p=t instanceof Date,y=e instanceof Date;if(p!=y)return!1;if(p&&y)return t.getTime()==e.getTime();var b=t instanceof RegExp,E=e instanceof RegExp;if(b!=E)return!1;if(b&&E)return t.toString()==e.toString();var M=Object.keys(t);if((c=M.length)!==Object.keys(e).length)return!1;for(s=c;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,M[s]))return!1;for(s=c;0!=s--;)if(!this.equalsByValue(t[d=M[s]],e[d]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,c=i.length;s<c;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let c=0;c<i.length;c++)if(this.findIndexInList(i[c],r)>e){i.splice(c,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let s=-1;const c=this.isEmpty(t),d=this.isEmpty(e);return s=c&&d?0:c?r:d?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,s}static sort(t,e,i=1,r,s=1){return(1===s?i:s)*ze.compare(t,e,r,i)}static merge(t,e){if(null!=t||null!=e)return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}}var ba=0;function uc(){return"pr_id_"+ ++ba}var _i=function Kf(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,c,d)=>{c&&(c.style.zIndex=String(((s,c)=>{let d=n.length>0?n[n.length-1]:{key:s,value:c},p=d.value+(d.key===s?0:c)+1;return n.push({key:s,value:p}),p})(s,d)))},clear:s=>{s&&((s=>{n=n.filter(c=>c.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const dc=["*"];let Zn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Ca=(()=>{class n{}return n.AND="and",n.OR="or",n})(),al=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=ze.removeAccents(i.toString()).toLocaleLowerCase(r);return ze.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=ze.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==ze.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=ze.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===ze.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=ze.removeAccents(i.toString()).toLocaleLowerCase(r),c=ze.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==c.indexOf(s,c.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():ze.removeAccents(e.toString()).toLocaleLowerCase(r)==ze.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():ze.removeAccents(e.toString()).toLocaleLowerCase(r)==ze.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(ze.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,c){let d=[];if(e)for(let p of e)for(let y of i){let b=ze.resolveFieldData(p,y);if(this.filters[s](b,r,c)){d.push(p);break}}return d}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S=(()=>{class n{constructor(){this.clickSource=new Kn.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[Zn.STARTS_WITH,Zn.CONTAINS,Zn.NOT_CONTAINS,Zn.ENDS_WITH,Zn.EQUALS,Zn.NOT_EQUALS],numeric:[Zn.EQUALS,Zn.NOT_EQUALS,Zn.LESS_THAN,Zn.LESS_THAN_OR_EQUAL_TO,Zn.GREATER_THAN,Zn.GREATER_THAN_OR_EQUAL_TO],date:[Zn.DATE_IS,Zn.DATE_IS_NOT,Zn.DATE_BEFORE,Zn.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Kn.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:dc,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:dc,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),ee=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),we=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})(),et=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})();var Ee=V(4004);class jt{}class Pt{constructor(){this.shipFrom=[{name:"Apparel FZCO",addressLine1:"Zebel Ali,",addressLine2:"South Zone",location:"FZCO",countryName:"UAE",vatNo:"00015498",contactPerson:"Nabeel",contactNo:"+971123456"},{name:"Apparel LLC",addressLine1:"Dubai,",addressLine2:"Dubai",location:"DIP",countryName:"UAE",vatNo:"7895465",contactPerson:"Vinod",contactNo:"+97456789"},{name:"Apparel International LLC",addressLine1:"Dubai,",addressLine2:"Dubai",location:"DIP",countryName:"Oman",vatNo:"7895465",contactPerson:"Abhijit",contactNo:"+97456789"},{name:"R&B Fashion LLC",addressLine1:"Dubai,",addressLine2:"Dubai",location:"DIP",countryName:"Oman",vatNo:"7895465",contactPerson:"Alagation",contactNo:"+97456789"}]}getShipFrom(){return this.shipFrom}}class Cr{static anyToDate(t){return new Date(String(t))}}var Xn=V(4986),Ki=V(9751),Rs=V(7669),an=V(8996);function ct(...n){const t=(0,Rs.yG)(n);return(0,an.D)(n,t)}var Jr=V(6451),no=V(3099),hc=V(8421),Oi=V(4482),ai=V(5403);function ei(n,t){return(0,Oi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,ai.x)(i,p=>{r?.unsubscribe();let y=0;const b=s++;(0,hc.Xf)(n(p,b)).subscribe(r=(0,ai.x)(i,E=>i.next(t?t(p,E,b,y++):E),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function mm(n,t,e,i,r){return(s,c)=>{let d=e,p=t,y=0;s.subscribe((0,ai.x)(c,b=>{const E=y++;p=d?n(p,b,E):(d=!0,b),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function fc(n,t){return(0,Oi.e)(mm(n,t,arguments.length>=2,!0))}var ll=V(4671);function _m(n,t=ll.y){return n=n??pc,(0,Oi.e)((e,i)=>{let r,s=!0;e.subscribe((0,ai.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function pc(n,t){return n===t}var GC=V(5032),yn=V(2122),Pi=V(2011),ym=(V(407),V(3942)),io=V(4859),pe=V(5861),ur=V(9681),N=V(2090),gs=V(1877);const Qf="@firebase/database";let Xr="";function vm(n){Xr=n}class mv{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,N.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,N.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class _v{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,N.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Xf=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mv(t)}}catch{}return new _v},Os=Xf("localStorage"),ep=Xf("sessionStorage"),Ta=new gs.Yd("@firebase/database"),wm=function(){let n=1;return function(){return n++}}(),ah=function(n){const t=(0,N.dS)(n),e=new N.gQ;e.update(t);const i=e.digest();return N.US.encodeByteArray(i)},Vu=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Vu.apply(null,i):t+="object"==typeof i?(0,N.Wl)(i):i,t+=" "}return t};let Ro=null,Tr=!0;const Bu=function(n,t){(0,N.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ta.logLevel=gs.in.VERBOSE,Ro=Ta.log.bind(Ta),t&&ep.set("logging_enabled",!0)):"function"==typeof n?Ro=n:(Ro=null,ep.remove("logging_enabled"))},yi=function(...n){if(!0===Tr&&(Tr=!1,null===Ro&&!0===ep.get("logging_enabled")&&Bu(!0)),Ro){const t=Vu.apply(null,n);Ro(t)}},cl=function(n){return function(...t){yi(n,...t)}},Ni=function(...n){const t="FIREBASE INTERNAL ERROR: "+Vu(...n);Ta.error(t)},Or=function(...n){const t=`FIREBASE FATAL ERROR: ${Vu(...n)}`;throw Ta.error(t),new Error(t)},Zi=function(...n){const t="FIREBASE WARNING: "+Vu(...n);Ta.warn(t)},Uu=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ul="[MIN_NAME]",dr="[MAX_NAME]",dl=function(n,t){if(n===t)return 0;if(n===ul||t===dr)return-1;if(t===ul||n===dr)return 1;{const e=pl(n),i=pl(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},Tm=function(n,t){return n===t?0:n<t?-1:1},hl=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Wl)(t))},tp=function(n){if("object"!=typeof n||null===n)return(0,N.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,N.Wl)(t[i]),e+=":",e+=tp(n[t[i]]);return e+="}",e},gc=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function vi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Em=function(n){(0,N.hu)(!Uu(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const b=y.join("");let E="";for(p=0;p<64;p+=8){let M=parseInt(b.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),E+=M}return E.toLowerCase()},Hu=new RegExp("^-?(0*)\\d{1,10}$"),pl=function(n){if(Hu.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Ea=function(n){try{n()}catch(t){setTimeout(()=>{throw Zi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},mc=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class Gu{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wv{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(yi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(t)}}let zu=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ch=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Am="websocket",rp="long_polling";class hh{constructor(t,e,i,r,s=!1,c="",d=!1,p=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Os.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Os.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ml(n,t,e){let i;if((0,N.hu)("string"==typeof t,"typeof type must == string"),(0,N.hu)("object"==typeof e,"typeof params must == object"),t===Am)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==rp)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function gl(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return vi(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class Mm{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,N.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,N.p$)(this.counters_)}}const fh={},km={};function vc(n){const t=n.toString();return fh[t]||(fh[t]=new Mm),fh[t]}class Rm{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ea(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ro{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cl(t),this.stats_=vc(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),ml(e,rp,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Rm(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wc((...s)=>{const[c,d,p,y,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ch.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ro.forceAllow_=!0}static forceDisallow(){ro.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!ro.forceAllow_&&(ro.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,N.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,N.h$)(e),r=gc(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,N.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class wc{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=wm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=wc.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){yi("frame writing exception"),d.stack&&yi(d.stack),yi(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||yi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,N.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{yi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Ku=null;typeof MozWebSocket<"u"?Ku=MozWebSocket:typeof WebSocket<"u"&&(Ku=WebSocket);let Ii=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cl(this.connId),this.stats_=vc(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,N.Yr)()&&typeof location<"u"&&location.hostname&&ch.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),ml(e,Am,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Os.set("previous_websocket_failure",!0);try{let r;if((0,N.Yr)()){r={headers:{"User-Agent":`Firebase/5/${Xr}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new Ku(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Ku&&!n.forceDisallow_}static previouslyFailed(){return Os.isInMemoryStorage||!0===Os.get("previous_websocket_failure")}markConnectionHealthy(){Os.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,N.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=gc(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cp=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ro,Ii]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Ii&&Ii.isAvailable();let r=i&&!Ii.previouslyFailed();if(e.webSocketOnly&&(i||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ii];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _{constructor(t,e,i,r,s,c,d,p,y,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cl("c:"+this.id+":"),this.transportManager_=new cp(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=mc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=hl("t",t),i=hl("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=hl("t",t),i=hl("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=hl("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Ni("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ni("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),mc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class C{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class A{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,N.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,N.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class O extends A{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new O}getInitialEvent(t){return(0,N.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ie{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Ve(){return new Ie("")}function Ze(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _t(n){return n.pieces_.length-n.pieceNum_}function Gt(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Ie(n.pieces_,t)}function es(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Cc(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Tc(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Ie(t,0)}function fn(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Ie)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Ie(e,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function Fi(n,t){const e=Ze(n),i=Ze(t);if(null===e)return t;if(e===i)return Fi(Gt(n),Gt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function fp(n,t){const e=Cc(n,0),i=Cc(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=dl(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function Qu(n,t){if(_t(n)!==_t(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ts(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(_t(n)>_t(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Tv{constructor(t,e){this.errorPrefix_=e,this.parts_=Cc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);yh(this)}}function yh(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vh(n))}function vh(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class jC extends A{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new jC}getInitialEvent(t){return(0,N.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const wh=1e3;let li,Xu=(()=>{class n extends C{constructor(e,i,r,s,c,d,p,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=cl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jC.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&O.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,N.Wl)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new N.BH,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,b=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,N.r3)(e,"w")){const r=(0,N.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,N.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,N.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,N.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,N.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Ni("Unrecognized action received from server: "+(0,N.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=wh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=wh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,pe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,y=null;const b=function(){y?y.close():(p=!0,s())};e.realtime_={close:b,sendRequest:function(P){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,F]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);p?yi("getToken() completed but was canceled"):(yi("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=F&&F.token,y=new _(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,z=>{Zi(z+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&Zi(P),b())}}})()}interrupt(e){yi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=wh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>tp(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Ie(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){yi("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){yi("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+Xr.replace(/\./g,"-")]=1,(0,N.uI)()?e["framework.cordova"]=1:(0,N.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=O.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new nn(t,e)}}class Bm{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new nn(ul,t),r=new nn(ul,e);return 0!==this.compare(i,r)}minPost(){return nn.MIN}}class KC extends Bm{static get __EMPTY_NODE(){return li}static set __EMPTY_NODE(t){li=t}compare(t,e){return dl(t.name,e.name)}isDefinedOn(t){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return nn.MIN}maxPost(){return new nn(dr,li)}makePost(t,e){return(0,N.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new nn(t,li)}toString(){return".key"}}const Ia=new KC;class gp{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Um,so=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??ms.EMPTY_NODE,this.right=c??ms.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ms.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return ms.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ms{constructor(t,e=ms.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new ms(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,so.BLACK,null,null))}remove(t){return new ms(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,so.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new gp(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new gp(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new gp(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new gp(this.root_,null,this.comparator_,!0,t)}}function xx(n,t){return dl(n.name,t.name)}function Ev(n,t){return dl(n,t)}ms.EMPTY_NODE=new class Dx{copy(t,e,i,r,s){return this}insert(t,e,i){return new so(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ax=function(n){return"number"==typeof n?"number:"+Em(n):"string:"+n},bh=function(n){if(n.isLeafNode()){const t=n.val();(0,N.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,N.r3)(t,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===Um||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===Um||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hm,Iv,Sv,ed=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),bh(this.priorityNode_)}static set __childrenNodeConstructor(e){Hm=e}static get __childrenNodeConstructor(){return Hm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return qt(e)?this:".priority"===Ze(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Ze(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===_t(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gt(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ax(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Em(this.value_):this.value_,this.lazyHash_=ah(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(s>=0,"Unknown leaf type: "+i),(0,N.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class ZC extends Bm{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?dl(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(dr,new ed("[PRIORITY-POST]",Sv))}makePost(t,e){const i=Iv(t);return new nn(e,new ed("[PRIORITY-POST]",i))}toString(){return".priority"}},Dv=Math.log(2);class NP{constructor(t){this.count=parseInt(Math.log(t+1)/Dv,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ch=function(n,t,e,i){n.sort(t);const r=function(p,y){const b=y-p;let E,M;if(0===b)return null;if(1===b)return E=n[p],M=e?e(E):E,new so(M,E.node,so.BLACK,null,null);{const P=parseInt(b/2,10)+p,F=r(p,P),z=r(P+1,y);return E=n[P],M=e?e(E):E,new so(M,E.node,so.BLACK,F,z)}},d=function(p){let y=null,b=null,E=n.length;const M=function(F,z){const K=E-F,De=E;E-=F;const Be=r(K+1,De),Le=n[K],Ue=e?e(Le):Le;P(new so(Ue,Le.node,z,null,Be))},P=function(F){y?(y.left=F,y=F):(b=F,y=F)};for(let F=0;F<p.count;++F){const z=p.nextBitIsOne(),K=Math.pow(2,p.count-(F+1));z?M(K,so.BLACK):(M(K,so.BLACK),M(K,so.RED))}return b}(new NP(n.length));return new ms(i||t,d)};let xv;const Ec={};class Sa{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,N.hu)(Ec&&Nn,"ChildrenNode.ts has not been loaded"),xv=xv||new Sa({".priority":Ec},{".priority":Nn}),xv}get(t){const e=(0,N.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ms?e:null}hasIndex(t){return(0,N.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,N.hu)(t!==Ia,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(nn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?Ch(i,t.getCompare()):Ec;const p=t.toString(),y=Object.assign({},this.indexSet_);y[p]=t;const b=Object.assign({},this.indexes_);return b[p]=d,new Sa(b,y)}addToIndexes(t,e){const i=(0,N.UI)(this.indexes_,(r,s)=>{const c=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(c,"Missing index implementation for "+s),r===Ec){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(nn.Wrap);let y=p.getNext();for(;y;)y.name!==t.name&&d.push(y),y=p.getNext();return d.push(t),Ch(d,c.getCompare())}return Ec}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new nn(t.name,d))),p.insert(t,t.node)}});return new Sa(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,N.UI)(this.indexes_,r=>{if(r===Ec)return r;{const s=e.get(t.name);return s?r.remove(new nn(t.name,s)):r}});return new Sa(i,this.indexSet_)}}let Th,Ut=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bh(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Th||(Th=new n(new ms(Ev),null,Sa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Th}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Th:i}}getChild(e){const i=Ze(e);return null===i?this:this.getImmediateChild(i).getChild(Gt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new nn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Th:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=Ze(e);if(null===r)return i;{(0,N.hu)(".priority"!==Ze(e)||1===_t(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Gt(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Nn,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ax(this.getPriority().val())+":"),this.forEachChild(Nn,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":ah(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new nn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new nn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new nn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,nn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,nn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===td?-1:0}withIndex(e){if(e===Ia||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Ia||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Nn),s=i.getIterator(Nn);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Ia?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const td=new class kx extends Ut{constructor(){super(new ms(Ev),Ut.EMPTY_NODE,Sa.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ut.EMPTY_NODE}isEmpty(){return!1}};function ci(n,t=null){if(null===n)return Ut.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,N.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ed(n,ci(t));if(n instanceof Array){let e=Ut.EMPTY_NODE;return vi(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const s=ci(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(ci(t))}{const e=[];let i=!1;if(vi(n,(c,d)=>{if("."!==c.substring(0,1)){const p=ci(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new nn(c,p)))}}),0===e.length)return Ut.EMPTY_NODE;const s=Ch(e,xx,c=>c.name,Ev);if(i){const c=Ch(e,Nn.getCompare());return new Ut(s,ci(t),new Sa({".priority":c},{".priority":Nn}))}return new Ut(s,ci(t),Sa.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(ul,Ut.EMPTY_NODE)},MAX:{value:new nn(dr,td)}}),KC.__EMPTY_NODE=Ut.EMPTY_NODE,ed.__childrenNodeConstructor=Ut,function OP(n){Um=n}(td),function Mx(n){Sv=n}(td),function PP(n){Iv=n}(ci);class mp extends Bm{constructor(t){super(),this.indexPath_=t,(0,N.hu)(!qt(t)&&".priority"!==Ze(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?dl(t.name,e.name):s}makePost(t,e){const i=ci(t),r=Ut.EMPTY_NODE.updateChild(this.indexPath_,i);return new nn(e,r)}maxPost(){const t=Ut.EMPTY_NODE.updateChild(this.indexPath_,td);return new nn(dr,t)}toString(){return Cc(this.indexPath_,0).join("/")}}const bl=new class zm extends Bm{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?dl(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(t,e){const i=ci(t);return new nn(e,i)}toString(){return".value"}};function Av(n){return{type:"value",snapshotNode:n}}function Ic(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function _p(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function yp(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Sc{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,N.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(_p(e,d)):(0,N.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Ic(e,i)):c.trackChildChange(yp(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Nn,(r,s)=>{e.hasChild(r)||i.trackChildChange(_p(r,s))}),e.isLeafNode()||e.forEachChild(Nn,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(yp(r,s,c))}else i.trackChildChange(Ic(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Ut.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vp{constructor(t){this.indexedFilter_=new Sc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=vp.getStartPost_(t),this.endPost_=vp.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,c){return this.matches(new nn(e,i))||(i=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Ut.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Ut.EMPTY_NODE);const s=this;return e.forEachChild(Nn,(c,d)=>{s.matches(new nn(c,d))||(r=r.updateImmediateChild(c,Ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Rx{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new vp(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new nn(e,i))||(i=Ut.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Ut.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),c++}}}else{let s;r=e.withIndex(this.index_),r=r.updatePriority(Ut.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let c=0;for(;s.hasNext();){const d=s.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:r=r.updateImmediateChild(d.name,Ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const E=this.index_.getCompare();c=(M,P)=>E(P,M)}else c=this.index_.getCompare();const d=t;(0,N.hu)(d.numChildren()===this.limit_,"");const p=new nn(e,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(d.hasChild(e)){const E=d.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===e||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const P=null==M?1:c(M,p);if(b&&!i.isEmpty()&&P>=0)return s?.trackChildChange(yp(e,i,E)),d.updateImmediateChild(e,i);{s?.trackChildChange(_p(e,E));const z=d.updateImmediateChild(e,Ut.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(Ic(M.name,M.node)),z.updateImmediateChild(M.name,M.node)):z}}return i.isEmpty()?t:b&&c(y,p)>=0?(null!=s&&(s.trackChildChange(_p(y.name,y.node)),s.trackChildChange(Ic(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(y.name,Ut.EMPTY_NODE)):t}}class $m{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const t=new $m;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function kv(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function XC(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function Dc(n,t){const e=n.copy();return e.index_=t,e}function eT(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Nn?e="$priority":n.index_===bl?e="$value":n.index_===Ia?e="$key":((0,N.hu)(n.index_ instanceof mp,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,N.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,N.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,N.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,N.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,N.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function nd(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Nn&&(t.i=n.index_.toString()),t}class xc extends C{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=cl("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,N.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=xc.getListenId_(t,i),d={};this.listens_[c]=d;const p=eT(t._queryParams);this.restRequest_(s+".json",p,(y,b)=>{let E=b;if(404===y&&(E=null,y=null),null===y&&this.onDataUpdate_(s,E,!1,i),(0,N.DV)(this.listens_,c)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(t,e){const i=xc.getListenId_(t,e);delete this.listens_[i]}get(t){const e=eT(t._queryParams),i=t._path.toString(),r=new N.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,N.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,N.cI)(d.responseText)}catch{Zi("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Zi("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class Nx{constructor(){this.rootNode_=Ut.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function wp(){return{value:null,children:new Map}}function Eh(n,t,e){if(qt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Ze(t);n.children.has(i)||n.children.set(i,wp()),Eh(n.children.get(i),t=Gt(t),e)}}function Rv(n,t){if(qt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Nn,(i,r)=>{Eh(n,new Ie(i),r)}),Rv(n,t)}}if(n.children.size>0){const e=Ze(t);return t=Gt(t),n.children.has(e)&&Rv(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Ov(n,t,e){null!==n.value?e(t,n.value):function tT(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{Ov(r,new Ie(t.toString()+"/"+i),e)})}class nT{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&vi(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class Nv{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new nT(t);const i=1e4+2e4*Math.random();mc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;vi(t,(r,s)=>{s>0&&(0,N.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),mc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pr=(()=>{return(n=Pr||(Pr={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Pr;var n})();function Vv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qm{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Pr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ie(t));return new qm(Ve(),e,this.revert)}}return(0,N.hu)(Ze(this.path)===t,"operationForChild called for unrelated child."),new qm(Gt(this.path),this.affectedTree,this.revert)}}class bp{constructor(t,e){this.source=t,this.path=e,this.type=Pr.LISTEN_COMPLETE}operationForChild(t){return qt(this.path)?new bp(this.source,Ve()):new bp(this.source,Gt(this.path))}}class id{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Pr.OVERWRITE}operationForChild(t){return qt(this.path)?new id(this.source,Ve(),this.snap.getImmediateChild(t)):new id(this.source,Gt(this.path),this.snap)}}class Ih{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Pr.MERGE}operationForChild(t){if(qt(this.path)){const e=this.children.subtree(new Ie(t));return e.isEmpty()?null:e.value?new id(this.source,Ve(),e.value):new Ih(this.source,Ve(),e)}return(0,N.hu)(Ze(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ih(this.source,Gt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ps{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(qt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Ze(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Cl{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Cp(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function LP(n,t,e){if(null==t.childName||null==e.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new nn(t.childName,t.snapshotNode),r=new nn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function FP(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&t.push(y.createEvent(p,n.query_))})})}function Tp(n,t){return{eventCache:n,serverCache:t}}function Wm(n,t,e,i){return Tp(new Ps(t,e,i),n.serverCache)}function Bv(n,t,e,i){return Tp(n.eventCache,new Ps(t,e,i))}function Ep(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function rd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Km;class jn{constructor(t,e=(()=>(Km||(Km=new ms(Tm)),Km))()){this.value=t,this.children=e}static fromObject(t){let e=new jn(null);return vi(t,(i,r)=>{e=e.set(new Ie(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Ve(),value:this.value};if(qt(t))return null;{const i=Ze(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Gt(t),e);return null!=s?{path:fn(new Ie(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(qt(t))return this;{const e=Ze(t),i=this.children.get(e);return null!==i?i.subtree(Gt(t)):new jn(null)}}set(t,e){if(qt(t))return new jn(e,this.children);{const i=Ze(t),s=(this.children.get(i)||new jn(null)).set(Gt(t),e),c=this.children.insert(i,s);return new jn(this.value,c)}}remove(t){if(qt(t))return this.children.isEmpty()?new jn(null):new jn(null,this.children);{const e=Ze(t),i=this.children.get(e);if(i){const r=i.remove(Gt(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new jn(null):new jn(this.value,s)}return this}}get(t){if(qt(t))return this.value;{const e=Ze(t),i=this.children.get(e);return i?i.get(Gt(t)):null}}setTree(t,e){if(qt(t))return e;{const i=Ze(t),s=(this.children.get(i)||new jn(null)).setTree(Gt(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new jn(this.value,c)}}fold(t){return this.fold_(Ve(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(fn(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ve(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(qt(t))return null;{const s=Ze(t),c=this.children.get(s);return c?c.findOnPath_(Gt(t),fn(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ve(),e)}foreachOnPath_(t,e,i){if(qt(t))return this;{this.value&&i(e,this.value);const r=Ze(t),s=this.children.get(r);return s?s.foreachOnPath_(Gt(t),fn(e,r),i):new jn(null)}}foreach(t){this.foreach_(Ve(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(fn(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Si{constructor(t){this.writeTree_=t}static empty(){return new Si(new jn(null))}}function Ip(n,t,e){if(qt(t))return new Si(new jn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=Fi(r,t);return s=s.updateChild(c,e),new Si(n.writeTree_.set(r,s))}{const r=new jn(e),s=n.writeTree_.setTree(t,r);return new Si(s)}}}function Zm(n,t,e){let i=n;return vi(e,(r,s)=>{i=Ip(i,fn(t,r),s)}),i}function iT(n,t){if(qt(t))return Si.empty();{const e=n.writeTree_.setTree(t,new jn(null));return new Si(e)}}function Uv(n,t){return null!=sd(n,t)}function sd(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Fi(e.path,t)):null}function rT(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nn,(i,r)=>{t.push(new nn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new nn(i,r.value))}),t}function Tl(n,t){if(qt(t))return n;{const e=sd(n,t);return new Si(null!=e?new jn(e):n.writeTree_.subtree(t))}}function Hv(n){return n.writeTree_.isEmpty()}function Sh(n,t){return sT(Ve(),n.writeTree_,t)}function sT(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=sT(fn(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(fn(n,".priority"),i)),e}}function zt(n,t){return $v(t,n)}function Ux(n,t){if(n.snap)return ts(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&ts(fn(n.path,e),t))return!0;return!1}function Hx(n){return n.visible}function Gv(n,t,e){let i=Si.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)ts(e,c)?(d=Fi(e,c),i=Ip(i,d,s.snap)):ts(c,e)&&(d=Fi(c,e),i=Ip(i,Ve(),s.snap.getChild(d)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(ts(e,c))d=Fi(e,c),i=Zm(i,d,s.children);else if(ts(c,e))if(d=Fi(c,e),qt(d))i=Zm(i,Ve(),s.children);else{const p=(0,N.DV)(s.children,Ze(d));if(p){const y=p.getChild(Gt(d));i=Ip(i,Ve(),y)}}}}}return i}function uT(n,t,e,i,r){if(i||r){const s=Tl(n.visibleWrites,t);return!r&&Hv(s)?e:r||null!=e||Uv(s,Ve())?Sh(Gv(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(ts(y.path,t)||ts(t,y.path))},t),e||Ut.EMPTY_NODE):null}{const s=sd(n.visibleWrites,t);if(null!=s)return s;{const c=Tl(n.visibleWrites,t);return Hv(c)?e:null!=e||Uv(c,Ve())?Sh(c,e||Ut.EMPTY_NODE):null}}}function Dh(n,t,e,i){return uT(n.writeTree,n.treePath,t,e,i)}function Sp(n,t){return function Gx(n,t,e){let i=Ut.EMPTY_NODE;const r=sd(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Nn,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Tl(n.visibleWrites,t);return e.forEachChild(Nn,(c,d)=>{const p=Sh(Tl(s,new Ie(c)),d);i=i.updateImmediateChild(c,p)}),rT(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return rT(Tl(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function fT(n,t,e,i){return function VP(n,t,e,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=fn(t,e);if(Uv(n.visibleWrites,s))return null;{const c=Tl(n.visibleWrites,s);return Hv(c)?r.getChild(e):Sh(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function zv(n,t){return function hT(n,t){return sd(n.visibleWrites,t)}(n.writeTree,fn(n.treePath,t))}function pT(n,t,e){return function dT(n,t,e,i){const r=fn(t,e),s=sd(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Sh(Tl(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function gT(n,t){return $v(fn(n.treePath,t),n.writeTree)}function $v(n,t){return{treePath:n,writeTree:t}}class UP{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,N.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,yp(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,_p(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Ic(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,yp(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const ad=new class $x{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class jv{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Ps(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pT(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rd(this.viewCache_),s=function BP(n,t,e,i,r,s){return function od(n,t,e,i,r,s,c){let d;const p=Tl(n.visibleWrites,t),y=sd(p,Ve());if(null!=y)d=y;else{if(null==e)return[];d=Sh(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],E=c.getCompare(),M=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let P=M.getNext();for(;P&&b.length<r;)0!==E(P,i)&&b.push(P),P=M.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function yT(n,t,e,i,r,s){const c=t.eventCache;if(null!=zv(i,e))return t;{let d,p;if(qt(e))if((0,N.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=rd(t),E=Sp(i,y instanceof Ut?y:Ut.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,s)}else{const y=Dh(i,rd(t));d=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=Ze(e);if(".priority"===y){(0,N.hu)(1===_t(e),"Can't have a priority with additional path components");const b=c.getNode();p=t.serverCache.getNode();const E=fT(i,e,b,p);d=null!=E?n.filter.updatePriority(b,E):c.getNode()}else{const b=Gt(e);let E;if(c.isCompleteForChild(y)){p=t.serverCache.getNode();const M=fT(i,e,c.getNode(),p);E=null!=M?c.getNode().getImmediateChild(y).updateChild(b,M):c.getNode().getImmediateChild(y)}else E=pT(i,y,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),y,E,b,r,s):c.getNode()}}return Wm(t,d,c.isFullyInitialized()||qt(e),n.filter.filtersNodes())}}function Qm(n,t,e,i,r,s,c,d){const p=t.serverCache;let y;const b=c?n.filter:n.filter.getIndexedFilter();if(qt(e))y=b.updateFullNode(p.getNode(),i,null);else if(b.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);y=b.updateFullNode(p.getNode(),P,null)}else{const P=Ze(e);if(!p.isCompleteForPath(e)&&_t(e)>1)return t;const F=Gt(e),K=p.getNode().getImmediateChild(P).updateChild(F,i);y=".priority"===P?b.updatePriority(p.getNode(),K):b.updateChild(p.getNode(),P,K,F,ad,null)}const E=Bv(t,y,p.isFullyInitialized()||qt(e),b.filtersNodes());return yT(n,E,e,r,new jv(r,E,s),d)}function qv(n,t,e,i,r,s,c){const d=t.eventCache;let p,y;const b=new jv(r,t,s);if(qt(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=Wm(t,y,!0,n.filter.filtersNodes());else{const E=Ze(e);if(".priority"===E)y=n.filter.updatePriority(t.eventCache.getNode(),i),p=Wm(t,y,d.isFullyInitialized(),d.isFiltered());else{const M=Gt(e),P=d.getNode().getImmediateChild(E);let F;if(qt(M))F=i;else{const z=b.getCompleteChild(E);F=null!=z?".priority"===es(M)&&z.getChild(Tc(M)).isEmpty()?z:z.updateChild(M,i):Ut.EMPTY_NODE}p=P.equals(F)?t:Wm(t,n.filter.updateChild(d.getNode(),E,F,M,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function vT(n,t){return n.eventCache.isCompleteForChild(t)}function Wv(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Kv(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,p=t;y=qt(e)?i:new jn(null).setTree(e,i);const b=t.serverCache.getNode();return y.children.inorderTraversal((E,M)=>{if(b.hasChild(E)){const F=Wv(0,t.serverCache.getNode().getImmediateChild(E),M);p=Qm(n,p,new Ie(E),F,r,s,c,d)}}),y.children.inorderTraversal((E,M)=>{const P=!t.serverCache.isCompleteForChild(E)&&null===M.value;if(!b.hasChild(E)&&!P){const z=Wv(0,t.serverCache.getNode().getImmediateChild(E),M);p=Qm(n,p,new Ie(E),z,r,s,c,d)}}),p}class HP{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Sc(i.getIndex()),s=function Mv(n){return n.loadsAllData()?new Sc(n.getIndex()):n.hasLimit()?new Rx(n):new vp(n)}(i);this.processor_=function mT(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(Ut.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Ut.EMPTY_NODE,d.getNode(),null),b=new Ps(p,c.isFullyInitialized(),r.filtersNodes()),E=new Ps(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=Tp(E,b),this.eventGenerator_=new Cl(this.query_)}get query(){return this.query_}}function GP(n,t){const e=rd(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!qt(t)&&!e.getImmediateChild(Ze(t)).isEmpty())?e.getChild(t):null}function ld(n){return 0===n.eventRegistrations_.length}function TT(n,t,e){const i=[];if(e){(0,N.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function Qv(n,t,e,i){t.type===Pr.MERGE&&null!==t.source.queryId&&((0,N.hu)(rd(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(Ep(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function jx(n,t,e,i,r){const s=new UP;let c,d;if(e.type===Pr.OVERWRITE){const y=e;y.source.fromUser?c=qv(n,t,y.path,y.snap,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered()&&!qt(y.path),c=Qm(n,t,y.path,y.snap,i,r,d,s))}else if(e.type===Pr.MERGE){const y=e;y.source.fromUser?c=function qx(n,t,e,i,r,s,c){let d=t;return i.foreach((p,y)=>{const b=fn(e,p);vT(t,Ze(b))&&(d=qv(n,d,b,y,r,s,c))}),i.foreach((p,y)=>{const b=fn(e,p);vT(t,Ze(b))||(d=qv(n,d,b,y,r,s,c))}),d}(n,t,y.path,y.children,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered(),c=Kv(n,t,y.path,y.children,i,r,d,s))}else if(e.type===Pr.ACK_USER_WRITE){const y=e;c=y.revert?function Zv(n,t,e,i,r,s){let c;if(null!=zv(i,e))return t;{const d=new jv(i,t,r),p=t.eventCache.getNode();let y;if(qt(e)||".priority"===Ze(e)){let b;if(t.serverCache.isFullyInitialized())b=Dh(i,rd(t));else{const E=t.serverCache.getNode();(0,N.hu)(E instanceof Ut,"serverChildren would be complete if leaf node"),b=Sp(i,E)}y=n.filter.updateFullNode(p,b,s)}else{const b=Ze(e);let E=pT(i,b,t.serverCache);null==E&&t.serverCache.isCompleteForChild(b)&&(E=p.getImmediateChild(b)),y=null!=E?n.filter.updateChild(p,b,E,Gt(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,Ut.EMPTY_NODE,Gt(e),d,s):p,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Dh(i,rd(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=zv(i,Ve()),Wm(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function wT(n,t,e,i,r,s,c){if(null!=zv(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(qt(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Qm(n,t,e,p.getNode().getChild(e),r,s,d,c);if(qt(e)){let y=new jn(null);return p.getNode().forEachChild(Ia,(b,E)=>{y=y.set(new Ie(b),E)}),Kv(n,t,e,y,r,s,d,c)}return t}{let y=new jn(null);return i.foreach((b,E)=>{const M=fn(e,b);p.isCompleteForPath(M)&&(y=y.set(b,p.getNode().getChild(M)))}),Kv(n,t,e,y,r,s,d,c)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==Pr.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+e.type);c=function bT(n,t,e,i,r){const s=t.serverCache;return yT(n,Bv(t,s.getNode(),s.isFullyInitialized()||qt(e),s.isFiltered()),e,i,ad,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function _T(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Ep(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Av(Ep(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function Ym(n,t){(0,N.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,ET(n,s.changes,s.viewCache.eventCache.getNode(),null)}function ET(n,t,e,i){return function Lx(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function YC(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),Cp(n,r,"child_removed",t,i,e),Cp(n,r,"child_added",t,i,e),Cp(n,r,"child_moved",s,i,e),Cp(n,r,"child_changed",t,i,e),Cp(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let cd,e_;class ud{constructor(){this.views=new Map}}function xh(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Qv(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(Qv(c,t,e,i));return s}}function ew(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=Dh(e,r?i:null),p=!1;d?p=!0:i instanceof Ut?(d=Sp(e,i),p=!1):(d=Ut.EMPTY_NODE,p=!1);const y=Tp(new Ps(d,p,!1),new Ps(i,r,!1));return new HP(t,y)}return c}function Jm(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function El(n,t){let e=null;for(const i of n.views.values())e=e||GP(i,t);return e}function Xm(n,t){return t._queryParams.loadsAllData()?xp(n):n.views.get(t._queryIdentifier)}function IT(n,t){return null!=Xm(n,t)}function Ac(n){return null!=xp(n)}function xp(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Zx=1;class xT{constructor(t){this.listenProvider_=t,this.syncPointTree_=new jn(null),this.pendingWriteTree_=function zx(){return{visibleWrites:Si.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ns(n,t,e,i,r){return function oT(n,t,e,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Ip(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?Ah(n,new id({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Mc(n,t,e=!1){const i=function lT(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Bx(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,N.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&Ux(d,i.path)?r=!1:ts(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function cT(n){n.visibleWrites=Gv(n.allWrites,Hx,Ve()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=iT(n.visibleWrites,i.path):vi(i.children,p=>{n.visibleWrites=iT(n.visibleWrites,fn(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new jn(null);return null!=i.snap?s=s.set(Ve(),!0):vi(i.children,c=>{s=s.set(new Ie(c),!0)}),Ah(n,new qm(i.path,s,e))}return[]}function t_(n,t,e){return Ah(n,new id({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function n_(n,t,e,i,r=!1){const s=t._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===t._queryIdentifier||IT(c,t))){const p=function nw(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=Ac(n);if("default"===r)for(const[p,y]of n.views.entries())c=c.concat(TT(y,e,i)),ld(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(c=c.concat(TT(p,e,i)),ld(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Ac(n)&&s.push(new(function Dp(){return(0,N.hu)(cd,"Reference.ts has not been loaded"),cd}())(t._repo,t._path)),{removed:s,events:c}}(c,t,e,i);(function Xv(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(d=p.events,!r){const b=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(s,(M,P)=>Ac(P));if(b&&!E){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const P=function FT(n){return n.fold((t,e,i)=>{if(e&&Ac(e))return[xp(e)];{let r=[];return e&&(r=Jm(e)),vi(i,(s,c)=>{r=r.concat(c)}),r}})}(M);for(let F=0;F<P.length;++F){const z=P[F],K=z.query,De=NT(n,z);n.listenProvider_.startListening(kp(K),Ap(n,K),De.hashFn,De.onComplete)}}}!E&&y.length>0&&!i&&(b?n.listenProvider_.stopListening(kp(t),null):y.forEach(M=>{const P=n.queryToTagMap.get(Ns(M));n.listenProvider_.stopListening(kp(M),P)}))}!function Qx(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=Ns(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function kT(n,t,e,i){const r=Mp(n,i);if(null!=r){const s=ow(r),c=s.path,d=s.queryId,p=Fi(c,t);return aw(n,c,new id(Vv(d),p,e))}return[]}function rw(n,t,e,i=!1){const r=t._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(M,P)=>{const F=Fi(M,r);s=s||El(P,F),c=c||Ac(P)});let p,d=n.syncPointTree_.get(r);d?(c=c||Ac(d),s=s||El(d,Ve())):(d=new ud,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?p=!0:(p=!1,s=Ut.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,F)=>{const z=El(F,Ve());z&&(s=s.updateImmediateChild(P,z))}));const y=IT(d,t);if(!y&&!t._queryParams.loadsAllData()){const M=Ns(t);(0,N.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const P=function Jx(){return Zx++}();n.queryToTagMap.set(M,P),n.tagToQueryMap.set(P,M)}let E=function tw(n,t,e,i,r,s){const c=ew(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function CT(n,t){n.eventRegistrations_.push(t)}(c,e),function Kx(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nn,(s,c)=>{i.push(Ic(s,c))}),e.isFullyInitialized()&&i.push(Av(e.getNode())),ET(n,i,e.getNode(),t)}(c,e)}(d,t,e,zt(n.pendingWriteTree_,r),s,p);if(!y&&!c&&!i){const M=Xm(d,t);E=E.concat(function lw(n,t,e){const i=t._path,r=Ap(n,t),s=NT(n,e),c=n.listenProvider_.startListening(kp(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!Ac(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,b,E)=>{if(!qt(y)&&b&&Ac(b))return[xp(b).query];{let M=[];return b&&(M=M.concat(Jm(b).map(P=>P.query))),vi(E,(P,F)=>{M=M.concat(F)}),M}});for(let y=0;y<p.length;++y){const b=p[y];n.listenProvider_.stopListening(kp(b),Ap(n,b))}}return c}(n,t,M))}return E}function i_(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const y=El(d,Fi(c,t));if(y)return y});return uT(r,t,s,e,!0)}function Ah(n,t){return OT(t,n.syncPointTree_,null,zt(n.pendingWriteTree_,Ve()))}function OT(n,t,e,i){if(qt(n.path))return PT(n,t,e,i);{const r=t.get(Ve());null==e&&null!=r&&(e=El(r,Ve()));let s=[];const c=Ze(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const y=e?e.getImmediateChild(c):null,b=gT(i,c);s=s.concat(OT(d,p,y,b))}return r&&(s=s.concat(xh(r,n,i,e))),s}}function PT(n,t,e,i){const r=t.get(Ve());null==e&&null!=r&&(e=El(r,Ve()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,y=gT(i,c),b=n.operationForChild(c);b&&(s=s.concat(PT(b,d,p,y)))}),r&&(s=s.concat(xh(r,n,i,e))),s}function NT(n,t){const e=t.query,i=Ap(n,e);return{hashFn:()=>(function Yv(n){return n.viewCache_.serverCache.getNode()}(t)||Ut.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function Yx(n,t,e){const i=Mp(n,e);if(i){const r=ow(i),s=r.path,c=r.queryId,d=Fi(s,t);return aw(n,s,new bp(Vv(c),d))}return[]}(n,e._path,i):function MT(n,t){return Ah(n,new bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function vv(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return n_(n,e,null,s)}}}}function Ap(n,t){const e=Ns(t);return n.queryToTagMap.get(e)}function Ns(n){return n._path.toString()+"$"+n._queryIdentifier}function Mp(n,t){return n.tagToQueryMap.get(t)}function ow(n){const t=n.indexOf("$");return(0,N.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Ie(n.substr(0,t))}}function aw(n,t,e){const i=n.syncPointTree_.get(t);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),xh(i,e,zt(n.pendingWriteTree_,t),null)}function kp(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function DT(){return(0,N.hu)(e_,"Reference.ts has not been loaded"),e_}())(n._repo,n._path):n}class cw{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new cw(e)}node(){return this.node_}}class uw{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=fn(this.path_,t);return new uw(this.syncTree_,e)}node(){return i_(this.syncTree_,this.path_)}}const s_=function(n,t,e){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?o_(n[".sv"],t,e):"object"==typeof n[".sv"]?zP(n[".sv"],t):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},o_=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},zP=function(n,t,e){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,N.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},a_=function(n,t,e,i){return l_(t,new uw(e,n),i)},LT=function(n,t,e){return l_(n,new cw(t),e)};function l_(n,t,e){const i=n.getPriority().val(),r=s_(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=s_(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new ed(d,ci(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new ed(r))),c.forEachChild(Nn,(d,p)=>{const y=l_(p,t.getImmediateChild(d),e);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class c_{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Rp(n,t){let e=t instanceof Ie?t:new Ie(t),i=n,r=Ze(e);for(;null!==r;){const s=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new c_(r,i,s),e=Gt(e),r=Ze(e)}return i}function kc(n){return n.node.value}function Op(n,t){n.node.value=t,d_(n)}function Da(n){return n.node.childCount>0}function dd(n,t){vi(n.node.children,(e,i)=>{t(new c_(e,n,i))})}function Mh(n,t,e,i){e&&!i&&t(n),dd(n,r=>{Mh(r,t,!0,i)}),e&&i&&t(n)}function kh(n){return new Ie(null===n.parent?n.name:kh(n.parent)+"/"+n.name)}function d_(n){null!==n.parent&&function e1(n,t,e){const i=function u_(n){return void 0===kc(n)&&!Da(n)}(e),r=(0,N.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,d_(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,d_(n))}(n.parent,n.name,n)}const t1=/[\[\].#$\/\u0000-\u001F\u007F]/,Pp=/[\[\].#$\u0000-\u001F\u007F]/,dw=10485760,hw=function(n){return"string"==typeof n&&0!==n.length&&!t1.test(n)},VT=function(n){return"string"==typeof n&&0!==n.length&&!Pp.test(n)},Np=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Uu(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},xa=function(n,t,e,i){i&&void 0===t||Fp((0,N.gK)(n,"value"),t,e)},Fp=function(n,t,e){const i=e instanceof Ie?new Tv(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+vh(i));if("function"==typeof t)throw new Error(n+"contains a function "+vh(i)+" with contents = "+t.toString());if(Uu(t))throw new Error(n+"contains "+t.toString()+" "+vh(i));if("string"==typeof t&&t.length>dw/3&&(0,N.ug)(t)>dw)throw new Error(n+"contains a string greater than "+dw+" utf8 bytes "+vh(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(vi(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!hw(c)))throw new Error(n+" contains an invalid key ("+c+") "+vh(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function $C(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,N.ug)(t),yh(n)})(i,c),Fp(n,d,i),function Ju(n){const t=n.parts_.pop();n.byteLength_-=(0,N.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+vh(i)+" in addition to actual children.")}},BT=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,N.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];vi(t,(c,d)=>{const p=new Ie(c);if(Fp(r,d,fn(e,p)),".priority"===es(p)&&!Np(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=Cc(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!hw(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(fp);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&ts(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},h_=function(n,t,e){if(!e||void 0!==t){if(Uu(t))throw new Error((0,N.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Np(t))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},hd=function(n,t,e,i){if(!(i&&void 0===e||hw(e)))throw new Error((0,N.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lp=function(n,t,e,i){if(!(i&&void 0===e||VT(e)))throw new Error((0,N.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oo=function(n,t){if(".info"===Ze(t))throw new Error(n+" failed = Can't modify data under /.info/")},UT=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!hw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),VT(n)}(e))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class s1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function f_(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Qu(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function HT(n,t,e){f_(n,e),GT(n,i=>Qu(i,t))}function Fs(n,t,e){f_(n,e),GT(n,i=>ts(i,t)||ts(t,i))}function GT(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(zT(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function zT(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Ro&&yi("event: "+e.toString()),Ea(i)}}}const pw="repo_interrupt";class $P{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new s1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wp(),this.transactionQueueTree_=new c_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vp(n){const e=n.infoData_.getNode(new Ie(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function No(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Vp(n)})}function a1(n,t,e,i,r){n.dataUpdateCount++;const s=new Ie(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,N.UI)(e,y=>ci(y));c=function RT(n,t,e,i){const r=Mp(n,i);if(r){const s=ow(r),c=s.path,d=s.queryId,p=Fi(c,t),y=jn.fromObject(e);return aw(n,c,new Ih(Vv(d),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=ci(e);c=kT(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,N.UI)(e,y=>ci(y));c=function iw(n,t,e){const i=jn.fromObject(e);return Ah(n,new Ih({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=ci(e);c=t_(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=gd(n,s)),Fs(n.eventQueue_,d,c)}function Bp(n,t){gw(n,"connected",t),!1===t&&function Nr(n){Fo(n,"onDisconnectEvents");const t=No(n),e=wp();Ov(n.onDisconnect_,Ve(),(r,s)=>{const c=a_(r,s,n.serverSyncTree_,t);Eh(e,r,c)});let i=[];Ov(e,Ve(),(r,s)=>{i=i.concat(t_(n.serverSyncTree_,r,s));const c=p_(n,r);gd(n,c)}),n.onDisconnect_=wp(),Fs(n.eventQueue_,Ve(),i)}(n)}function gw(n,t,e){const i=new Ie("/.info/"+t),r=ci(e);n.infoData_.updateSnapshot(i,r);const s=t_(n.infoSyncTree_,i,r);Fs(n.eventQueue_,i,s)}function Rh(n){return n.nextWriteId_++}function ao(n,t,e,i,r){Fo(n,"set",{path:t.toString(),value:e,priority:i});const s=No(n),c=ci(e,i),d=i_(n.serverSyncTree_,t),p=LT(c,d,s),y=Rh(n),b=ns(n.serverSyncTree_,t,p,y,!0);f_(n.eventQueue_,b),n.server_.put(t.toString(),c.val(!0),(M,P)=>{const F="ok"===M;F||Zi("set at "+t+" failed: "+M);const z=Mc(n.serverSyncTree_,y,!F);Fs(n.eventQueue_,t,z),Ls(0,r,M,P)});const E=p_(n,t);gd(n,E),Fs(n.eventQueue_,E,[])}function fd(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&Rv(n.onDisconnect_,t),Ls(0,e,i,r)})}function Hp(n,t,e,i){const r=ci(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&Eh(n.onDisconnect_,t,r),Ls(0,i,s,c)})}function Rc(n,t,e){let i;i=".info"===Ze(t._path)?n_(n.infoSyncTree_,t,e):n_(n.serverSyncTree_,t,e),HT(n.eventQueue_,t._path,i)}function pd(n){n.persistentConnection_&&n.persistentConnection_.interrupt(pw)}function Fo(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),yi(e,...t)}function Ls(n,t,e,i){t&&Ea(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function Oc(n,t,e){return i_(n.serverSyncTree_,t,e)||Ut.EMPTY_NODE}function Il(n,t=n.transactionQueueTree_){if(t||Gp(n,t),kc(t)){const e=yw(n,t);(0,N.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function jT(n,t,e){const i=e.map(y=>y.currentWriteId),r=Oc(n,t,i);let s=r;const c=r.hash();for(let y=0;y<e.length;y++){const b=e[y];(0,N.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const E=Fi(t,b.path);s=s.updateChild(E,b.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,y=>{Fo(n,"transaction put response",{path:p.toString(),status:y});let b=[];if("ok"===y){const E=[];for(let M=0;M<e.length;M++)e[M].status=2,b=b.concat(Mc(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&E.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();Gp(n,Rp(n.transactionQueueTree_,t)),Il(n,n.transactionQueueTree_),Fs(n.eventQueue_,t,b);for(let M=0;M<E.length;M++)Ea(E[M])}else{if("datastale"===y)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Zi("transaction at "+p.toString()+" failed: "+y);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=y}gd(n,t)}},c)}(n,kh(t),e)}else Da(t)&&dd(t,e=>{Il(n,e)})}function gd(n,t){const e=_w(n,t),i=kh(e);return function qT(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],y=Fi(e,p.path);let E,b=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,E=p.abortReason,r=r.concat(Mc(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,E="maxretry",r=r.concat(Mc(n.serverSyncTree_,p.currentWriteId,!0));else{const M=Oc(n,p.path,c);p.currentInputSnapshot=M;const P=t[d].update(M.val());if(void 0!==P){Fp("transaction failed: Data returned ",P,p.path);let F=ci(P);"object"==typeof P&&null!=P&&(0,N.r3)(P,".priority")||(F=F.updatePriority(M.getPriority()));const K=p.currentWriteId,De=No(n),Be=LT(F,M,De);p.currentOutputSnapshotRaw=F,p.currentOutputSnapshotResolved=Be,p.currentWriteId=Rh(n),c.splice(c.indexOf(K),1),r=r.concat(ns(n.serverSyncTree_,p.path,Be,p.currentWriteId,p.applyLocally)),r=r.concat(Mc(n.serverSyncTree_,K,!0))}else b=!0,E="nodata",r=r.concat(Mc(n.serverSyncTree_,p.currentWriteId,!0))}Fs(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}Gp(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Ea(i[d]);Il(n,n.transactionQueueTree_)}(n,yw(n,e),i),i}function _w(n,t){let e,i=n.transactionQueueTree_;for(e=Ze(t);null!==e&&void 0===kc(i);)i=Rp(i,e),e=Ze(t=Gt(t));return i}function yw(n,t){const e=[];return vw(n,t,e),e.sort((i,r)=>i.order-r.order),e}function vw(n,t,e){const i=kc(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);dd(t,r=>{vw(n,r,e)})}function Gp(n,t){const e=kc(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Op(t,e.length>0?e:void 0)}dd(t,i=>{Gp(n,i)})}function p_(n,t){const e=kh(_w(n,t)),i=Rp(n.transactionQueueTree_,t);return function Xx(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{g_(n,r)}),g_(n,i),Mh(i,r=>{g_(n,r)}),e}function g_(n,t){const e=kc(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,N.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,N.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Mc(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Op(t,void 0):e.length=s+1,Fs(n.eventQueue_,kh(t),r);for(let c=0;c<i.length;c++)Ea(i[c])}}const m_=function(n,t){const e=h1(n),i=e.namespace;return"firebase.com"===e.domain&&Or(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new hh(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Ie(e.pathString)}},h1=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(b,E)),b<E&&(r=function u1(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,E)));const M=function d1(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Zi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));y=t.indexOf(":"),y>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(y+1),10)):y=t.length;const P=t.slice(0,y);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const F=t.indexOf(".");i=t.substring(0,F).toLowerCase(),e=t.substring(F+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}},ww="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bw=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=ww.charAt(e%64),e=Math.floor(e/64);(0,N.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=ww.charAt(t[r]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class __{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Wl)(this.snapshot.exportVal())}}class WT{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Fh{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class zp{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new N.BH;return fd(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){oo("OnDisconnect.remove",this._path);const t=new N.BH;return Hp(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){oo("OnDisconnect.set",this._path),xa("OnDisconnect.set",t,this._path,!1);const e=new N.BH;return Hp(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){oo("OnDisconnect.setWithPriority",this._path),xa("OnDisconnect.setWithPriority",t,this._path,!1),h_("OnDisconnect.setWithPriority",e,!1);const i=new N.BH;return function lo(n,t,e,i,r){const s=ci(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&Eh(n.onDisconnect_,t,s),Ls(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){oo("OnDisconnect.update",this._path),BT("OnDisconnect.update",t,this._path,!1);const e=new N.BH;return function mw(n,t,e,i){if((0,N.xb)(e))return yi("onDisconnect().update() called with empty data.  Don't do anything."),void Ls(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&vi(e,(c,d)=>{const p=ci(d);Eh(n.onDisconnect_,fn(t,c),p)}),Ls(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Fr{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return qt(this._path)?null:es(this._path)}get ref(){return new _s(this._repo,this._path)}get _queryIdentifier(){const t=nd(this._queryParams),e=tp(t);return"{}"===e?"default":e}get _queryObject(){return nd(this._queryParams)}isEqual(t){if(!((t=(0,N.m9)(t))instanceof Fr))return!1;const e=this._repo===t._repo,i=Qu(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _h(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function y_(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Lo(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Ia){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ul)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==dr)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Nn){if(null!=t&&!Np(t)||null!=e&&!Np(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof mp||n.getIndex()===bl,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function md(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class _s extends Fr{constructor(t,e){super(t,e,new $m,!1)}get parent(){const t=Tc(this._path);return null===t?null:new _s(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Pc{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ie(t),i=Nc(this.ref,t);return new Pc(this._node.getChild(e),i,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Pc(r,Nc(this.ref,i),Nn)))}hasChild(t){const e=new Ie(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function v_(n,t){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==t?Nc(n._root,t):n._root}function Cw(n,t){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const e=m_(t,n._repo.repoInfo_.nodeAdmin);UT("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Or("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),v_(n,e.path.toString())}function Nc(n,t){return null===Ze((n=(0,N.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Lp("child","path",e,!1)):Lp("child","path",t,!1),new _s(n._repo,fn(n._path,t));var e}function w_(n,t){n=(0,N.m9)(n),oo("set",n._path),xa("set",t,n._path,!1);const e=new N.BH;return ao(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function JT(n,t){BT("update",t,n._path,!1);const e=new N.BH;return function Up(n,t,e,i){Fo(n,"update",{path:t.toString(),value:e});let r=!0;const s=No(n),c={};if(vi(e,(d,p)=>{r=!1,c[d]=a_(fn(t,d),ci(p),n.serverSyncTree_,s)}),r)yi("update() called with empty data.  Don't do anything."),Ls(0,i,"ok",void 0);else{const d=Rh(n),p=function AT(n,t,e,i){!function aT(n,t,e,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=Zm(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=jn.fromObject(e);return Ah(n,new Ih({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);f_(n.eventQueue_,p),n.server_.merge(t.toString(),e,(y,b)=>{const E="ok"===y;E||Zi("update at "+t+" failed: "+y);const M=Mc(n.serverSyncTree_,d,!E),P=M.length>0?gd(n,t):t;Fs(n.eventQueue_,P,M),Ls(0,i,y,b)}),vi(e,y=>{const b=p_(n,fn(t,y));gd(n,b)}),Fs(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function p1(n){n=(0,N.m9)(n);const t=new Fh(()=>{}),e=new Lh(t);return function c1(n,t,e){const i=function sw(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,b)=>{const E=Fi(y,e);i=i||El(b,E)});let r=n.syncPointTree_.get(e);r?i=i||El(r,Ve()):(r=new ud,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Ps(i,!0,!1):null;return function Wx(n){return Ep(n.viewCache_)}(ew(r,t,zt(n.pendingWriteTree_,t._path),s?c.getNode():Ut.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const s=ci(r).withIndex(t._queryParams.getIndex());let c;if(rw(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=t_(n.serverSyncTree_,t._path,s);else{const d=Ap(n.serverSyncTree_,t);c=kT(n.serverSyncTree_,t._path,s,d)}return Fs(n.eventQueue_,t._path,c),n_(n.serverSyncTree_,t,e,null,!0),s},r=>(Fo(n,"get for query "+(0,N.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Pc(i,new _s(n._repo,n._path),n._queryParams.getIndex()))}class Lh{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new __("value",this,new Pc(t.snapshotNode,new _s(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new WT(this,t,e):null}matches(t){return t instanceof Lh&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class $p{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new WT(this,t,e):null}createEvent(t,e){(0,N.hu)(null!=t.childName,"Child events should have a childName.");const i=Nc(new _s(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new __(t.type,this,new Pc(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof $p&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Vh(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,y=(b,E)=>{Rc(n._repo,n,d),p(b,E)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new Fh(e,s||void 0),d="value"===t?new Lh(c):new $p(t,c);return function Oh(n,t,e){let i;i=".info"===Ze(t._path)?rw(n.infoSyncTree_,t,e):rw(n.serverSyncTree_,t,e),HT(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>Rc(n._repo,n,d)}function jp(n,t,e,i){return Vh(n,"value",t,e,i)}function Tw(n,t,e,i){return Vh(n,"child_added",t,e,i)}function Ew(n,t,e,i){return Vh(n,"child_changed",t,e,i)}function Iw(n,t,e,i){return Vh(n,"child_moved",t,e,i)}function Sw(n,t,e,i){return Vh(n,"child_removed",t,e,i)}function Dw(n,t,e){let i=null;const r=e?new Fh(e):null;"value"===t?i=new Lh(r):t&&(i=new $p(t,r)),Rc(n._repo,n,i)}class co{}class xw extends co{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xa("endAt",this._value,t._path,!0);const e=XC(t._queryParams,this._value,this._key);if(md(e),Lo(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fr(t._repo,t._path,e,t._orderByCalled)}}class b_ extends co{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xa("endBefore",this._value,t._path,!1);const e=function Px(n,t,e){let i;return i=XC(n,t,n.index_===Ia||e?e:ul),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(md(e),Lo(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fr(t._repo,t._path,e,t._orderByCalled)}}class eE extends co{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xa("startAt",this._value,t._path,!0);const e=kv(t._queryParams,this._value,this._key);if(md(e),Lo(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fr(t._repo,t._path,e,t._orderByCalled)}}class Aw extends co{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){xa("startAfter",this._value,t._path,!1);const e=function JC(n,t,e){let i;return i=kv(n,t,n.index_===Ia||e?e:dr),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(md(e),Lo(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fr(t._repo,t._path,e,t._orderByCalled)}}class Mw extends co{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fr(t._repo,t._path,function Ox(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class kw extends co{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fr(t._repo,t._path,function QC(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class qP extends co{constructor(t){super(),this._path=t}_apply(t){y_(t,"orderByChild");const e=new Ie(this._path);if(qt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new mp(e),r=Dc(t._queryParams,i);return Lo(r),new Fr(t._repo,t._path,r,!0)}}class y1 extends co{_apply(t){y_(t,"orderByKey");const e=Dc(t._queryParams,Ia);return Lo(e),new Fr(t._repo,t._path,e,!0)}}class v1 extends co{_apply(t){y_(t,"orderByPriority");const e=Dc(t._queryParams,Nn);return Lo(e),new Fr(t._repo,t._path,e,!0)}}class nE extends co{_apply(t){y_(t,"orderByValue");const e=Dc(t._queryParams,bl);return Lo(e),new Fr(t._repo,t._path,e,!0)}}class b1 extends co{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(xa("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xw(this._value,this._key)._apply(new eE(this._value,this._key)._apply(t))}}function Vo(n,...t){let e=(0,N.m9)(n);for(const i of t)e=i._apply(e);return e}(function Jv(n){(0,N.hu)(!cd,"__referenceConstructor has already been defined"),cd=n})(_s),function ST(n){(0,N.hu)(!e_,"__referenceConstructor has already been defined"),e_=n}(_s);const C_={};function sE(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=m_(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,c=m_(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const b=r&&p?new zu(zu.OWNER):new wv(n.name,n.options,t);UT("Invalid Firebase Database URL",c),qt(c.path)||Or("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function T1(n,t,e,i){let r=C_[t.name];r||(r={},C_[t.name]=r);let s=r[n.toURLString()];return s&&Or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $P(n,false,e,i),r[n.toURLString()]=s,s}(d,n,b,new Gu(n.name,e));return new WP(E,n)}class WP{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function $T(n,t,e){if(n.stats_=vc(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new xc(n.repoInfo_,(i,r,s,c)=>{a1(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Bp(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Xu(n.repoInfo_,t,(i,r,s,c)=>{a1(n,i,r,s,c)},i=>{Bp(n,i)},i=>{!function l1(n,t){vi(t,(e,i)=>{gw(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function bv(n,t){const e=n.toString();return km[e]||(km[e]=t()),km[e]}(n.repoInfo_,()=>new Nv(n.stats_,n.server_)),n.infoData_=new Nx,n.infoSyncTree_=new xT({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=t_(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),gw(n,"connected",!1),n.serverSyncTree_=new xT({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const y=c(d,p);Fs(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _s(this._repo,Ve())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function oE(n,t){const e=C_[t];(!e||e[n.key]!==n)&&Or(`Database ${t}(${n.repoInfo_}) has already been deleted.`),pd(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Or("Cannot call "+t+" on a deleted database.")}}function T_(){cp.IS_TRANSPORT_INITIALIZED&&Zi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rw(){T_(),ro.forceDisallow()}function Bo(){T_(),Ii.forceDisallow(),ro.forceAllow()}function Ho(n,t){Bu(n,t)}const cE={".sv":"timestamp"};class S1{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xu.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Xu.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function lE(n){vm(ur.SDK_VERSION),(0,ur._registerComponent)(new io.wA("database",(t,{instanceIdentifier:e})=>sE(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ur.registerVersion)(Qf,"0.14.3",n),(0,ur.registerVersion)(Qf,"0.14.3","esm2017")}();const A1=new gs.Yd("@firebase/database-compat"),Pw=function(n){A1.warn("FIREBASE WARNING: "+n)};class M1{constructor(t){this._delegate=t}cancel(t){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Pw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class fE{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sl{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Lp("DataSnapshot.child","path",t,!1),new Sl(this._database,this._delegate.child(t))}hasChild(t){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Lp("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Sl(this._database,e)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lr(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",e,!1);const c=Qi.getCancelAndContextArgs_("Query.on",i,r),d=(y,b)=>{e.call(c.context,new Sl(this.database,y),b)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return jp(this._delegate,d,p),e;case"child_added":return Tw(this._delegate,d,p),e;case"child_removed":return Sw(this._delegate,d,p),e;case"child_changed":return Ew(this._delegate,d,p),e;case"child_moved":return Iw(this._delegate,d,p),e;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,N.Wj)("Query.off","callback",e,!0),(0,N.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,Dw(this._delegate,t,r)}else Dw(this._delegate,t)}get(){return p1(this._delegate).then(t=>new Sl(this.database,t))}once(t,e,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",e,!0);const s=Qi.getCancelAndContextArgs_("Query.once",i,r),c=new N.BH,d=(y,b)=>{const E=new Sl(this.database,y);e&&e.call(s.context,E,b),c.resolve(E)};d.userCallback=e,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(t){case"value":jp(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":Tw(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":Sw(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":Ew(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":Iw(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Qi(this.database,Vo(this._delegate,function m1(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Mw(n)}(t)))}limitToLast(t){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Qi(this.database,Vo(this._delegate,function jP(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kw(n)}(t)))}orderByChild(t){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Qi(this.database,Vo(this._delegate,function _1(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lp("orderByChild","path",n,!1),new qP(n)}(t)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Qi(this.database,Vo(this._delegate,function tE(){return new y1}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Qi(this.database,Vo(this._delegate,function Yi(){return new v1}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Qi(this.database,Vo(this._delegate,function w1(){return new nE}()))}startAt(t=null,e){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Qi(this.database,Vo(this._delegate,function g1(n=null,t){return hd("startAt","key",t,!0),new eE(n,t)}(t,e)))}startAfter(t=null,e){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Qi(this.database,Vo(this._delegate,function _d(n,t){return hd("startAfter","key",t,!0),new Aw(n,t)}(t,e)))}endAt(t=null,e){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Qi(this.database,Vo(this._delegate,function XT(n,t){return hd("endAt","key",t,!0),new xw(n,t)}(t,e)))}endBefore(t=null,e){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Qi(this.database,Vo(this._delegate,function Fc(n,t){return hd("endBefore","key",t,!0),new b_(n,t)}(t,e)))}equalTo(t,e){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Qi(this.database,Vo(this._delegate,function iE(n,t){return hd("equalTo","key",t,!0),new b1(n,t)}(t,e)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,N.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,N.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Lr(this.database,new _s(this._delegate._repo,this._delegate._path))}}class Lr extends Qi{constructor(t,e){super(t,new Fr(e._repo,e._path,new $m,!1)),this.database=t,this._delegate=e}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Lr(this.database,Nc(this._delegate,t))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Lr(this.database,t):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new Lr(this.database,this._delegate.root)}set(t,e){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",e,!0);const i=w_(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Pw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oo("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",e,!0);const i=JT(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function QT(n,t,e){if(oo("setWithPriority",n._path),xa("setWithPriority",t,n._path,!1),h_("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return ao(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",t,!0);const e=function f1(n){return oo("remove",n._path),w_(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,N.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function D1(n,t,e){var i;if(n=(0,N.m9)(n),oo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,s=new N.BH,d=jp(n,()=>{});return function Nh(n,t,e,i,r,s){Fo(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:wm(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Oc(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Fp("transaction failed: Data returned ",p,c.path),c.status=0;const y=Rp(n.transactionQueueTree_,t),b=kc(y)||[];let E;b.push(c),Op(y,b),"object"==typeof p&&null!==p&&(0,N.r3)(p,".priority")?(E=(0,N.DV)(p,".priority"),(0,N.hu)(Np(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(i_(n.serverSyncTree_,t)||Ut.EMPTY_NODE).getPriority().val();const M=No(n),P=ci(p,E),F=LT(P,d,M);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=F,c.currentWriteId=Rh(n);const z=ns(n.serverSyncTree_,t,F,c.currentWriteId,c.applyLocally);Fs(n.eventQueue_,t,z),Il(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,y,b)=>{let E=null;p?s.reject(p):(E=new Pc(b,new _s(n._repo,n._path),Nn),s.resolve(new S1(y,E)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new fE(s.committed,new Sl(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",e,!0);const i=function YT(n,t){n=(0,N.m9)(n),oo("setPriority",n._path),h_("setPriority",t,!1);const e=new N.BH;return ao(n._repo,fn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",e,!0);const i=function ZT(n,t){n=(0,N.m9)(n),oo("push",n._path),xa("push",t,n._path,!0);const e=Vp(n._repo),i=bw(e),r=Nc(n,i),s=Nc(n,i);let c;return c=null!=t?w_(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Lr(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Lr(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return oo("Reference.onDisconnect",this._delegate._path),new M1(new zp(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vd{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rw,forceLongPolling:Bo}}useEmulator(t,e,i={}){!function Ow(n,t,e,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Or("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zu(zu.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);s=new zu(c)}!function C1(n,t,e,i){n.repoInfo_=new hh(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,N.Dv)("database.ref",0,1,arguments.length),t instanceof Lr){const e=Cw(this._delegate,t.toString());return new Lr(this,e)}{const e=v_(this._delegate,t);return new Lr(this,e)}}refFromURL(t){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=Cw(this._delegate,t);return new Lr(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function Aa(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),pd(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function Uo(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function Ph(n){n.persistentConnection_&&n.persistentConnection_.resume(pw)}(n._repo)}(this._delegate)}}vd.ServerValue={TIMESTAMP:function E1(){return cE}(),increment:n=>function I1(n){return{".sv":{increment:n}}}(n)};var gE=Object.freeze({__proto__:null,initStandalone:function pE({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){vm(e);const c=new io.zt("auth-internal",new io.H0("database-standalone"));return c.setComponent(new io.wA("auth-internal",()=>i,"PRIVATE")),{instance:new vd(sE(n,c,void 0,t,s),n),namespace:r}}});const mE=vd.ServerValue;!function _E(n){n.INTERNAL.registerComponent(new io.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new vd(r,i)},"PUBLIC").setServiceProps({Reference:Lr,Query:Qi,Database:vd,DataSnapshot:Sl,enableLogging:Ho,INTERNAL:gE,ServerValue:mE}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.3")}(ym.Z);var qp=V(5363),yE=V(6063);class vE extends Kn.x{constructor(t=1/0,e=1/0,i=yE.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}function wE(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,no.B)({connector:()=>new vE(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const S_=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Go(n,t){return(0,Oi.e)((e,i)=>{let r=0;e.subscribe((0,ai.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var Lc=V(515);function Wp(n){return n<=0?()=>Lc.E:(0,Oi.e)((t,e)=>{let i=0;t.subscribe((0,ai.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function D_(n){return(0,Oi.e)((t,e)=>{let i=!1;t.subscribe((0,ai.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function bE(n=R1){return(0,Oi.e)((t,e)=>{let i=!1;t.subscribe((0,ai.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function R1(){return new S_}function Dl(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Go((r,s)=>n(r,s,i)):ll.y,Wp(1),e?D_(t):bE(()=>new S_))}var Nw=V(576);function CE(n,t){return(0,Nw.m)(t)?ei(()=>n,t):ei(()=>n)}var Fw=V(9468);V(259);const Lw=new Map,wd={activated:!1,tokenObservers:[]},QP={initialized:!1,enabled:!1};function Ji(n){return Lw.get(n)||Object.assign({},wd)}function Kp(){return QP}class Uh{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,pe.Z)(function*(){e.stop();try{e.pending=new N.BH,yield function j1(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new N.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const hr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function q1(n){if(!Ji(n).activated)throw hr.create("use-before-activation",{appName:n.name})}function Vw(n,t){return O_.apply(this,arguments)}function O_(){return(O_=(0,pe.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const E=yield r.getHeartbeatsHeader();E&&(i["X-Firebase-Client"]=E)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(E){throw hr.create("fetch-network-error",{originalErrorMessage:E?.message})}if(200!==c.status)throw hr.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(E){throw hr.create("fetch-parse-error",{originalErrorMessage:E?.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),b=Date.now();return{token:d.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}})).apply(this,arguments)}function AE(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Yp="firebase-app-check-store";let P_=null;function ME(){return P_||(P_=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(hr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Yp,{keyPath:"compositeKey"})}}catch(e){t(hr.create("storage-open",{originalErrorMessage:e?.message}))}}),P_)}function Uw(){return(Uw=(0,pe.Z)(function*(n,t){const i=(yield ME()).transaction(Yp,"readwrite"),s=i.objectStore(Yp).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var y;d(hr.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Qp=new gs.Yd("@firebase/app-check");function L_(n,t){return(0,N.hl)()?function N_(n,t){return function Bw(n,t){return Uw.apply(this,arguments)}(function OE(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Qp.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Gw(){return Kp().enabled}function NE(){return zw.apply(this,arguments)}function zw(){return(zw=(0,pe.Z)(function*(){const n=Kp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const tN={error:"UNKNOWN_ERROR"};function nN(n){return N.US.encodeString(JSON.stringify(n),!1)}function $w(n){return V_.apply(this,arguments)}function V_(){return(V_=(0,pe.Z)(function*(n,t=!1){const e=n.app;q1(e);const i=Ji(e);let s,r=i.token;if(r&&!jh(r)&&(i.token=void 0,r=void 0),!r){const p=yield i.cachedTokenPromise;p&&(jh(p)?r=p:yield L_(e,void 0))}if(!t&&r&&jh(r))return{token:r.token};let d,c=!1;if(Gw()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Vw(AE(e,yield NE()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const p=yield i.exchangeTokenPromise;return yield L_(e,p),i.token=p,{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield Ji(e).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Qp.warn(p.message):Qp.error(p),s=p}return r?s?d=jh(r)?{token:r.token,internalError:s}:VE(s):(d={token:r.token},i.token=r,yield L_(e,r)):d=VE(s),c&&$h(e,d),d})).apply(this,arguments)}function jw(n,t){const e=Ji(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function FE(n){const{app:t}=n,e=Ji(t);let i=e.tokenRefresher;i||(i=function LE(n){const{app:t}=n;return new Uh((0,pe.Z)(function*(){let i;if(i=Ji(t).token?yield $w(n,!0):yield $w(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=Ji(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function $h(n,t){const e=Ji(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function jh(n){return n.expireTimeMillis-Date.now()>0}function VE(n){return{token:nN(tN),error:n}}class Q1{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Ji(this.app);for(const e of t)jw(this.app,e.next);return Promise.resolve()}}const jE="app-check-internal";!function oA(){(0,ur._registerComponent)(new io.wA("app-check",n=>function J1(n,t){return new Q1(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(jE).initialize()})),(0,ur._registerComponent)(new io.wA(jE,n=>function iN(n){return{getToken:t=>$w(n,t),addTokenListener:t=>function zh(n,t,e,i){const{app:r}=n,s=Ji(r);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&jh(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),FE(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>FE(n))}(n,"INTERNAL",t),removeTokenListener:t=>jw(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ur.registerVersion)("@firebase/app-check","0.6.3")}();class eg{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var tb=V(9260);const Vc=new o.OlP("angularfire2.auth.use-emulator"),U_=new o.OlP("angularfire2.auth.settings"),nb=new o.OlP("angularfire2.auth.tenant-id"),QE=new o.OlP("angularfire2.auth.langugage-code"),H_=new o.OlP("angularfire2.auth.use-device-language"),tg=new o.OlP("angularfire.auth.persistence"),ib=(n,t,e,i,r,s,c,d)=>(0,Pi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[y,b]of Object.entries(c))p.settings[y]=b;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let ng=(()=>{class n{constructor(e,i,r,s,c,d,p,y,b,E,M,P){const F=new Kn.x,z=ct(void 0).pipe((0,qp.Q)(c.outsideAngular),ei(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,407)))),(0,Ee.U)(()=>(0,Pi.on)(e,s,i)),(0,Ee.U)(K=>ib(K,s,d,y,b,E,p,M)),wE({bufferSize:1,refCount:!1}));if(Pl(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{z.pipe(Dl()).subscribe();const De=z.pipe(ei(Ue=>Ue.getRedirectResult().then(dt=>dt,()=>null)),yn.iC,wE({bufferSize:1,refCount:!1})),Be=z.pipe(ei(Ue=>new Ki.y(dt=>({unsubscribe:s.runOutsideAngular(()=>Ue.onAuthStateChanged(ft=>dt.next(ft),ft=>dt.error(ft),()=>dt.complete()))})))),Le=z.pipe(ei(Ue=>new Ki.y(dt=>({unsubscribe:s.runOutsideAngular(()=>Ue.onIdTokenChanged(ft=>dt.next(ft),ft=>dt.error(ft),()=>dt.complete()))}))));this.authState=De.pipe(CE(Be),(0,Fw.R)(c.outsideAngular),(0,qp.Q)(c.insideAngular)),this.user=De.pipe(CE(Le),(0,Fw.R)(c.outsideAngular),(0,qp.Q)(c.insideAngular)),this.idToken=this.user.pipe(ei(Ue=>Ue?(0,an.D)(Ue.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(ei(Ue=>Ue?(0,an.D)(Ue.getIdTokenResult()):ct(null))),this.credential=(0,Jr.T)(De,F,this.authState.pipe(Go(Ue=>!Ue))).pipe((0,Ee.U)(Ue=>Ue?.user?Ue:null),(0,Fw.R)(c.outsideAngular),(0,qp.Q)(c.insideAngular))}return(0,Pi.pX)(this,z,s,{spy:{apply:(K,De,Be)=>{(K.startsWith("signIn")||K.startsWith("createUser"))&&Be.then(Le=>F.next(Le))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi.Dh),o.LFG(Pi.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(yn.HU),o.LFG(Vc,8),o.LFG(U_,8),o.LFG(nb,8),o.LFG(QE,8),o.LFG(H_,8),o.LFG(tg,8),o.LFG(eg,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function sb(n){return null==n}function ob(n){return"function"==typeof n.set}function ab(n,t){return ob(t)?t:n.ref(t)}function lb(n,t){if(function JE(n){return"string"==typeof n}(n))return t.stringCase();if(ob(n))return t.firebaseCase();if(function rb(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function ig(n,t,e="on",i=Xn.z){return new Ki.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Ee.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,no.B)())}function XE(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function eI(n,t){const{payload:e,prevKey:i,key:r}=t,s=XE(n,r),c=function pA(n,t){if(sb(t))return 0;{const e=XE(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function gA(n){return(sb(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function cb(n,t,e){return function fA(n,t,e){return ig(n,"value","once",e).pipe(ei(i=>{const r=[ct(i)];return t.forEach(s=>r.push(ig(n,s,"on",e))),(0,Jr.T)(...r).pipe(fc(eI,[]))}),_m())}(n,t=gA(t),e)}function tI(n,t,e){const i=(t=gA(t)).map(r=>ig(n,r,"on",e));return(0,Jr.T)(...i)}function nI(n,t){return function(i,r){return lb(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function iI(n){return function(e){return e?lb(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function ub(n,t){return function(){return ig(n,"value","on",t)}}const oI=new o.OlP("angularfire2.realtimeDatabaseURL"),aI=new o.OlP("angularfire2.database.use-emulator");let G_=(()=>{class n{constructor(e,i,r,s,c,d,p,y,b,E,M,P,F,z,K){this.schedulers=d;const De=p,Be=(0,Pi.on)(e,c,i);y&&ib(Be,c,b,M,P,F,E,z),this.database=(0,Pi.cc)(`${Be.name}.database.${r}`,"AngularFireDatabase",Be.name,()=>{const Le=c.runOutsideAngular(()=>Be.database(r||void 0));return De&&Le.useEmulator(...De),Le},[De])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>ab(this.database,e));let s=r;return i&&(s=i(r)),function rI(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:nI(i,"update"),set:nI(i,"set"),push:r=>i.push(r),remove:iI(i),snapshotChanges:r=>cb(n,r,e).pipe(yn.iC),stateChanges:r=>tI(n,r,e).pipe(yn.iC),auditTrail:r=>function mA(n,t,e){return function _A(n,t,e){return function hN(n,t){return ig(n,"value","on",t).pipe((0,Ee.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function zC(...n){const t=(0,Rs.jO)(n);return(0,Oi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,hc.Xf)(n[p]).subscribe((0,ai.x)(i,y=>{s[p]=y,!d&&!c[p]&&(c[p]=!0,(d=c.every(ll.y))&&(c=null))},GC.Z));e.subscribe((0,ai.x)(i,p=>{if(d){const y=[p,...s];i.next(t?t(...y):y)}}))})}(t),(0,Ee.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function Yf(n){return(0,Oi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,ai.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Ee.U)(r=>r.actions))}(n,tI(n,t).pipe(fc((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(yn.iC),valueChanges:(r,s)=>cb(n,r,e).pipe((0,Ee.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),yn.iC)}}(s,this)}object(e){return function sI(n,t){return{query:n,snapshotChanges:()=>ub(n,t.schedulers.outsideAngular)().pipe(yn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>ub(n,t.schedulers.outsideAngular)().pipe(yn.iC,(0,Ee.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ab(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi.Dh),o.LFG(Pi.xv,8),o.LFG(oI,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(yn.HU),o.LFG(aI,8),o.LFG(ng,8),o.LFG(Vc,8),o.LFG(U_,8),o.LFG(nb,8),o.LFG(QE,8),o.LFG(H_,8),o.LFG(tg,8),o.LFG(eg,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lI=(()=>{class n{constructor(){tb.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[G_]}),n})();class qh{constructor(t){this.db=t,this.dbPath="/packing",this.packingLists=t.list(this.dbPath)}getAll(){return this.packingLists}create(t){return this.packingLists.push(t)}update(t,e){return this.packingLists.update(t,e)}delete(t){return this.packingLists.remove(t)}deleteAll(){return this.packingLists.remove()}}qh.\u0275fac=function(t){return new(t||qh)(o.LFG(G_))},qh.\u0275prov=o.Yz7({token:qh,factory:qh.\u0275fac,providedIn:"root"});let X=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var c=0;c<r.length;c++){if(r[c]==e)return s;r[c].attributes&&r[c].attributes[i]&&1==r[c].nodeType&&s++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",s=!0){e&&i&&(s&&(e.style.minWidth||(e.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=z=>{if(z)return"relative"===getComputedStyle(z).getPropertyValue("position")?z:r(z.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),c=i.offsetHeight,d=i.getBoundingClientRect(),p=this.getWindowScrollTop(),y=this.getWindowScrollLeft(),b=this.getViewport(),M=r(e)?.getBoundingClientRect()||{top:-1*p,left:-1*y};let P,F;d.top+c+s.height>b.height?(P=d.top-M.top-s.height,e.style.transformOrigin="bottom",d.top+P<0&&(P=-1*d.top)):(P=c+d.top-M.top,e.style.transformOrigin="top"),F=s.width>b.width?-1*(d.left-M.left):d.left-M.left+s.width>b.width?-1*(d.left-M.left+s.width-b.width):d.left-M.left,e.style.top=P+"px",e.style.left=F+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,c=r.width,d=i.offsetHeight,p=i.offsetWidth,y=i.getBoundingClientRect(),b=this.getWindowScrollTop(),E=this.getWindowScrollLeft(),M=this.getViewport();let P,F;y.top+d+s>M.height?(P=y.top+b-s,e.style.transformOrigin="bottom",P<0&&(P=b)):(P=d+y.top+b,e.style.transformOrigin="top"),F=y.left+c>M.width?Math.max(0,y.left+E+p-c):y.left+E,e.style.top=P+"px",e.style.left=F+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,c=d=>{let p=window.getComputedStyle(d,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let d of r){let p=1===d.nodeType&&d.dataset.scrollselectors;if(p){let y=p.split(",");for(let b of y){let E=this.findSingle(d,b);E&&c(E)&&i.push(E)}}9!==d.nodeType&&c(d)&&i.push(d)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,c=getComputedStyle(e).getPropertyValue("paddingTop"),d=c?parseFloat(c):0,p=e.getBoundingClientRect(),b=i.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-d,E=e.scrollTop,M=e.clientHeight,P=this.getOuterHeight(i);b<0?e.scrollTop=E+b:b+P>M&&(e.scrollTop=E+b-M+P)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,c=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}static fadeOut(e,i){var r=1,d=50/i;let p=setInterval(()=>{(r-=d)<=0&&(r=0,clearInterval(p)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(c){return-1!==[].indexOf.call(document.querySelectorAll(c),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)(s.offsetWidth||s.offsetHeight||s.getClientRects().length)&&r.push(s);return r}static getNextFocusableElement(e,i=!1){const r=n.getFocusableElements(e);let s=0;if(r&&r.length>0){const c=r.indexOf(r[0].ownerDocument.activeElement);i?s=-1==c||0===c?r.length-1:c-1:-1!=c&&c!==r.length-1&&(s=c+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const c=(d=e)&&d.constructor&&d.call&&d.apply?e():e;return c&&9===c.nodeType||this.isExist(c)?c:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class Cd{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=X.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let Bc=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(X.removeClass(i,"p-ink-active"),!X.getHeight(i)&&!X.getWidth(i)){let d=Math.max(X.getOuterWidth(this.el.nativeElement),X.getOuterHeight(this.el.nativeElement));i.style.height=d+"px",i.style.width=d+"px"}let r=X.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-X.getWidth(i)/2,c=e.pageY-r.top+document.body.scrollLeft-X.getHeight(i)/2;i.style.top=c+"px",i.style.left=s+"px",X.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&X.removeClass(d,"p-ink-active")},401)}getInk(){const e=this.el.nativeElement.children;for(let i=0;i<e.length;i++)if("string"==typeof e[i].className&&-1!==e[i].className.indexOf("p-ink"))return e[i];return null}resetInk(){let e=this.getInk();e&&X.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),X.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),X.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(k,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),xl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();const{isArray:cI}=Array,{getPrototypeOf:uI,prototype:dI,keys:hI}=Object;function fI(n){if(1===n.length){const t=n[0];if(cI(t))return{args:t,keys:null};if(function fN(n){return n&&"object"==typeof n&&uI(n)===dI}(t)){const e=hI(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:yA}=Array;function gI(n){return(0,Ee.U)(t=>function pI(n,t){return yA(t)?n(...t):n(t)}(n,t))}function mI(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}let Wh=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Td=(()=>{class n extends Wh{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Li=new o.OlP("NgValueAccessor"),db={provide:Li,useExisting:(0,o.Gpc)(()=>Kh),multi:!0},wA=new o.OlP("CompositionEventMode");let Kh=(()=>{class n extends Wh{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rg(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(wA,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([db]),o.qOj]}),n})();const Vr=new o.OlP("NgValidators"),Uc=new o.OlP("NgAsyncValidators");function $_(n){return function zo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function K_(n){return null}function wI(n){return null!=n}function bI(n){return(0,o.QGY)(n)?(0,an.D)(n):n}function pb(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Z_(n,t){return t.map(e=>e(n))}function gb(n){return n.map(t=>function CI(n){return!n.validate}(t)?t:e=>t.validate(e))}function Y_(n){return null!=n?function mb(n){if(!n)return null;const t=n.filter(wI);return 0==t.length?null:function(e){return pb(Z_(e,t))}}(gb(n)):null}function Q_(n){return null!=n?function TI(n){if(!n)return null;const t=n.filter(wI);return 0==t.length?null:function(e){return function vA(...n){const t=(0,Rs.jO)(n),{args:e,keys:i}=fI(n),r=new Ki.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,y=c;for(let b=0;b<c;b++){let E=!1;(0,hc.Xf)(e[b]).subscribe((0,ai.x)(s,M=>{E||(E=!0,y--),d[b]=M},()=>p--,void 0,()=>{(!p||!E)&&(y||s.next(i?mI(i,d):d),s.complete())}))}});return t?r.pipe(gI(t)):r}(Z_(e,t).map(bI)).pipe((0,Ee.U)(pb))}}(gb(n)):null}function _b(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function J_(n){return n?Array.isArray(n)?n:[n]:[]}function fr(n,t){return Array.isArray(n)?n.includes(t):n===t}function Ed(n,t){const e=J_(t);return J_(n).forEach(r=>{fr(e,r)||e.push(r)}),e}function II(n,t){return J_(t).filter(e=>!fr(n,e))}class SI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Y_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Q_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ys extends SI{get formDirective(){return null}get path(){return null}}class Id extends SI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let og=(()=>{class n extends vb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Id,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),ag=(()=>{class n extends vb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ys,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const ey="VALID",ty="INVALID",ug="PENDING",dg="DISABLED";function Eb(n){return(iy(n)?n.validators:n)||null}function ny(n,t){return(iy(t)?t.asyncValidators:n)||null}function iy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class kI{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ey}get invalid(){return this.status===ty}get pending(){return this.status==ug}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ed(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ed(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(II(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(II(t,this._rawAsyncValidators))}hasValidator(t){return fr(this._rawValidators,t)}hasAsyncValidator(t){return fr(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ug,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=dg,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ey,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ey||this.status===ug)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:ey}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ug,this._hasOwnPendingAsyncValidator=!0;const e=bI(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?ty:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ug)?ug:this._anyControlsHaveStatus(ty)?ty:ey}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){iy(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function kA(n){return Array.isArray(n)?Y_(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function MI(n){return Array.isArray(n)?Q_(n):n||null}(this._rawAsyncValidators)}}class Db extends kI{constructor(t,e,i){super(Eb(e),ny(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Sb(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new o.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function Ib(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[e])throw new o.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Sd=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>hg}),hg="always";function fg(n,t,e=hg){OI(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function mN(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&PA(n,t)})}(n,t),function yN(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function _N(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&PA(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function gN(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function pg(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function OI(n,t){const e=function EI(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(_b(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function yb(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(_b(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();pg(t._rawValidators,r),pg(t._rawAsyncValidators,r)}function PA(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const VA={provide:ys,useExisting:(0,o.Gpc)(()=>mg)},gg=(()=>Promise.resolve())();let mg=(()=>{class n extends ys{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new Db({},Y_(e),Q_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){gg.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),fg(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){gg.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){gg.then(()=>{const i=this._findContainer(e.path),r=new Db({});(function NA(n,t){OI(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){gg.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){gg.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function kb(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Vr,10),o.Y36(Uc,10),o.Y36(Sd,8))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([VA]),o.qOj]}),n})();function _g(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function LI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const BA=class extends kI{constructor(t=null,e,i){super(Eb(e),ny(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iy(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=LI(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){_g(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){_g(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){LI(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},TN={provide:Id,useExisting:(0,o.Gpc)(()=>Dd)},uo=(()=>Promise.resolve())();let Dd=(()=>{class n extends Id{constructor(e,i,r,s,c,d){super(),this._changeDetectorRef=c,this.callSetDisabledState=d,this.control=new BA,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Rb(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Kh?e=s:function Mb(n){return Object.getPrototypeOf(n.constructor)===Td}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function NI(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){uo.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,o.D6c)(i);uo.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function ry(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ys,9),o.Y36(Vr,10),o.Y36(Uc,10),o.Y36(Li,10),o.Y36(o.sBO,8),o.Y36(Sd,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([TN]),o.qOj,o.TTD]}),n})(),yg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),oy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const ay=new o.OlP("NgModelWithFormControlWarning");let Hc=(()=>{class n{constructor(){this._validator=K_}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):K_,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const cy={provide:Vr,useExisting:(0,o.Gpc)(()=>vg),multi:!0};let vg=(()=>{class n extends Hc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=e=>$_}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([cy]),o.qOj]}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[oy]}),n})(),xd=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Sd,useValue:e.callSetDisabledState??hg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[tM]}),n})(),Kb=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ay,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Sd,useValue:e.callSetDisabledState??hg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[tM]}),n})();const Jh={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let dy=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1,this._internalClasses=Object.values(Jh)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get htmlElement(){return this.el.nativeElement}ngAfterViewInit(){X.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const e=[Jh.button,Jh.component];return this.icon&&!this.label&&ze.isEmpty(this.htmlElement.textContent)&&e.push(Jh.iconOnly),this.loading&&(e.push(Jh.disabled,Jh.loading),!this.icon&&this.label&&e.push(Jh.labelOnly)),e}setStyleClass(){const e=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...e)}createLabel(){if(this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.htmlElement.appendChild(e)}}createIcon(){if(this.icon||this.loading){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&X.addClass(e,i);let r=this.getIconClass();r&&X.addMultipleClasses(e,r),this.htmlElement.insertBefore(e,this.htmlElement.firstChild)}}updateLabel(){let e=X.findSingle(this.htmlElement,".p-button-label");this.label?e?e.textContent=this.label:this.createLabel():e&&this.htmlElement.removeChild(e)}updateIcon(){let e=X.findSingle(this.htmlElement,".p-button-icon");this.icon||this.loading?e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():e&&this.htmlElement.removeChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),Xh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,xl]}),n})(),QI=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Dd,8),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onInput(s)}),2&e&&o.ekj("p-filled",i.filled)}}),n})(),wg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();class Qb{}class JI{}const Oa="*";function XI(n,t){return{type:7,name:n,definitions:t,options:{}}}function ef(n,t=null){return{type:4,styles:t,timings:n}}function hy(n,t=null){return{type:2,steps:n,options:t}}function Al(n){return{type:6,styles:n,offset:null}}function eS(n,t,e){return{type:0,name:n,styles:t,options:e}}function tf(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function nS(n,t=null){return{type:8,animation:n,options:t}}function sM(n,t=null){return{type:10,animation:n,options:t}}function iS(n){Promise.resolve().then(n)}class fy{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){iS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class oM{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?iS(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const NN=["container"],FN=["inputfield"],aM=["contentWrapper"];function LN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",8),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.clear())}),o.qZA()}}function VN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(r){o.CHM(e),o.oxw();const s=o.MAs(1),c=o.oxw();return o.KtG(c.onButtonClick(r,s))}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("icon",e.icon)("disabled",e.disabled),o.uIk("aria-label",e.iconAriaLabel)}}function BN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",4,5),o.NdJ("focus",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onInputFocus(r))})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onInputKeydown(r))})("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onInputClick())})("blur",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onInputBlur(r))})("input",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onUserInput(r))}),o.qZA(),o.YNc(2,LN,1,0,"i",6),o.YNc(3,VN,1,3,"button",7)}if(2&n){const e=o.oxw();o.Tol(e.inputStyleClass),o.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),o.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),o.xp6(2),o.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),o.xp6(1),o.Q6J("ngIf",e.showIcon)}}function UN(n,t){1&n&&o.GkF(0)}function HN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",30),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onPrevButtonClick(r))}),o._UZ(1,"span",31),o.qZA()}}function GN(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.switchToMonthView(r))})("keydown",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onContainerButtonKeydown(r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getMonthName(e.month)," ")}}function a(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.switchToYearView(r))})("keydown",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onContainerButtonKeydown(r))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getYear(e)," ")}}function l(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(5);o.xp6(1),o.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function u(n,t){1&n&&o.GkF(0)}const h=function(n){return{$implicit:n}};function f(n,t){if(1&n&&(o.TgZ(0,"span",34),o.YNc(1,l,2,2,"ng-container",13),o.YNc(2,u,1,0,"ng-container",35),o.qZA()),2&n){const e=o.oxw(4);o.xp6(1),o.Q6J("ngIf",!e.decadeTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",o.VKq(3,h,e.yearPickerValues))}}function m(n,t){if(1&n&&(o.TgZ(0,"th",41)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(5);o.xp6(2),o.Oqu(e.getTranslation("weekHeader"))}}function w(n,t){if(1&n&&(o.TgZ(0,"th",42)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e)}}function T(n,t){if(1&n&&(o.TgZ(0,"td",45)(1,"span",46),o._uU(2),o.qZA()()),2&n){const e=o.oxw().index,i=o.oxw(2).$implicit;o.xp6(2),o.hij(" ",i.weekNumbers[e]," ")}}function I(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.day)}}function x(n,t){1&n&&o.GkF(0)}const R=function(n,t){return{"p-highlight":n,"p-disabled":t}};function B(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"span",48),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw().$implicit,c=o.oxw(6);return o.KtG(c.onDateSelect(r,s))})("keydown",function(r){o.CHM(e);const s=o.oxw().$implicit,c=o.oxw(3).index,d=o.oxw(3);return o.KtG(d.onDateCellKeydown(r,s,c))}),o.YNc(2,I,2,1,"ng-container",13),o.YNc(3,x,1,0,"ng-container",35),o.qZA(),o.BQk()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(6);o.xp6(1),o.Q6J("ngClass",o.WLB(4,R,i.isSelected(e),!e.selectable)),o.xp6(1),o.Q6J("ngIf",!i.dateTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",o.VKq(7,h,e))}}const W=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function ne(n,t){if(1&n&&(o.TgZ(0,"td",47),o.YNc(1,B,4,9,"ng-container",13),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(6);o.Q6J("ngClass",o.WLB(2,W,e.otherMonth,e.today)),o.xp6(1),o.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function be(n,t){if(1&n&&(o.TgZ(0,"tr"),o.YNc(1,T,3,1,"td",43),o.YNc(2,ne,2,5,"td",44),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(5);o.xp6(1),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",e)}}function We(n,t){if(1&n&&(o.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),o.YNc(4,m,3,1,"th",38),o.YNc(5,w,3,1,"th",39),o.qZA()(),o.TgZ(6,"tbody"),o.YNc(7,be,3,2,"tr",40),o.qZA()()()),2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.xp6(4),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",i.weekDays),o.xp6(2),o.Q6J("ngForOf",e.dates)}}function it(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",20)(1,"div",21),o.YNc(2,HN,2,0,"button",22),o.TgZ(3,"div",23),o.YNc(4,GN,2,2,"button",24),o.YNc(5,a,2,2,"button",25),o.YNc(6,f,3,5,"span",26),o.qZA(),o.TgZ(7,"button",27),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onNextButtonClick(r))}),o._UZ(8,"span",28),o.qZA()(),o.YNc(9,We,8,3,"div",29),o.qZA()}if(2&n){const e=t.index,i=o.oxw(3);o.xp6(2),o.Q6J("ngIf",0===e),o.xp6(2),o.Q6J("ngIf","date"===i.currentView),o.xp6(1),o.Q6J("ngIf","year"!==i.currentView),o.xp6(1),o.Q6J("ngIf","year"===i.currentView),o.xp6(1),o.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),o.xp6(2),o.Q6J("ngIf","date"===i.currentView)}}function yt(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",51),o.NdJ("click",function(r){const c=o.CHM(e).index,d=o.oxw(4);return o.KtG(d.onMonthSelect(r,c))})("keydown",function(r){const c=o.CHM(e).index,d=o.oxw(4);return o.KtG(d.onMonthCellKeydown(r,c))}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw(4);o.Q6J("ngClass",o.WLB(2,R,r.isMonthSelected(i),r.isMonthDisabled(i))),o.xp6(1),o.hij(" ",e," ")}}function Nt(n,t){if(1&n&&(o.TgZ(0,"div",49),o.YNc(1,yt,2,5,"span",50),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.monthPickerValues())}}const Fe=function(n){return{"p-highlight":n}};function Yt(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",54),o.NdJ("click",function(r){const c=o.CHM(e).$implicit,d=o.oxw(4);return o.KtG(d.onYearSelect(r,c))})("keydown",function(r){const c=o.CHM(e).$implicit,d=o.oxw(4);return o.KtG(d.onYearCellKeydown(r,c))}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngClass",o.VKq(2,Fe,i.isYearSelected(e))),o.xp6(1),o.hij(" ",e," ")}}function ti(n,t){if(1&n&&(o.TgZ(0,"div",52),o.YNc(1,Yt,2,4,"span",53),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.yearPickerValues())}}function Di(n,t){if(1&n&&(o.ynx(0),o.TgZ(1,"div",16),o.YNc(2,it,10,7,"div",17),o.qZA(),o.YNc(3,Nt,2,1,"div",18),o.YNc(4,ti,2,1,"div",19),o.BQk()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.months),o.xp6(1),o.Q6J("ngIf","month"===e.currentView),o.xp6(1),o.Q6J("ngIf","year"===e.currentView)}}function zN(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function o6(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function a6(n,t){if(1&n&&(o.TgZ(0,"div",60)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(2),o.Oqu(e.timeSeparator)}}function l6(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function c6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",65)(1,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.incrementSecond(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.incrementSecond(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(3);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o.YNc(4,l6,2,0,"ng-container",13),o._uU(5),o.qZA(),o.TgZ(6,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.decrementSecond(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.decrementSecond(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(3);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(7,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Q6J("ngIf",e.currentSecond<10),o.xp6(1),o.Oqu(e.currentSecond)}}function u6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",66)(1,"button",67),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.toggleAMPM(r))}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.TgZ(5,"button",67),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.toggleAMPM(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.toggleAMPM(r))}),o._UZ(6,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Oqu(e.pm?"PM":"AM")}}function d6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.incrementHour(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.incrementHour(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(3,"span",58),o.qZA(),o.TgZ(4,"span"),o.YNc(5,zN,2,0,"ng-container",13),o._uU(6),o.qZA(),o.TgZ(7,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.decrementHour(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.decrementHour(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(8,"span",59),o.qZA()(),o.TgZ(9,"div",60)(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",61)(13,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.incrementMinute(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.incrementMinute(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(14,"span",58),o.qZA(),o.TgZ(15,"span"),o.YNc(16,o6,2,0,"ng-container",13),o._uU(17),o.qZA(),o.TgZ(18,"button",57),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("keydown.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.decrementMinute(r))})("keydown.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.decrementMinute(r))})("mousedown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("keyup.space",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTimePickerElementMouseUp(r))})("mouseleave",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.onTimePickerElementMouseLeave())}),o._UZ(19,"span",59),o.qZA()(),o.YNc(20,a6,3,1,"div",62),o.YNc(21,c6,8,2,"div",63),o.YNc(22,u6,7,1,"div",64),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(5),o.Q6J("ngIf",e.currentHour<10),o.xp6(1),o.Oqu(e.currentHour),o.xp6(5),o.Oqu(e.timeSeparator),o.xp6(5),o.Q6J("ngIf",e.currentMinute<10),o.xp6(1),o.Oqu(e.currentMinute),o.xp6(3),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf","12"==e.hourFormat)}}const $N=function(n){return[n]};function h6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",68)(1,"button",69),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onTodayButtonClick(r))}),o.qZA(),o.TgZ(2,"button",69),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onContainerButtonKeydown(r))})("click",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onClearButtonClick(r))}),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("label",e.getTranslation("today"))("ngClass",o.VKq(4,$N,e.todayButtonStyleClass)),o.xp6(1),o.Q6J("label",e.getTranslation("clear"))("ngClass",o.VKq(6,$N,e.clearButtonStyleClass))}}function f6(n,t){1&n&&o.GkF(0)}const p6=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},jN=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},g6=function(n){return{value:"visibleTouchUI",params:n}},m6=function(n){return{value:"visible",params:n}};function _6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",10,11),o.NdJ("@overlayAnimation.start",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onOverlayAnimationDone(r))})("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onOverlayClick(r))}),o.Hsn(2),o.YNc(3,UN,1,0,"ng-container",12),o.YNc(4,Di,5,3,"ng-container",13),o.YNc(5,d6,23,8,"div",14),o.YNc(6,h6,3,8,"div",15),o.Hsn(7,1),o.YNc(8,f6,1,0,"ng-container",12),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngStyle",e.panelStyle)("ngClass",o.HTZ(11,p6,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?o.VKq(21,g6,o.WLB(18,jN,e.showTransitionOptions,e.hideTransitionOptions)):o.VKq(26,m6,o.WLB(23,jN,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),o.xp6(3),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",!e.timeOnly),o.xp6(1),o.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),o.xp6(1),o.Q6J("ngIf",e.showButtonBar),o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const y6=[[["p-header"]],[["p-footer"]]],v6=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},w6=["p-header","p-footer"],b6={provide:Li,useExisting:(0,o.Gpc)(()=>qN),multi:!0};let qN=(()=>{class n{constructor(e,i,r,s,c,d){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=c,this.overlayService=d,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClose=new o.vpe,this.onSelect=new o.vpe,this.onClear=new o.vpe,this.onInput=new o.vpe,this.onTodayClick=new o.vpe,this.onClearClick=new o.vpe,this.onMonthChange=new o.vpe,this.onYearChange=new o.vpe,this.onClickOutside=new o.vpe,this.onShow=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(p,y){return"12"==this.hourFormat?12===p?y?12:0:y?p+12:p:p}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=uc();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=X.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(et.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,c=i;s>11&&(s=s%11-1,c=i+1),this.months.push(this.createMonth(s,c))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),c=this.getDaysCountInMonth(e,i),d=this.getDaysCountInPrevMonth(e,i),p=1,y=new Date,b=[],E=Math.ceil((c+s)/7);for(let M=0;M<E;M++){let P=[];if(0==M){for(let z=d-s+1;z<=d;z++){let K=this.getPreviousMonthAndYear(e,i);P.push({day:z,month:K.month,year:K.year,otherMonth:!0,today:this.isToday(y,z,K.month,K.year),selectable:this.isSelectable(z,K.month,K.year,!0)})}let F=7-P.length;for(let z=0;z<F;z++)P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)}),p++}else for(let F=0;F<7;F++){if(p>c){let z=this.getNextMonthAndYear(e,i);P.push({day:p-c,month:z.month,year:z.year,otherMonth:!0,today:this.isToday(y,p-c,z.month,z.year),selectable:this.isSelectable(p-c,z.month,z.year,!0)})}else P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)});p++}this.showWeek&&b.push(this.getWeekNumber(new Date(P[0].year,P[0].month,P[0].day))),r.push(P)}return{month:e,year:i,dates:r,weekNumbers:b}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],s=new Date(this.currentYear,e,1);return s>=i&&s<=(r??i)}return!1}isMonthDisabled(e){for(let i=1;i<this.getDaysCountInMonth(e,this.currentYear)+1;i++)if(this.isSelectable(i,e,this.currentYear,!1))return!1;return!0}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let c=new Date(r.year,r.month,r.day);return e.getTime()<=c.getTime()&&i.getTime()>=c.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let c=!0,d=!0,p=!0,y=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(c=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(d=!1),this.disabledDates&&(p=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),c&&d&&p&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let c=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(c)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(X.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,c=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let d=X.index(c),p=c.parentElement.nextElementSibling;p?X.hasClass(p.children[d].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(p.children[d].children[0].tabIndex="0",p.children[d].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let d=X.index(c),p=c.parentElement.previousElementSibling;if(p){let y=p.children[d].children[0];X.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let d=c.previousElementSibling;if(d){let p=d.children[0];X.hasClass(p,"p-disabled")||X.hasClass(p.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let d=c.nextElementSibling;if(d){let p=d.children[0];X.hasClass(p,"p-disabled")?this.navigateToMonth(!1,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=X.index(r);let d=s[40===e.which?c+3:c-3];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,c=X.index(r);let d=s[40===e.which?c+2:c-2];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=X.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),c=s[s.length-1];c.tabIndex="0",c.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=X.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?X.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():X.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=X.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=X.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=X.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),s=X.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&X.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if("year"===this.currentView){let r=X.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),s=X.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(c=>c.tabIndex=-1),i=s||r[0],0===r.length&&X.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if(i=X.findSingle(e,"span.p-highlight"),!i){let r=X.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||X.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||i.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=X.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let c=this.value;const d=this.convertTo24Hour(e,s);this.isRangeSelection()&&(c=this.value[1]||this.value[0]),this.isMultipleSelection()&&(c=this.value[this.value.length-1]);const p=c?c.toDateString():null;return!(this.minDate&&p&&this.minDate.toDateString()===p&&(this.minDate.getHours()>d||this.minDate.getHours()===d&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&p&&this.maxDate.toDateString()===p&&(this.maxDate.getHours()<d||this.maxDate.getHours()===d&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let c=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},c),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let c="12"==this.hourFormat?r.pop():null,d=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,d,c)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&ze.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?_i.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):_i.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&_i.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):X.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=X.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=X.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=X.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",X.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):X.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),X.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),X.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(X.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(X.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||X.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(et.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=b=>{const E=r+1<i.length&&i.charAt(r+1)===b;return E&&r++,E},c=(b,E,M)=>{let P=""+E;if(s(b))for(;P.length<M;)P="0"+P;return P},d=(b,E,M,P)=>s(b)?P[E]:M[E];let p="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||s("'")?p+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":p+=c("d",e.getDate(),2);break;case"D":p+=d("D",e.getDay(),this.getTranslation(et.DAY_NAMES_SHORT),this.getTranslation(et.DAY_NAMES));break;case"o":p+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=c("m",e.getMonth()+1,2);break;case"M":p+=d("M",e.getMonth(),this.getTranslation(et.MONTH_NAMES_SHORT),this.getTranslation(et.MONTH_NAMES));break;case"y":p+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":p+=e.getTime();break;case"!":p+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?p+="'":y=!0;break;default:p+=i.charAt(r)}return p}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),c=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=c<10?"0"+c:c),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),c=parseInt(i[1]),d=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(c)||s>23||c>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(d)||d>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:c,second:d}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,c,F,d=0,p="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,b=-1,E=-1,M=-1,P=!1,z=Le=>{let Ue=r+1<i.length&&i.charAt(r+1)===Le;return Ue&&r++,Ue},K=Le=>{let Ue=z(Le),dt="@"===Le?14:"!"===Le?20:"y"===Le&&Ue?4:"o"===Le?3:2,en=new RegExp("^\\d{"+("y"===Le?dt:1)+","+dt+"}"),Dn=e.substring(d).match(en);if(!Dn)throw"Missing number at position "+d;return d+=Dn[0].length,parseInt(Dn[0],10)},De=(Le,Ue,dt)=>{let ft=-1,en=z(Le)?dt:Ue,Dn=[];for(let fi=0;fi<en.length;fi++)Dn.push([fi,en[fi]]);Dn.sort((fi,qs)=>-(fi[1].length-qs[1].length));for(let fi=0;fi<Dn.length;fi++){let qs=Dn[fi][1];if(e.substr(d,qs.length).toLowerCase()===qs.toLowerCase()){ft=Dn[fi][0],d+=qs.length;break}}if(-1!==ft)return ft+1;throw"Unknown name at position "+d},Be=()=>{if(e.charAt(d)!==i.charAt(r))throw"Unexpected literal at position "+d;d++};for("month"===this.view&&(E=1),r=0;r<i.length;r++)if(P)"'"!==i.charAt(r)||z("'")?Be():P=!1;else switch(i.charAt(r)){case"d":E=K("d");break;case"D":De("D",this.getTranslation(et.DAY_NAMES_SHORT),this.getTranslation(et.DAY_NAMES));break;case"o":M=K("o");break;case"m":b=K("m");break;case"M":b=De("M",this.getTranslation(et.MONTH_NAMES_SHORT),this.getTranslation(et.MONTH_NAMES));break;case"y":y=K("y");break;case"@":F=new Date(K("@")),y=F.getFullYear(),b=F.getMonth()+1,E=F.getDate();break;case"!":F=new Date((K("!")-this.ticksTo1970)/1e4),y=F.getFullYear(),b=F.getMonth()+1,E=F.getDate();break;case"'":z("'")?Be():P=!0;break;default:Be()}if(d<e.length&&(c=e.substr(d),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=p?0:-100)),M>-1)for(b=1,E=M;s=this.getDaysCountInMonth(y,b-1),!(E<=s);)b++,E-=s;if("year"===this.view&&(b=-1===b?1:b,E=-1===E?1:E),F=this.daylightSavingAdjust(new Date(y,b-1,E)),F.getFullYear()!==y||F.getMonth()+1!==b||F.getDate()!==E)throw"Invalid date";return F}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:c}=i[r],d=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${c}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let p=c;p<this.numberOfMonths;p++)d+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${p+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${d}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Cd(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return X.hasClass(e.target,"p-datepicker-prev")||X.hasClass(e.target,"p-datepicker-prev-icon")||X.hasClass(e.target,"p-datepicker-next")||X.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!X.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&_i.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(k),o.Y36(S))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(NN,5),o.Gf(FN,5),o.Gf(aM,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.inputfieldViewChild=r.first),o.iGM(r=o.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[o._Bn([b6])],ngContentSelectors:w6,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(o.F$t(y6),o.TgZ(0,"span",0,1),o.YNc(2,BN,4,17,"ng-template",2),o.YNc(3,_6,9,28,"div",3),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(6,v6,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),o.xp6(2),o.Q6J("ngIf",!i.inline),o.xp6(1),o.Q6J("ngIf",i.inline||i.overlayVisible))},dependencies:[vt,si,An,$n,zn,dy,Bc],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[XI("overlayAnimation",[eS("visibleTouchUI",Al({transform:"translate(-50%,-50%)",opacity:1})),tf("void => visible",[Al({opacity:0,transform:"scaleY(0.8)"}),ef("{{showTransitionParams}}",Al({opacity:1,transform:"*"}))]),tf("visible => void",[ef("{{hideTransitionParams}}",Al({opacity:0}))]),tf("void => visibleTouchUI",[Al({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),ef("{{showTransitionParams}}")]),tf("visibleTouchUI => void",[ef("{{hideTransitionParams}}",Al({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),WN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,Xh,we,xl,Xh,we]}),n})();const C6=["inputtext"];function T6(n,t){1&n&&o.GkF(0)}function E6(n,t){if(1&n&&(o.TgZ(0,"span",12),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(1),o.Oqu(i.field?i.resolveFieldData(e,i.field):e)}}function I6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",13),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw().index,c=o.oxw();return o.KtG(c.removeItem(r,s))}),o.qZA()}}const S6=function(n){return{$implicit:n}};function D6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",7,8),o.NdJ("click",function(r){const c=o.CHM(e).$implicit,d=o.oxw();return o.KtG(d.onItemClick(r,c))}),o.YNc(2,T6,1,0,"ng-container",9),o.YNc(3,E6,2,1,"span",10),o.YNc(4,I6,1,0,"span",11),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw();o.xp6(2),o.Q6J("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",o.VKq(4,S6,e)),o.xp6(1),o.Q6J("ngIf",!i.itemTemplate),o.xp6(1),o.Q6J("ngIf",!i.disabled)}}function x6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li")(1,"i",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clear())}),o.qZA()()}}const A6=function(n,t){return{"p-inputtext p-chips-multiple-container":!0,"p-focus":n,"p-disabled":t}},M6=function(n){return{"p-chips-clearable":n}},k6={provide:Li,useExisting:(0,o.Gpc)(()=>KN),multi:!0};let KN=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.allowDuplicate=!0,this.showClear=!1,this.onAdd=new o.vpe,this.onRemove=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onChipClick=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template}),this.updateFilledState()}onClick(){this.inputViewChild.nativeElement.focus()}onInput(){this.updateFilledState()}onPaste(e){this.disabled||(this.separator&&((e.clipboardData||window.clipboardData).getData("Text").split(this.separator).forEach(r=>{this.addItem(e,r,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(e,i){this.onChipClick.emit({originalEvent:e,value:i})}writeValue(e){this.value=e,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}resolveFieldData(e,i){if(e&&i){if(-1==i.indexOf("."))return e[i];{let c=i.split("."),d=e;for(var r=0,s=c.length;r<s;++r)d=d[c[r]];return d}}return null}onInputFocus(e){this.focus=!0,this.onFocus.emit(e)}onInputBlur(e){this.focus=!1,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(e,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(e)}removeItem(e,i){if(this.disabled)return;let r=this.value[i];this.value=this.value.filter((s,c)=>c!=i),this.onModelChange(this.value),this.onRemove.emit({originalEvent:e,value:r}),this.updateFilledState(),this.updateMaxedOut()}addItem(e,i,r){this.value=this.value||[],i&&i.trim().length&&(this.allowDuplicate||-1===this.value.indexOf(i))&&(this.value=[...this.value,i],this.onModelChange(this.value),this.onAdd.emit({originalEvent:e,value:i})),this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",r&&e.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.onClear.emit()}onKeydown(e){switch(e.which){case 8:if(0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0){this.value=[...this.value];let i=this.value.pop();this.onModelChange(this.value),this.onRemove.emit({originalEvent:e,value:i}),this.updateFilledState()}break;case 13:this.addItem(e,this.inputViewChild.nativeElement.value,!0);break;case 9:this.addOnTab&&""!==this.inputViewChild.nativeElement.value&&this.addItem(e,this.inputViewChild.nativeElement.value,!0);break;default:this.max&&this.value&&this.max===this.value.length?e.preventDefault():this.separator&&(this.separator===e.key||e.key.match(this.separator))&&this.addItem(e,this.inputViewChild.nativeElement.value,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.max&&this.value&&this.max===this.value.length?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-chips"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(C6,5),2&e){let r;o.iGM(r=o.CRH())&&(i.inputViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-chips-clearable",i.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:"disabled",field:"field",placeholder:"placeholder",max:"max",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",allowDuplicate:"allowDuplicate",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:"addOnTab",addOnBlur:"addOnBlur",separator:"separator",showClear:"showClear"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onClear:"onClear"},features:[o._Bn([k6])],decls:7,vars:21,consts:[[3,"ngClass","ngStyle","click"],[3,"ngClass"],["class","p-chips-token",3,"click",4,"ngFor","ngForOf"],[1,"p-chips-input-token",3,"ngClass"],["type","text",3,"disabled","ngStyle","keydown","input","paste","focus","blur"],["inputtext",""],[4,"ngIf"],[1,"p-chips-token",3,"click"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],["class","p-chips-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-chips-token-label"],[1,"p-chips-token-icon","pi","pi-times-circle",3,"click"],[1,"p-chips-clear-icon","pi","pi-times",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return i.onClick()}),o.TgZ(1,"ul",1),o.YNc(2,D6,5,6,"li",2),o.TgZ(3,"li",3)(4,"input",4,5),o.NdJ("keydown",function(s){return i.onKeydown(s)})("input",function(){return i.onInput()})("paste",function(s){return i.onPaste(s)})("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)}),o.qZA()(),o.YNc(6,x6,2,0,"li",6),o.qZA()()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-chips p-component")("ngStyle",i.style),o.xp6(1),o.Q6J("ngClass",o.WLB(16,A6,i.focus,i.disabled)),o.xp6(1),o.Q6J("ngForOf",i.value),o.xp6(1),o.Q6J("ngClass",o.VKq(19,M6,i.showClear&&!i.disabled)),o.xp6(1),o.Tol(i.inputStyleClass),o.Q6J("disabled",i.disabled)("ngStyle",i.inputStyle),o.uIk("id",i.inputId)("placeholder",i.value&&i.value.length?null:i.placeholder)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),o.xp6(2),o.Q6J("ngIf",null!=i.value&&i.filled&&!i.disabled&&i.showClear))},dependencies:[vt,si,An,$n,zn],styles:[".p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),R6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,wg,we,wg,we]}),n})(),O6=(()=>{class n{constructor(e){this.host=e,this.focused=!1}ngAfterViewChecked(){if(!this.focused&&this.autofocus){const e=X.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),n})(),P6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();const N6=["overlay"],F6=["content"];function L6(n,t){1&n&&o.GkF(0)}const V6=function(n,t,e){return{showTransitionParams:n,hideTransitionParams:t,transform:e}},B6=function(n){return{value:"visible",params:n}},U6=function(n){return{mode:n}},H6=function(n){return{$implicit:n}};function G6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1,3),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onOverlayContentAnimationDone(r))}),o.Hsn(2),o.YNc(3,L6,1,0,"ng-container",4),o.qZA()}if(2&n){const e=o.oxw(2);o.Tol(e.contentStyleClass),o.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",o.VKq(11,B6,o.kEZ(7,V6,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),o.xp6(3),o.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",o.VKq(15,H6,o.VKq(13,U6,e.overlayMode)))}}const z6=function(n,t,e,i,r,s,c,d,p,y,b,E,M,P){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":s,"p-overlay-bottom-start":c,"p-overlay-bottom-end":d,"p-overlay-left":p,"p-overlay-left-start":y,"p-overlay-left-end":b,"p-overlay-right":E,"p-overlay-right-start":M,"p-overlay-right-end":P}};function $6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1,2),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onOverlayClick(r))}),o.YNc(2,G6,4,17,"div",0),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.styleClass),o.Q6J("ngStyle",e.style)("ngClass",o.rFY(5,z6,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),o.xp6(2),o.Q6J("ngIf",e.visible)}}const j6=["*"],q6={provide:Li,useExisting:(0,o.Gpc)(()=>lM),multi:!0},W6=nS([Al({transform:"{{transform}}",opacity:0}),ef("{{showTransitionParams}}")]),K6=nS([ef("{{hideTransitionParams}}",Al({transform:"{{transform}}",opacity:0}))]);let lM=(()=>{class n{constructor(e,i,r,s,c,d){this.document=e,this.el=i,this.renderer=r,this.config=s,this.overlayService=c,this.zone=d,this.visibleChange=new o.vpe,this.onBeforeShow=new o.vpe,this.onShow=new o.vpe,this.onBeforeHide=new o.vpe,this.onHide=new o.vpe,this.onAnimationStart=new o.vpe,this.onAnimationDone=new o.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return ze.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return ze.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return ze.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return ze.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return X.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&X.focus(this.targetEl),this.modal&&X.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){this.visible&&(this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&X.focus(this.targetEl),this.modal&&X.removeClass(this.document?.body,"p-overflow-hidden"))}alignOverlay(){!this.modal&&X.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(e){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&_i.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),X.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&X.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),X.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),_i.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Cd(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!X.isTouchDevice()}):!X.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{this.overlayOptions.hideOnEscape&&27===e.keyCode&&(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!X.isTouchDevice()}):!X.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(X.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),_i.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(re),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(k),o.Y36(S),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-overlay"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(N6,5),o.Gf(F6,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.overlayViewChild=r.first),o.iGM(r=o.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[o._Bn([q6])],ngContentSelectors:j6,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,$6,3,20,"div",0)),2&e&&o.Q6J("ngIf",i.modalVisible)},dependencies:[vt,An,$n,zn],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[XI("overlayContentAnimation",[tf(":enter",[sM(W6)]),tf(":leave",[sM(K6)])])]},changeDetection:0}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,we,we]}),n})();const Z6=["element"],Y6=["content"];function Q6(n,t){1&n&&o.GkF(0)}const cM=function(n,t){return{$implicit:n,options:t}};function J6(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Q6,1,0,"ng-container",7),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",o.WLB(2,cM,e.loadedItems,e.getContentOptions()))}}function X6(n,t){1&n&&o.GkF(0)}function eG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,X6,1,0,"ng-container",7),o.BQk()),2&n){const e=t.$implicit,i=t.index,r=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",o.WLB(2,cM,e,r.getOptions(i)))}}const tG=function(n){return{"p-scroller-loading":n}};function nG(n,t){if(1&n&&(o.TgZ(0,"div",8,9),o.YNc(2,eG,2,5,"ng-container",10),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("ngClass",o.VKq(4,tG,e.d_loading))("ngStyle",e.contentStyle),o.xp6(2),o.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function iG(n,t){if(1&n&&o._UZ(0,"div",11),2&n){const e=o.oxw(2);o.Q6J("ngStyle",e.spacerStyle)}}function rG(n,t){1&n&&o.GkF(0)}const sG=function(n){return{numCols:n}},ZN=function(n){return{options:n}};function oG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,rG,1,0,"ng-container",7),o.BQk()),2&n){const e=t.index,i=o.oxw(4);o.xp6(1),o.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",o.VKq(4,ZN,i.getLoaderOptions(e,i.both&&o.VKq(2,sG,i._numItemsInViewport.cols))))}}function aG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,oG,2,6,"ng-container",14),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.loaderArr)}}function lG(n,t){1&n&&o.GkF(0)}const cG=function(){return{styleClass:"p-scroller-loading-icon"}};function uG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,lG,1,0,"ng-container",7),o.BQk()),2&n){const e=o.oxw(4);o.xp6(1),o.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",o.VKq(3,ZN,o.DdM(2,cG)))}}function dG(n,t){1&n&&o._UZ(0,"i",16)}function hG(n,t){if(1&n&&(o.YNc(0,uG,2,5,"ng-container",0),o.YNc(1,dG,1,0,"ng-template",null,15,o.W1O)),2&n){const e=o.MAs(2),i=o.oxw(3);o.Q6J("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}const fG=function(n){return{"p-component-overlay":n}};function pG(n,t){if(1&n&&(o.TgZ(0,"div",12),o.YNc(1,aG,2,1,"ng-container",0),o.YNc(2,hG,3,2,"ng-template",null,13,o.W1O),o.qZA()),2&n){const e=o.MAs(3),i=o.oxw(2);o.Q6J("ngClass",o.VKq(3,fG,!i.loaderTemplate)),o.xp6(1),o.Q6J("ngIf",i.loaderTemplate)("ngIfElse",e)}}const gG=function(n,t,e){return{"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}};function mG(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"div",2,3),o.NdJ("scroll",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onContainerScroll(r))}),o.YNc(3,J6,2,5,"ng-container",0),o.YNc(4,nG,3,6,"ng-template",null,4,o.W1O),o.YNc(6,iG,1,1,"div",5),o.YNc(7,pG,4,5,"div",6),o.qZA(),o.BQk()}if(2&n){const e=o.MAs(5),i=o.oxw();o.xp6(1),o.Tol(i._styleClass),o.Q6J("ngStyle",i._style)("ngClass",o.kEZ(10,gG,i.inline,i.both,i.horizontal)),o.uIk("id",i._id)("tabindex",i.tabindex),o.xp6(2),o.Q6J("ngIf",i.contentTemplate)("ngIfElse",e),o.xp6(3),o.Q6J("ngIf",i._showSpacer),o.xp6(1),o.Q6J("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function _G(n,t){1&n&&o.GkF(0)}const yG=function(n,t){return{rows:n,columns:t}};function vG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,_G,1,0,"ng-container",7),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",o.WLB(5,cM,e.items,o.WLB(2,yG,e._items,e.loadedColumns)))}}function wG(n,t){if(1&n&&(o.Hsn(0),o.YNc(1,vG,2,8,"ng-container",17)),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.contentTemplate)}}const bG=["*"];let uM=(()=>{class n{constructor(e,i){this.cd=e,this.zone=i,this.onLazyLoad=new o.vpe,this.onScroll=new o.vpe,this.onScrollIndexChange=new o.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.isRangeChanged=!1,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading,i=!0),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){X.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=X.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=X.getHeight(this.elementViewChild.nativeElement),this.defaultContentWidth=X.getWidth(this.contentEl),this.defaultContentHeight=X.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||X.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),c=(b=0,E)=>b<=E?0:b,d=(b,E,M)=>b*E+M,p=(b=0,E=0)=>this.scrollTo({left:b,top:E,behavior:i});let y=0;this.both?(y={rows:c(e[0],r[0]),cols:c(e[1],r[1])},p(d(y.cols,this._itemSize[1],s.left),d(y.rows,this._itemSize[0],s.top))):(y=c(e,r),this.horizontal?p(d(y,this._itemSize,s.left),0):p(0,d(y,this._itemSize,s.top))),this.isRangeChanged=this.first!==y,this.first=y}scrollInView(e,i,r="auto"){if(i){const{first:s,viewport:c}=this.getRenderedRange(),d=(b=0,E=0)=>this.scrollTo({left:b,top:E,behavior:r}),y="to-end"===i;if("to-start"===i){if(this.both)c.first.rows-s.rows>e[0]?d(c.first.cols*this._itemSize[1],(c.first.rows-1)*this._itemSize[0]):c.first.cols-s.cols>e[1]&&d((c.first.cols-1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.first-s>e){const b=(c.first-1)*this._itemSize;this.horizontal?d(b,0):d(0,b)}}else if(y)if(this.both)c.last.rows-s.rows<=e[0]+1?d(c.first.cols*this._itemSize[1],(c.first.rows+1)*this._itemSize[0]):c.last.cols-s.cols<=e[1]+1&&d((c.first.cols+1)*this._itemSize[1],c.first.rows*this._itemSize[0]);else if(c.last-s<=e+1){const b=(c.first+1)*this._itemSize;this.horizontal?d(b,0):d(0,b)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,c)=>Math.floor(s/(c||s));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:c}=this.elementViewChild.nativeElement;this.both?(i={rows:e(s,this._itemSize[0]),cols:e(c,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=e(this.horizontal?c:s,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const e=this.getContentPosition(),i=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(y,b)=>Math.ceil(y/(b||y)),c=y=>Math.ceil(y/2),d=this.both?{rows:s(r,this._itemSize[0]),cols:s(i,this._itemSize[1])}:s(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:d,numToleratedItems:this.d_numToleratedItems||(this.both?[c(d.rows),c(d.cols)]:c(d))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(d,p,y,b=!1)=>this.getLast(d+p+(d<y?2:3)*y,b),s=this.first,c=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=c,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:s.cols}:0:s,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";const[e,i]=[X.getWidth(this.contentEl),X.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),i!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");const[r,s]=[X.getWidth(this.elementViewChild.nativeElement),X.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=s<this.defaultHeight?s+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),s=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),c=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:s,bottom:c,x:i+r,y:s+c}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(c,d)=>this.elementViewChild.nativeElement.style[c]=d;this.both||this.horizontal?(s("height",r),s("width",i)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),i=(r,s,c,d=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*c+d+"px"};this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const i=e?e.first:this.first,r=(c,d)=>c*d,s=(c=0,d=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${c}px, ${d}px, 0)`};if(this.both)s(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const c=r(i,this._itemSize);this.horizontal?s(c,0):s(0,c)}}}onScrollPositionChange(e){const i=e.target,r=this.getContentPosition(),s=(K,De)=>K?K>De?K-De:K:0,c=(K,De)=>Math.floor(K/(De||K)),d=(K,De,Be,Le,Ue,dt)=>K<=Ue?Ue:dt?Be-Le-Ue:De+Ue-1,p=(K,De,Be,Le,Ue,dt,ft)=>K<=dt?0:Math.max(0,ft?K<De?Be:K-dt:K>De?Be:K-2*dt),y=(K,De,Be,Le,Ue,dt=!1)=>{let ft=De+Le+2*Ue;return K>=Ue&&(ft+=Ue+1),this.getLast(ft,dt)},b=s(i.scrollTop,r.top),E=s(i.scrollLeft,r.left);let M=this.both?{rows:0,cols:0}:0,P=this.last,F=!1,z=this.lastScrollPos;if(this.both){const K=this.lastScrollPos.top<=b,De=this.lastScrollPos.left<=E;if(!this._appendOnly||this._appendOnly&&(K||De)){const Be={rows:c(b,this._itemSize[0]),cols:c(E,this._itemSize[1])},Le={rows:d(Be.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],K),cols:d(Be.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],De)};M={rows:p(Be.rows,Le.rows,this.first.rows,0,0,this.d_numToleratedItems[0],K),cols:p(Be.cols,Le.cols,this.first.cols,0,0,this.d_numToleratedItems[1],De)},P={rows:y(Be.rows,M.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:y(Be.cols,M.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},F=M.rows!==this.first.rows||P.rows!==this.last.rows||M.cols!==this.first.cols||P.cols!==this.last.cols||this.isRangeChanged,z={top:b,left:E}}}else{const K=this.horizontal?E:b,De=this.lastScrollPos<=K;if(!this._appendOnly||this._appendOnly&&De){const Be=c(K,this._itemSize);M=p(Be,d(Be,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,De),this.first,0,0,this.d_numToleratedItems,De),P=y(Be,M,0,this.numItemsInViewport,this.d_numToleratedItems),F=M!==this.first||P!==this.last||this.isRangeChanged,z=K}}return{first:M,last:P,isRangeChanged:F,scrollPos:z}}onScrollChange(e){const{first:i,last:r,isRangeChanged:s,scrollPos:c}=this.onScrollPositionChange(e);if(s){const d={first:i,last:r};if(this.setContentPosition(d),this.first=i,this.last=r,this.lastScrollPos=c,this.handleEvents("onScrollIndexChange",d),this._lazy&&this.isPageChanged){const p={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==p.first||this.lazyLoadState.last!==p.last)&&this.handleEvents("onLazyLoad",p),this.lazyLoadState=p}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(e);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(X.isVisible(this.elementViewChild?.nativeElement)){const[e,i]=[X.getWidth(this.elementViewChild.nativeElement),X.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.defaultContentWidth=X.getWidth(this.contentEl),this.defaultContentHeight=X.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,i){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...i}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-scroller"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(Z6,5),o.Gf(Y6,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.elementViewChild=r.first),o.iGM(r=o.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[o.TTD],ngContentSelectors:bG,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,i){if(1&e&&(o.F$t(),o.YNc(0,mG,8,14,"ng-container",0),o.YNc(1,wG,2,1,"ng-template",null,1,o.W1O)),2&e){const r=o.MAs(2);o.Q6J("ngIf",!i._disabled)("ngIfElse",r)}},dependencies:[vt,si,An,$n,zn],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),n})(),py=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})(),YN=(()=>{class n{constructor(e,i,r,s,c){this.el=e,this.zone=i,this.config=r,this.renderer=s,this.changeDetector=c,this.escape=!0,this.autoHide=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0,autoHide:!0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){(this.isAutoHide()||!(X.hasClass(e.toElement,"p-tooltip")||X.hasClass(e.toElement,"p-tooltip-arrow")||X.hasClass(e.toElement,"p-tooltip-text")||X.hasClass(e.relatedTarget,"p-tooltip")))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?X.appendChild(this.container,this.el.nativeElement):X.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",i=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),X.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?_i.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&_i.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+X.getWindowScrollLeft(),top:e.top+X.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+X.getOuterWidth(this.el.nativeElement),r=e.top+(X.getOuterHeight(this.el.nativeElement)-X.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-X.getOuterWidth(this.container),r=e.top+(X.getOuterHeight(this.el.nativeElement)-X.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(X.getOuterWidth(this.el.nativeElement)-X.getOuterWidth(this.container))/2,r=e.top-X.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(X.getOuterWidth(this.el.nativeElement)-X.getOuterWidth(this.container))/2,r=e.top+X.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return X.hasClass(e,"p-inputwrapper")?X.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=X.getOuterWidth(this.container),c=X.getOuterHeight(this.container),d=X.getViewport();return r+s>d.width||r<0||i<0||i+c>d.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Cd(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):X.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&_i.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(k),o.Y36(o.Qsj),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[o.TTD]}),n})(),oS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();function CG(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw();let i;o.xp6(1),o.Oqu(null!==(i=e.label)&&void 0!==i?i:"empty")}}function TG(n,t){1&n&&o.GkF(0)}const Jb=function(n){return{height:n}},EG=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},dM=function(n){return{$implicit:n}},IG=["container"],SG=["filter"],DG=["in"],xG=["editableInput"],AG=["items"],MG=["scroller"],kG=["overlay"];function RG(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.label||"empty")}}function OG(n,t){1&n&&o.GkF(0)}const PG=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function NG(n,t){if(1&n&&(o.TgZ(0,"span",14),o.YNc(1,RG,2,1,"ng-container",15),o.YNc(2,OG,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(9,PG,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),o.uIk("id",e.labelId),o.xp6(1),o.Q6J("ngIf",!e.selectedItemTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",o.VKq(11,dM,e.selectedOption))}}const FG=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function LG(n,t){if(1&n&&(o.TgZ(0,"span",17),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(2,FG,null==e.placeholder||0===e.placeholder.length)),o.xp6(1),o.Oqu(e.placeholder||"empty")}}function VG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",18,19),o.NdJ("input",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onEditableInputChange(r))})("focus",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onEditableInputFocus(r))})("blur",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onInputBlur(r))}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("disabled",e.disabled),o.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function BG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",20),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.clear(r))}),o.qZA()}}function UG(n,t){1&n&&o.GkF(0)}function HG(n,t){1&n&&o.GkF(0)}const QN=function(n){return{options:n}};function GG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,HG,1,0,"ng-container",16),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",o.VKq(2,QN,e.filterOptions))}}function zG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",30)(1,"input",31,32),o.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onKeydown(r,!1))})("input",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.onFilterInputChange(r))}),o.qZA(),o._UZ(3,"span",33),o.qZA()}if(2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("value",e.filterValue||""),o.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function $G(n,t){if(1&n&&(o.TgZ(0,"div",27),o.NdJ("click",function(i){return i.stopPropagation()}),o.YNc(1,GG,2,4,"ng-container",28),o.YNc(2,zG,4,4,"ng-template",null,29,o.W1O),o.qZA()),2&n){const e=o.MAs(3),i=o.oxw(2);o.xp6(1),o.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function jG(n,t){1&n&&o.GkF(0)}const JN=function(n,t){return{$implicit:n,options:t}};function qG(n,t){if(1&n&&o.YNc(0,jG,1,0,"ng-container",16),2&n){const e=t.$implicit,i=t.options;o.oxw(2);const r=o.MAs(7);o.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",o.WLB(2,JN,e,i))}}function WG(n,t){1&n&&o.GkF(0)}function KG(n,t){if(1&n&&o.YNc(0,WG,1,0,"ng-container",16),2&n){const e=t.options,i=o.oxw(4);o.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",o.VKq(2,QN,e))}}function ZG(n,t){1&n&&(o.ynx(0),o.YNc(1,KG,1,4,"ng-template",36),o.BQk())}function YG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-scroller",34,35),o.NdJ("onLazyLoad",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onLazyLoad.emit(r))}),o.YNc(2,qG,1,5,"ng-template",13),o.YNc(3,ZG,2,0,"ng-container",15),o.qZA()}if(2&n){const e=o.oxw(2);o.Akn(o.VKq(8,Jb,e.scrollHeight)),o.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),o.xp6(3),o.Q6J("ngIf",e.loaderTemplate)}}function QG(n,t){1&n&&o.GkF(0)}const JG=function(){return{}};function XG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,QG,1,0,"ng-container",16),o.BQk()),2&n){o.oxw();const e=o.MAs(7),i=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",o.WLB(3,JN,i.optionsToDisplay,o.DdM(2,JG)))}}function ez(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(4);o.xp6(1),o.Oqu(i.getOptionGroupLabel(e)||"empty")}}function tz(n,t){1&n&&o.GkF(0)}function nz(n,t){1&n&&o.GkF(0)}const XN=function(n,t){return{$implicit:n,selectedOption:t}};function iz(n,t){if(1&n&&(o.TgZ(0,"li",42),o.YNc(1,ez,2,1,"span",15),o.YNc(2,tz,1,0,"ng-container",16),o.qZA(),o.YNc(3,nz,1,0,"ng-container",16)),2&n){const e=t.$implicit,i=o.oxw(2).options,r=o.MAs(5),s=o.oxw(2);o.Q6J("ngStyle",o.VKq(6,Jb,i.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!s.groupTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",o.VKq(8,dM,e)),o.xp6(1),o.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",o.WLB(10,XN,s.getOptionGroupChildren(e),s.selectedOption))}}function rz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,iz,4,13,"ng-template",41),o.BQk()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e)}}function sz(n,t){1&n&&o.GkF(0)}function oz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,sz,1,0,"ng-container",16),o.BQk()),2&n){const e=o.oxw().$implicit,i=o.MAs(5),r=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.WLB(2,XN,e,r.selectedOption))}}function az(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdownItem",43),o.NdJ("onClick",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onItemClick(r))}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw().selectedOption,r=o.oxw(3);o.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function lz(n,t){1&n&&o.YNc(0,az,1,5,"ng-template",41),2&n&&o.Q6J("ngForOf",t.$implicit)}function cz(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(4);o.xp6(1),o.hij(" ",e.emptyFilterMessageLabel," ")}}function uz(n,t){1&n&&o.GkF(0,null,45)}function dz(n,t){if(1&n&&(o.TgZ(0,"li",44),o.YNc(1,cz,2,1,"ng-container",28),o.YNc(2,uz,2,0,"ng-container",22),o.qZA()),2&n){const e=o.oxw().options,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(4,Jb,e.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function hz(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(4);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function fz(n,t){1&n&&o.GkF(0,null,46)}function pz(n,t){if(1&n&&(o.TgZ(0,"li",44),o.YNc(1,hz,2,1,"ng-container",28),o.YNc(2,fz,2,0,"ng-container",22),o.qZA()),2&n){const e=o.oxw().options,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(4,Jb,e.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),o.xp6(1),o.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function gz(n,t){if(1&n&&(o.TgZ(0,"ul",37,38),o.YNc(2,rz,2,1,"ng-container",15),o.YNc(3,oz,2,5,"ng-container",15),o.YNc(4,lz,1,1,"ng-template",null,39,o.W1O),o.YNc(6,dz,3,6,"li",40),o.YNc(7,pz,3,6,"li",40),o.qZA()),2&n){const e=t.options,i=o.oxw(2);o.Akn(e.contentStyle),o.Q6J("ngClass",e.contentStyleClass),o.uIk("id",i.listId),o.xp6(2),o.Q6J("ngIf",i.group),o.xp6(1),o.Q6J("ngIf",!i.group),o.xp6(3),o.Q6J("ngIf",i.filterValue&&i.isEmpty()),o.xp6(1),o.Q6J("ngIf",!i.filterValue&&i.isEmpty())}}function mz(n,t){1&n&&o.GkF(0)}function _z(n,t){if(1&n&&(o.TgZ(0,"div",21),o.YNc(1,UG,1,0,"ng-container",22),o.YNc(2,$G,4,2,"div",23),o.TgZ(3,"div",24),o.YNc(4,YG,4,10,"p-scroller",25),o.YNc(5,XG,2,6,"ng-container",15),o.YNc(6,gz,8,8,"ng-template",null,26,o.W1O),o.qZA(),o.YNc(8,mz,1,0,"ng-container",22),o.qZA()),2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),o.xp6(1),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",e.filter),o.xp6(1),o.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),o.xp6(1),o.Q6J("ngIf",e.virtualScroll),o.xp6(1),o.Q6J("ngIf",!e.virtualScroll),o.xp6(3),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const yz=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},vz={provide:Li,useExisting:(0,o.Gpc)(()=>hM),multi:!0};let wz=(()=>{class n{constructor(){this.onClick=new o.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"li",0),o.NdJ("click",function(s){return i.onOptionClick(s)}),o.YNc(1,CG,2,1,"span",1),o.YNc(2,TG,1,0,"ng-container",2),o.qZA()),2&e&&(o.Q6J("ngStyle",o.VKq(8,Jb,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",o.WLB(10,EG,i.selected,i.disabled)),o.uIk("aria-label",i.label)("aria-selected",i.selected),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(13,dM,i.option)))},dependencies:[vt,An,$n,zn,Bc],encapsulation:2}),n})(),hM=(()=>{class n{constructor(e,i,r,s,c,d){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=c,this.config=d,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new o.vpe,this.onFilter=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClick=new o.vpe,this.onShow=new o.vpe,this.onHide=new o.vpe,this.onClear=new o.vpe,this.onLazyLoad=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=uc()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&ze.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return"number"==typeof this.selectedOption&&(this.selectedOption=this.selectedOption.toString()),this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(et.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(et.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?ze.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?ze.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?ze.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?ze.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ze.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=X.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,"li.p-highlight");e&&X.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return X.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=X.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller.scrollToIndex(i)}else{let i=X.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let c=this.optionsToDisplay[r.groupIndex-1];c&&(this.selectItem(e,this.getOptionGroupChildren(c)[this.getOptionGroupChildren(c).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let c=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(c).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(c))return c}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||ze.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let c=0;c<i.length&&(r=c,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[c])),-1===s);c++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let c of i)if(s=this.findOption(e,this.getOptionGroupChildren(c),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?X.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():X.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(al),o.Y36(k))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(IG,5),o.Gf(SG,5),o.Gf(DG,5),o.Gf(xG,5),o.Gf(AG,5),o.Gf(MG,5),o.Gf(kG,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.filterViewChild=r.first),o.iGM(r=o.CRH())&&(i.accessibleViewChild=r.first),o.iGM(r=o.CRH())&&(i.editableInputViewChild=r.first),o.iGM(r=o.CRH())&&(i.itemsViewChild=r.first),o.iGM(r=o.CRH())&&(i.scroller=r.first),o.iGM(r=o.CRH())&&(i.overlayViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[o._Bn([vz])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("click",function(s){return i.onMouseclick(s)}),o.TgZ(2,"div",2)(3,"input",3,4),o.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),o.qZA()(),o.YNc(5,NG,3,13,"span",5),o.YNc(6,LG,2,4,"span",6),o.YNc(7,VG,2,4,"input",7),o.YNc(8,BG,1,0,"i",8),o.TgZ(9,"div",9),o._UZ(10,"span",10),o.qZA(),o.TgZ(11,"p-overlay",11,12),o.NdJ("visibleChange",function(s){return i.overlayVisible=s})("onAnimationStart",function(s){return i.onOverlayAnimationStart(s)})("onHide",function(){return i.hide()}),o.YNc(13,_z,9,11,"ng-template",13),o.qZA()()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(27,yz,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),o.xp6(3),o.Q6J("disabled",i.disabled)("autofocus",i.autofocus),o.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("aria-activedescendant",i.overlayVisible?i.labelId:null),o.xp6(2),o.Q6J("ngIf",!i.editable&&null!=i.label),o.xp6(1),o.Q6J("ngIf",!i.editable&&null==i.label),o.xp6(1),o.Q6J("ngIf",i.editable),o.xp6(1),o.Q6J("ngIf",i.isVisibleClearIcon),o.xp6(1),o.uIk("aria-expanded",i.overlayVisible),o.xp6(1),o.Q6J("ngClass",i.dropdownIcon),o.xp6(1),o.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[vt,si,An,$n,zn,lM,ee,YN,uM,O6,wz],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),n})(),aS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,sS,we,oS,xl,py,P6,sS,we,py]}),n})();const bz=["input"];function Cz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",6),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.clear())}),o.qZA()}}const eF=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},tF=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Tz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",7)(1,"button",8),o.NdJ("mousedown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onUpButtonMouseDown(r))})("mouseup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonMouseUp())})("mouseleave",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonMouseLeave())})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onUpButtonKeyDown(r))})("keyup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonKeyUp())}),o.qZA(),o.TgZ(2,"button",8),o.NdJ("mousedown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onDownButtonMouseDown(r))})("mouseup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonMouseUp())})("mouseleave",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonMouseLeave())})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onDownButtonKeyDown(r))})("keyup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonKeyUp())}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(10,eF))("icon",e.incrementButtonIcon)("disabled",e.disabled),o.xp6(1),o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(11,tF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function Ez(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onUpButtonMouseDown(r))})("mouseup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonMouseUp())})("mouseleave",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonMouseLeave())})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onUpButtonKeyDown(r))})("keyup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onUpButtonKeyUp())}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(5,eF))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Iz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onDownButtonMouseDown(r))})("mouseup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonMouseUp())})("mouseleave",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonMouseLeave())})("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onDownButtonKeyDown(r))})("keyup",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onDownButtonKeyUp())}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(5,tF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const Sz=function(n,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Dz={provide:Li,useExisting:(0,o.Gpc)(()=>fM),multi:!0};let fM=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onKeyDown=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let i=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(e,i,r){if(this.readonly)return;let s=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,i){let r=this.step*i,s=this.parseValue(this.input.nativeElement.value)||0,c=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(c).length||(this.updateInput(c,null,"spin",null),this.updateModel(e,c),this.handleOnInput(e,s,c))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let i=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,c=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(i-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(i))||e.preventDefault();break;case 13:c=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(c),this.input.nativeElement.setAttribute("aria-valuenow",c),this.updateModel(e,c);break;case 8:if(e.preventDefault(),i===r){const d=s.charAt(i-1),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(d)){const b=this.getDecimalLength(s);if(this._group.test(d))this._group.lastIndex=0,c=s.slice(0,i-2)+s.slice(i-1);else if(this._decimal.test(d))this._decimal.lastIndex=0,b?this.input.nativeElement.setSelectionRange(i-1,i-1):c=s.slice(0,i-1)+s.slice(i);else if(p>0&&i>p){const E=this.isDecimalMode()&&(this.minFractionDigits||0)<b?"":"0";c=s.slice(0,i-1)+E+s.slice(i)}else 1===y?(c=s.slice(0,i-1)+"0"+s.slice(i),c=this.parseValue(c)>0?c:""):c=s.slice(0,i-1)+s.slice(i)}this.updateValue(e,c,null,"delete-single")}else c=this.deleteRange(s,i,r),this.updateValue(e,c,null,"delete-range");break;case 46:if(e.preventDefault(),i===r){const d=s.charAt(i),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(d)){const b=this.getDecimalLength(s);if(this._group.test(d))this._group.lastIndex=0,c=s.slice(0,i)+s.slice(i+2);else if(this._decimal.test(d))this._decimal.lastIndex=0,b?this.input.nativeElement.setSelectionRange(i+1,i+1):c=s.slice(0,i)+s.slice(i+1);else if(p>0&&i>p){const E=this.isDecimalMode()&&(this.minFractionDigits||0)<b?"":"0";c=s.slice(0,i)+E+s.slice(i+1)}else 1===y?(c=s.slice(0,i)+"0"+s.slice(i+1),c=this.parseValue(c)>0?c:""):c=s.slice(0,i)+s.slice(i+1)}this.updateValue(e,c,null,"delete-back-single")}else c=this.deleteRange(s,i,r),this.updateValue(e,c,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let i=e.which||e.keyCode,r=String.fromCharCode(i);const s=this.isDecimalSign(r),c=this.isMinusSign(r);13!=i&&e.preventDefault(),(48<=i&&i<=57||c||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:c})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("Text");if(i){let r=this.parseValue(i);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const i=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const c=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:c}}insert(e,i,r={isDecimalSign:!1,isMinusSign:!1}){const s=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let c=this.input.nativeElement.selectionStart,d=this.input.nativeElement.selectionEnd,p=this.input.nativeElement.value.trim();const{decimalCharIndex:y,minusCharIndex:b,suffixCharIndex:E,currencyCharIndex:M}=this.getCharIndexes(p);let P;if(r.isMinusSign)0===c&&(P=p,(-1===b||0!==d)&&(P=this.insertText(p,i,0,d)),this.updateValue(e,P,i,"insert"));else if(r.isDecimalSign)y>0&&c===y?this.updateValue(e,p,i,"insert"):(y>c&&y<d||-1===y&&this.maxFractionDigits)&&(P=this.insertText(p,i,c,d),this.updateValue(e,P,i,"insert"));else{const F=this.numberFormat.resolvedOptions().maximumFractionDigits,z=c!==d?"range-insert":"insert";if(y>0&&c>y){if(c+i.length-(y+1)<=F){const K=M>=c?M-1:E>=c?E:p.length;P=p.slice(0,c)+i+p.slice(c+i.length,K)+p.slice(K),this.updateValue(e,P,i,z)}}else P=this.insertText(p,i,c,d),this.updateValue(e,P,i,z)}}insertText(e,i,r,s){if(2===("."===i?i:i.split(".")).length){const d=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,d>0?e.slice(0,r)+this.formatValue(i)+e.slice(s):e||this.formatValue(i)}return s-r===e.length?this.formatValue(i):0===r?i+e.slice(s):s===e.length?e.slice(0,r)+i:e.slice(0,r)+i+e.slice(s)}deleteRange(e,i,r){let s;return s=r-i===e.length?"":0===i?e.slice(r):r===e.length?e.slice(0,i):e.slice(0,i)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,i=this.input.nativeElement.value,r=i.length,s=null,c=(this.prefixChar||"").length;i=i.replace(this._prefix,""),e-=c;let d=i.charAt(e);if(this.isNumeralChar(d))return e+c;let p=e-1;for(;p>=0;){if(d=i.charAt(p),this.isNumeralChar(d)){s=p+c;break}p--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(p=e;p<r;){if(d=i.charAt(p),this.isNumeralChar(d)){s=p+c;break}p++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){!this.readonly&&this.input.nativeElement.value!==X.getSelection()&&this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,i,r,s){let c=this.input.nativeElement.value,d=null;null!=i&&(d=this.parseValue(i),d=d||this.allowEmpty?d:0,this.updateInput(d,r,s,i),this.handleOnInput(e,c,d))}handleOnInput(e,i,r){this.isValueChanged(i,r)&&this.onInput.emit({originalEvent:e,value:r,formattedValue:i})}isValueChanged(e,i){return null===i&&null!==e||null!=i&&i!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,i,r,s){i=i||"";let c=this.input.nativeElement.value,d=this.formatValue(e),p=c.length;if(d!==s&&(d=this.concatValues(d,s)),0===p){this.input.nativeElement.value=d,this.input.nativeElement.setSelectionRange(0,0);const b=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(b,b)}else{let y=this.input.nativeElement.selectionStart,b=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<d.length)return;this.input.nativeElement.value=d;let E=d.length;if("range-insert"===r){const M=this.parseValue((c||"").slice(0,y)),F=(null!==M?M.toString():"").split("").join(`(${this.groupChar})?`),z=new RegExp(F,"g");z.test(d);const K=i.split("").join(`(${this.groupChar})?`),De=new RegExp(K,"g");De.test(d.slice(z.lastIndex)),b=z.lastIndex+De.lastIndex,this.input.nativeElement.setSelectionRange(b,b)}else if(E===p)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(b+1,b+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(b-1,b-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(b,b);else if("delete-back-single"===r){let M=c.charAt(b-1),P=c.charAt(b),F=p-E,z=this._group.test(P);z&&1===F?b+=1:!z&&this.isNumeralChar(M)&&(b+=-1*F+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(b,b)}else if("-"===c&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const P=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(P,P)}else b+=E-p,this.input.nativeElement.setSelectionRange(b,b)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,i){if(e&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?e.replace(this.suffixChar,"").split(this._decimal)[0]+i.replace(this.suffixChar,"").slice(r)+this.suffixChar:-1!==r?e.split(this._decimal)[0]+i.slice(r):e}return e}getDecimalLength(e){if(e){const i=e.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(e,i),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,i){this.value!==i&&(this.value=i,this.onModelChange(i)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-inputNumber"]],viewQuery:function(e,i){if(1&e&&o.Gf(bz,5),2&e){let r;o.iGM(r=o.CRH())&&(i.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputnumber-clearable",i.showClear&&"vertical"!=i.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[o._Bn([Dz]),o.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","tabindex","-1",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","-1",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,i){1&e&&(o.TgZ(0,"span",0)(1,"input",1,2),o.NdJ("input",function(s){return i.onUserInput(s)})("keydown",function(s){return i.onInputKeyDown(s)})("keypress",function(s){return i.onInputKeyPress(s)})("paste",function(s){return i.onPaste(s)})("click",function(){return i.onInputClick()})("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)}),o.qZA(),o.YNc(3,Cz,1,0,"i",3),o.YNc(4,Tz,3,12,"span",4),o.YNc(5,Ez,1,6,"button",5),o.YNc(6,Iz,1,6,"button",5),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.kEZ(28,Sz,i.showButtons&&"stacked"===i.buttonLayout,i.showButtons&&"horizontal"===i.buttonLayout,i.showButtons&&"vertical"===i.buttonLayout))("ngStyle",i.style),o.xp6(1),o.Tol(i.inputStyleClass),o.Q6J("ngClass","p-inputnumber-input")("ngStyle",i.inputStyle)("value",i.formattedValue())("disabled",i.disabled)("readonly",i.readonly),o.uIk("placeholder",i.placeholder)("title",i.title)("id",i.inputId)("size",i.size)("name",i.name)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required)("min",i.min)("max",i.max),o.xp6(2),o.Q6J("ngIf","vertical"!=i.buttonLayout&&i.showClear&&i.value),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"===i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout))},dependencies:[vt,An,zn,QI,dy],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),lS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,wg,Xh]}),n})();function xz(n,t){1&n&&o.GkF(0)}const pM=function(n){return{$implicit:n}};function Az(n,t){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,xz,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",o.VKq(2,pM,e.paginatorState))}}function Mz(n,t){if(1&n&&(o.TgZ(0,"span",17),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.currentPageReport)}}const cS=function(n){return{"p-disabled":n}};function kz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.changePageToFirst(r))}),o._UZ(1,"span",19),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(2,cS,e.isFirstPage()||e.empty()))}}const Rz=function(n){return{"p-highlight":n}};function Oz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(r){const c=o.CHM(e).$implicit,d=o.oxw(3);return o.KtG(d.onPageLinkClick(r,c-1))}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(3);o.Q6J("ngClass",o.VKq(2,Rz,e-1==i.getPage())),o.xp6(1),o.hij(" ",e," ")}}function Pz(n,t){if(1&n&&(o.TgZ(0,"span",20),o.YNc(1,Oz,2,4,"button",21),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.pageLinks)}}function Nz(n,t){if(1&n&&o._uU(0),2&n){const e=o.oxw(3);o.Oqu(e.currentPageReport)}}function Fz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",23),o.NdJ("onChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onPageDropdownChange(r))}),o.YNc(1,Nz,1,1,"ng-template",24),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Lz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.changePageToLast(r))}),o._UZ(1,"span",26),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(2,cS,e.isLastPage()||e.empty()))}}function Vz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-inputNumber",27),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.changePage(r-1))}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("ngModel",e.currentPage())("disabled",e.empty())}}function Bz(n,t){1&n&&o.GkF(0)}function Uz(n,t){if(1&n&&o.YNc(0,Bz,1,0,"ng-container",16),2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngTemplateOutlet",i.dropdownItemTemplate)("ngTemplateOutletContext",o.VKq(2,pM,e))}}function Hz(n,t){1&n&&(o.ynx(0),o.YNc(1,Uz,1,4,"ng-template",30),o.BQk())}function Gz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",28),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.rows=r)})("onChange",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onRppChange(r))}),o.YNc(1,Hz,2,0,"ng-container",29),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),o.xp6(1),o.Q6J("ngIf",e.dropdownItemTemplate)}}function zz(n,t){1&n&&o.GkF(0)}function $z(n,t){if(1&n&&(o.TgZ(0,"div",31),o.YNc(1,zz,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",o.VKq(2,pM,e.paginatorState))}}function jz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o.YNc(1,Az,2,4,"div",2),o.YNc(2,Mz,2,1,"span",3),o.YNc(3,kz,2,4,"button",4),o.TgZ(4,"button",5),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.changePageToPrev(r))}),o._UZ(5,"span",6),o.qZA(),o.YNc(6,Pz,2,1,"span",7),o.YNc(7,Fz,2,5,"p-dropdown",8),o.TgZ(8,"button",9),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.changePageToNext(r))}),o._UZ(9,"span",10),o.qZA(),o.YNc(10,Lz,2,4,"button",11),o.YNc(11,Vz,1,2,"p-inputNumber",12),o.YNc(12,Gz,2,6,"p-dropdown",13),o.YNc(13,$z,2,4,"div",14),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.styleClass),o.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),o.xp6(1),o.Q6J("ngIf",e.templateLeft),o.xp6(1),o.Q6J("ngIf",e.showCurrentPageReport),o.xp6(1),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(17,cS,e.isFirstPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showPageLinks),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageDropdown),o.xp6(1),o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(19,cS,e.isLastPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageInput),o.xp6(1),o.Q6J("ngIf",e.rowsPerPageOptions),o.xp6(1),o.Q6J("ngIf",e.templateRight)}}let qz=(()=>{class n{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new o.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),i=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-i/2)),s=Math.min(e-1,r+i-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var i=this.getPageCount();if(e>=0&&e<i){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:i};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,i){this.changePage(i),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[o.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,i){1&e&&o.YNc(0,jz,14,21,"div",0),2&e&&o.Q6J("ngIf",!!i.alwaysShow||i.pageLinks&&i.pageLinks.length>1)},dependencies:[vt,si,An,$n,zn,hM,ee,fM,og,Dd,Bc],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),Wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,aS,lS,xd,we,xl,aS,lS,xd,we]}),n})();function Kz(n,t){if(1&n&&o._UZ(0,"span",8),2&n){const e=o.oxw(2).$implicit;o.Tol(e.icon),o.Q6J("ngClass","p-button-icon p-button-icon-left")}}function Zz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Kz,1,3,"span",6),o.TgZ(2,"span",7),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngIf",e.icon),o.xp6(2),o.Oqu(i.getOptionLabel(e))}}function Yz(n,t){1&n&&o.GkF(0)}const Qz=function(n,t){return{$implicit:n,index:t}};function Jz(n,t){if(1&n&&o.YNc(0,Yz,1,0,"ng-container",9),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw();o.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",o.WLB(2,Qz,i,r))}}const Xz=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-button-icon-only":e}};function e$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2,3),o.NdJ("click",function(r){const s=o.CHM(e),c=s.$implicit,d=s.index,p=o.oxw();return o.KtG(p.onItemClick(r,c,d))})("keydown.enter",function(r){const s=o.CHM(e),c=s.$implicit,d=s.index,p=o.oxw();return o.KtG(p.onItemClick(r,c,d))})("blur",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.onBlur())}),o.YNc(2,Zz,4,2,"ng-container",4),o.YNc(3,Jz,1,5,"ng-template",null,5,o.W1O),o.qZA()}if(2&n){const e=t.$implicit,i=o.MAs(4),r=o.oxw();o.Tol(e.styleClass),o.Q6J("ngClass",o.kEZ(10,Xz,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),o.uIk("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),o.xp6(2),o.Q6J("ngIf",!r.itemTemplate)("ngIfElse",i)}}const t$={provide:Li,useExisting:(0,o.Gpc)(()=>n$),multi:!0};let n$=(()=>{class n{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new o.vpe,this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?ze.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ze.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ze.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,i,r){if(!this.disabled&&!this.isOptionDisabled(i)){if(this.multiple)this.isSelected(i)?this.removeOption(i):this.value=[...this.value||[],this.getOptionValue(i)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(i);this.value!==s&&(this.value=this.getOptionValue(i),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:i,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(i=>!ze.equals(i,this.getOptionValue(e),this.dataKey))}isSelected(e){let i=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value&&this.value instanceof Array)for(let s of this.value)if(ze.equals(s,r,this.dataKey)){i=!0;break}}else i=ze.equals(this.getOptionValue(e),this.value,this.dataKey);return i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-selectButton"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[o._Bn([t$])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,e$,5,14,"div",1),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),o.xp6(1),o.Q6J("ngForOf",i.options))},dependencies:[vt,si,An,$n,zn,Bc],styles:['.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n'],encapsulation:2,changeDetection:0}),n})(),nF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,xl]}),n})();const i$=function(n,t,e){return{"p-checkbox-label-active":n,"p-disabled":t,"p-checkbox-label-focus":e}};function r$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",7),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(),c=o.MAs(3);return o.KtG(s.onClick(r,c))}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("ngClass",o.kEZ(3,i$,null!=e.value,e.disabled,e.focused)),o.uIk("for",e.inputId),o.xp6(1),o.Oqu(e.label)}}const s$=function(n,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":n,"p-checkbox-focused":t}},o$=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-focus":e}},a$={provide:Li,useExisting:(0,o.Gpc)(()=>l$),multi:!0};let l$=(()=>{class n{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,i){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,i.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[o._Bn([a$])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),o.NdJ("keyup",function(c){return i.onKeyup(c)})("keydown",function(c){return i.onKeydown(c)})("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),o.qZA()(),o.TgZ(4,"div",4),o.NdJ("click",function(c){o.CHM(r);const d=o.MAs(3);return o.KtG(i.onClick(c,d))}),o._UZ(5,"span",5),o.qZA()(),o.YNc(6,r$,2,7,"label",6)}2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.WLB(14,s$,i.disabled,i.focused)),o.xp6(2),o.Q6J("name",i.name)("readonly",i.readonly)("disabled",i.disabled),o.uIk("id",i.inputId)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),o.xp6(2),o.Q6J("ngClass",o.kEZ(17,o$,null!=i.value,i.disabled,i.focused)),o.uIk("aria-checked",!0===i.value),o.xp6(1),o.Q6J("ngClass",!0===i.value?i.checkboxTrueIcon:!1===i.value?i.checkboxFalseIcon:""),o.xp6(1),o.Q6J("ngIf",i.label))},dependencies:[vt,An,zn],encapsulation:2,changeDetection:0}),n})(),c$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();const u$=["container"],d$=["resizeHelper"],h$=["reorderIndicatorUp"],f$=["reorderIndicatorDown"],p$=["wrapper"],g$=["table"],m$=["thead"],_$=["tfoot"],y$=["scroller"];function v$(n,t){if(1&n&&(o.TgZ(0,"div",15),o._UZ(1,"i"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function w$(n,t){1&n&&o.GkF(0)}function b$(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,w$,1,0,"ng-container",17),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.captionTemplate)}}function C$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",18),o.NdJ("onPageChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onPageChange(r))}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function T$(n,t){1&n&&o.GkF(0)}const iF=function(n,t){return{$implicit:n,options:t}};function E$(n,t){if(1&n&&o.YNc(0,T$,1,0,"ng-container",22),2&n){const e=t.$implicit,i=t.options;o.oxw(2);const r=o.MAs(10);o.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",o.WLB(2,iF,e,i))}}const I$=function(n){return{height:n}};function S$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-scroller",19,20),o.NdJ("onLazyLoad",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onLazyItemLoad(r))}),o.YNc(2,E$,1,5,"ng-template",21),o.qZA()}if(2&n){const e=o.oxw();o.Akn(o.VKq(15,I$,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),o.Q6J("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("step",e.rows)("delay",e.lazy?e.virtualScrollDelay:0)("inline",!0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)("autoSize",!0)}}function D$(n,t){1&n&&o.GkF(0)}const x$=function(n){return{columns:n}};function A$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,D$,1,0,"ng-container",22),o.BQk()),2&n){const e=o.oxw(),i=o.MAs(10);o.xp6(1),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.WLB(4,iF,e.processedData,o.VKq(2,x$,e.columns)))}}function M$(n,t){1&n&&o.GkF(0)}function k$(n,t){1&n&&o.GkF(0)}function R$(n,t){if(1&n&&o._UZ(0,"tbody",31),2&n){const e=o.oxw().options,i=o.oxw();o.Q6J("value",i.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",i.frozenBodyTemplate)("frozen",!0)}}function O$(n,t){if(1&n&&o._UZ(0,"tbody",32),2&n){const e=o.oxw().options;o.Akn("height: calc("+e.spacerStyle.height+" - "+e.rows.length*e.itemSize+"px);")}}function P$(n,t){1&n&&o.GkF(0)}const Xb=function(n){return{$implicit:n}};function N$(n,t){if(1&n&&(o.TgZ(0,"tfoot",33,34),o.YNc(2,P$,1,0,"ng-container",22),o.qZA()),2&n){const e=o.oxw().options,i=o.oxw();o.xp6(2),o.Q6J("ngTemplateOutlet",i.footerGroupedTemplate||i.footerTemplate)("ngTemplateOutletContext",o.VKq(2,Xb,e.columns))}}const F$=function(n,t,e){return{"p-datatable-table":!0,"p-datatable-scrollable-table":n,"p-datatable-resizable-table":t,"p-datatable-resizable-table-fit":e}};function L$(n,t){if(1&n&&(o.TgZ(0,"table",23,24),o.YNc(2,M$,1,0,"ng-container",22),o.TgZ(3,"thead",25,26),o.YNc(5,k$,1,0,"ng-container",22),o.qZA(),o.YNc(6,R$,1,5,"tbody",27),o._UZ(7,"tbody",28),o.YNc(8,O$,1,2,"tbody",29),o.YNc(9,N$,3,4,"tfoot",30),o.qZA()),2&n){const e=t.options,i=o.oxw();o.Akn(i.tableStyle),o.Tol(i.tableStyleClass),o.Q6J("ngClass",o.kEZ(20,F$,i.scrollable,i.resizableColumns,i.resizableColumns&&"fit"===i.columnResizeMode)),o.uIk("id",i.id+"-table"),o.xp6(2),o.Q6J("ngTemplateOutlet",i.colGroupTemplate)("ngTemplateOutletContext",o.VKq(24,Xb,e.columns)),o.xp6(3),o.Q6J("ngTemplateOutlet",i.headerGroupedTemplate||i.headerTemplate)("ngTemplateOutletContext",o.VKq(26,Xb,e.columns)),o.xp6(1),o.Q6J("ngIf",i.frozenValue||i.frozenBodyTemplate),o.xp6(1),o.Akn(e.contentStyle),o.Q6J("ngClass",e.contentStyleClass)("value",i.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",i.bodyTemplate)("scrollerOptions",e),o.xp6(1),o.Q6J("ngIf",e.spacerStyle),o.xp6(1),o.Q6J("ngIf",i.footerGroupedTemplate||i.footerTemplate)}}function V$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",35),o.NdJ("onPageChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onPageChange(r))}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function B$(n,t){1&n&&o.GkF(0)}function U$(n,t){if(1&n&&(o.TgZ(0,"div",36),o.YNc(1,B$,1,0,"ng-container",17),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function H$(n,t){1&n&&o._UZ(0,"div",37,38)}function G$(n,t){1&n&&o._UZ(0,"span",39,40)}function z$(n,t){1&n&&o._UZ(0,"span",41,42)}const $$=function(n,t,e){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":n,"p-datatable-scrollable":t,"p-datatable-flex-scrollable":e}},j$=function(n){return{maxHeight:n}},q$=["pTableBody",""];function W$(n,t){1&n&&o.GkF(0)}const gM=function(n,t,e,i,r){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r}};function K$(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,W$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.qbA(2,gM,i,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function Z$(n,t){1&n&&o.GkF(0)}function Y$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Z$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",i?s.template:s.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.qbA(2,gM,i,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function Q$(n,t){1&n&&o.GkF(0)}const J$=function(n,t,e,i,r,s,c){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r,rowgroup:s,rowspan:c}};function X$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Q$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",i?s.template:s.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.Hh0(2,J$,i,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen,s.shouldRenderRowspan(s.value,i,r),s.calculateRowGroupSize(s.value,i,r)))}}function ej(n,t){1&n&&o.GkF(0)}function tj(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,ej,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.qbA(2,gM,i,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function nj(n,t){if(1&n&&(o.YNc(0,K$,2,8,"ng-container",2),o.YNc(1,Y$,2,8,"ng-container",0),o.YNc(2,X$,2,10,"ng-container",0),o.YNc(3,tj,2,8,"ng-container",2)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",r.dt.groupHeaderTemplate&&!r.dt.virtualScroll&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),o.xp6(1),o.Q6J("ngIf","rowspan"!==r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf","rowspan"===r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf",r.dt.groupFooterTemplate&&!r.dt.virtualScroll&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,i))}}function ij(n,t){if(1&n&&(o.ynx(0),o.YNc(1,nj,4,4,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function rj(n,t){1&n&&o.GkF(0)}const uS=function(n,t,e,i,r,s){return{$implicit:n,rowIndex:t,columns:e,expanded:i,editing:r,frozen:s}};function sj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,rj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.HTZ(2,uS,i,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function oj(n,t){1&n&&o.GkF(0)}function aj(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,oj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.HTZ(2,uS,i,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function lj(n,t){1&n&&o.GkF(0)}function cj(n,t){1&n&&o.GkF(0)}function uj(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,cj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(2),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.HTZ(2,uS,i,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}const rF=function(n,t,e,i){return{$implicit:n,rowIndex:t,columns:e,frozen:i}};function dj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,lj,1,0,"ng-container",4),o.YNc(2,uj,2,9,"ng-container",2),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",o.l5B(3,rF,i,s.getRowIndex(r),s.columns,s.frozen)),o.xp6(1),o.Q6J("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,i,s.getRowIndex(r)))}}function hj(n,t){if(1&n&&(o.YNc(0,sj,2,9,"ng-container",0),o.YNc(1,aj,2,9,"ng-container",2),o.YNc(2,dj,3,8,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",!r.dt.groupHeaderTemplate),o.xp6(1),o.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(i))),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function fj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,hj,3,3,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function pj(n,t){1&n&&o.GkF(0)}function gj(n,t){1&n&&o.GkF(0)}function mj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,gj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",o.l5B(2,rF,i,s.getRowIndex(r),s.columns,s.frozen))}}function _j(n,t){if(1&n&&(o.YNc(0,pj,1,0,"ng-container",4),o.YNc(1,mj,2,7,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",o.HTZ(3,uS,e,r.getRowIndex(i),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function yj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,_j,2,10,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function vj(n,t){1&n&&o.GkF(0)}const sF=function(n,t){return{$implicit:n,frozen:t}};function wj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,vj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.WLB(2,sF,e.columns,e.frozen))}}function bj(n,t){1&n&&o.GkF(0)}function Cj(n,t){if(1&n&&(o.ynx(0),o.YNc(1,bj,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",o.WLB(2,sF,e.columns,e.frozen))}}function Tj(n,t){if(1&n&&(o.TgZ(0,"span",2),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.getBadgeValue())}}const Ej=function(n,t,e){return{"pi-sort-amount-up-alt":n,"pi-sort-amount-down":t,"pi-sort-alt":e}},oF=function(n,t){return{"p-checkbox-focused":n,"p-checkbox-disabled":t}},Dj=function(n,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":n,"p-focus":t,"p-disabled":e}},aF=function(n){return{"pi pi-check":n}},xj=function(n,t,e){return{"p-checkbox-box":!0,"p-highlight":n,"p-focus":t,"p-disabled":e}};let e0=(()=>{class n{constructor(){this.sortSource=new Kn.x,this.selectionSource=new Kn.x,this.contextMenuSource=new Kn.x,this.valueSource=new Kn.x,this.totalRecordsSource=new Kn.x,this.columnsSource=new Kn.x,this.resetSource=new Kn.x,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),gy=(()=>{class n{constructor(e,i,r,s,c,d){this.el=e,this.zone=i,this.tableService=r,this.cd=s,this.filterService=c,this.overlayService=d,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new o.vpe,this.selectionChange=new o.vpe,this.contextMenuSelectionChange=new o.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(p,y)=>y,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="scroll",this.breakpoint="960px",this.onRowSelect=new o.vpe,this.onRowUnselect=new o.vpe,this.onPage=new o.vpe,this.onSort=new o.vpe,this.onFilter=new o.vpe,this.onLazyLoad=new o.vpe,this.onRowExpand=new o.vpe,this.onRowCollapse=new o.vpe,this.onContextMenuSelect=new o.vpe,this.onColResize=new o.vpe,this.onColReorder=new o.vpe,this.onRowReorder=new o.vpe,this.onEditInit=new o.vpe,this.onEditComplete=new o.vpe,this.onEditCancel=new o.vpe,this.onHeaderCheckboxToggle=new o.vpe,this.sortFunction=new o.vpe,this.firstChange=new o.vpe,this.rowsChange=new o.vpe,this.onStateSave=new o.vpe,this.onStateRestore=new o.vpe,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=uc()}get responsive(){return this._responsive}set responsive(e){this._responsive=e,console.warn("responsive propery is deprecated as table is always responsive with scrollable behavior.")}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const i=e||this.processedData;if(i&&this.paginator){const r=this.lazy?0:this.first;return i.slice(r,r+this.rows)}return i}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ze.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(ze.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let i=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=i.metaKey||i.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,i=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&i){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:i}):(this.value.sort((s,c)=>{let d=ze.resolveFieldData(s,e),p=ze.resolveFieldData(c,e),y=null;return y=null==d&&null!=p?-1:null!=d&&null==p?1:null==d&&null==p?0:"string"==typeof d&&"string"==typeof p?d.localeCompare(p):d<p?-1:d>p?1:0,i*y}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:i};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,i)=>this.multisortField(e,i,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,i,r,s){const c=ze.resolveFieldData(e,r[s].field),d=ze.resolveFieldData(i,r[s].field);return 0===ze.compare(c,d,this.filterLocale)?r.length-1>s?this.multisortField(e,i,r,s+1):0:this.compareValuesOnSort(c,d,r[s].order)}compareValuesOnSort(e,i,r){return ze.sort(e,i,r,this.filterLocale,this.sortOrder)}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field===e)return this.multiSortMeta[i];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let i=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){i=!0;break}return i}}handleRowClick(e){let i=e.originalEvent.target,r=i.nodeName,s=i.parentElement&&i.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!X.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let c=e.rowData,d=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)X.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=d,this.selectRange(e.originalEvent,d);else{let p=this.isSelected(c);if(!p&&!this.isRowSelectable(c,d))return;let y=!this.rowTouched&&this.metaKeySelection,b=this.dataKey?String(ze.resolveFieldData(c,this.dataKey)):null;if(this.anchorRowIndex=d,this.rangeRowIndex=d,y){let E=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(p&&E){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let M=this.findIndexInSelection(c);this._selection=this.selection.filter((P,F)=>F!=M),this.selectionChange.emit(this.selection),b&&delete this.selectionKeys[b]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:c,type:"row"})}else this.isSingleSelectionMode()?(this._selection=c,this.selectionChange.emit(c),b&&(this.selectionKeys={},this.selectionKeys[b]=1)):this.isMultipleSelectionMode()&&(E?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,c],this.selectionChange.emit(this.selection),b&&(this.selectionKeys[b]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:c,type:"row",index:d})}else if("single"===this.selectionMode)p?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:c,type:"row",index:d})):(this._selection=c,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:c,type:"row",index:d}),b&&(this.selectionKeys={},this.selectionKeys[b]=1));else if("multiple"===this.selectionMode)if(p){let E=this.findIndexInSelection(c);this._selection=this.selection.filter((M,P)=>P!=E),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:c,type:"row",index:d}),b&&delete this.selectionKeys[b]}else this._selection=this.selection?[...this.selection,c]:[c],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:c,type:"row",index:d}),b&&(this.selectionKeys[b]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const i=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=i,this.contextMenuSelectionChange.emit(i),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:i,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(i);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(i),c=this.dataKey?String(ze.resolveFieldData(i,this.dataKey)):null;if(!s){if(!this.isRowSelectable(i,r))return;this.isSingleSelectionMode()?(this.selection=i,this.selectionChange.emit(i),c&&(this.selectionKeys={},this.selectionKeys[c]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),c&&(this.selectionKeys[c]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:i,index:e.rowIndex})}}}selectRange(e,i){let r,s;this.anchorRowIndex>i?(r=i,s=this.anchorRowIndex):this.anchorRowIndex<i?(r=this.anchorRowIndex,s=i):(r=i,s=i),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let c=[];for(let d=r;d<=s;d++){let p=this.filteredValue?this.filteredValue[d]:this.value[d];if(!this.isSelected(p)){if(!this.isRowSelectable(p,i))continue;c.push(p),this._selection=[...this.selection,p];let y=this.dataKey?String(ze.resolveFieldData(p,this.dataKey)):null;y&&(this.selectionKeys[y]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:c,type:"row"})}clearSelectionRange(e){let i,r;this.rangeRowIndex>this.anchorRowIndex?(i=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(i=this.rangeRowIndex,r=this.anchorRowIndex):(i=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=i;s<=r;s++){let c=this.value[s],d=this.findIndexInSelection(c);this._selection=this.selection.filter((y,b)=>b!=d);let p=this.dataKey?String(ze.resolveFieldData(c,this.dataKey)):null;p&&delete this.selectionKeys[p],this.onRowUnselect.emit({originalEvent:e,data:c,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ze.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let i=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){i=r;break}return i}isRowSelectable(e,i){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:i}))}toggleRowWithRadio(e,i){if(this.preventSelectionSetterPropagation=!0,this.selection!=i){if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=i,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(ze.resolveFieldData(i,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,i){this.selection=this.selection||[];let r=this.isSelected(i),s=this.dataKey?String(ze.resolveFieldData(i,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let c=this.findIndexInSelection(i);this._selection=this.selection.filter((d,p)=>p!=c),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,i){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:i});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(c=>!r.some(d=>this.equals(c,d))):[];i&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((c,d)=>this.rowSelectable({data:c,index:d})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:i}),this.isStateful()&&this.saveState()}}equals(e,i){return"equals"===this.compareSelectionBy?e===i:ze.equals(e,i,this.dataKey)}filter(e,i,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[i]&&delete this.filters[i]:this.filters[i]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,i){this.filter(e,"global",i)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let i=0;i<this.value.length;i++){let d,r=!0,s=!1,c=!1;for(let p in this.filters)if(this.filters.hasOwnProperty(p)&&"global"!==p){c=!0;let y=p,b=this.filters[y];if(Array.isArray(b)){for(let E of b)if(r=this.executeLocalFilter(y,this.value[i],E),E.operator===Ca.OR&&r||E.operator===Ca.AND&&!r)break}else r=this.executeLocalFilter(y,this.value[i],b);if(!r)break}if(this.filters.global&&!s&&e)for(let p=0;p<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](ze.resolveFieldData(this.value[i],e[p].field||e[p]),this.filters.global.value,this.filterLocale),!s);p++);d=this.filters.global?c?c&&r&&s:s:c&&r,d&&this.filteredValue.push(this.value[i])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,i,r){let s=r.value,c=r.matchMode||Zn.STARTS_WITH,d=ze.resolveFieldData(i,e);return(0,this.filterService.filters[c])(d,s,this.filterLocale)}hasFilter(){let e=!0;for(let i in this.filters)if(this.filters.hasOwnProperty(i)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let i,r="",s=this.columns;e&&e.selectionOnly?i=this.selection||[]:e&&e.allValues?i=this.value||[]:(i=this.filteredValue||this.value,this.frozenValue&&(i=i?[...this.frozenValue,...i]:this.frozenValue));for(let p=0;p<s.length;p++){let y=s[p];!1!==y.exportable&&y.field&&(r+='"'+this.getExportHeader(y)+'"',p<s.length-1&&(r+=this.csvSeparator))}i.forEach((p,y)=>{r+="\n";for(let b=0;b<s.length;b++){let E=s[b];if(!1!==E.exportable&&E.field){let M=ze.resolveFieldData(p,E.field);M=null!=M?this.exportFunction?this.exportFunction({data:M,field:E.field}):String(M).replace(/"/g,'""'):"",r+='"'+M+'"',b<s.length-1&&(r+=this.csvSeparator)}}});let c=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.style.display="none",document.body.appendChild(d),void 0!==d.download?(d.setAttribute("href",URL.createObjectURL(c)),d.setAttribute("download",this.exportFilename+".csv"),d.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(d)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,i,r,s){this.editingCell=e,this.editingCellData=i,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===X.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(X.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let i=String(ze.resolveFieldData(e,this.dataKey));this.editingRowKeys[i]=!0}saveRowEdit(e,i){if(0===X.find(i,".ng-invalid.ng-dirty").length){let r=String(ze.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let i=String(ze.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[i]}toggleRow(e,i){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(ze.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:i,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:i,data:e})),i&&i.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(ze.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(ze.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let i=X.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let i=X.getOffset(this.containerViewChild.nativeElement).left;X.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,"")||15)){if("fit"===this.columnResizeMode){let d=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&d>15&&this.resizeTableCells(r,d)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",X.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,i){let r=X.index(this.resizeColumnElement),s=[];const c=X.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");X.find(c,"tr > th").forEach(y=>s.push(X.getOuterWidth(y))),this.destroyStyleElement(),this.createStyleElement();let p="";s.forEach((y,b)=>{let E=b===r?e:i&&b===r+1?i:y;p+=`\n                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${b+1}),\n                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${b+1}),\n                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${b+1}) {\n                    width: ${E}px !important; max-width: ${E}px !important;\n                }\n            `}),this.styleElement.innerHTML=p}onColumnDragStart(e,i){this.reorderIconWidth=X.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=X.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=i,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,i){if(this.reorderableColumns&&this.draggedColumn&&i){e.preventDefault();let r=X.getOffset(this.containerViewChild.nativeElement),s=X.getOffset(i);if(this.draggedColumn!=i){X.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),X.indexWithinGroup(i,"preorderablecolumn");let p=s.left-r.left,b=s.left+i.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+i.offsetHeight+"px",e.pageX>b?(this.reorderIndicatorUpViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&e.preventDefault()}onColumnDrop(e,i){if(e.preventDefault(),this.draggedColumn){let r=X.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=X.indexWithinGroup(i,"preorderablecolumn"),c=r!=s;c&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(c=!1),c&&s<r&&1===this.dropPosition&&(s+=1),c&&s>r&&-1===this.dropPosition&&(s-=1),c&&(ze.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,i){this.rowDragging=!0,this.draggedRowIndex=i,e.dataTransfer.setData("text","b")}onRowDragOver(e,i,r){if(this.rowDragging&&this.draggedRowIndex!==i){let s=X.getOffset(r).top+X.getWindowScrollTop(),c=e.pageY,d=s+X.getOuterHeight(r)/2,p=r.previousElementSibling;c<d?(X.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=i,p?X.addClass(p,"p-datatable-dragpoint-bottom"):X.addClass(r,"p-datatable-dragpoint-top")):(p?X.removeClass(p,"p-datatable-dragpoint-bottom"):X.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=i+1,X.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,i){let r=i.previousElementSibling;r&&X.removeClass(r,"p-datatable-dragpoint-bottom"),X.removeClass(i,"p-datatable-dragpoint-bottom"),X.removeClass(i,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,i){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;ze.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,i),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let i={};this.paginator&&(i.first=this.first,i.rows=this.rows),this.sortField&&(i.sortField=this.sortField,i.sortOrder=this.sortOrder),this.multiSortMeta&&(i.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(i.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(i),this.reorderableColumns&&this.saveColumnOrder(i),this.selection&&(i.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(i.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(i)),this.onStateSave.emit(i)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const i=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(i){let c=JSON.parse(i,function(c,d){return"string"==typeof d&&r.test(d)?new Date(d):d});this.paginator&&(void 0!==this.first&&(this.first=c.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=c.rows,this.rowsChange.emit(this.rows))),c.sortField&&(this.restoringSort=!0,this._sortField=c.sortField,this._sortOrder=c.sortOrder),c.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=c.multiSortMeta),c.filters&&(this.restoringFilter=!0,this.filters=c.filters),this.resizableColumns&&(this.columnWidthsState=c.columnWidths,this.tableWidthState=c.tableWidth),c.expandedRowKeys&&(this.expandedRowKeys=c.expandedRowKeys),c.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(c.selection)),this.stateRestored=!0,this.onStateRestore.emit(c)}}saveColumnWidths(e){let i=[];X.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>i.push(X.getOuterWidth(s))),e.columnWidths=i.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=X.getOuterWidth(this.tableViewChild.nativeElement))}setResizeTableWidth(e){this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),ze.isNotEmpty(e)){this.createStyleElement();let i="";e.forEach((r,s)=>{i+=`\n                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            width: ${r}px !important; max-width: ${r}px !important\n                        }\n                    `}),this.styleElement.innerHTML=i}}}saveColumnOrder(e){if(this.columns){let i=[];this.columns.map(r=>{i.push(r.field||r.key)}),e.columnOrder=i}}restoreColumnOrder(){const i=this.getStorage().getItem(this.stateKey);if(i){let s=JSON.parse(i).columnOrder;if(s){let c=[];s.map(d=>{let p=this.findColumnByKey(d);p&&c.push(p)}),this.columnOrderStateRestored=!0,this.columns=c}}}findColumnByKey(e){if(!this.columns)return null;for(let i of this.columns)if(i.key===e||i.field===e)return i}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id}-table > .p-datatable-thead > tr > th,\n    #${this.id}-table > .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(e0),o.Y36(o.sBO),o.Y36(al),o.Y36(S))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-table"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,ee,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(u$,5),o.Gf(d$,5),o.Gf(h$,5),o.Gf(f$,5),o.Gf(p$,5),o.Gf(g$,5),o.Gf(m$,5),o.Gf(_$,5),o.Gf(y$,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.resizeHelperViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorUpViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorDownViewChild=r.first),o.iGM(r=o.CRH())&&(i.wrapperViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableHeaderViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableFooterViewChild=r.first),o.iGM(r=o.CRH())&&(i.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[o._Bn([e0]),o.TTD],decls:16,vars:22,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display: none;",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display: none;",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass"],["table",""],[1,"p-datatable-thead"],["thead",""],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-scroller-spacer",3,"style",4,"ngIf"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-scroller-spacer"],[1,"p-datatable-tfoot"],["tfoot",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,v$,2,2,"div",2),o.YNc(3,b$,2,1,"div",3),o.YNc(4,C$,1,17,"p-paginator",4),o.TgZ(5,"div",5,6),o.YNc(7,S$,3,17,"p-scroller",7),o.YNc(8,A$,2,7,"ng-container",8),o.YNc(9,L$,10,28,"ng-template",null,9,o.W1O),o.qZA(),o.YNc(11,V$,1,17,"p-paginator",10),o.YNc(12,U$,2,1,"div",11),o.YNc(13,H$,2,0,"div",12),o.YNc(14,G$,2,0,"span",13),o.YNc(15,z$,2,0,"span",14),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.kEZ(16,$$,i.rowHover||i.selectionMode,i.scrollable,i.scrollable&&"flex"===i.scrollHeight)),o.uIk("id",i.id),o.xp6(2),o.Q6J("ngIf",i.loading&&i.showLoader),o.xp6(1),o.Q6J("ngIf",i.captionTemplate),o.xp6(1),o.Q6J("ngIf",i.paginator&&("top"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngStyle",o.VKq(20,j$,i.virtualScroll?"":i.scrollHeight)),o.xp6(2),o.Q6J("ngIf",i.virtualScroll),o.xp6(1),o.Q6J("ngIf",!i.virtualScroll),o.xp6(3),o.Q6J("ngIf",i.paginator&&("bottom"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngIf",i.summaryTemplate),o.xp6(1),o.Q6J("ngIf",i.resizableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns))},dependencies:function(){return[vt,An,$n,zn,qz,ee,uM,Qj]},styles:[".p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:1}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),n})(),Qj=(()=>{class n{constructor(e,i,r,s){this.dt=e,this.tableService=i,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,i,r){let s=ze.resolveFieldData(i,this.dt.groupRowsBy),c=e[r-1];return!c||s!==ze.resolveFieldData(c,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,i,r){let s=ze.resolveFieldData(i,this.dt.groupRowsBy),c=e[r+1];return!c||s!==ze.resolveFieldData(c,this.dt.groupRowsBy)}shouldRenderRowspan(e,i,r){let s=ze.resolveFieldData(i,this.dt.groupRowsBy),c=e[r-1];return!c||s!==ze.resolveFieldData(c,this.dt.groupRowsBy)}calculateRowGroupSize(e,i,r){let s=ze.resolveFieldData(i,this.dt.groupRowsBy),c=s,d=0;for(;s===c;){d++;let p=e[++r];if(!p)break;c=ze.resolveFieldData(p,this.dt.groupRowsBy)}return 1===d?null:d}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=X.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=X.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}getScrollerOption(e,i){return this.dt.virtualScroll&&(i=i||this.scrollerOptions)?i[e]:null}getRowIndex(e){const i=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(i).index:i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gy),o.Y36(e0),o.Y36(o.sBO),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},attrs:q$,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.YNc(0,ij,2,2,"ng-container",0),o.YNc(1,fj,2,2,"ng-container",0),o.YNc(2,yj,2,2,"ng-container",0),o.YNc(3,wj,2,5,"ng-container",0),o.YNc(4,Cj,2,5,"ng-container",0)),2&e&&(o.Q6J("ngIf",!i.dt.expandedRowTemplate),o.xp6(1),o.Q6J("ngIf",i.dt.expandedRowTemplate&&!(i.frozen&&i.dt.frozenExpandedRowTemplate)),o.xp6(1),o.Q6J("ngIf",i.dt.frozenExpandedRowTemplate&&i.frozen),o.xp6(1),o.Q6J("ngIf",i.dt.loading),o.xp6(1),o.Q6J("ngIf",i.dt.isEmpty()&&!i.dt.loading))},dependencies:[si,An,$n],encapsulation:2}),n})(),Jj=(()=>{class n{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(i=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),X.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return X.hasClass(e,"pi-filter-icon")||X.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gy))},n.\u0275dir=o.lG2({type:n,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s)})("keydown.enter",function(s){return i.onEnterKey(s)}),2&e&&(o.uIk("tabindex",i.isEnabled()?"0":null)("role","columnheader")("aria-sort",i.sortOrder),o.ekj("p-sortable-column",i.isEnabled())("p-highlight",i.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),n})(),Xj=(()=>{class n{constructor(e,i){this.dt=e,this.cd=i,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,i=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){i=r;break}}return i}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gy),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,i){1&e&&(o._UZ(0,"i",0),o.YNc(1,Tj,2,1,"span",1)),2&e&&(o.Q6J("ngClass",o.kEZ(2,Ej,1===i.sortOrder,-1===i.sortOrder,0===i.sortOrder)),o.xp6(1),o.Q6J("ngIf",i.isMultiSorted()))},dependencies:[vt,An],encapsulation:2,changeDetection:0}),n})(),e4=(()=>{class n{constructor(e,i,r){this.dt=e,this.tableService=i,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),X.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gy),o.Y36(e0),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(s){return i.onClick(s)}),o.TgZ(1,"div",1)(2,"input",2),o.NdJ("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),o.qZA()(),o.TgZ(3,"div",3,4),o._UZ(5,"span",5),o.qZA()()),2&e&&(o.Q6J("ngClass",o.WLB(10,oF,i.focused,i.disabled)),o.xp6(2),o.Q6J("checked",i.checked)("disabled",i.disabled),o.uIk("id",i.inputId)("name",i.name)("required",i.required)("aria-label",i.ariaLabel),o.xp6(1),o.Q6J("ngClass",o.kEZ(13,Dj,i.checked,i.focused,i.disabled)),o.uIk("aria-checked",i.checked),o.xp6(2),o.Q6J("ngClass",o.VKq(17,aF,i.checked)))},dependencies:[vt],encapsulation:2,changeDetection:0}),n})(),t4=(()=>{class n{constructor(e,i,r){this.dt=e,this.tableService=i,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),X.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,i=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?i.filter((s,c)=>this.dt.rowSelectable({data:s,index:c})):i;return ze.isNotEmpty(r)&&ze.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(c=>this.dt.equals(s,c)))}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gy),o.Y36(e0),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.NdJ("click",function(s){return i.onClick(s)}),o.TgZ(1,"div",1)(2,"input",2,3),o.NdJ("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),o.qZA()(),o.TgZ(4,"div",4,5),o._UZ(6,"span",6),o.qZA()()),2&e&&(o.Q6J("ngClass",o.WLB(9,oF,i.focused,i.isDisabled())),o.xp6(2),o.Q6J("checked",i.checked)("disabled",i.isDisabled()),o.uIk("id",i.inputId)("name",i.name)("aria-label",i.ariaLabel),o.xp6(2),o.Q6J("ngClass",o.kEZ(12,xj,i.checked,i.focused,i.isDisabled())),o.uIk("aria-checked",i.checked),o.xp6(2),o.Q6J("ngClass",o.VKq(16,aF,i.checked)))},dependencies:[vt],encapsulation:2,changeDetection:0}),n})(),n4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,Wz,wg,aS,xd,Xh,nF,WN,lS,c$,py,we,py]}),n})();function r4(n,t){1&n&&(o.TgZ(0,"tr")(1,"th",24),o._UZ(2,"p-tableHeaderCheckbox"),o.qZA(),o.TgZ(3,"th",25),o._uU(4," PL No "),o._UZ(5,"p-sortIcon",26),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Brands"),o.qZA(),o.TgZ(8,"th",27),o._uU(9," Ship From "),o._UZ(10,"p-sortIcon",28),o.qZA(),o.TgZ(11,"th",29),o._uU(12," Ship To "),o._UZ(13,"p-sortIcon",30),o.qZA(),o.TgZ(14,"th",31),o._uU(15," Document Date "),o._UZ(16,"p-sortIcon",32),o.qZA(),o.TgZ(17,"th"),o._uU(18,"Pack Qty"),o.qZA(),o.TgZ(19,"th"),o._uU(20,"Qty"),o.qZA(),o.TgZ(21,"th"),o._uU(22,"Cartons"),o.qZA(),o.TgZ(23,"th"),o._uU(24,"Pallets"),o.qZA(),o.TgZ(25,"th"),o._uU(26,"Weight"),o.qZA()())}function s4(n,t){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._UZ(2,"p-tableCheckbox",33),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.ALo(13,"date"),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.qZA(),o.TgZ(16,"td"),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.qZA(),o.TgZ(20,"td"),o._uU(21),o.qZA(),o.TgZ(22,"td"),o._uU(23),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Q6J("value",e),o.xp6(2),o.Oqu(e.plNo),o.xp6(2),o.Oqu(null==e.brandNames?null:e.brandNames.toString()),o.xp6(2),o.Oqu(null==e.shipFrom?null:e.shipFrom.name),o.xp6(2),o.Oqu(null==e.shipTo?null:e.shipTo.name),o.xp6(2),o.Oqu(o.xi3(13,11,e.docDate,"dd-MM-yyyy")),o.xp6(3),o.Oqu(e.packQty),o.xp6(2),o.Oqu(e.qty),o.xp6(2),o.Oqu(e.ctns),o.xp6(2),o.Oqu(e.plts),o.xp6(2),o.Oqu(e.weight)}}class t0{constructor(t){this.database=t,this.packingList=new jt,this.packingLists=[],this.selectedPackings=[],this.shipFrom=[],this.shipTo=[],this.shipFrom=(new Pt).getShipFrom(),this.shipTo=(new Pt).getShipFrom(),this.readPackingLists()}readPackingLists(){this.database.getAll().snapshotChanges().pipe((0,Ee.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()})))).subscribe(t=>{this.packingLists=t})}readSelectedPackingList(t){this.packingList=t.data,this.packingList.docDate=Cr.anyToDate(t.data.docDate)}createPackingList(t){this.packingList=t.value,this.packingList.docDate=t.value.docDate.toString(),this.packingList.isOracleGenerate=!1,this.database.create(this.packingList),this.clearForm()}deletePackingList(){this.database.delete(String(this.packingList.key)),this.clearForm()}updatePackingList(){this.database.update(String(this.packingList.key),this.packingList)}clearForm(){this.packingList={}}}t0.\u0275fac=function(t){return new(t||t0)(o.Y36(qh))},t0.\u0275cmp=o.Xpm({type:t0,selectors:[["app-test"]],decls:65,vars:23,consts:[[1,"p-card","p-3",2,"margin","50px",3,"ngSubmit"],["myForm","ngForm"],[1,"flex","justify-content-center","mb-3"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-6","lg:col-4"],[1,"p-float-label"],["name","docDate","dateFormat","dd-mm-yy",3,"ngModel","ngModelChange"],["for","inputtext"],["type","text","pInputText","","name","plNo",3,"ngModel","ngModelChange"],["separator",",","name","brandNames",3,"ngModel","showClear","ngModelChange"],["name","shipFrom","optionLabel","name",3,"options","ngModel","autoDisplayFirst","showClear","ngModelChange"],["name","shipTo","optionLabel","name",3,"options","ngModel","autoDisplayFirst","showClear","ngModelChange"],["name","packQty","inputId","integeronly",3,"ngModel","ngModelChange"],["name","qty","inputId","integeronly",3,"ngModel","ngModelChange"],["name","ctns","inputId","integeronly",3,"ngModel","ngModelChange"],["name","plts","inputId","integeronly",3,"ngModel","ngModelChange"],["name","weight","inputId","minmaxfraction","mode","decimal",3,"ngModel","minFractionDigits","maxFractionDigits","ngModelChange"],[1,"flex","gap-3","justify-content-end","pb-5"],["pButton","","pRipple","","type","submit","label","Create","icon","pi pi-pencil",1,"w-1","p-button-raised","p-button-text"],["pButton","","pRipple","","type","button","label","Update","icon","pi pi-replay",1,"w-1","p-button-raised","p-button-text","p-button-plain",3,"click"],["pButton","","pRipple","","type","button","label","Delete","icon","pi pi-times",1,"w-1","p-button-raised","p-button-danger","p-button-text",3,"click"],["dataKey","key","styleClass","p-datatable-sm",3,"value","selection","paginator","rows","selectionChange","onRowSelect"],["pTemplate","header"],["pTemplate","body"],[2,"width","4rem"],["pSortableColumn","plNo"],["field","plNo"],["pSortableColumn","shipFrom.name"],["field","shipFrom"],["pSortableColumn","shipTo.countryName"],["field","shipTo"],["pSortableColumn","docDate"],["field","docDate"],[3,"value"]],template:function(t,e){if(1&t){const i=o.EpF();o.TgZ(0,"form",0,1),o.NdJ("ngSubmit",function(){o.CHM(i);const s=o.MAs(1);return o.KtG(e.createPackingList(s))}),o.TgZ(2,"div",2)(3,"h4"),o._uU(4,"Packing Lists"),o.qZA()(),o.TgZ(5,"div",3)(6,"div",4)(7,"span",5)(8,"p-calendar",6),o.NdJ("ngModelChange",function(s){return e.packingList.docDate=s}),o.qZA(),o.TgZ(9,"label",7),o._uU(10,"Document Date"),o.qZA()()(),o.TgZ(11,"div",4)(12,"span",5)(13,"input",8),o.NdJ("ngModelChange",function(s){return e.packingList.plNo=s}),o.qZA(),o._UZ(14,"br"),o.TgZ(15,"label",7),o._uU(16,"Packing List #"),o.qZA()()(),o.TgZ(17,"div",4)(18,"span",5)(19,"p-chips",9),o.NdJ("ngModelChange",function(s){return e.packingList.brandNames=s}),o.qZA(),o.TgZ(20,"label",7),o._uU(21,"Brands"),o.qZA()()(),o.TgZ(22,"div",4)(23,"span",5)(24,"p-dropdown",10),o.NdJ("ngModelChange",function(s){return e.packingList.shipFrom=s}),o.qZA(),o.TgZ(25,"label",7),o._uU(26,"Ship From"),o.qZA()()(),o.TgZ(27,"div",4)(28,"span",5)(29,"p-dropdown",11),o.NdJ("ngModelChange",function(s){return e.packingList.shipTo=s}),o.qZA(),o.TgZ(30,"label",7),o._uU(31,"Ship To"),o.qZA()()(),o.TgZ(32,"div",4)(33,"span",5)(34,"p-inputNumber",12),o.NdJ("ngModelChange",function(s){return e.packingList.packQty=s}),o.qZA(),o.TgZ(35,"label",7),o._uU(36,"Packing Qty"),o.qZA()()(),o.TgZ(37,"div",4)(38,"span",5)(39,"p-inputNumber",13),o.NdJ("ngModelChange",function(s){return e.packingList.qty=s}),o.qZA(),o.TgZ(40,"label",7),o._uU(41,"Quantity"),o.qZA()()(),o.TgZ(42,"div",4)(43,"span",5)(44,"p-inputNumber",14),o.NdJ("ngModelChange",function(s){return e.packingList.ctns=s}),o.qZA(),o.TgZ(45,"label",7),o._uU(46,"Cartons"),o.qZA()()(),o.TgZ(47,"div",4)(48,"span",5)(49,"p-inputNumber",15),o.NdJ("ngModelChange",function(s){return e.packingList.plts=s}),o.qZA(),o.TgZ(50,"label",7),o._uU(51,"Pallets"),o.qZA()()(),o.TgZ(52,"div",4)(53,"span",5)(54,"p-inputNumber",16),o.NdJ("ngModelChange",function(s){return e.packingList.weight=s}),o.qZA(),o.TgZ(55,"label",7),o._uU(56,"Weight"),o.qZA()()()(),o.TgZ(57,"div",17),o._UZ(58,"button",18),o.TgZ(59,"button",19),o.NdJ("click",function(){return e.updatePackingList()}),o.qZA(),o.TgZ(60,"button",20),o.NdJ("click",function(){return e.deletePackingList()}),o.qZA()(),o.TgZ(61,"div")(62,"p-table",21),o.NdJ("selectionChange",function(s){return e.selectedPackings=s})("onRowSelect",function(s){return e.readSelectedPackingList(s)}),o.YNc(63,r4,27,0,"ng-template",22),o.YNc(64,s4,24,14,"ng-template",23),o.qZA()()()}2&t&&(o.xp6(8),o.Q6J("ngModel",e.packingList.docDate),o.xp6(5),o.Q6J("ngModel",e.packingList.plNo),o.xp6(6),o.Q6J("ngModel",e.packingList.brandNames)("showClear",!0),o.xp6(5),o.Q6J("options",e.shipFrom)("ngModel",e.packingList.shipFrom)("autoDisplayFirst",!1)("showClear",!0),o.xp6(5),o.Q6J("options",e.shipTo)("ngModel",e.packingList.shipTo)("autoDisplayFirst",!1)("showClear",!0),o.xp6(5),o.Q6J("ngModel",e.packingList.packQty),o.xp6(5),o.Q6J("ngModel",e.packingList.qty),o.xp6(5),o.Q6J("ngModel",e.packingList.ctns),o.xp6(5),o.Q6J("ngModel",e.packingList.plts),o.xp6(5),o.Q6J("ngModel",e.packingList.weight)("minFractionDigits",2)("maxFractionDigits",3),o.xp6(8),o.Q6J("value",e.packingLists)("selection",e.selectedPackings)("paginator",!0)("rows",5))},dependencies:[Bc,yg,Kh,og,ag,Dd,mg,dy,ee,QI,qN,KN,hM,fM,gy,Jj,Xj,e4,t4,sr]});class n0{constructor(t){this.primengConfig=t}ngOnInit(){this.primengConfig.ripple=!0}}n0.\u0275fac=function(t){return new(t||n0)(o.Y36(k))},n0.\u0275cmp=o.Xpm({type:n0,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&o._UZ(0,"app-test")},dependencies:[t0]});class Ml extends Kn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var o4=V(9672);function lF(...n){const t=(0,Rs.yG)(n),e=(0,Rs.jO)(n),{args:i,keys:r}=fI(n);if(0===i.length)return(0,an.D)([],t);const s=new Ki.y(function a4(n,t,e=ll.y){return i=>{cF(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)cF(t,()=>{const y=(0,an.D)(n[p],t);let b=!1;y.subscribe((0,ai.x)(i,E=>{s[p]=E,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>mI(r,c):ll.y));return e?s.pipe(gI(e)):s}function cF(n,t,e){n?(0,o4.f)(e,n,t):t()}var r0=V(8189);function mM(...n){return function l4(){return(0,r0.J)(1)}()((0,an.D)(n,(0,Rs.yG)(n)))}function uF(n){return new Ki.y(t=>{(0,hc.Xf)(n()).subscribe(t)})}var c4=V(9635);function s0(n,t){const e=(0,Nw.m)(n)?n:()=>n,i=r=>r.error(e());return new Ki.y(t?r=>t.schedule(i,0,r):i)}var dF=V(727);function _M(){return(0,Oi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,ai.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class hF extends Ki.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Oi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new dF.w0;const e=this.getSubject();t.add(this.source.subscribe((0,ai.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=dF.w0.EMPTY)}return t}refCount(){return _M()(this)}}function dS(...n){const t=(0,Rs.yG)(n);return(0,Oi.e)((e,i)=>{(t?mM(n,e,t):mM(n,e)).subscribe(i)})}var Vs=V(5577);function bg(n,t){return(0,Nw.m)(t)?(0,Vs.z)(n,t,1):(0,Vs.z)(n,1)}var vs=V(8505);function nf(n){return(0,Oi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,ai.x)(e,void 0,void 0,c=>{s=(0,hc.Xf)(n(c,nf(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function yM(n){return n<=0?()=>Lc.E:(0,Oi.e)((t,e)=>{let i=[];t.subscribe((0,ai.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function fF(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Go((r,s)=>n(r,s,i)):ll.y,yM(1),e?D_(t):bE(()=>new S_))}function vM(n){return(0,Oi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const tn="primary",o0=Symbol("RouteTitle");class h4{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function my(n){return new h4(n)}function f4(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Gc(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!pF(n[r],t[r]))return!1;return!0}function pF(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function gF(n){return Array.prototype.concat.apply([],n)}function mF(n){return n.length>0?n[n.length-1]:null}function is(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function rf(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,an.D)(Promise.resolve(n)):ct(n)}const hS=!1,g4={exact:function vF(n,t,e){if(!Tg(n.segments,t.segments)||!fS(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!vF(n.children[i],t.children[i],e))return!1;return!0},subset:wF},_F={exact:function m4(n,t){return Gc(n,t)},subset:function _4(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>pF(n[e],t[e]))},ignored:()=>!0};function yF(n,t,e){return g4[e.paths](n.root,t.root,e.matrixParams)&&_F[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function wF(n,t,e){return bF(n,t,t.segments,e)}function bF(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Tg(r,e)||t.hasChildren()||!fS(r,e,i))}if(n.segments.length===e.length){if(!Tg(n.segments,e)||!fS(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!wF(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Tg(n.segments,r)&&fS(n.segments,r,i)&&n.children[tn])&&bF(n.children[tn],t,s,i)}}function fS(n,t,e){return t.every((i,r)=>_F[e](n[r].parameters,i.parameters))}class Cg{constructor(t=new hn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return w4.serialize(this)}}class hn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,is(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pS(this)}}class a0{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=my(this.parameters)),this._parameterMap}toString(){return EF(this)}}function Tg(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let l0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new wM},providedIn:"root"}),n})();class wM{parse(t){const e=new A4(t);return new Cg(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${c0(t.root,!0)}`,i=function T4(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${gS(e)}=${gS(r)}`).join("&"):`${gS(e)}=${gS(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function b4(n){return encodeURI(n)}(t.fragment)}`:""}`}}const w4=new wM;function pS(n){return n.segments.map(t=>EF(t)).join("/")}function c0(n,t){if(!n.hasChildren())return pS(n);if(t){const e=n.children[tn]?c0(n.children[tn],!1):"",i=[];return is(n.children,(r,s)=>{s!==tn&&i.push(`${s}:${c0(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function v4(n,t){let e=[];return is(n.children,(i,r)=>{r===tn&&(e=e.concat(t(i,r)))}),is(n.children,(i,r)=>{r!==tn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===tn?[c0(n.children[tn],!1)]:[`${r}:${c0(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tn]?`${pS(n)}/${e[0]}`:`${pS(n)}/(${e.join("//")})`}}function CF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gS(n){return CF(n).replace(/%3B/gi,";")}function bM(n){return CF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mS(n){return decodeURIComponent(n)}function TF(n){return mS(n.replace(/\+/g,"%20"))}function EF(n){return`${bM(n.path)}${function C4(n){return Object.keys(n).map(t=>`;${bM(t)}=${bM(n[t])}`).join("")}(n.parameters)}`}const E4=/^[^\/()?;=#]+/;function _S(n){const t=n.match(E4);return t?t[0]:""}const I4=/^[^=?&#]+/,D4=/^[^&#]+/;class A4{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[tn]=new hn(t,e)),i}parseSegment(){const t=_S(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new o.vHH(4009,hS);return this.capture(t),new a0(mS(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_S(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=_S(this.remaining);r&&(i=r,this.capture(i))}t[mS(e)]=mS(i)}parseQueryParam(t){const e=function S4(n){const t=n.match(I4);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function x4(n){const t=n.match(D4);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=TF(e),s=TF(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=_S(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new o.vHH(4010,hS);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=tn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[tn]:new hn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new o.vHH(4011,hS)}}function CM(n){return n.segments.length>0?new hn([],{[tn]:n}):n}function yS(n){const t={};for(const i of Object.keys(n.children)){const s=yS(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function M4(n){if(1===n.numberOfChildren&&n.children[tn]){const t=n.children[tn];return new hn(n.segments.concat(t.segments),t.children)}return n}(new hn(n.segments,t))}function Eg(n){return n instanceof Cg}function O4(n,t,e,i,r){if(0===e.length)return _y(t.root,t.root,t.root,i,r);const s=function DF(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new SF(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return is(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new SF(e,t,i)}(e);return s.toRoot()?_y(t.root,t.root,new hn([],{}),i,r):function c(p){const y=function N4(n,t,e,i){if(n.isAbsolute)return new yy(t.root,!0,0);if(-1===i)return new yy(e,e===t.root,0);return function xF(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new o.vHH(4005,!1);r=i.segments.length}return new yy(i,!1,r-s)}(e,i+(u0(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),b=y.processChildren?vy(y.segmentGroup,y.index,s.commands):EM(y.segmentGroup,y.index,s.commands);return _y(t.root,y.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function u0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function d0(n){return"object"==typeof n&&null!=n&&n.outlets}function _y(n,t,e,i,r){let c,s={};i&&is(i,(p,y)=>{s[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),c=n===t?e:IF(n,t,e);const d=CM(yS(c));return new Cg(d,s,r)}function IF(n,t,e){const i={};return is(n.children,(r,s)=>{i[s]=r===t?e:IF(r,t,e)}),new hn(n.segments,i)}class SF{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&u0(i[0]))throw new o.vHH(4003,!1);const r=i.find(d0);if(r&&r!==mF(i))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yy{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function EM(n,t,e){if(n||(n=new hn([],{})),0===n.segments.length&&n.hasChildren())return vy(n,t,e);const i=function L4(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(d0(d))break;const p=`${d}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!MF(p,y,c))return s;i+=2}else{if(!MF(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new hn(n.segments.slice(0,i.pathIndex),{});return s.children[tn]=new hn(n.segments.slice(i.pathIndex),n.children),vy(s,0,r)}return i.match&&0===r.length?new hn(n.segments,{}):i.match&&!n.hasChildren()?IM(n,t,e):i.match?vy(n,0,r):IM(n,t,e)}function vy(n,t,e){if(0===e.length)return new hn(n.segments,{});{const i=function F4(n){return d0(n[0])?n[0].outlets:{[tn]:n}}(e),r={};return!i[tn]&&n.children[tn]&&1===n.numberOfChildren&&0===n.children[tn].segments.length?vy(n.children[tn],t,e):(is(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=EM(n.children[c],t,s))}),is(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new hn(n.segments,r))}}function IM(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(d0(s)){const p=V4(s.outlets);return new hn(i,p)}if(0===r&&u0(e[0])){i.push(new a0(n.segments[t].path,AF(e[0]))),r++;continue}const c=d0(s)?s.outlets[tn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&u0(d)?(i.push(new a0(c,AF(d))),r+=2):(i.push(new a0(c,{})),r++)}return new hn(i,{})}function V4(n){const t={};return is(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=IM(new hn([],{}),0,e))}),t}function AF(n){const t={};return is(n,(e,i)=>t[i]=`${e}`),t}function MF(n,t,e){return n==e.path&&Gc(t,e.parameters)}const h0="imperative";class zc{constructor(t,e){this.id=t,this.url=e}}class SM extends zc{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ig extends zc{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vS extends zc{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kF extends zc{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class RF extends zc{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class B4 extends zc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U4 extends zc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H4 extends zc{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class G4 extends zc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z4 extends zc{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $4{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class j4{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q4{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W4{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K4{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z4{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OF{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Q4=(()=>{class n{createUrlTree(e,i,r,s,c,d){return O4(e||i.root,r,s,c,d)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),J4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){return Q4.\u0275fac(t)},providedIn:"root"}),n})();class PF{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=DM(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=DM(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=xM(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return xM(t,this._root).map(e=>e.value)}}function DM(n,t){if(n===t.value)return t;for(const e of t.children){const i=DM(n,e);if(i)return i}return null}function xM(n,t){if(n===t.value)return[t];for(const e of t.children){const i=xM(n,e);if(i.length)return i.unshift(t),i}return[]}class Ad{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function wy(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class NF extends PF{constructor(t,e){super(t),this.snapshot=e,AM(this,t)}toString(){return this.snapshot.toString()}}function FF(n,t){const e=function X4(n,t){const c=new wS([],{},{},"",{},tn,t,null,n.root,-1,{});return new VF("",new Ad(c,[]))}(n,t),i=new Ml([new a0("",{})]),r=new Ml({}),s=new Ml({}),c=new Ml({}),d=new Ml(""),p=new by(i,r,c,d,s,tn,t,e.root);return p.snapshot=e.root,new NF(new Ad(p,[]),e)}class by{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,Ee.U)(y=>y[o0]))??ct(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ee.U)(t=>my(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ee.U)(t=>my(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LF(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function eq(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class wS{get title(){return this.data?.[o0]}constructor(t,e,i,r,s,c,d,p,y,b,E){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=b,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=my(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VF extends PF{constructor(t,e){super(e),this.url=t,AM(this,e)}toString(){return BF(this._root)}}function AM(n,t){t.value._routerState=n,t.children.forEach(e=>AM(n,e))}function BF(n){const t=n.children.length>0?` { ${n.children.map(BF).join(", ")} } `:"";return`${n.value}${t}`}function MM(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Gc(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Gc(t.params,e.params)||n.params.next(e.params),function p4(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Gc(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Gc(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kM(n,t){const e=Gc(n.params,t.params)&&function y4(n,t){return Tg(n,t)&&n.every((e,i)=>Gc(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||kM(n.parent,t.parent))}function f0(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function nq(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return f0(n,i,r);return f0(n,i)})}(n,t,e);return new Ad(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>f0(n,d)),c}}const i=function iq(n){return new by(new Ml(n.url),new Ml(n.params),new Ml(n.queryParams),new Ml(n.fragment),new Ml(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>f0(n,s));return new Ad(i,r)}}const RM="ngNavigationCancelingError";function UF(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Eg(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=HF(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function HF(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[RM]=!0,i.cancellationCode=t,e&&(i.url=e),i}function GF(n){return zF(n)&&Eg(n.url)}function zF(n){return n&&n[RM]}class rq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new p0,this.attachRef=null}}let p0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new rq,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bS=!1;let $F=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=tn,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(p0),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,bS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,bS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,bS);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new o.vHH(4013,bS);this._activatedRoute=e;const r=this.location,c=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new sq(e,d,r.injector);if(i&&function oq(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(c);this.activated=r.createComponent(y,r.length,p)}else this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),n})();class sq{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===by?this.route:t===p0?this.childContexts:this.parent.get(t,e)}}let OM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},dependencies:[$F],encapsulation:2}),n})();function jF(n,t){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function NM(n){const t=n.children&&n.children.map(NM),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==tn&&(e.component=OM),e}function Pa(n){return n.outlet||tn}function qF(n,t){const e=n.filter(i=>Pa(i)===t);return e.push(...n.filter(i=>Pa(i)!==t)),e}function g0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class dq{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),MM(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=wy(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),is(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=wy(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=wy(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=wy(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Z4(s.value.snapshot))}),t.children.length&&this.forwardEvent(new W4(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(MM(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),MM(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=g0(r.snapshot),p=d?.get(o._Vd)??null;c.attachRef=null,c.route=r,c.resolver=p,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class WF{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class CS{constructor(t,e){this.component=t,this.route=e}}function hq(n,t,e){const i=n._root;return m0(i,t?t._root:null,e,[i.value])}function Cy(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,o.Z0I)(n)?t.get(n):n:i}function m0(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=wy(t);return n.children.forEach(c=>{(function pq(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function gq(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Tg(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Tg(n.url,t.url)||!Gc(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kM(n,t)||!Gc(n.queryParams,t.queryParams);default:return!kM(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new WF(i)):(s.data=c.data,s._resolvedData=c._resolvedData),m0(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new CS(d.outlet.component,c))}else c&&_0(t,d,r),r.canActivateChecks.push(new WF(i)),m0(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),is(s,(c,d)=>_0(c,e.getContext(d),r)),r}function _0(n,t,e){const i=wy(n),r=n.value;is(i,(s,c)=>{_0(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new CS(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function y0(n){return"function"==typeof n}function FM(n){return n instanceof S_||"EmptyError"===n?.name}const TS=Symbol("INITIAL_VALUE");function Ty(){return ei(n=>lF(n.map(t=>t.pipe(Wp(1),dS(TS)))).pipe((0,Ee.U)(t=>{for(const e of t)if(!0!==e){if(e===TS)return TS;if(!1===e||e instanceof Cg)return e}return!0}),Go(t=>t!==TS),Wp(1)))}function KF(n){return(0,c4.z)((0,vs.b)(t=>{if(Eg(t))throw UF(0,t)}),(0,Ee.U)(t=>!0===t))}const LM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZF(n,t,e,i,r){const s=VM(n,t,e);return s.matched?function Rq(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?ct(r.map(c=>{const d=Cy(c,n);return rf(function bq(n){return n&&y0(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(Ty(),KF()):ct(!0)}(i=jF(t,i),t,e).pipe((0,Ee.U)(c=>!0===c?s:{...LM})):ct(s)}function VM(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...LM}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||f4)(e,n,t);if(!r)return{...LM};const s={};is(r.posParams,(d,p)=>{s[p]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function ES(n,t,e,i){if(e.length>0&&function Nq(n,t,e){return e.some(i=>IS(n,t,i)&&Pa(i)!==tn)}(n,e,i)){const s=new hn(t,function Pq(n,t,e,i){const r={};r[tn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Pa(s)!==tn){const c=new hn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Pa(s)]=c}return r}(n,t,i,new hn(e,n.children)));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function Fq(n,t,e){return e.some(i=>IS(n,t,i))}(n,e,i)){const s=new hn(n.segments,function Oq(n,t,e,i,r){const s={};for(const c of i)if(IS(n,e,c)&&!r[Pa(c)]){const d=new hn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,s[Pa(c)]=d}return{...r,...s}}(n,t,e,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new hn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function IS(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function YF(n,t,e,i){return!!(Pa(n)===i||i!==tn&&IS(t,e,n))&&("**"===n.path||VM(t,n,e).matched)}function QF(n,t,e){return 0===t.length&&!n.children[e]}const SS=!1;class DS{constructor(t){this.segmentGroup=t||null}}class JF{constructor(t){this.urlTree=t}}function v0(n){return s0(new DS(n))}function XF(n){return s0(new JF(n))}class Uq{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=ES(this.urlTree.root,[],[],this.config).segmentGroup,e=new hn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,tn).pipe((0,Ee.U)(s=>this.createUrlTree(yS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(nf(s=>{if(s instanceof JF)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof DS?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,tn).pipe((0,Ee.U)(r=>this.createUrlTree(yS(r),t.queryParams,t.fragment))).pipe(nf(r=>{throw r instanceof DS?this.noMatchError(r):r}))}noMatchError(t){return new o.vHH(4002,SS)}createUrlTree(t,e,i){const r=CM(t);return new Cg(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,Ee.U)(s=>new hn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,an.D)(r).pipe(bg(s=>{const c=i.children[s],d=qF(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,Ee.U)(p=>({segment:p,outlet:s})))}),fc((s,c)=>(s[c.outlet]=c.segment,s),{}),fF())}expandSegment(t,e,i,r,s,c){return(0,an.D)(i).pipe(bg(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(nf(y=>{if(y instanceof DS)return ct(null);throw y}))),Dl(d=>!!d),nf((d,p)=>{if(FM(d))return QF(e,r,s)?ct(new hn([],{})):v0(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return YF(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):v0(e):v0(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?XF(s):this.lineralizeSegments(i,s).pipe((0,Vs.z)(c=>{const d=new hn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:b}=VM(e,r,s);if(!d)return v0(e);const E=this.applyRedirectCommands(p,r.redirectTo,b);return r.redirectTo.startsWith("/")?XF(E):this.lineralizeSegments(r,E).pipe((0,Vs.z)(M=>this.expandSegment(t,e,i,M.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=jF(i,t),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,Ee.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new hn(r,{})))):ct(new hn(r,{}))):ZF(e,i,r,t).pipe(ei(({matched:c,consumedSegments:d,remainingSegments:p})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Vs.z)(b=>{const E=b.injector??t,M=b.routes,{segmentGroup:P,slicedSegments:F}=ES(e,d,p,M),z=new hn(P.segments,P.children);if(0===F.length&&z.hasChildren())return this.expandChildren(E,M,z).pipe((0,Ee.U)(Le=>new hn(d,Le)));if(0===M.length&&0===F.length)return ct(new hn(d,{}));const K=Pa(i)===s;return this.expandSegment(E,z,M,F,K?tn:s,!0).pipe((0,Ee.U)(Be=>new hn(d.concat(Be.segments),Be.children)))})):v0(e)))}getChildConfig(t,e,i){return e.children?ct({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):function kq(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(c=>{const d=Cy(c,n);return rf(function _q(n){return n&&y0(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(Ty(),KF())}(t,e,i).pipe((0,Vs.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,vs.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function Vq(n){return s0(HF(SS,3))}())):ct({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[tn])return s0(new o.vHH(4e3,SS));r=r.children[tn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Cg(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return is(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return is(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new hn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new o.vHH(4001,SS);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Gq{}class jq{constructor(t,e,i,r,s,c,d){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.urlSerializer=d}recognize(){const t=ES(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,tn).pipe((0,Ee.U)(e=>{if(null===e)return null;const i=new wS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ad(i,e),s=new VF(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=LF(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,an.D)(Object.keys(i.children)).pipe(bg(r=>{const s=i.children[r],c=qF(e,r);return this.processSegmentGroup(t,c,s,r)}),fc((r,s)=>r&&s?(r.push(...s),r):null),function u4(n,t=!1){return(0,Oi.e)((e,i)=>{let r=0;e.subscribe((0,ai.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),D_(null),fF(),(0,Ee.U)(r=>{if(null===r)return null;const s=tL(r);return function qq(n){n.sort((t,e)=>t.value.outlet===tn?-1:e.value.outlet===tn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,an.D)(e).pipe(bg(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),Dl(c=>!!c),nf(c=>{if(FM(c))return QF(i,r,s)?ct([]):ct(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!YF(e,i,r,s))return ct(null);let c;if("**"===e.path){const d=r.length>0?mF(r).parameters:{},p=iL(i)+r.length;c=ct({snapshot:new wS(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rL(e),Pa(e),e.component??e._loadedComponent??null,e,nL(i),p,sL(e)),consumedSegments:[],remainingSegments:[]})}else c=ZF(i,e,r,t).pipe((0,Ee.U)(({matched:d,consumedSegments:p,remainingSegments:y,parameters:b})=>{if(!d)return null;const E=iL(i)+p.length;return{snapshot:new wS(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rL(e),Pa(e),e.component??e._loadedComponent??null,e,nL(i),E,sL(e)),consumedSegments:p,remainingSegments:y}}));return c.pipe(ei(d=>{if(null===d)return ct(null);const{snapshot:p,consumedSegments:y,remainingSegments:b}=d;t=e._injector??t;const E=e._loadedInjector??t,M=function Wq(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:P,slicedSegments:F}=ES(i,y,b,M.filter(K=>void 0===K.redirectTo));if(0===F.length&&P.hasChildren())return this.processChildren(E,M,P).pipe((0,Ee.U)(K=>null===K?null:[new Ad(p,K)]));if(0===M.length&&0===F.length)return ct([new Ad(p,[])]);const z=Pa(e)===s;return this.processSegment(E,M,P,F,z?tn:s).pipe((0,Ee.U)(K=>null===K?null:[new Ad(p,K)]))}))}}function Kq(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function tL(n){const t=[],e=new Set;for(const i of n){if(!Kq(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=tL(i.children);t.push(new Ad(i.value,r))}return t.filter(i=>!e.has(i))}function nL(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function iL(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function rL(n){return n.data||{}}function sL(n){return n.resolve||{}}function oL(n){return"string"==typeof n.title||null===n.title}function BM(n){return ei(t=>{const e=n(t);return e?(0,an.D)(e).pipe((0,Ee.U)(()=>t)):ct(t)})}const Ey=new o.OlP("ROUTES");let UM=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ct(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=rf(e.loadComponent()).pipe((0,Ee.U)(lL),(0,vs.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),vM(()=>{this.componentLoaders.delete(e)})),r=new hF(i,()=>new Kn.x).pipe(_M());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Ee.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,y,b=!1;Array.isArray(d)?y=d:(p=d.create(e).injector,y=gF(p.get(Ey,[],o.XFs.Self|o.XFs.Optional)));return{routes:y.map(NM),injector:p}}),vM(()=>{this.childrenLoaders.delete(i)})),c=new hF(s,()=>new Kn.x).pipe(_M());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return rf(e()).pipe((0,Ee.U)(lL),(0,Vs.z)(r=>r instanceof o.YKP||Array.isArray(r)?ct(r):(0,an.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lL(n){return function iW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let AS=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Kn.x,this.configLoader=(0,o.f3M)(UM),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(l0),this.rootContexts=(0,o.f3M)(p0),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new j4(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new $4(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new Ml({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:h0,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Go(i=>0!==i.id),(0,Ee.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),ei(i=>{let r=!1,s=!1;return ct(i).pipe((0,vs.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ei(c=>{const d=e.browserUrlTree.toString(),p=!e.navigated||c.extractedUrl.toString()!==d||d!==e.currentUrlTree.toString();if(!p&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const b="";return this.events.next(new kF(c.id,e.serializeUrl(i.rawUrl),b,0)),e.rawUrlTree=c.rawUrl,c.resolve(null),Lc.E}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return cL(c.source)&&(e.browserUrlTree=c.extractedUrl),ct(c).pipe(ei(b=>{const E=this.transitions?.getValue();return this.events.next(new SM(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),E!==this.transitions?.getValue()?Lc.E:Promise.resolve(b)}),function Hq(n,t,e,i){return ei(r=>function Bq(n,t,e,i,r){return new Uq(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,Ee.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,vs.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},i.urlAfterRedirects=b.urlAfterRedirects}),function Yq(n,t,e,i,r){return(0,Vs.z)(s=>function $q(n,t,e,i,r,s,c="emptyOnly"){return new jq(n,t,e,i,r,c,s).recognize().pipe(ei(d=>null===d?function zq(n){return new Ki.y(t=>t.error(n))}(new Gq):ct(d)))}(n,t,e,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,Ee.U)(c=>({...s,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,vs.b)(b=>{if(i.targetSnapshot=b.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!b.extras.skipLocationChange){const M=e.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);e.setBrowserUrl(M,b)}e.browserUrlTree=b.urlAfterRedirects}const E=new B4(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(E)}));if(p&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:b,extractedUrl:E,source:M,restoredState:P,extras:F}=c,z=new SM(b,this.urlSerializer.serialize(E),M,P);this.events.next(z);const K=FF(E,this.rootComponentType).snapshot;return ct(i={...c,targetSnapshot:K,urlAfterRedirects:E,extras:{...F,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new kF(c.id,e.serializeUrl(i.extractedUrl),b,1)),e.rawUrlTree=c.rawUrl,c.resolve(null),Lc.E}}),(0,vs.b)(c=>{const d=new U4(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),(0,Ee.U)(c=>i={...c,guards:hq(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Tq(n,t){return(0,Vs.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ct({...e,guardsResult:!0}):function Eq(n,t,e,i){return(0,an.D)(n).pipe((0,Vs.z)(r=>function Mq(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(d=>{const p=g0(t)??r,y=Cy(d,p);return rf(function wq(n){return n&&y0(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,i):p.runInContext(()=>y(n,t,e,i))).pipe(Dl())})).pipe(Ty()):ct(!0)}(r.component,r.route,e,t,i)),Dl(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Vs.z)(d=>d&&function mq(n){return"boolean"==typeof n}(d)?function Iq(n,t,e,i){return(0,an.D)(t).pipe(bg(r=>mM(function Dq(n,t){return null!==n&&t&&t(new q4(n)),ct(!0)}(r.route.parent,i),function Sq(n,t){return null!==n&&t&&t(new K4(n)),ct(!0)}(r.route,i),function Aq(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function fq(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>uF(()=>ct(c.guards.map(p=>{const y=g0(c.node)??e,b=Cy(p,y);return rf(function vq(n){return n&&y0(n.canActivateChild)}(b)?b.canActivateChild(i,n):y.runInContext(()=>b(i,n))).pipe(Dl())})).pipe(Ty())));return ct(s).pipe(Ty())}(n,r.path,e),function xq(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>uF(()=>{const c=g0(t)??e,d=Cy(s,c);return rf(function yq(n){return n&&y0(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(Dl())}));return ct(r).pipe(Ty())}(n,r.route,e))),Dl(r=>!0!==r,!0))}(i,s,n,t):ct(d)),(0,Ee.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,c=>this.events.next(c)),(0,vs.b)(c=>{if(i.guardsResult=c.guardsResult,Eg(c.guardsResult))throw UF(0,c.guardsResult);const d=new H4(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Go(c=>!!c.guardsResult||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),BM(c=>{if(c.guards.canActivateChecks.length)return ct(c).pipe((0,vs.b)(d=>{const p=new G4(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),ei(d=>{let p=!1;return ct(d).pipe(function Qq(n,t){return(0,Vs.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ct(e);let s=0;return(0,an.D)(r).pipe(bg(c=>function Jq(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!oL(r)&&(s[o0]=r.title),function Xq(n,t,e,i){const r=function eW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return(0,an.D)(r).pipe((0,Vs.z)(c=>function tW(n,t,e,i){const r=g0(t)??i,s=Cy(n,r);return rf(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(Dl(),(0,vs.b)(d=>{s[c]=d}))),yM(1),function d4(n){return(0,Ee.U)(()=>n)}(s),nf(c=>FM(c)?Lc.E:s0(c)))}(s,n,t,i).pipe((0,Ee.U)(c=>(n._resolvedData=c,n.data=LF(n,e).resolve,r&&oL(r)&&(n.data[o0]=r.title),null)))}(c.route,i,n,t)),(0,vs.b)(()=>s++),yM(1),(0,Vs.z)(c=>s===r.length?ct(e):Lc.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,vs.b)({next:()=>p=!0,complete:()=>{p||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,vs.b)(d=>{const p=new z4(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),BM(c=>{const d=p=>{const y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,vs.b)(b=>{p.component=b}),(0,Ee.U)(()=>{})));for(const b of p.children)y.push(...d(b));return y};return lF(d(c.targetSnapshot.root)).pipe(D_(),Wp(1))}),BM(()=>this.afterPreactivation()),(0,Ee.U)(c=>{const d=function tq(n,t,e){const i=f0(n,t._root,e?e._root:void 0);return new NF(i,t)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return i={...c,targetRouterState:d}}),(0,vs.b)(c=>{e.currentUrlTree=c.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),e.routerState=c.targetRouterState,"deferred"===e.urlUpdateStrategy&&(c.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,c),e.browserUrlTree=c.urlAfterRedirects)}),((n,t,e)=>(0,Ee.U)(i=>(new dq(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c)),(0,vs.b)({next:c=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Ig(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{r=!0}}),vM(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),nf(c=>{if(s=!0,zF(c)){GF(c)||(e.navigated=!0,e.restoreHistory(i,!0));const d=new vS(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode);if(this.events.next(d),GF(c)){const p=e.urlHandlingStrategy.merge(c.url,e.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||cL(i.source)};e.scheduleNavigation(p,h0,null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const d=new RF(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);this.events.next(d);try{i.resolve(e.errorHandler(c))}catch(p){i.reject(p)}}return Lc.E}))}))}cancelNavigationTransition(e,i,r){const s=new vS(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cL(n){return n!==h0}let uL=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===tn);return i}getResolvedTitleForRoute(e){return e.data[o0]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(rW)},providedIn:"root"}),n})(),rW=(()=>{class n extends uL{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(va))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(aW)},providedIn:"root"}),n})();class oW{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let aW=(()=>{class n extends oW{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MS=new o.OlP("",{providedIn:"root",factory:()=>({})});let cW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(uW)},providedIn:"root"}),n})(),uW=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dW(n){throw n}function hW(n,t,e){return t.parse("/")}const fW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $o=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(MS,{optional:!0})||{},this.errorHandler=this.options.errorHandler||dW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||hW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(cW),this.routeReuseStrategy=(0,o.f3M)(sW),this.urlCreationStrategy=(0,o.f3M)(J4),this.titleStrategy=(0,o.f3M)(uL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=gF((0,o.f3M)(Ey,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(AS),this.urlSerializer=(0,o.f3M)(l0),this.location=(0,o.f3M)(je),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Cg,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=FF(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),h0,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const s={replaceUrl:!0},c=r?.navigationId?r:null;if(r){const p={...r};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e);this.scheduleNavigation(d,i,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(NM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,y=p?this.currentUrlTree.fragment:c;let b=null;switch(d){case"merge":b={...this.currentUrlTree.queryParams,...s};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=s||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,b,y??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Eg(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,h0,null,i)}navigate(e,i={skipLocationChange:!1}){return function gW(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new o.vHH(4008,!1)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...fW}:!1===i?{...pW}:i,Eg(e))return yF(this.currentUrlTree,e,r);const s=this.parseUrl(e);return yF(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,p,y,b;return c?(d=c.resolve,p=c.reject,y=c.promise):y=new Promise((E,M)=>{d=E,p=M}),b="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(E=>Promise.reject(E))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hL{}let yW=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Go(e=>e instanceof Ig),bg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,an.D)(r).pipe((0,r0.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):ct(null);const s=r.pipe((0,Vs.z)(c=>null===c?ct(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,an.D)([s,c]).pipe((0,r0.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($o),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(hL),o.LFG(UM))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GM=new o.OlP("");let fL=(()=>{class n{constructor(e,i,r,s,c={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof SM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ig&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof OF&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new OF(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Sg(n,t){return{\u0275kind:n,\u0275providers:t}}function gL(){const n=(0,o.f3M)(o.zs3);return t=>{const e=n.get(o.z2F);if(t!==e.components[0])return;const i=n.get($o),r=n.get(mL);1===n.get($M)&&i.initialNavigation(),n.get(_L,null,o.XFs.Optional)?.setUpPreloading(),n.get(GM,null,o.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const mL=new o.OlP("",{factory:()=>new Kn.x}),$M=new o.OlP("",{providedIn:"root",factory:()=>1});const _L=new o.OlP("");function TW(n){return Sg(0,[{provide:_L,useExisting:yW},{provide:hL,useExisting:n}])}const yL=new o.OlP("ROUTER_FORROOT_GUARD"),EW=[je,{provide:l0,useClass:wM},$o,p0,{provide:by,useFactory:function pL(n){return n.routerState.root},deps:[$o]},UM,[]];function IW(){return new o.PXZ("Router",$o)}let b0=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[EW,[],{provide:Ey,multi:!0,useValue:e},{provide:yL,useFactory:AW,deps:[[$o,new o.FiY,new o.tp0]]},{provide:MS,useValue:i||{}},i?.useHash?{provide:mt,useClass:ke}:{provide:mt,useClass:Re},{provide:GM,useFactory:()=>{const n=(0,o.f3M)(sa),t=(0,o.f3M)(o.R0b),e=(0,o.f3M)(MS),i=(0,o.f3M)(AS),r=(0,o.f3M)(l0);return e.scrollOffset&&n.setOffset(e.scrollOffset),new fL(r,i,n,t,e)}},i?.preloadingStrategy?TW(i.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:IW},i?.initialNavigation?MW(i):[],[{provide:vL,useFactory:gL},{provide:o.tb,multi:!0,useExisting:vL}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Ey,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yL,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[OM]}),n})();function AW(n){return"guarded"}function MW(n){return["disabled"===n.initialNavigation?Sg(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const t=(0,o.f3M)($o);return()=>{t.setUpLocationChangeListener()}}},{provide:$M,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Sg(2,[{provide:$M,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:t=>{const e=t.get(ue,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const s=t.get($o),c=t.get(mL);(function i(r){t.get($o).events.pipe(Go(c=>c instanceof Ig||c instanceof vS||c instanceof RF),(0,Ee.U)(c=>c instanceof Ig||c instanceof vS&&(0===c.code||1===c.code)&&null),Go(c=>null!==c),Wp(1)).subscribe(()=>{r()})})(()=>{r(!0)}),t.get(AS).afterPreactivation=()=>(r(!0),c.closed?ct(void 0):c),s.initialNavigation()}))}}]).\u0275providers:[]]}const vL=new o.OlP("");class wL{}class sf{constructor(t){this.db=t,this.dbPath="/tutorials",this.tutorialsRef=t.list(this.dbPath)}getAll(){return this.tutorialsRef}create(t){return this.tutorialsRef.push(t)}update(t,e){return this.tutorialsRef.update(t,e)}delete(t){return this.tutorialsRef.remove(t)}deleteAll(){return this.tutorialsRef.remove()}}function RW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"div",2)(2,"label",3),o._uU(3,"Title"),o.qZA(),o.TgZ(4,"input",4),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.tutorial.title=r)}),o.qZA()(),o.TgZ(5,"div",2)(6,"label",5),o._uU(7,"Description"),o.qZA(),o.TgZ(8,"input",6),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.tutorial.description=r)}),o.qZA()(),o.TgZ(9,"button",7),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.saveTutorial())}),o._uU(10,"Submit"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(4),o.Q6J("ngModel",e.tutorial.title),o.xp6(4),o.Q6J("ngModel",e.tutorial.description)}}function OW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"h4"),o._uU(2,"You submitted successfully!"),o.qZA(),o.TgZ(3,"button",7),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.newTutorial())}),o._uU(4,"Add"),o.qZA()()}}sf.\u0275fac=function(t){return new(t||sf)(o.LFG(G_))},sf.\u0275prov=o.Yz7({token:sf,factory:sf.\u0275fac,providedIn:"root"});class C0{constructor(t){this.tutorialService=t,this.tutorial=new wL,this.submitted=!1}saveTutorial(){this.tutorialService.create(this.tutorial).then(()=>{console.log("Created new item successfully!"),this.submitted=!0})}newTutorial(){this.submitted=!1,this.tutorial=new wL}}function PW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.updatePublished(!1))}),o._uU(1," UnPublish "),o.qZA()}}function NW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(e);const r=o.oxw(2);return o.KtG(r.updatePublished(!0))}),o._uU(1," Publish "),o.qZA()}}function FW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"h4"),o._uU(2,"Tutorial"),o.qZA(),o.TgZ(3,"form")(4,"div",3)(5,"label",4),o._uU(6,"Title"),o.qZA(),o.TgZ(7,"input",5),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.currentTutorial.title=r)}),o.qZA()(),o.TgZ(8,"div",3)(9,"label",6),o._uU(10,"Description"),o.qZA(),o.TgZ(11,"input",7),o.NdJ("ngModelChange",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.currentTutorial.description=r)}),o.qZA()(),o.TgZ(12,"div",3)(13,"label")(14,"strong"),o._uU(15,"Status:"),o.qZA()(),o._uU(16),o.qZA()(),o.YNc(17,PW,2,0,"button",8),o.YNc(18,NW,2,0,"button",8),o.TgZ(19,"button",9),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.deleteTutorial())}),o._uU(20," Delete "),o.qZA(),o.TgZ(21,"button",10),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.updateTutorial())}),o._uU(22," Update "),o.qZA(),o.TgZ(23,"p"),o._uU(24),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(7),o.Q6J("ngModel",e.currentTutorial.title),o.xp6(4),o.Q6J("ngModel",e.currentTutorial.description),o.xp6(5),o.hij(" ",e.currentTutorial.published?"Published":"Pending"," "),o.xp6(1),o.Q6J("ngIf",e.currentTutorial.published),o.xp6(1),o.Q6J("ngIf",!e.currentTutorial.published),o.xp6(6),o.Oqu(e.message)}}function LW(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"br"),o.TgZ(2,"p"),o._uU(3,"Cannot access this Tutorial..."),o.qZA()())}C0.\u0275fac=function(t){return new(t||C0)(o.Y36(sf))},C0.\u0275cmp=o.Xpm({type:C0,selectors:[["app-add-tutorial"]],decls:3,vars:2,consts:[[1,"submit-form"],[4,"ngIf"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,RW,11,2,"div",1),o.YNc(2,OW,5,0,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",!e.submitted),o.xp6(1),o.Q6J("ngIf",e.submitted))},dependencies:[An,Kh,og,vg,Dd],styles:[".submit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]});class T0{constructor(t){this.tutorialService=t,this.refreshList=new o.vpe,this.currentTutorial={title:"",description:"",published:!1},this.message=""}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentTutorial={...this.tutorial}}updatePublished(t){this.currentTutorial.key&&this.tutorialService.update(this.currentTutorial.key,{published:t}).then(()=>{this.currentTutorial.published=t,this.message="The status was updated successfully!"}).catch(e=>console.log(e))}updateTutorial(){this.currentTutorial.key&&this.tutorialService.update(this.currentTutorial.key,{title:this.currentTutorial.title,description:this.currentTutorial.description}).then(()=>this.message="The tutorial was updated successfully!").catch(e=>console.log(e))}deleteTutorial(){this.currentTutorial.key&&this.tutorialService.delete(this.currentTutorial.key).then(()=>{this.refreshList.emit(),this.message="The tutorial was updated successfully!"}).catch(t=>console.log(t))}}function VW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",6),o.NdJ("click",function(){const r=o.CHM(e),s=r.$implicit,c=r.index,d=o.oxw();return o.KtG(d.setActiveTutorial(s,c))}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.ekj("active",i==r.currentIndex),o.xp6(1),o.hij(" ",e.title," ")}}function BW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"app-tutorial-details",7),o.NdJ("refreshList",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.refreshList())}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("tutorial",e.currentTutorial)}}function UW(n,t){1&n&&(o.TgZ(0,"div"),o._UZ(1,"br"),o.TgZ(2,"p"),o._uU(3,"Please click on a Tutorial..."),o.qZA()())}T0.\u0275fac=function(t){return new(t||T0)(o.Y36(sf))},T0.\u0275cmp=o.Xpm({type:T0,selectors:[["app-tutorial-details"]],inputs:{tutorial:"tutorial"},outputs:{refreshList:"refreshList"},features:[o.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","title"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","text","id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["class","badge badge-primary mr-2",3,"click",4,"ngIf"],[1,"badge","badge-danger","mr-2",3,"click"],["type","submit",1,"badge","badge-success",3,"click"],[1,"badge","badge-primary","mr-2",3,"click"]],template:function(t,e){1&t&&(o.YNc(0,FW,25,6,"div",0),o.YNc(1,LW,4,0,"div",1)),2&t&&(o.Q6J("ngIf",e.currentTutorial),o.xp6(1),o.Q6J("ngIf",!e.currentTutorial))},dependencies:[An,yg,Kh,og,ag,Dd,mg],styles:[".edit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]});class E0{constructor(t){this.tutorialService=t,this.currentIndex=-1,this.title=""}ngOnInit(){this.retrieveTutorials()}refreshList(){this.currentTutorial=void 0,this.currentIndex=-1,this.retrieveTutorials()}retrieveTutorials(){this.tutorialService.getAll().snapshotChanges().pipe((0,Ee.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()})))).subscribe(t=>{this.tutorials=t})}setActiveTutorial(t,e){this.currentTutorial=t,this.currentIndex=e}removeAllTutorials(){this.tutorialService.deleteAll().then(()=>this.refreshList()).catch(t=>console.log(t))}}E0.\u0275fac=function(t){return new(t||E0)(o.Y36(sf))},E0.\u0275cmp=o.Xpm({type:E0,selectors:[["app-tutorials-list"]],decls:11,vars:3,consts:[[1,"list","row"],[1,"col-md-6"],[1,"list-group"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"m-3","btn","btn-sm","btn-danger",3,"click"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"tutorial","refreshList"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h4"),o._uU(3,"Tutorials List"),o.qZA(),o.TgZ(4,"ul",2),o.YNc(5,VW,2,3,"li",3),o.qZA(),o.TgZ(6,"button",4),o.NdJ("click",function(){return e.removeAllTutorials()}),o._uU(7," Remove All "),o.qZA()(),o.TgZ(8,"div",1),o.YNc(9,BW,2,1,"div",5),o.YNc(10,UW,4,0,"div",5),o.qZA()()),2&t&&(o.xp6(5),o.Q6J("ngForOf",e.tutorials),o.xp6(4),o.Q6J("ngIf",e.currentTutorial),o.xp6(1),o.Q6J("ngIf",!e.currentTutorial))},dependencies:[si,An,T0],styles:[".list[_ngcontent-%COMP%]{text-align:left;max-width:750px;margin:auto}"]});const HW=[{path:"",redirectTo:"tutorials",pathMatch:"full"},{path:"tutorials",component:E0},{path:"add",component:C0}];class Sy{}function bL(n){return new o.vHH(3e3,!1)}function CK(){return typeof window<"u"&&typeof window.document<"u"}function jM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function af(n){switch(n.length){case 0:return new fy;case 1:return n[0];default:return new oM(n)}}function CL(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let p=-1,y=null;if(i.forEach(b=>{const E=b.get("offset"),M=E==p,P=M&&y||new Map;b.forEach((F,z)=>{let K=z,De=F;if("offset"!==z)switch(K=t.normalizePropertyName(K,c),De){case"!":De=r.get(z);break;case Oa:De=s.get(z);break;default:De=t.normalizeStyleValue(z,K,De,c)}P.set(K,De)}),M||d.push(P),y=P,p=E}),c.length)throw function uK(n){return new o.vHH(3502,!1)}();return d}function qM(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&WM(e,"start",n)));break;case"done":n.onDone(()=>i(e&&WM(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&WM(e,"destroy",n)))}}function WM(n,t,e){const s=KM(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function KM(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function jo(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function TL(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}Sy.\u0275fac=function(t){return new(t||Sy)},Sy.\u0275mod=o.oAB({type:Sy}),Sy.\u0275inj=o.cJS({imports:[b0.forRoot(HW),b0]});let ZM=(n,t)=>!1,EL=(n,t,e)=>[],IL=null;function YM(n){const t=n.parentNode||n.host;return t===IL?null:t}(jM()||typeof Element<"u")&&(CK()?(IL=(()=>document.documentElement)(),ZM=(n,t)=>{for(;t;){if(t===n)return!0;t=YM(t)}return!1}):ZM=(n,t)=>n.contains(t),EL=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Dg=null,SL=!1;const DL=ZM,xL=EL;let AL=(()=>{class n{validateStyleProperty(e){return function EK(n){Dg||(Dg=function IK(){return typeof document<"u"?document.body:null}()||{},SL=!!Dg.style&&"WebkitAppearance"in Dg.style);let t=!0;return Dg.style&&!function TK(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Dg.style,!t&&SL&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Dg.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return DL(e,i)}getParentElement(e){return YM(e)}query(e,i,r){return xL(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new fy(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),QM=(()=>{class n{}return n.NOOP=new AL,n})();const JM="ng-enter",kS="ng-leave",RS="ng-trigger",OS=".ng-trigger",kL="ng-animating",XM=".ng-animating";function Md(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ek(parseFloat(t[1]),t[2])}function ek(n,t){return"s"===t?1e3*n:n}function PS(n,t,e){return n.hasOwnProperty("duration")?n:function xK(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(bL()),{duration:0,delay:0,easing:""};r=ek(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=ek(parseFloat(p),d[4]));const y=d[5];y&&(c=y)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function GW(){return new o.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function zW(){return new o.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,bL())}return{duration:r,delay:s,easing:c}}(n,t,e)}function I0(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function RL(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function lf(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function PL(n,t,e){return e?t+":"+e+";":""}function NL(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=PL(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=PL(0,RK(e),n.style[e]));n.setAttribute("style",t)}function $c(n,t,e){n.style&&(t.forEach((i,r)=>{const s=nk(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),jM()&&NL(n))}function xg(n,t){n.style&&(t.forEach((e,i)=>{const r=nk(i);n.style[r]=""}),jM()&&NL(n))}function S0(n){return Array.isArray(n)?1==n.length?n[0]:hy(n):n}const tk=new RegExp("{{\\s*(.+?)\\s*}}","g");function FL(n){let t=[];if("string"==typeof n){let e;for(;e=tk.exec(n);)t.push(e[1]);tk.lastIndex=0}return t}function D0(n,t,e){const i=n.toString(),r=i.replace(tk,(s,c)=>{let d=t[c];return null==d&&(e.push(function jW(n){return new o.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function NS(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const kK=/-+([a-z0-9])/g;function nk(n){return n.replace(kK,(...t)=>t[1].toUpperCase())}function RK(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qo(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function qW(n){return new o.vHH(3004,!1)}()}}function LL(n,t){return window.getComputedStyle(n)[t]}function VK(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function BK(n,t,e){if(":"==n[0]){const p=function UK(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function oK(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function sK(n){return new o.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(VL(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(VL(c,r))}(i,e,t)):e.push(n),e}const BS=new Set(["true","1"]),US=new Set(["false","0"]);function VL(n,t){const e=BS.has(n)||US.has(n),i=BS.has(t)||US.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?BS.has(n):US.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?BS.has(t):US.has(t)),c&&d}}const HK=new RegExp("s*:selfs*,?","g");function ik(n,t,e,i){return new GK(n).build(t,e,i)}class GK{constructor(t){this._driver=t}build(t,e,i){const r=new jK(e);return this._resetContextStyleTimingState(r),qo(this,S0(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function KW(){return new o.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,e))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function ZW(){return new o.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{FL(p).forEach(y=>{c.hasOwnProperty(y)||s.add(y)})})}),s.size&&(NS(s.values()),e.errors.push(function YW(n,t){return new o.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=qo(this,S0(t.animation),e);return{type:1,matchers:VK(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ag(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>qo(this,i,e)),options:Ag(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=qo(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Ag(t.options)}}visitAnimate(t,e){const i=function WK(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return rk(PS(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=rk(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=PS(e,t);return rk(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Al({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const y={};i.easing&&(y.easing=i.easing),c=Al(y)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===Oa?i.push(d):e.errors.push(new o.vHH(3002,!1)):i.push(RL(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,p)=>{const y=e.collectedStyles.get(e.currentQuerySelector),b=y.get(p);let E=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(e.errors.push(function JW(n,t,e,i,r){return new o.vHH(3010,!1)}()),E=!1),s=b.startTime),E&&y.set(p,{startTime:s,endTime:r}),e.options&&function MK(n,t,e){const i=t.params||{},r=FL(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function $W(n){return new o.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function XW(){return new o.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,p=!1,y=0;const b=t.steps.map(De=>{const Be=this._makeStyleAst(De,e);let Le=null!=Be.offset?Be.offset:function qK(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Be.styles),Ue=0;return null!=Le&&(s++,Ue=Be.offset=Le),p=p||Ue<0||Ue>1,d=d||Ue<y,y=Ue,c.push(Ue),Be});p&&e.errors.push(function eK(){return new o.vHH(3012,!1)}()),d&&e.errors.push(function tK(){return new o.vHH(3200,!1)}());const E=t.steps.length;let M=0;s>0&&s<E?e.errors.push(function nK(){return new o.vHH(3202,!1)}()):0==s&&(M=1/(E-1));const P=E-1,F=e.currentTime,z=e.currentAnimateTimings,K=z.duration;return b.forEach((De,Be)=>{const Le=M>0?Be==P?1:M*Be:c[Be],Ue=Le*K;e.currentTime=F+z.delay+Ue,z.duration=Ue,this._validateStyleAst(De,e),De.offset=Le,i.styles.push(De)}),i}visitReference(t,e){return{type:8,animation:qo(this,S0(t.animation),e),options:Ag(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ag(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ag(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function zK(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(HK,"")),n=n.replace(/@\*/g,OS).replace(/@\w+/g,e=>OS+"-"+e.slice(1)).replace(/:animating/g,XM),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,jo(e.collectedStyles,e.currentQuerySelector,new Map);const d=qo(this,S0(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Ag(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function iK(){return new o.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:PS(t.timings,e.errors,!0);return{type:12,animation:qo(this,S0(t.animation),e),timings:i,options:null}}}class jK{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ag(n){return n?(n=I0(n)).params&&(n.params=function $K(n){return n?I0(n):null}(n.params)):n={},n}function rk(n,t,e){return{duration:n,delay:t,easing:e}}function sk(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class HS{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const YK=new RegExp(":enter","g"),JK=new RegExp(":leave","g");function ok(n,t,e,i,r,s=new Map,c=new Map,d,p,y=[]){return(new XK).buildKeyframes(n,t,e,i,r,s,c,d,p,y)}class XK{buildKeyframes(t,e,i,r,s,c,d,p,y,b=[]){y=y||new HS;const E=new ak(t,e,y,r,s,b,[]);E.options=p;const M=p.delay?Md(p.delay):0;E.currentTimeline.delayNextStep(M),E.currentTimeline.setStyles([c],null,E.errors,p),qo(this,i,E);const P=E.timelines.filter(F=>F.containsAnimation());if(P.length&&d.size){let F;for(let z=P.length-1;z>=0;z--){const K=P[z];if(K.element===e){F=K;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,E.errors,p)}return P.length?P.map(F=>F.buildKeyframes()):[sk(e,[],[],[],0,M,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const s=r?.delay;if(s){const c="number"==typeof s?s:Md(D0(s,r?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Md(i.duration):null,d=null!=i.delay?Md(i.delay):null;return 0!==c&&t.forEach(p=>{const y=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),qo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=GS);const c=Md(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>qo(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Md(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),qo(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return PS(e.params?D0(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Md(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=GS);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((y,b)=>{e.currentQueryIndex=b;const E=e.createSubContext(t.options,y);s&&E.delayNextStep(s),y===e.element&&(p=E.currentTimeline),qo(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const b=e.currentTimeline;p&&b.delayNextStep(p);const E=b.currentTime;qo(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}}const GS={};class ak{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=GS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new zS(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Md(i.duration)),null!=i.delay&&(r.delay=Md(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=D0(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new ak(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=GS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new eZ(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(YK,"."+this._enterClassName)).replace(JK,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&c.push(function rK(n){return new o.vHH(3014,!1)}()),d}}class zS{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new zS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||Oa),this._currentKeyframe.set(e,Oa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function tZ(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,Oa)}else lf(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of c){const y=D0(p,s,i);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Oa),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const y=lf(d,new Map,this._backFill);y.forEach((b,E)=>{"!"===b?t.add(E):b===Oa&&e.add(E)}),i||y.set("offset",p/this.duration),r.push(y)});const s=t.size?NS(t.values()):[],c=e.size?NS(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return sk(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class eZ extends zS{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=lf(t[0]);p.set("offset",0),s.push(p);const y=lf(t[0]);y.set("offset",HL(d)),s.push(y);const b=t.length-1;for(let E=1;E<=b;E++){let M=lf(t[E]);const P=M.get("offset");M.set("offset",HL((e+P*i)/c)),s.push(M)}i=c,e=0,r="",t=s}return sk(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function HL(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class lk{}const nZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class iZ extends lk{normalizePropertyName(t,e){return nk(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(nZ.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function WW(n,t){return new o.vHH(3005,!1)}())}return c+s}}function GL(n,t,e,i,r,s,c,d,p,y,b,E,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:b,totalTime:E,errors:M}}const ck={};class zL{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function rZ(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,p,y,b){const E=[],M=this.ast.options&&this.ast.options.params||ck,F=this.buildStyles(i,d&&d.params||ck,E),z=p&&p.params||ck,K=this.buildStyles(r,z,E),De=new Set,Be=new Map,Le=new Map,Ue="void"===r,dt={params:sZ(z,M),delay:this.ast.options?.delay},ft=b?[]:ok(t,e,this.ast.animation,s,c,F,K,dt,y,E);let en=0;if(ft.forEach(fi=>{en=Math.max(fi.duration+fi.delay,en)}),E.length)return GL(e,this._triggerName,i,r,Ue,F,K,[],[],Be,Le,en,E);ft.forEach(fi=>{const qs=fi.element,z3=jo(Be,qs,new Set);fi.preStyleProps.forEach(om=>z3.add(om));const UC=jo(Le,qs,new Set);fi.postStyleProps.forEach(om=>UC.add(om)),qs!==e&&De.add(qs)});const Dn=NS(De.values());return GL(e,this._triggerName,i,r,Ue,F,K,ft,Dn,Be,Le,en)}}function sZ(n,t){const e=I0(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class oZ{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=I0(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=D0(c,r,e));const p=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,p,c,e),i.set(d,c)})}),i}}class lZ{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new oZ(r.style,r.options&&r.options.params||{},i))}),$L(this.states,"true","1"),$L(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new zL(t,r,this.states))}),this.fallbackTransition=function cZ(n,t,e){return new zL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function $L(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const uZ=new HS;class dZ{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=ik(this._driver,e,i,[]);if(i.length)throw function dK(n){return new o.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=CL(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=ok(this._driver,e,s,JM,kS,new Map,new Map,i,uZ,r),c.forEach(b=>{const E=jo(d,b.element,new Map);b.postStyleProps.forEach(M=>E.set(M,null))})):(r.push(function hK(){return new o.vHH(3300,!1)}()),c=[]),r.length)throw function fK(n){return new o.vHH(3504,!1)}();d.forEach((b,E)=>{b.forEach((M,P)=>{b.set(P,this._driver.computeStyle(E,P,Oa))})});const y=af(c.map(b=>{const E=d.get(b.element);return this._buildPlayer(b,new Map,E)}));return this._playersById.set(t,y),y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function pK(n){return new o.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=KM(e,"","","");return qM(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const jL="ng-animate-queued",uk="ng-animate-disabled",mZ=[],qL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_Z={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Na="__ng_removed";class dk{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function bZ(n){return n??null}(i?t.value:t),i){const s=I0(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const x0="void",hk=new dk(x0);class yZ{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Fa(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function gK(n,t){return new o.vHH(3302,!1)}();if(null==i||0==i.length)throw function mK(n){return new o.vHH(3303,!1)}();if(!function CZ(n){return"start"==n||"done"==n}(i))throw function _K(n,t){return new o.vHH(3400,!1)}();const s=jo(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=jo(this._engine.statesByElement,t,new Map);return d.has(e)||(Fa(t,RS),Fa(t,RS+"-"+e),d.set(e,hk)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function yK(n){return new o.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new fk(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Fa(t,RS),Fa(t,RS+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const y=new dk(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d.set(e,y),p||(p=hk),y.value!==x0&&p.value===y.value){if(!function IZ(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,y.params)){const z=[],K=s.matchStyles(p.value,p.params,z),De=s.matchStyles(y.value,y.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{xg(t,K),$c(t,De)})}return}const M=jo(this._engine.playersByElement,t,[]);M.forEach(z=>{z.namespaceId==this.id&&z.triggerName==e&&z.queued&&z.destroy()});let P=s.matchTransition(p.value,y.value,t,y.params),F=!1;if(!P){if(!r)return;P=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:p,toState:y,player:c,isFallbackTransition:F}),F||(Fa(t,jL),c.onStart(()=>{Dy(t,jL)})),c.onDone(()=>{let z=this.players.indexOf(c);z>=0&&this.players.splice(z,1);const K=this._engine.playersByElement.get(t);if(K){let De=K.indexOf(c);De>=0&&K.splice(De,1)}}),this.players.push(c),M.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,OS,!0);i.forEach(r=>{if(r[Na])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((p,y)=>{if(c.set(y,p.value),this._triggers.has(y)){const b=this.trigger(t,y,x0,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&af(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers.get(c).fallbackTransition,y=i.get(c)||hk,b=new dk(x0),E=new fk(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:y,toState:b,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Na];(!s||s===qL)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Fa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=KM(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,qM(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class vZ{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new yZ(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const y=i.indexOf(p);i.splice(y+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if($S(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!$S(e))return;const s=e[Na];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Fa(t,uk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Dy(t,uk))}removeNode(t,e,i,r){if($S(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Na]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return $S(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,OS,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,XM,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return af(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Na];if(e&&e.setForRemoval){if(t[Na]=qL,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(uk)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Fa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?af(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function vK(n){return new o.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new HS,r=[],s=new Map,c=[],d=new Map,p=new Map,y=new Map,b=new Set;this.disabledNodes.forEach(Tt=>{b.add(Tt);const Ft=this.driver.query(Tt,".ng-animate-queued",!0);for(let $t=0;$t<Ft.length;$t++)b.add(Ft[$t])});const E=this.bodyNode,M=Array.from(this.statesByElement.keys()),P=ZL(M,this.collectedEnterElements),F=new Map;let z=0;P.forEach((Tt,Ft)=>{const $t=JM+z++;F.set(Ft,$t),Tt.forEach(bn=>Fa(bn,$t))});const K=[],De=new Set,Be=new Set;for(let Tt=0;Tt<this.collectedLeaveElements.length;Tt++){const Ft=this.collectedLeaveElements[Tt],$t=Ft[Na];$t&&$t.setForRemoval&&(K.push(Ft),De.add(Ft),$t.hasAnimation?this.driver.query(Ft,".ng-star-inserted",!0).forEach(bn=>De.add(bn)):Be.add(Ft))}const Le=new Map,Ue=ZL(M,Array.from(De));Ue.forEach((Tt,Ft)=>{const $t=kS+z++;Le.set(Ft,$t),Tt.forEach(bn=>Fa(bn,$t))}),t.push(()=>{P.forEach((Tt,Ft)=>{const $t=F.get(Ft);Tt.forEach(bn=>Dy(bn,$t))}),Ue.forEach((Tt,Ft)=>{const $t=Le.get(Ft);Tt.forEach(bn=>Dy(bn,$t))}),K.forEach(Tt=>{this.processLeaveNode(Tt)})});const dt=[],ft=[];for(let Tt=this._namespaceList.length-1;Tt>=0;Tt--)this._namespaceList[Tt].drainQueuedTransitions(e).forEach($t=>{const bn=$t.player,zr=$t.element;if(dt.push(bn),this.collectedEnterElements.length){const Ts=zr[Na];if(Ts&&Ts.setForMove){if(Ts.previousTriggersValues&&Ts.previousTriggersValues.has($t.triggerName)){const am=Ts.previousTriggersValues.get($t.triggerName),Va=this.statesByElement.get($t.element);if(Va&&Va.has($t.triggerName)){const Cx=Va.get($t.triggerName);Cx.value=am,Va.set($t.triggerName,Cx)}}return void bn.destroy()}}const tu=!E||!this.driver.containsElement(E,zr),Qo=Le.get(zr),Mf=F.get(zr),Ai=this._buildInstruction($t,i,Mf,Qo,tu);if(Ai.errors&&Ai.errors.length)return void ft.push(Ai);if(tu)return bn.onStart(()=>xg(zr,Ai.fromStyles)),bn.onDestroy(()=>$c(zr,Ai.toStyles)),void r.push(bn);if($t.isFallbackTransition)return bn.onStart(()=>xg(zr,Ai.fromStyles)),bn.onDestroy(()=>$c(zr,Ai.toStyles)),void r.push(bn);const q3=[];Ai.timelines.forEach(Ts=>{Ts.stretchStartingKeyframe=!0,this.disabledNodes.has(Ts.element)||q3.push(Ts)}),Ai.timelines=q3,i.append(zr,Ai.timelines),c.push({instruction:Ai,player:bn,element:zr}),Ai.queriedElements.forEach(Ts=>jo(d,Ts,[]).push(bn)),Ai.preStyleProps.forEach((Ts,am)=>{if(Ts.size){let Va=p.get(am);Va||p.set(am,Va=new Set),Ts.forEach((Cx,RP)=>Va.add(RP))}}),Ai.postStyleProps.forEach((Ts,am)=>{let Va=y.get(am);Va||y.set(am,Va=new Set),Ts.forEach((Cx,RP)=>Va.add(RP))})});if(ft.length){const Tt=[];ft.forEach(Ft=>{Tt.push(function wK(n,t){return new o.vHH(3505,!1)}())}),dt.forEach(Ft=>Ft.destroy()),this.reportError(Tt)}const en=new Map,Dn=new Map;c.forEach(Tt=>{const Ft=Tt.element;i.has(Ft)&&(Dn.set(Ft,Ft),this._beforeAnimationBuild(Tt.player.namespaceId,Tt.instruction,en))}),r.forEach(Tt=>{const Ft=Tt.element;this._getPreviousPlayers(Ft,!1,Tt.namespaceId,Tt.triggerName,null).forEach(bn=>{jo(en,Ft,[]).push(bn),bn.destroy()})});const fi=K.filter(Tt=>QL(Tt,p,y)),qs=new Map;KL(qs,this.driver,Be,y,Oa).forEach(Tt=>{QL(Tt,p,y)&&fi.push(Tt)});const UC=new Map;P.forEach((Tt,Ft)=>{KL(UC,this.driver,new Set(Tt),p,"!")}),fi.forEach(Tt=>{const Ft=qs.get(Tt),$t=UC.get(Tt);qs.set(Tt,new Map([...Array.from(Ft?.entries()??[]),...Array.from($t?.entries()??[])]))});const om=[],$3=[],j3={};c.forEach(Tt=>{const{element:Ft,player:$t,instruction:bn}=Tt;if(i.has(Ft)){if(b.has(Ft))return $t.onDestroy(()=>$c(Ft,bn.toStyles)),$t.disabled=!0,$t.overrideTotalTime(bn.totalTime),void r.push($t);let zr=j3;if(Dn.size>1){let Qo=Ft;const Mf=[];for(;Qo=Qo.parentNode;){const Ai=Dn.get(Qo);if(Ai){zr=Ai;break}Mf.push(Qo)}Mf.forEach(Ai=>Dn.set(Ai,zr))}const tu=this._buildAnimation($t.namespaceId,bn,en,s,UC,qs);if($t.setRealPlayer(tu),zr===j3)om.push($t);else{const Qo=this.playersByElement.get(zr);Qo&&Qo.length&&($t.parentPlayer=af(Qo)),r.push($t)}}else xg(Ft,bn.fromStyles),$t.onDestroy(()=>$c(Ft,bn.toStyles)),$3.push($t),b.has(Ft)&&r.push($t)}),$3.forEach(Tt=>{const Ft=s.get(Tt.element);if(Ft&&Ft.length){const $t=af(Ft);Tt.setRealPlayer($t)}}),r.forEach(Tt=>{Tt.parentPlayer?Tt.syncPlayerEvents(Tt.parentPlayer):Tt.destroy()});for(let Tt=0;Tt<K.length;Tt++){const Ft=K[Tt],$t=Ft[Na];if(Dy(Ft,kS),$t&&$t.hasAnimation)continue;let bn=[];if(d.size){let tu=d.get(Ft);tu&&tu.length&&bn.push(...tu);let Qo=this.driver.query(Ft,XM,!0);for(let Mf=0;Mf<Qo.length;Mf++){let Ai=d.get(Qo[Mf]);Ai&&Ai.length&&bn.push(...Ai)}}const zr=bn.filter(tu=>!tu.destroyed);zr.length?TZ(this,Ft,zr):this.processLeaveNode(Ft)}return K.length=0,om.forEach(Tt=>{this.players.push(Tt),Tt.onDone(()=>{Tt.destroy();const Ft=this.players.indexOf(Tt);this.players.splice(Ft,1)}),Tt.play()}),om}elementContainsData(t,e){let i=!1;const r=e[Na];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==x0;d.forEach(y=>{y.queued||!p&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const y=p.element,b=y!==s,E=jo(i,y,[]);this._getPreviousPlayers(y,b,c,d,e.toState).forEach(P=>{const F=P.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),P.destroy(),E.push(P)})}xg(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,y=[],b=new Set,E=new Set,M=e.timelines.map(F=>{const z=F.element;b.add(z);const K=z[Na];if(K&&K.removedBeforeQueried)return new fy(F.duration,F.delay);const De=z!==p,Be=function EZ(n){const t=[];return YL(n,t),t}((i.get(z)||mZ).map(en=>en.getRealPlayer())).filter(en=>!!en.element&&en.element===z),Le=s.get(z),Ue=c.get(z),dt=CL(0,this._normalizer,0,F.keyframes,Le,Ue),ft=this._buildPlayer(F,dt,Be);if(F.subTimeline&&r&&E.add(z),De){const en=new fk(t,d,z);en.setRealPlayer(ft),y.push(en)}return ft});y.forEach(F=>{jo(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function wZ(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,F.element,F))}),b.forEach(F=>Fa(F,kL));const P=af(M);return P.onDestroy(()=>{b.forEach(F=>Dy(F,kL)),$c(p,e.toStyles)}),E.forEach(F=>{jo(r,F,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new fy(t.duration,t.delay)}}class fk{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new fy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>qM(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){jo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function $S(n){return n&&1===n.nodeType}function WL(n,t){const e=n.style.display;return n.style.display=t??"none",e}function KL(n,t,e,i,r){const s=[];e.forEach(p=>s.push(WL(p)));const c=[];i.forEach((p,y)=>{const b=new Map;p.forEach(E=>{const M=t.computeStyle(y,E,r);b.set(E,M),(!M||0==M.length)&&(y[Na]=_Z,c.push(y))}),n.set(y,b)});let d=0;return e.forEach(p=>WL(p,s[d++])),c}function ZL(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=e.has(y)?y:r.has(y)?1:c(y),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function Fa(n,t){n.classList?.add(t)}function Dy(n,t){n.classList?.remove(t)}function TZ(n,t,e){af(e).onDone(()=>n.processLeaveNode(t))}function YL(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof oM?YL(i.players,t):t.push(i)}}function QL(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class jS{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new vZ(t,e,i),this._timelineEngine=new dZ(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],b=ik(this._driver,s,p,[]);if(p.length)throw function cK(n,t){return new o.vHH(3404,!1)}();d=function aZ(n,t,e){return new lZ(n,t,e)}(r,b,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=TL(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=TL(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let DZ=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&$c(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($c(this._element,this._initialStyles),this._endStyles&&($c(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(xg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xg(this._element,this._endStyles),this._endStyles=null),$c(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function pk(n){let t=null;return n.forEach((e,i)=>{(function xZ(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class JL{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:LL(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class AZ{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return DL(t,e)}getParentElement(t){return YM(t)}query(t,e,i){return xL(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y=new Map,b=c.filter(P=>P instanceof JL);(function OK(n,t){return 0===n||0===t})(i,r)&&b.forEach(P=>{P.currentSnapshot.forEach((F,z)=>y.set(z,F))});let E=function AK(n){return n.length?n[0]instanceof Map?n:n.map(t=>RL(t)):[]}(e).map(P=>lf(P));E=function PK(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,LL(n,d)))}}return t}(t,E,y);const M=function SZ(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=pk(t[0]),t.length>1&&(i=pk(t[t.length-1]))):t instanceof Map&&(e=pk(t)),e||i?new DZ(n,e,i):null}(t,E);return new JL(t,E,p,M)}}let MZ=(()=>{class n extends Qb{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?hy(e):e;return XL(this._renderer,null,i,"register",[r]),new kZ(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(re))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class kZ extends JI{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new RZ(this._id,t,e||{},this._renderer)}}class RZ{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return XL(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function XL(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const e2="@.disabled";let OZ=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new t2("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,b)),b}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(c,d,e,b.name,b)};return i.data.animation.forEach(p),new PZ(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(jS),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class t2{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==e2?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class PZ extends t2{constructor(t,e,i,r,s){super(e,i,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==e2?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function NZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function FZ(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let LZ=(()=>{class n extends jS{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(re),o.LFG(QM),o.LFG(lk),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const n2=[{provide:Qb,useClass:MZ},{provide:lk,useFactory:function VZ(){return new iZ}},{provide:jS,useClass:LZ},{provide:o.FYo,useFactory:function BZ(n,t,e){return new OZ(n,t,e)},deps:[eo,jS,o.R0b]}],gk=[{provide:QM,useFactory:()=>new AZ},{provide:o.QbO,useValue:"BrowserAnimations"},...n2],r2=[{provide:QM,useClass:AL},{provide:o.QbO,useValue:"NoopAnimations"},...n2];let UZ=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?r2:gk}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:gk,imports:[ku]}),n})();function mk(){return(0,Oi.e)((n,t)=>{let e,i=!1;n.subscribe((0,ai.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var St,HZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kd={},_k=_k||{},Jt=HZ||self;function WS(){}function KS(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function A0(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var yk="closure_uid_"+(1e9*Math.random()>>>0),zZ=0;function $Z(n,t,e){return n.call.apply(n.bind,arguments)}function jZ(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function ws(n,t,e){return(ws=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$Z:jZ).apply(null,arguments)}function ZS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function rs(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function cf(){this.s=this.s,this.o=this.o}cf.prototype.s=!1,cf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function GZ(n){Object.prototype.hasOwnProperty.call(n,yk)&&n[yk]||(n[yk]=++zZ)}(this)},cf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const s2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function vk(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function o2(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(KS(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function bs(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}bs.prototype.h=function(){this.defaultPrevented=!0};var WZ=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Jt.addEventListener("test",WS,t),Jt.removeEventListener("test",WS,t)}catch{}return n}();function YS(n){return/^[\s\xa0]*$/.test(n)}var a2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wk(n,t){return n<t?-1:n>t?1:0}function QS(){var n=Jt.navigator;return n&&(n=n.userAgent)?n:""}function jc(n){return-1!=QS().indexOf(n)}function bk(n){return bk[" "](n),n}bk[" "]=WS;var JS,n,ZZ=jc("Opera"),xy=jc("Trident")||jc("MSIE"),l2=jc("Edge"),Ck=l2||xy,c2=jc("Gecko")&&!(-1!=QS().toLowerCase().indexOf("webkit")&&!jc("Edge"))&&!(jc("Trident")||jc("MSIE"))&&!jc("Edge"),YZ=-1!=QS().toLowerCase().indexOf("webkit")&&!jc("Edge");function u2(){var n=Jt.document;return n?n.documentMode:void 0}e:{var Tk="",Ek=(n=QS(),c2?/rv:([^\);]+)(\)|;)/.exec(n):l2?/Edge\/([\d\.]+)/.exec(n):xy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YZ?/WebKit\/(\S+)/.exec(n):ZZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ek&&(Tk=Ek?Ek[1]:""),xy){var Ik=u2();if(null!=Ik&&Ik>parseFloat(Tk)){JS=String(Ik);break e}}JS=Tk}var QZ={};var XZ=Jt.document&&xy&&(u2()||parseInt(JS,10))||void 0;function M0(n,t){if(bs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(c2){e:{try{bk(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:e5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&M0.X.h.call(this)}}rs(M0,bs);var e5={2:"touch",3:"pen",4:"mouse"};M0.prototype.h=function(){M0.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var k0="closure_listenable_"+(1e6*Math.random()|0),t5=0;function n5(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++t5,this.ba=this.ea=!1}function XS(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Dk(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function h2(n){const t={};for(const e in n)t[e]=n[e];return t}const f2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function p2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<f2.length;s++)e=f2[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function eD(n){this.src=n,this.g={},this.h=0}function xk(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=s2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(XS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function Ak(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}eD.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=Ak(n,t,i,r);return-1<c?(t=n[c],e||(t.ea=!1)):((t=new n5(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var Mk="closure_lm_"+(1e6*Math.random()|0),kk={};function g2(n,t,e,i,r){if(i&&i.once)return _2(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)g2(n,t[s],e,i,r);return null}return e=Nk(e),n&&n[k0]?n.N(t,e,A0(i)?!!i.capture:!!i,r):m2(n,t,e,!1,i,r)}function m2(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=A0(r)?!!r.capture:!!r,d=Ok(n);if(d||(n[Mk]=d=new eD(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function r5(){const t=s5;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)WZ||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(v2(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function _2(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)_2(n,t[s],e,i,r);return null}return e=Nk(e),n&&n[k0]?n.O(t,e,A0(i)?!!i.capture:!!i,r):m2(n,t,e,!0,i,r)}function y2(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)y2(n,t[s],e,i,r);else i=A0(i)?!!i.capture:!!i,e=Nk(e),n&&n[k0]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=Ak(s=n.g[t],e,i,r))&&(XS(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=Ok(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Ak(t,e,i,r)),(e=-1<n?t[n]:null)&&Rk(e))}function Rk(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[k0])xk(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(v2(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Ok(t))?(xk(e,n),0==e.h&&(e.src=null,t[Mk]=null)):XS(n)}}}function v2(n){return n in kk?kk[n]:kk[n]="on"+n}function s5(n,t){if(n.ba)n=!0;else{t=new M0(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&Rk(n),n=e.call(i,t)}return n}function Ok(n){return(n=n[Mk])instanceof eD?n:null}var Pk="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nk(n){return"function"==typeof n?n:(n[Pk]||(n[Pk]=function(t){return n.handleEvent(t)}),n[Pk])}function Br(){cf.call(this),this.i=new eD(this),this.P=this,this.I=null}function ss(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new bs(t,n);else if(t instanceof bs)t.target=t.target||n;else{var r=t;p2(t=new bs(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=tD(c,i,!0,t)&&r}if(r=tD(c=t.g=n,i,!0,t)&&r,r=tD(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=tD(c=t.g=e[s],i,!1,t)&&r}function tD(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ba&&c.capture==e){var d=c.listener,p=c.ha||c.src;c.ea&&xk(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}rs(Br,cf),Br.prototype[k0]=!0,Br.prototype.removeEventListener=function(n,t,e,i){y2(this,n,t,e,i)},Br.prototype.M=function(){if(Br.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)XS(e[i]);delete n.g[t],n.h--}}this.I=null},Br.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Br.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var Fk=Jt.JSON.stringify;function o5(){var n=C2;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var Lk,w2=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new l5,n=>n.reset());class l5{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function c5(n){Jt.setTimeout(()=>{throw n},0)}function b2(n,t){Lk||function u5(){var n=Jt.Promise.resolve(void 0);Lk=function(){n.then(d5)}}(),Vk||(Lk(),Vk=!0),C2.add(n,t)}var Vk=!1,C2=new class a5{constructor(){this.h=this.g=null}add(t,e){const i=w2.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function d5(){for(var n;n=o5();){try{n.h.call(n.g)}catch(e){c5(e)}var t=w2;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Vk=!1}function nD(n,t){Br.call(this),this.h=n||1,this.g=t||Jt,this.j=ws(this.lb,this),this.l=Date.now()}function Bk(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Uk(n,t,e){if("function"==typeof n)e&&(n=ws(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ws(n.handleEvent,n)}return 2147483647<Number(t)?-1:Jt.setTimeout(n,t||0)}function T2(n){n.g=Uk(()=>{n.g=null,n.i&&(n.i=!1,T2(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}rs(nD,Br),(St=nD.prototype).ca=!1,St.R=null,St.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ss(this,"tick"),this.ca&&(Bk(this),this.start()))}},St.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},St.M=function(){nD.X.M.call(this),Bk(this),delete this.g};class h5 extends cf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:T2(this)}M(){super.M(),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function R0(n){cf.call(this),this.h=n,this.g={}}rs(R0,cf);var E2=[];function I2(n,t,e,i){Array.isArray(e)||(e&&(E2[0]=e.toString()),e=E2);for(var r=0;r<e.length;r++){var s=g2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function S2(n){Dk(n.g,function(t,e){this.g.hasOwnProperty(e)&&Rk(t)},n),n.g={}}function iD(){this.g=!0}function Ay(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function m5(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return Fk(e)}catch{return t}}(n,e)+(i?" "+i:"")})}R0.prototype.M=function(){R0.X.M.call(this),S2(this)},R0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iD.prototype.Aa=function(){this.g=!1},iD.prototype.info=function(){};var Mg={},D2=null;function rD(){return D2=D2||new Br}function x2(n){bs.call(this,Mg.Pa,n)}function O0(n){const t=rD();ss(t,new x2(t))}function A2(n,t){bs.call(this,Mg.STAT_EVENT,n),this.stat=t}function Bs(n){const t=rD();ss(t,new A2(t,n))}function M2(n,t){bs.call(this,Mg.Qa,n),this.size=t}function P0(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Jt.setTimeout(function(){n()},t)}Mg.Pa="serverreachability",rs(x2,bs),Mg.STAT_EVENT="statevent",rs(A2,bs),Mg.Qa="timingevent",rs(M2,bs);var sD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},k2={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hk(){}function O2(){}Hk.prototype.h=null;var $k,N0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gk(){bs.call(this,"d")}function zk(){bs.call(this,"c")}function oD(){}function F0(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new R0(this),this.O=_5,this.T=new nD(n=Ck?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new P2}function P2(){this.i=null,this.g="",this.h=!1}rs(Gk,bs),rs(zk,bs),rs(oD,Hk),oD.prototype.g=function(){return new XMLHttpRequest},oD.prototype.i=function(){return{}},$k=new oD;var _5=45e3,jk={},aD={};function qk(n,t,e){n.K=1,n.v=dD(Rd(t)),n.s=e,n.P=!0,N2(n,null)}function N2(n,t){n.F=Date.now(),L0(n),n.A=Rd(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),j2(e.i,"t",i),n.C=0,e=n.l.H,n.h=new P2,n.g=gV(n.l,e?t:null,!n.s),0<n.N&&(n.L=new h5(ws(n.La,n,n.g),n.N)),I2(n.S,n.g,"readystatechange",n.ib),t=n.H?h2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),O0(),function f5(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var b=y[0];y=y[1];var E=b.split("_");c=2<=E.length&&"type"==E[1]?c+(b+"=")+y+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function F2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function L2(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=y5(n,e),r==aD){4==t&&(n.o=4,Bs(14),i=!1),Ay(n.j,n.m,null,"[Incomplete Response]");break}if(r==jk){n.o=4,Bs(15),Ay(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Ay(n.j,n.m,r,null),Wk(n,r)}F2(n)&&r!=aD&&r!=jk&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Bs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),tR(t),t.K=!0,Bs(11))):(Ay(n.j,n.m,e,"[Invalid Chunked Response]"),kg(n),V0(n))}function y5(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?aD:(e=Number(t.substring(e,i)),isNaN(e)?jk:(i+=1)+e>t.length?aD:(t=t.substr(i,e),n.C=i+e,t))}function L0(n){n.V=Date.now()+n.O,V2(n,n.O)}function V2(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=P0(ws(n.gb,n),t)}function lD(n){n.B&&(Jt.clearTimeout(n.B),n.B=null)}function V0(n){0==n.l.G||n.I||dV(n.l,n)}function kg(n){lD(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Bk(n.T),S2(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Wk(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||Kk(e.h,n)))if(!n.J&&Kk(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;_D(e),gD(e)}eR(e),Bs(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=P0(ws(e.cb,e),6e3));if(1>=K2(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Og(e,11)}else if((n.J||e.g==n)&&_D(e),!YS(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.T=y[0],y=y[1],2==e.G)if("c"==y[0]){e.I=y[1],e.ka=y[2];const b=y[3];null!=b&&(e.ma=b,e.j.info("VER="+e.ma));const E=y[4];null!=E&&(e.Ca=E,e.j.info("SVER="+e.Ca));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(e.J=i=1.5*M,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const F=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=i.h;s.g||-1==F.indexOf("spdy")&&-1==F.indexOf("quic")&&-1==F.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Zk(s,s.h),s.h=null))}if(i.D){const z=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(i.za=z,wi(i.F,i.D,z))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var c=n;if((i=e).sa=pV(i,i.H?i.ka:null,i.V),c.J){Z2(i.h,c);var d=c,p=i.J;p&&d.setTimeout(p),d.B&&(lD(d),L0(d)),i.g=c}else cV(i);0<e.i.length&&mD(e)}else"stop"!=y[0]&&"close"!=y[0]||Og(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Og(e,7):Xk(e):"noop"!=y[0]&&e.l&&e.l.wa(y),e.A=0)}O0()}catch{}}function B2(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(KS(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function w5(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(KS(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function v5(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(KS(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(St=F0.prototype).setTimeout=function(n){this.O=n},St.ib=function(n){n=n.target;const t=this.L;t&&3==Od(n)?t.l():this.La(n)},St.La=function(n){try{if(n==this.g)e:{const b=Od(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Ck||this.g&&(this.h.h||this.g.fa()||iV(this.g)))){this.I||4!=b||7==t||O0(),lD(this);var e=this.g.aa();this.Y=e;t:if(F2(this)){var i=iV(this.g);n="";var r=i.length,s=4==Od(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kg(this),V0(this);var c="";break t}this.h.i=new Jt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==e,function p5(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,b,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!YS(d)){var y=d;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Bs(12),kg(this),V0(this);break e}Ay(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wk(this,e)}this.P?(L2(this,b,c),Ck&&this.i&&3==b&&(I2(this.S,this.T,"tick",this.hb),this.T.start())):(Ay(this.j,this.m,c,null),Wk(this,c)),4==b&&kg(this),this.i&&!this.I&&(4==b?dV(this.l,this):(this.i=!1,L0(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,Bs(12)):(this.o=0,Bs(13)),kg(this),V0(this)}}}catch{}},St.hb=function(){if(this.g){var n=Od(this.g),t=this.g.fa();this.C<t.length&&(lD(this),L2(this,n,t),this.i&&4!=n&&L0(this))}},St.cancel=function(){this.I=!0,kg(this)},St.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function g5(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(O0(),Bs(17)),kg(this),this.o=2,V0(this)):V2(this,this.V-n)};var U2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rg(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rg){this.h=void 0!==t?t:n.h,cD(this,n.j),this.s=n.s,this.g=n.g,uD(this,n.m),this.l=n.l,t=n.i;var e=new H0;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),H2(this,e),this.o=n.o}else n&&(e=String(n).match(U2))?(this.h=!!t,cD(this,e[1]||"",!0),this.s=B0(e[2]||""),this.g=B0(e[3]||"",!0),uD(this,e[4]),this.l=B0(e[5]||"",!0),H2(this,e[6]||"",!0),this.o=B0(e[7]||"")):(this.h=!!t,this.i=new H0(null,this.h))}function Rd(n){return new Rg(n)}function cD(n,t,e){n.j=e?B0(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function uD(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function H2(n,t,e){t instanceof H0?(n.i=t,function D5(n,t){t&&!n.j&&(uf(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(z2(this,i),j2(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=U0(t,I5)),n.i=new H0(t,n.h))}function wi(n,t,e){n.i.set(t,e)}function dD(n){return wi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function B0(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function U0(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,C5),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function C5(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rg.prototype.toString=function(){var n=[],t=this.j;t&&n.push(U0(t,G2,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(U0(t,G2,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(U0(e,"/"==e.charAt(0)?E5:T5,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",U0(e,S5)),n.join("")};var G2=/[#\/\?@]/g,T5=/[#\?:]/g,E5=/[#\?]/g,I5=/[#\?@]/g,S5=/#/g;function H0(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function uf(n){n.g||(n.g=new Map,n.h=0,n.i&&function b5(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function z2(n,t){uf(n),t=My(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function $2(n,t){return uf(n),t=My(n,t),n.g.has(t)}function j2(n,t,e){z2(n,t),0<e.length&&(n.i=null,n.g.set(My(n,t),vk(e)),n.h+=e.length)}function My(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function q2(n){this.l=n||A5,n=Jt.PerformanceNavigationTiming?0<(n=Jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Jt.g&&Jt.g.Ga&&Jt.g.Ga()&&Jt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(St=H0.prototype).add=function(n,t){uf(this),this.i=null,n=My(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},St.forEach=function(n,t){uf(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},St.oa=function(){uf(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},St.W=function(n){uf(this);let t=[];if("string"==typeof n)$2(this,n)&&(t=t.concat(this.g.get(My(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},St.set=function(n,t){return uf(this),this.i=null,$2(this,n=My(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},St.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},St.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var A5=10;function W2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function K2(n){return n.h?1:n.g?n.g.size:0}function Kk(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function Zk(n,t){n.g?n.g.add(t):n.h=t}function Z2(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function Y2(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return vk(n.i)}function Yk(){}function M5(){this.g=new Yk}function k5(n,t,e){const i=e||"";try{B2(n,function(r,s){let c=r;A0(r)&&(c=Fk(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function hD(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function G0(n){this.l=n.ac||null,this.j=n.jb||!1}function fD(n,t){Br.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Qk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}q2.prototype.cancel=function(){if(this.i=Y2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yk.prototype.stringify=function(n){return Jt.JSON.stringify(n,void 0)},Yk.prototype.parse=function(n){return Jt.JSON.parse(n,void 0)},rs(G0,Hk),G0.prototype.g=function(){return new fD(this.l,this.j)},G0.prototype.i=function(n){return function(){return n}}({}),rs(fD,Br);var Qk=0;function Q2(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function z0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$0(n)}function $0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(St=fD.prototype).open=function(n,t){if(this.readyState!=Qk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,$0(this)},St.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Jt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},St.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,z0(this)),this.readyState=Qk},St.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$0(this)),this.g&&(this.readyState=3,$0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Q2(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},St.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?z0(this):$0(this),3==this.readyState&&Q2(this)}},St.Va=function(n){this.g&&(this.response=this.responseText=n,z0(this))},St.Ua=function(n){this.g&&(this.response=n,z0(this))},St.ga=function(){this.g&&z0(this)},St.setRequestHeader=function(n,t){this.v.append(n,t)},St.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},St.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(fD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var O5=Jt.JSON.parse;function Vi(n){Br.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=J2,this.K=this.L=!1}rs(Vi,Br);var J2="",P5=/^https?$/i,N5=["POST","PUT"];function X2(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,eV(n),pD(n)}function eV(n){n.D||(n.D=!0,ss(n,"complete"),ss(n,"error"))}function tV(n){if(n.h&&typeof _k<"u"&&(!n.C[1]||4!=Od(n)||2!=n.aa()))if(n.v&&4==Od(n))Uk(n.Ha,0,n);else if(ss(n,"readystatechange"),4==Od(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(U2)[1]||null;if(!r&&Jt.self&&Jt.self.location){var s=Jt.self.location.protocol;r=s.substr(0,s.length-1)}i=!P5.test(r?r.toLowerCase():"")}e=i}if(e)ss(n,"complete"),ss(n,"success");else{n.m=6;try{var c=2<Od(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",eV(n)}}finally{pD(n)}}}function pD(n,t){if(n.g){nV(n);const e=n.g,i=n.C[0]?WS:null;n.g=null,n.C=null,t||ss(n,"ready");try{e.onreadystatechange=i}catch{}}}function nV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Jt.clearTimeout(n.A),n.A=null)}function Od(n){return n.g?n.g.readyState:0}function iV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case J2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rV(n){let t="";return Dk(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function Jk(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=rV(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):wi(n,t,e))}function j0(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function sV(n){this.Ca=0,this.i=[],this.j=new iD,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=j0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=j0("baseRetryDelayMs",5e3,n),this.bb=j0("retryDelaySeedMs",1e4,n),this.$a=j0("forwardChannelMaxRetries",2,n),this.ta=j0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new q2(n&&n.concurrentRequestLimit),this.Fa=new M5,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Xk(n){if(oV(n),3==n.G){var t=n.U++,e=Rd(n.F);wi(e,"SID",n.I),wi(e,"RID",t),wi(e,"TYPE","terminate"),q0(n,e),(t=new F0(n,n.j,t,void 0)).K=2,t.v=dD(Rd(e)),e=!1,Jt.navigator&&Jt.navigator.sendBeacon&&(e=Jt.navigator.sendBeacon(t.v.toString(),"")),!e&&Jt.Image&&((new Image).src=t.v,e=!0),e||(t.g=gV(t.l,null),t.g.da(t.v)),t.F=Date.now(),L0(t)}fV(n)}function gD(n){n.g&&(tR(n),n.g.cancel(),n.g=null)}function oV(n){gD(n),n.u&&(Jt.clearTimeout(n.u),n.u=null),_D(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Jt.clearTimeout(n.m),n.m=null)}function mD(n){W2(n.h)||n.m||(n.m=!0,b2(n.Ja,n),n.C=0)}function aV(n,t){var e;e=t?t.m:n.U++;const i=Rd(n.F);wi(i,"SID",n.I),wi(i,"RID",e),wi(i,"AID",n.T),q0(n,i),n.o&&n.s&&Jk(i,n.o,n.s),e=new F0(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=lV(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Zk(n.h,e),qk(e,i,t)}function q0(n,t){n.ia&&Dk(n.ia,function(e,i){wi(t,i,e)}),n.l&&B2({},function(e,i){wi(t,i,e)})}function lV(n,t,e){e=Math.min(n.i.length,e);var i=n.l?ws(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let y=r[p].h;const b=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),d=!1;else try{k5(b,c,"req"+y+"_")}catch{i&&i(b)}}if(d){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function cV(n){n.g||n.u||(n.Z=1,b2(n.Ia,n),n.A=0)}function eR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=P0(ws(n.Ia,n),hV(n,n.A)),n.A++,0))}function tR(n){null!=n.B&&(Jt.clearTimeout(n.B),n.B=null)}function uV(n){n.g=new F0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=Rd(n.sa);wi(t,"RID","rpc"),wi(t,"SID",n.I),wi(t,"CI",n.L?"0":"1"),wi(t,"AID",n.T),wi(t,"TYPE","xmlhttp"),q0(n,t),n.o&&n.s&&Jk(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=dD(Rd(t)),e.s=null,e.P=!0,N2(e,n)}function _D(n){null!=n.v&&(Jt.clearTimeout(n.v),n.v=null)}function dV(n,t){var e=null;if(n.g==t){_D(n),tR(n),n.g=null;var i=2}else{if(!Kk(n.h,t))return;e=t.D,Z2(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;ss(i=rD(),new M2(i,e)),mD(n)}else cV(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function L5(n,t){return!(K2(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=P0(ws(n.Ja,n,t),hV(n,n.C)),n.C++,0)))}(n,t)||2==i&&eR(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Og(n,5);break;case 4:Og(n,10);break;case 3:Og(n,6);break;default:Og(n,2)}}function hV(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function Og(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=ws(n.kb,n);e||(e=new Rg("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||cD(e,"https"),dD(e)),function R5(n,t){const e=new iD;if(Jt.Image){const i=new Image;i.onload=ZS(hD,e,i,"TestLoadImage: loaded",!0,t),i.onerror=ZS(hD,e,i,"TestLoadImage: error",!1,t),i.onabort=ZS(hD,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=ZS(hD,e,i,"TestLoadImage: timeout",!1,t),Jt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Bs(2);n.G=0,n.l&&n.l.va(t),fV(n),oV(n)}function fV(n){if(n.G=0,n.la=[],n.l){const t=Y2(n.h);(0!=t.length||0!=n.i.length)&&(o2(n.la,t),o2(n.la,n.i),n.h.i.length=0,vk(n.i),n.i.length=0),n.l.ua()}}function pV(n,t,e){var i=e instanceof Rg?Rd(e):new Rg(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),uD(i,i.m);else{var r=Jt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Rg(null,void 0);i&&cD(s,i),t&&(s.g=t),r&&uD(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&wi(i,e,t),wi(i,"VER",n.ma),q0(n,i),i}function gV(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Vi(e&&n.Da&&!n.ra?new G0({jb:!0}):n.ra)).Ka(n.H),t}function mV(){}function yD(){if(xy&&!(10<=Number(XZ)))throw Error("Environmental error: no available transport.")}function Wo(n,t){Br.call(this),this.g=new sV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!YS(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!YS(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new ky(this)}function _V(n){Gk.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function yV(){zk.call(this),this.status=1}function ky(n){this.g=n}(St=Vi.prototype).Ka=function(n){this.L=n},St.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$k.g(),this.C=function R2(n){return n.h||(n.h=n.i())}(this.u?this.u:$k),this.g.onreadystatechange=ws(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void X2(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=Jt.FormData&&n instanceof Jt.FormData,!(0<=s2(N5,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nV(this),0<this.B&&((this.K=function F5(n){return xy&&function JZ(){return function KZ(n){var t=QZ;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=a2(String(JS)).split("."),e=a2("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=wk(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||wk(0==r[2].length,0==s[2].length)||wk(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ws(this.qa,this)):this.A=Uk(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){X2(this,s)}},St.qa=function(){typeof _k<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ss(this,"timeout"),this.abort(8))},St.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ss(this,"complete"),ss(this,"abort"),pD(this))},St.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pD(this,!0)),Vi.X.M.call(this)},St.Ha=function(){this.s||(this.F||this.v||this.l?tV(this):this.fb())},St.fb=function(){tV(this)},St.aa=function(){try{return 2<Od(this)?this.g.status:-1}catch{return-1}},St.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},St.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),O5(t)}},St.Ea=function(){return this.m},St.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(St=sV.prototype).ma=8,St.G=1,St.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new F0(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=h2(s),p2(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=lV(this,r,t),wi(e=Rd(this.F),"RID",n),wi(e,"CVER",22),this.D&&wi(e,"X-HTTP-Session-Id",this.D),q0(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(rV(s)))+"&"+t:this.o&&Jk(e,this.o,s)),Zk(this.h,r),this.Ya&&wi(e,"TYPE","init"),this.O?(wi(e,"$req",t),wi(e,"SID","null"),r.Z=!0,qk(r,e,null)):qk(r,e,t),this.G=2}}else 3==this.G&&(n?aV(this,n):0==this.i.length||W2(this.h)||aV(this))},St.Ia=function(){if(this.u=null,uV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=P0(ws(this.eb,this),n)}},St.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Bs(10),gD(this),uV(this))},St.cb=function(){null!=this.v&&(this.v=null,gD(this),eR(this),Bs(19))},St.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Bs(2)):(this.j.info("Failed to ping google.com"),Bs(1))},(St=mV.prototype).xa=function(){},St.wa=function(){},St.va=function(){},St.ua=function(){},St.Ra=function(){},yD.prototype.g=function(n,t){return new Wo(n,t)},rs(Wo,Br),Wo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Bs(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=pV(n,null,n.V),mD(n)},Wo.prototype.close=function(){Xk(this.g)},Wo.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=Fk(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&mD(t)},Wo.prototype.M=function(){this.g.l=null,delete this.j,Xk(this.g),delete this.g,Wo.X.M.call(this)},rs(_V,Gk),rs(yV,zk),rs(ky,mV),ky.prototype.xa=function(){ss(this.g,"a")},ky.prototype.wa=function(n){ss(this.g,new _V(n))},ky.prototype.va=function(n){ss(this.g,new yV)},ky.prototype.ua=function(){ss(this.g,"b")},yD.prototype.createWebChannel=yD.prototype.g,Wo.prototype.send=Wo.prototype.u,Wo.prototype.open=Wo.prototype.m,Wo.prototype.close=Wo.prototype.close,sD.NO_ERROR=0,sD.TIMEOUT=8,sD.HTTP_ERROR=6,k2.COMPLETE="complete",O2.EventType=N0,N0.OPEN="a",N0.CLOSE="b",N0.ERROR="c",N0.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Vi.prototype.listenOnce=Vi.prototype.O,Vi.prototype.getLastError=Vi.prototype.Oa,Vi.prototype.getLastErrorCode=Vi.prototype.Ea,Vi.prototype.getStatus=Vi.prototype.aa,Vi.prototype.getResponseJson=Vi.prototype.Sa,Vi.prototype.getResponseText=Vi.prototype.fa,Vi.prototype.send=Vi.prototype.da,Vi.prototype.setWithCredentials=Vi.prototype.Ka;var V5=kd.createWebChannelTransport=function(){return new yD},B5=kd.getStatEventTarget=function(){return rD()},nR=kd.ErrorCode=sD,U5=kd.EventType=k2,H5=kd.Event=Mg,vV=kd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},G5=kd.FetchXmlHttpFactory=G0,vD=kd.WebChannel=O2,z5=kd.XhrIo=Vi;const wV="@firebase/firestore";class Ur{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let Ry="9.17.1";const df=new gs.Yd("@firebase/firestore");function iR(){return df.logLevel}function $e(n,...t){if(df.logLevel<=gs.in.DEBUG){const e=t.map(rR);df.debug(`Firestore (${Ry}): ${n}`,...e)}}function Xi(n,...t){if(df.logLevel<=gs.in.ERROR){const e=t.map(rR);df.error(`Firestore (${Ry}): ${n}`,...e)}}function Pg(n,...t){if(df.logLevel<=gs.in.WARN){const e=t.map(rR);df.warn(`Firestore (${Ry}): ${n}`,...e)}}function rR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const t=`FIRESTORE (${Ry}) INTERNAL ASSERTION FAILED: `+n;throw Xi(t),new Error(t)}function Et(n,t){n||gt()}function at(n,t){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends N.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class bV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class q5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ur.UNAUTHENTICATED))}shutdown(){}}class W5{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class K5{constructor(t){this.t=t,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let c=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ir,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=c;t.enqueueRetryable((0,pe.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ir)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Et("string"==typeof i.accessToken),new bV(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Et(null===t||"string"==typeof t),new Ur(t)}}class Z5{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Et(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Y5{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new Z5(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q5{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Et("string"==typeof e.token),this.A=e.token,new CV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function J5(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class TV{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=J5(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Xt(n,t){return n<t?-1:n>t?1:0}function Oy(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function EV(n){return n+"\0"}class bi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return bi.fromMillis(Date.now())}static fromDate(t){return bi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new bi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xt(this.nanoseconds,t.nanoseconds):Xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new bi(0,0))}static max(){return new Mt(new bi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class W0{constructor(t,e,i){void 0===e?e=0:e>t.length&&gt(),void 0===i?i=t.length-e:i>t.length-e&&gt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===W0.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof W0?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class vn extends W0{construct(t,e,i){return new vn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new vn(e)}static emptyPath(){return new vn([])}}const X5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bi extends W0{construct(t,e,i){return new Bi(t,e,i)}static isValidIdentifier(t){return X5.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bi(e)}static emptyPath(){return new Bi([])}}class rt{constructor(t){this.path=t}static fromPath(t){return new rt(vn.fromString(t))}static fromName(t){return new rt(vn.fromString(t).popFirst(5))}static empty(){return new rt(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===vn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return vn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new vn(t.slice()))}}class wD{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function sR(n){return n.fields.find(t=>2===t.kind)}function Ng(n){return n.fields.filter(t=>2!==t.kind)}wD.UNKNOWN_ID=-1;class bD{constructor(t,e){this.fieldPath=t,this.kind=e}}class K0{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new K0(0,Ko.min())}}function IV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Mt.fromTimestamp(1e9===i?new bi(e+1,0):new bi(e,i));return new Ko(r,rt.empty(),t)}function SV(n){return new Ko(n.readTime,n.key,-1)}class Ko{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ko(Mt.min(),rt.empty(),-1)}static max(){return new Ko(Mt.max(),rt.empty(),-1)}}function oR(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=rt.comparator(n.documentKey,t.documentKey),0!==e?e:Xt(n.largestBatchId,t.largestBatchId))}const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function hf(n){return aR.apply(this,arguments)}function aR(){return aR=(0,pe.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==DV)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),aR.apply(this,arguments)}class ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ae((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ae?e:ae.resolve(e)}catch(e){return ae.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ae.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ae.reject(e)}static resolve(t){return new ae((e,i)=>{e(t)})}static reject(t){return new ae((e,i)=>{i(t)})}static waitFor(t){return new ae((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=ae.resolve(!1);for(const i of t)e=e.next(r=>r?ae.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new ae((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;e(t[y]).next(b=>{c[y]=b,++d,d===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new ae((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class CD{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new Z0(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=lR(i.target.error);this.P.reject(new Z0(t,r))}}static open(t,e,i,r){try{return new CD(e,t.transaction(r,i))}catch(s){throw new Z0(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new iY(e)}}class kl{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===kl.D((0,N.z$)())&&Xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),Fg(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,N.hl)())return!1;if(kl.N())return!0;const t=(0,N.z$)(),e=kl.D(t),i=0<e&&e<10,r=kl.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,pe.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Z0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Z0(t,d))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,pe.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.F(t);const p=CD.open(s.db,t,c?"readonly":"readwrite",i),y=r(p).next(b=>(p.V(),b)).catch(b=>(p.abort(b),ae.reject(b))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,b="FirebaseError"!==y.name&&d<3;if($e("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),s.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nY{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return Fg(this.q.delete())}}class Z0 extends Ne{constructor(t,e){super(ce.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ff(n){return"IndexedDbTransactionError"===n.name}class iY{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Fg(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),Fg(this.store.add(t))}get(t){return Fg(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),Fg(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),Fg(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ae((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ae((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new ae((i,r)=>{e.onerror=s=>{const c=lR(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}H(t,e){const i=[];return new ae((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new nY(d),y=e(d.primaryKey,d.value,p);if(y instanceof ae){const b=y.catch(E=>(p.done(),ae.reject(E)));i.push(b)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>ae.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Fg(n){return new ae((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=lR(i.target.error);e(r)}})}let AV=!1;function lR(n){const t=kl.D((0,N.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AV||(AV=!0,setTimeout(()=>{throw i},0)),i}}return n}class rY{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$e("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,pe.Z)(function*(){e.task=null;try{$e("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){ff(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield hf(i)}yield e.nt(6e4)}))}}class sY{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,pe.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return ae.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return $e("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=SV(s);oR(c,i)>0&&(i=c)}),new Ko(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Zo=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>i.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}return n.at=-1,n})();class oY{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class pf{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new pf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof pf&&t.projectId===this.projectId&&t.database===this.database}}function MV(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Lg(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function kV(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Y0(n){return null==n}function Q0(n){return 0===n&&1/n==-1/0}function RV(n){return"number"==typeof n&&Number.isInteger(n)&&!Q0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Sr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Sr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Sr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const lY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gf(n){if(Et(!!n),"string"==typeof n){let t=0;const e=lY.exec(n);if(Et(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ui(n.seconds),nanos:Ui(n.nanos)}}function Ui(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vg(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function cR(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function OV(n){const t=n.mapValue.fields.__previous_value__;return cR(t)?OV(t):t}function J0(n){const t=gf(n.mapValue.fields.__local_write_time__.timestampValue);return new bi(t.seconds,t.nanos)}const mf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},TD={nullValue:"NULL_VALUE"};function Bg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cR(n)?4:LV(n)?9007199254740991:10:gt()}function qc(n,t){if(n===t)return!0;const e=Bg(n);if(e!==Bg(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return J0(n).isEqual(J0(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=gf(i.timestampValue),c=gf(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Vg(n.bytesValue).isEqual(Vg(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Ui(i.geoPointValue.latitude)===Ui(r.geoPointValue.latitude)&&Ui(i.geoPointValue.longitude)===Ui(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ui(i.integerValue)===Ui(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Ui(i.doubleValue),c=Ui(r.doubleValue);return s===c?Q0(s)===Q0(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return Oy(n.arrayValue.values||[],t.arrayValue.values||[],qc);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(MV(s)!==MV(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!qc(s[d],c[d])))return!1;return!0}(n,t);default:return gt()}var r}function X0(n,t){return void 0!==(n.values||[]).find(e=>qc(e,t))}function _f(n,t){if(n===t)return 0;const e=Bg(n),i=Bg(t);if(e!==i)return Xt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Ui(r.integerValue||r.doubleValue),d=Ui(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return PV(n.timestampValue,t.timestampValue);case 4:return PV(J0(n),J0(t));case 5:return Xt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Vg(r),d=Vg(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const y=Xt(c[p],d[p]);if(0!==y)return y}return Xt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Xt(Ui(r.latitude),Ui(s.latitude));return 0!==c?c:Xt(Ui(r.longitude),Ui(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const y=_f(c[p],d[p]);if(y)return y}return Xt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===mf.mapValue&&s===mf.mapValue)return 0;if(r===mf.mapValue)return 1;if(s===mf.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let b=0;b<d.length&&b<y.length;++b){const E=Xt(d[b],y[b]);if(0!==E)return E;const M=_f(c[d[b]],p[y[b]]);if(0!==M)return M}return Xt(d.length,y.length)}(n.mapValue,t.mapValue);default:throw gt()}}function PV(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Xt(n,t);const e=gf(n),i=gf(t),r=Xt(e.seconds,i.seconds);return 0!==r?r:Xt(e.nanos,i.nanos)}function Py(n){return uR(n)}function uR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=gf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vg(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=uR(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${uR(i.fields[d])}`;return s+"}"}(n.mapValue):gt();var t}function Ug(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function dR(n){return!!n&&"integerValue"in n}function eC(n){return!!n&&"arrayValue"in n}function NV(n){return!!n&&"nullValue"in n}function FV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ED(n){return!!n&&"mapValue"in n}function tC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Lg(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=tC(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function LV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function cY(n){return"nullValue"in n?TD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ug(pf.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function uY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ug(pf.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mf:gt()}function VV(n,t){const e=_f(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function BV(n,t){const e=_f(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class yf{constructor(t,e){this.position=t,this.inclusive=e}}function UV(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),e.key):_f(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function HV(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!qc(n.position[e],t.position[e]))return!1;return!0}class GV{}class pn extends GV{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new dY(t,e,i):"array-contains"===e?new pY(t,i):"in"===e?new KV(t,i):"not-in"===e?new gY(t,i):"array-contains-any"===e?new mY(t,i):new pn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new hY(t,i):new fY(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(_f(e,this.value)):null!==e&&Bg(this.value)===Bg(e)&&this.matchesComparison(_f(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends GV{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new Fn(t,e)}matches(t){return Ny(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(e=>e.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Ny(n){return"and"===n.op}function hR(n){return"or"===n.op}function fR(n){return zV(n)&&Ny(n)}function zV(n){for(const t of n.filters)if(t instanceof Fn)return!1;return!0}function pR(n){if(n instanceof pn)return n.field.canonicalString()+n.op.toString()+Py(n.value);if(fR(n))return n.filters.map(t=>pR(t)).join(",");{const t=n.filters.map(e=>pR(e)).join(",");return`${n.op}(${t})`}}function $V(n,t){return n instanceof pn?(e=n,(i=t)instanceof pn&&e.op===i.op&&e.field.isEqual(i.field)&&qc(e.value,i.value)):n instanceof Fn?function(e,i){return i instanceof Fn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,s,c)=>r&&$V(s,i.filters[c]),!0)}(n,t):void gt();var e,i}function jV(n,t){const e=n.filters.concat(t);return Fn.create(e,n.op)}function qV(n){return n instanceof pn?`${(t=n).field.canonicalString()} ${t.op} ${Py(t.value)}`:n instanceof Fn?function(t){return t.op.toString()+" {"+t.getFilters().map(qV).join(" ,")+"}"}(n):"Filter";var t}class dY extends pn{constructor(t,e,i){super(t,e,i),this.key=rt.fromName(i.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class hY extends pn{constructor(t,e){super(t,"in",e),this.keys=WV(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class fY extends pn{constructor(t,e){super(t,"not-in",e),this.keys=WV(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function WV(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>rt.fromName(i.referenceValue))}class pY extends pn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return eC(e)&&X0(e.arrayValue,this.value)}}class KV extends pn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&X0(this.value.arrayValue,e)}}class gY extends pn{constructor(t,e){super(t,"not-in",e)}matches(t){if(X0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!X0(this.value.arrayValue,e)}}class mY extends pn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!eC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>X0(this.value.arrayValue,i))}}class Fy{constructor(t,e="asc"){this.field=t,this.dir=e}}function _Y(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class Hi{constructor(t,e){this.comparator=t,this.root=e||os.EMPTY}insert(t,e){return new Hi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,os.BLACK,null,null))}remove(t){return new Hi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,os.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ID(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ID(this.root,t,this.comparator,!1)}getReverseIterator(){return new ID(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ID(this.root,t,this.comparator,!0)}}class ID{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class os{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??os.RED,this.left=r??os.EMPTY,this.right=s??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new os(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return os.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1,os.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new os(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(t){this.comparator=t,this.data=new Hi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ZV(this.data.getIterator())}getIteratorFrom(t){return new ZV(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof qn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new qn(this.comparator);return e.data=t,e}}class ZV{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ly(n){return n.hasNext()?n.getNext():void 0}class fo{constructor(t){this.fields=t,t.sort(Bi.comparator)}static empty(){return new fo([])}unionWith(t){let e=new qn(Bi.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new fo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Oy(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class as{constructor(t){this.value=t}static empty(){return new as({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!ED(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tC(e)}setAll(t){let e=Bi.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=tC(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());ED(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];ED(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Lg(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new as(tC(this.value))}}function YV(n){const t=[];return Lg(n.fields,(e,i)=>{const r=new Bi([e]);if(ED(i)){const s=YV(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new fo(t)}class ui{constructor(t,e,i,r,s,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=c,this.documentState=d}static newInvalidDocument(t){return new ui(t,0,Mt.min(),Mt.min(),Mt.min(),as.empty(),0)}static newFoundDocument(t,e,i,r){return new ui(t,1,e,Mt.min(),i,r,0)}static newNoDocument(t,e){return new ui(t,2,e,Mt.min(),Mt.min(),as.empty(),0)}static newUnknownDocument(t,e){return new ui(t,3,e,Mt.min(),Mt.min(),as.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yY{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ft=null}}function gR(n,t=null,e=[],i=[],r=null,s=null,c=null){return new yY(n,t,e,i,r,s,c)}function Hg(n){const t=at(n);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>pR(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Y0(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Py(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Py(i)).join(",")),t.ft=e}return t.ft}function nC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!_Y(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!$V(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!HV(n.startAt,t.startAt)&&HV(n.endAt,t.endAt)}function SD(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function DD(n,t){return n.filters.filter(e=>e instanceof pn&&e.field.isEqual(t))}function QV(n,t,e){let i=TD,r=!0;for(const s of DD(n,t)){let c=TD,d=!0;switch(s.op){case"<":case"<=":c=cY(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=TD}VV({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];VV({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function JV(n,t,e){let i=mf,r=!0;for(const s of DD(n,t)){let c=mf,d=!0;switch(s.op){case">=":case">":c=uY(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=mf}BV({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];BV({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class Pd{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this.dt=null,this._t=null}}function XV(n,t,e,i,r,s,c,d){return new Pd(n,t,e,i,r,s,c,d)}function Vy(n){return new Pd(n)}function eB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xD(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function _R(n){return null!==n.collectionGroup}function Gg(n){const t=at(n);if(null===t.dt){t.dt=[];const e=xD(t),i=mR(t);if(null!==e&&null===i)e.isKeyField()||t.dt.push(new Fy(e)),t.dt.push(new Fy(Bi.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.dt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Fy(Bi.keyField(),s))}}}return t.dt}function Us(n){const t=at(n);if(!t._t)if("F"===t.limitType)t._t=gR(t.path,t.collectionGroup,Gg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Gg(t))e.push(new Fy(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new yf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yf(t.startAt.position,t.startAt.inclusive):null;t._t=gR(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function yR(n,t){t.getFirstInequalityField(),xD(n);const e=n.filters.concat([t]);return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function AD(n,t,e){return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function iC(n,t){return nC(Us(n),Us(t))&&n.limitType===t.limitType}function tB(n){return`${Hg(Us(n))}|lt:${n.limitType}`}function vR(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>qV(i)).join(", ")}]`),Y0(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Py(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Py(i)).join(",")),`Target(${e})`}(Us(n))}; limitType=${n.limitType})`}function rC(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):rt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Gg(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=UV(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Gg(e),i)||e.endAt&&!function(r,s,c){const d=UV(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Gg(e),i)));var e,i}function nB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iB(n){return(t,e)=>{let i=!1;for(const r of Gg(n)){const s=vY(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function vY(n,t,e){const i=n.field.isKeyField()?rt.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?_f(d,p):gt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}function rB(n,t){if(n.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q0(t)?"-0":t}}function sB(n){return{integerValue:""+n}}function oB(n,t){return RV(t)?sB(t):rB(n,t)}class MD{constructor(){this._=void 0}}function wY(n,t,e){return n instanceof By?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof zg?lB(n,t):n instanceof $g?cB(n,t):function(i,r){const s=aB(i,r),c=uB(s)+uB(i.gt);return dR(s)&&dR(i.gt)?sB(c):rB(i.yt,c)}(n,t)}function bY(n,t,e){return n instanceof zg?lB(n,t):n instanceof $g?cB(n,t):e}function aB(n,t){return n instanceof Uy?dR(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class By extends MD{}class zg extends MD{constructor(t){super(),this.elements=t}}function lB(n,t){const e=dB(t);for(const i of n.elements)e.some(r=>qc(r,i))||e.push(i);return{arrayValue:{values:e}}}class $g extends MD{constructor(t){super(),this.elements=t}}function cB(n,t){let e=dB(t);for(const i of n.elements)e=e.filter(r=>!qc(r,i));return{arrayValue:{values:e}}}class Uy extends MD{constructor(t,e){super(),this.yt=t,this.gt=e}}function uB(n){return Ui(n.integerValue||n.doubleValue)}function dB(n){return eC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sC{constructor(t,e){this.field=t,this.transform=e}}class TY{constructor(t,e){this.version=t,this.transformResults=e}}class Ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ci}static exists(t){return new Ci(void 0,t)}static updateTime(t){return new Ci(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kD(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class RD{}function hB(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Gy(n.key,Ci.none()):new Hy(n.key,n.data,Ci.none());{const e=n.data,i=as.empty();let r=new qn(Bi.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Nd(n.key,i,new fo(r.toArray()),Ci.none())}}function EY(n,t,e){n instanceof Hy?function(i,r,s){const c=i.value.clone(),d=gB(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Nd?function(i,r,s){if(!kD(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=gB(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(pB(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function oC(n,t,e,i){return n instanceof Hy?function(r,s,c,d){if(!kD(r.precondition,s))return c;const p=r.value.clone(),y=mB(r.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof Nd?function(r,s,c,d){if(!kD(r.precondition,s))return c;const p=mB(r.fieldTransforms,d,s),y=s.data;return y.setAll(pB(r)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,kD(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function IY(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=aB(i.transform,r||null);null!=s&&(null===e&&(e=as.empty()),e.set(i.field,s))}return e||null}function fB(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Oy(e,i,(r,s)=>function CY(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof zg&&i instanceof zg||e instanceof $g&&i instanceof $g?Oy(e.elements,i.elements,qc):e instanceof Uy&&i instanceof Uy?qc(e.gt,i.gt):e instanceof By&&i instanceof By);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class Hy extends RD{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nd extends RD{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pB(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function gB(n,t,e){const i=new Map;Et(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,bY(c,d,e[r]))}return i}function mB(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,wY(s,c,t))}return i}class Gy extends RD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wR extends RD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SY{constructor(t){this.count=t}}var pr,wn;function _B(n){switch(n){default:return gt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function yB(n){if(void 0===n)return Xi("GRPC error has no .code"),ce.UNKNOWN;switch(n){case pr.OK:return ce.OK;case pr.CANCELLED:return ce.CANCELLED;case pr.UNKNOWN:return ce.UNKNOWN;case pr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case pr.INTERNAL:return ce.INTERNAL;case pr.UNAVAILABLE:return ce.UNAVAILABLE;case pr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case pr.NOT_FOUND:return ce.NOT_FOUND;case pr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case pr.ABORTED:return ce.ABORTED;case pr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case pr.DATA_LOSS:return ce.DATA_LOSS;default:return gt()}}(wn=pr||(pr={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";class vf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Lg(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return kV(this.inner)}size(){return this.innerSize}}const DY=new Hi(rt.comparator);function po(){return DY}const vB=new Hi(rt.comparator);function aC(...n){let t=vB;for(const e of n)t=t.insert(e.key,e);return t}function wB(n){let t=vB;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Wc(){return lC()}function bB(){return lC()}function lC(){return new vf(n=>n.toString(),(n,t)=>n.isEqual(t))}const xY=new Hi(rt.comparator),AY=new qn(rt.comparator);function rn(...n){let t=AY;for(const e of n)t=t.add(e);return t}const MY=new qn(Xt);function OD(){return MY}class cC{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,uC.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new cC(Mt.min(),r,OD(),po(),rn())}}class uC{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new uC(i,e,rn(),rn(),rn())}}class PD{constructor(t,e,i,r){this.It=t,this.removedTargetIds=e,this.key=i,this.Tt=r}}class CB{constructor(t,e){this.targetId=t,this.Et=e}}class TB{constructor(t,e,i=Sr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class EB{constructor(){this.At=0,this.Rt=SB(),this.bt=Sr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=rn(),e=rn(),i=rn();return this.Rt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:gt()}}),new uC(this.bt,this.Pt,t,e,i)}xt(){this.vt=!1,this.Rt=SB()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class kY{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=po(),this.qt=IB(),this.Ut=new qn(Xt)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,e=>{const i=this.Wt(e);switch(t.state){case 0:this.zt(e)&&i.Dt(t.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(t.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(i.Ft(),i.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),i.Dt(t.resumeToken));break;default:gt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((i,r)=>{this.zt(r)&&e(r)})}Jt(t){const e=t.targetId,i=t.Et.count,r=this.Yt(e);if(r){const s=r.target;if(SD(s))if(0===i){const c=new rt(s.path);this.Qt(e,c,ui.newNoDocument(c,Mt.min()))}else Et(1===i);else this.Xt(e)!==i&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach((s,c)=>{const d=this.Yt(c);if(d){if(s.current&&SD(d.target)){const p=new rt(d.target.path);null!==this.Lt.get(p)||this.te(c,p)||this.Qt(c,p,ui.newNoDocument(p,t))}s.St&&(e.set(c,s.Ct()),s.xt())}});let i=rn();this.qt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const y=this.Yt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Lt.forEach((s,c)=>c.setReadTime(t));const r=new cC(t,e,this.Ut,this.Lt,i);return this.Lt=po(),this.qt=IB(),this.Ut=new qn(Xt),r}Gt(t,e){if(!this.zt(t))return;const i=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,i),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,i){if(!this.zt(t))return;const r=this.Wt(t);this.te(t,e)?r.Nt(e,1):r.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),i&&(this.Lt=this.Lt.insert(e,i))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new EB,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new qn(Xt),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new EB),this.$t.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function IB(){return new Hi(rt.comparator)}function SB(){return new Hi(rt.comparator)}const RY={asc:"ASCENDING",desc:"DESCENDING"},OY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PY={and:"AND",or:"OR"};class NY{constructor(t,e){this.databaseId=t,this.wt=e}}function zy(n,t){return n.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DB(n,t){return n.wt?t.toBase64():t.toUint8Array()}function FY(n,t){return zy(n,t.toTimestamp())}function er(n){return Et(!!n),Mt.fromTimestamp(function(t){const e=gf(t);return new bi(e.seconds,e.nanos)}(n))}function bR(n,t){return(e=n,new vn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function xB(n){const t=vn.fromString(n);return Et(LB(t)),t}function dC(n,t){return bR(n.databaseId,t.path)}function Kc(n,t){const e=xB(t);if(e.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new rt(MB(e))}function CR(n,t){return bR(n.databaseId,t)}function AB(n){const t=xB(n);return 4===t.length?vn.emptyPath():MB(t)}function hC(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MB(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kB(n,t,e){return{name:dC(n,t),fields:e.value.mapValue.fields}}function RB(n,t,e){const i=Kc(n,t.name),r=er(t.updateTime),s=t.createTime?er(t.createTime):Mt.min(),c=new as({mapValue:{fields:t.fields}}),d=ui.newFoundDocument(i,r,s,c);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function fC(n,t){let e;if(t instanceof Hy)e={update:kB(n,t.key,t.value)};else if(t instanceof Gy)e={delete:dC(n,t.key)};else if(t instanceof Nd)e={update:kB(n,t.key,t.data),updateMask:$Y(t.fieldMask)};else{if(!(t instanceof wR))return gt();e={verify:dC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof By)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $g)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uy)return{fieldPath:s.field.canonicalString(),increment:c.gt};throw gt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:FY(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:gt()),e;var r}function TR(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ci.updateTime(er(r.updateTime)):void 0!==r.exists?Ci.exists(r.exists):Ci.none():Ci.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Et("REQUEST_TIME"===c.setToServerValue),d=new By):"appendMissingElements"in c?d=new zg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new $g(c.removeAllFromArray.values||[]):"increment"in c?d=new Uy(s,c.increment):gt();const p=Bi.fromServerFormat(c.fieldPath);return new sC(p,d)}(n,r)):[];var r;if(t.update){const r=Kc(n,t.update.name),s=new as({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new fo((t.updateMask.fieldPaths||[]).map(y=>Bi.fromServerFormat(y)));return new Nd(r,s,c,e,i)}return new Hy(r,s,e,i)}if(t.delete){const r=Kc(n,t.delete);return new Gy(r,e)}if(t.verify){const r=Kc(n,t.verify);return new wR(r,e)}return gt()}function OB(n,t){return{documents:[CR(n,t.path)]}}function ER(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=CR(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=CR(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0!==p.length)return FB(Fn.create(p,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:$y((b=y).field),direction:HY(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(y=t.limit,n.wt||Y0(y)?y:{value:y});var y,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function PB(n){let t=AB(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Et(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=function(b){const E=NB(b);return E instanceof Fn&&fR(E)?E.getFilters():[E]}(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new Fy(jy((E=b).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(b){let E;return E="object"==typeof b?b.value:b,Y0(E)?null:E}(e.limit));let p=null;var b;e.startAt&&(p=new yf((b=e.startAt).values||[],!!b.before));let y=null;return e.endAt&&(y=function(b){return new yf(b.values||[],!b.before)}(e.endAt)),XV(t,r,c,s,d,"F",p,y)}function NB(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=jy(t.unaryFilter.field);return pn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=jy(t.unaryFilter.field);return pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jy(t.unaryFilter.field);return pn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=jy(t.unaryFilter.field);return pn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(n):void 0!==n.fieldFilter?pn.create(jy((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Fn.create(t.compositeFilter.filters.map(e=>NB(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gt()}}(t.compositeFilter.op))}(n):gt();var t}function HY(n){return RY[n]}function GY(n){return OY[n]}function zY(n){return PY[n]}function $y(n){return{fieldPath:n.canonicalString()}}function jy(n){return Bi.fromServerFormat(n.fieldPath)}function FB(n){return n instanceof pn?function(t){if("=="===t.op){if(FV(t.value))return{unaryFilter:{field:$y(t.field),op:"IS_NAN"}};if(NV(t.value))return{unaryFilter:{field:$y(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(FV(t.value))return{unaryFilter:{field:$y(t.field),op:"IS_NOT_NAN"}};if(NV(t.value))return{unaryFilter:{field:$y(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$y(t.field),op:GY(t.op),value:t.value}}}(n):n instanceof Fn?function(t){const e=t.getFilters().map(i=>FB(i));return 1===e.length?e[0]:{compositeFilter:{op:zY(t.op),filters:e}}}(n):gt()}function $Y(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function LB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=VB(t)),t=jY(n.get(e),t);return VB(t)}function jY(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function VB(n){return n+"\x01\x01"}function Zc(n){const t=n.length;if(Et(t>=2),2===t)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),vn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&gt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:gt()}s=c+2}return new vn(i)}const BB=["userId","batchId"];function ND(n,t){return[n,Hs(t)]}function UB(n,t,e){return[n,Hs(t),e]}const qY={},WY=["prefixPath","collectionGroup","readTime","documentId"],KY=["prefixPath","collectionGroup","documentId"],ZY=["collectionGroup","readTime","prefixPath","documentId"],YY=["canonicalId","targetId"],QY=["targetId","path"],JY=["path","targetId"],XY=["collectionId","parent"],e8=["indexId","uid"],t8=["uid","sequenceNumber"],n8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],r8=["indexId","uid","orderedDocumentKey"],s8=["userId","collectionPath","documentId"],o8=["userId","collectionPath","largestBatchId"],a8=["userId","collectionGroup","largestBatchId"],HB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],l8=[...HB,"documentOverlays"],GB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zB=GB,c8=[...zB,"indexConfiguration","indexState","indexEntries"];class IR extends xV{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function Hr(n,t){const e=at(n);return kl.M(e.se,t)}class SR{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&EY(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=oC(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=oC(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=bB();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const p=hB(c,d);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),rn())}isEqual(t){return this.batchId===t.batchId&&Oy(this.mutations,t.mutations,(e,i)=>fB(e,i))&&Oy(this.baseMutations,t.baseMutations,(e,i)=>fB(e,i))}}class DR{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Et(t.mutations.length===i.length);let r=xY;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new DR(t,e,i,r)}}class xR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wf{constructor(t,e,i,r,s=Mt.min(),c=Mt.min(),d=Sr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new wf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class $B{constructor(t){this.ie=t}}function jB(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:FD(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:dC(r=n.ie,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:zy(r,s.version.toTimestamp()),createTime:zy(r,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:jg(t.version)};else{if(!t.isUnknownDocument())return gt();i.unknownDocument={path:e.path.toArray(),version:jg(t.version)}}var r,s;return i}function FD(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function jg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qg(n){const t=new bi(n.seconds,n.nanoseconds);return Mt.fromTimestamp(t)}function Wg(n,t){const e=(t.baseMutations||[]).map(s=>TR(n.ie,s));for(let s=0;s<t.mutations.length-1;++s)s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(t.mutations[s].updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s);const i=t.mutations.map(s=>TR(n.ie,s)),r=bi.fromMillis(t.localWriteTimeMs);return new SR(t.batchId,r,e,i)}function pC(n){const t=qg(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?qg(n.lastLimboFreeSnapshotVersion):Mt.min();let i;var r;return void 0!==n.query.documents?(Et(1===(r=n.query).documents.length),i=Us(Vy(AB(r.documents[0])))):i=Us(PB(n.query)),new wf(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Sr.fromBase64String(n.resumeToken))}function qB(n,t){const e=jg(t.snapshotVersion),i=jg(t.lastLimboFreeSnapshotVersion);let r;r=SD(t.target)?OB(n.ie,t.target):ER(n.ie,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Hg(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function AR(n){const t=PB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?AD(t,t.limit,"L"):t}function MR(n,t){return new xR(t.largestBatchId,TR(n.ie,t.overlayMutation))}function WB(n,t){const e=t.path.lastSegment();return[n,Hs(t.path.popLast()),e]}function KB(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:jg(i.readTime),documentKey:Hs(i.documentKey.path),largestBatchId:i.largestBatchId}}class d8{getBundleMetadata(t,e){return ZB(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:qg(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return ZB(t).put({bundleId:(i=e).id,createTime:jg(er(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return YB(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:AR(r.bundledQuery),readTime:qg(r.readTime)};var r})}saveNamedQuery(t,e){return YB(t).put({name:(i=e).name,readTime:jg(er(i.readTime)),bundledQuery:i.bundledQuery});var i}}function ZB(n){return Hr(n,"bundles")}function YB(n){return Hr(n,"namedQueries")}class LD{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){return new LD(t,e.uid||"")}getOverlay(t,e){return gC(t).get(WB(this.userId,e)).next(i=>i?MR(this.yt,i):null)}getOverlays(t,e){const i=Wc();return ae.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new xR(e,c);r.push(this.oe(t,d))}),ae.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Hs(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(gC(t).Y("collectionPathOverlayIndex",d))}),ae.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Wc(),s=Hs(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gC(t).W("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const y=MR(this.yt,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Wc();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gC(t).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,b)=>{const E=MR(this.yt,y);s.size()<r||E.largestBatchId===c?(s.set(E.getKey(),E),c=E.largestBatchId):b.done()}).next(()=>s)}oe(t,e){return gC(t).put(function(i,r,s){const[c,d,p]=WB(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fC(i.ie,s.mutation)}}(this.yt,this.userId,e))}}function gC(n){return Hr(n,"documentOverlays")}class Kg{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(Ui(t.integerValue));else if("doubleValue"in t){const i=Ui(t.doubleValue);isNaN(i)?this.he(e,13):(this.he(e,15),Q0(i)?e.le(0):e.le(i))}else if("timestampValue"in t){const i=t.timestampValue;this.he(e,20),"string"==typeof i?e.fe(i):(e.fe(`${i.seconds||""}`),e.le(i.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(Vg(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.he(e,45),e.le(i.latitude||0),e.le(i.longitude||0)}else"mapValue"in t?LV(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):gt()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const i=t.fields||{};this.he(e,55);for(const r of Object.keys(i))this.de(r,e),this.ce(i[r],e)}ye(t,e){const i=t.values||[];this.he(e,50);for(const r of i)this.ce(r,e)}me(t,e){this.he(e,37),rt.fromName(t).path.forEach(i=>{this.he(e,60),this.pe(i,e)})}he(t,e){t.le(e)}_e(t){t.le(2)}}function h8(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function QB(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=h8(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Kg.Ie=new Kg;class f8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ee(i.value),i=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.be(i.value),i=e.next();this.Pe()}ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const r=e.codePointAt(0);this.Ee(240|r>>>18),this.Ee(128|63&r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r)}}this.Ae()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const r=e.codePointAt(0);this.be(240|r>>>18),this.be(128|63&r>>>12),this.be(128|63&r>>>6),this.be(128|63&r)}}this.Pe()}Se(t){const e=this.De(t),i=QB(e);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}xe(t){const e=this.De(t),i=QB(e);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class p8{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class g8{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class mC{constructor(){this.$e=new f8,this.Be=new p8(this.$e),this.Le=new g8(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Zg{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Zg(this.indexId,this.documentKey,this.arrayValue,i)}}function bf(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=JB(n.arrayValue,t.arrayValue),0!==e?e:(e=JB(n.directionalValue,t.directionalValue),0!==e?e:rt.comparator(n.documentKey,t.documentKey)))}function JB(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class m8{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const i=e;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(t){Et(t.collectionGroup===this.collectionId);const e=sR(t);if(void 0!==e&&!this.We(e))return!1;const i=Ng(t);let r=0,s=0;for(;r<i.length&&this.We(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Qe){const c=i[r];if(!this.ze(this.Qe,c)||!this.He(this.Ke[s++],c))return!1;++r}for(;r<i.length;++r)if(s>=this.Ke.length||!this.He(this.Ke[s++],i[r]))return!1;return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function XB(n){var t,e;if(Et(n instanceof pn||n instanceof Fn),n instanceof pn){if(n instanceof KV){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>pn.create(n.field,"==",s)))||[];return Fn.create(r,"or")}return n}const i=n.filters.map(r=>XB(r));return Fn.create(i,n.op)}function _8(n){if(0===n.getFilters().length)return[];const t=OR(XB(n));return Et(eU(t)),kR(t)||RR(t)?[t]:t.getFilters()}function kR(n){return n instanceof pn}function RR(n){return n instanceof Fn&&fR(n)}function eU(n){return kR(n)||RR(n)||function(t){if(t instanceof Fn&&hR(t)){for(const e of t.getFilters())if(!kR(e)&&!RR(e))return!1;return!0}return!1}(n)}function OR(n){if(Et(n instanceof pn||n instanceof Fn),n instanceof pn)return n;if(1===n.filters.length)return OR(n.filters[0]);const t=n.filters.map(i=>OR(i));let e=Fn.create(t,n.op);return e=VD(e),eU(e)?e:(Et(e instanceof Fn),Et(Ny(e)),Et(e.filters.length>1),e.filters.reduce((i,r)=>PR(i,r)))}function PR(n,t){let e;return Et(n instanceof pn||n instanceof Fn),Et(t instanceof pn||t instanceof Fn),e=n instanceof pn?t instanceof pn?Fn.create([n,t],"and"):tU(n,t):t instanceof pn?tU(t,n):function(i,r){if(Et(i.filters.length>0&&r.filters.length>0),Ny(i)&&Ny(r))return jV(i,r.getFilters());const s=hR(i)?i:r,c=hR(i)?r:i,d=s.filters.map(p=>PR(p,c));return Fn.create(d,"or")}(n,t),VD(e)}function tU(n,t){if(Ny(t))return jV(t,n.getFilters());{const e=t.filters.map(i=>PR(n,i));return Fn.create(e,"or")}}function VD(n){if(Et(n instanceof pn||n instanceof Fn),n instanceof pn)return n;const t=n.getFilters();if(1===t.length)return VD(t[0]);if(zV(n))return n;const e=t.map(r=>VD(r)),i=[];return e.forEach(r=>{r instanceof pn?i.push(r):r instanceof Fn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Fn.create(i,n.op)}class y8{constructor(){this.Je=new NR}addToCollectionParentIndex(t,e){return this.Je.add(e),ae.resolve()}getCollectionParents(t,e){return ae.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return ae.resolve()}deleteFieldIndex(t,e){return ae.resolve()}getDocumentsMatchingTarget(t,e){return ae.resolve(null)}getIndexType(t,e){return ae.resolve(0)}getFieldIndexes(t,e){return ae.resolve([])}getNextCollectionGroupToUpdate(t){return ae.resolve(null)}getMinOffset(t,e){return ae.resolve(Ko.min())}getMinOffsetFromCollectionGroup(t,e){return ae.resolve(Ko.min())}updateCollectionGroup(t,e,i){return ae.resolve()}updateIndexEntries(t,e){return ae.resolve()}}class NR{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new qn(vn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new qn(vn.comparator)).toArray()}}const BD=new Uint8Array(0);class v8{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new NR,this.Xe=new vf(i=>Hg(i),(i,r)=>nC(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ye.add(e)});const s={collectionId:i,parent:Hs(r)};return nU(t).put(s)}return ae.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[EV(e),""],!1,!0);return nU(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Zc(c.parent))}return i})}addFieldIndex(t,e){const i=UD(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=yC(t);return s.next(d=>{c.put(KB(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=UD(t),r=yC(t),s=_C(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=_C(t);let r=!0;const s=new Map;return ae.forEach(this.Ze(e),c=>this.tn(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=rn();const d=[];return ae.forEach(s,(p,y)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Le=>`${Le.fieldPath}:${Le.kind}`).join(",")}`} to execute ${Hg(e)}`);const E=function(Le,Ue){const dt=sR(Ue);if(void 0===dt)return null;for(const ft of DD(Le,dt.fieldPath))switch(ft.op){case"array-contains-any":return ft.value.arrayValue.values||[];case"array-contains":return[ft.value]}return null}(y,p),M=function(Le,Ue){const dt=new Map;for(const ft of Ng(Ue))for(const en of DD(Le,ft.fieldPath))switch(en.op){case"==":case"in":dt.set(ft.fieldPath.canonicalString(),en.value);break;case"not-in":case"!=":return dt.set(ft.fieldPath.canonicalString(),en.value),Array.from(dt.values())}return null}(y,p),P=function(Le,Ue){const dt=[];let ft=!0;for(const en of Ng(Ue)){const Dn=0===en.kind?QV(Le,en.fieldPath,Le.startAt):JV(Le,en.fieldPath,Le.startAt);dt.push(Dn.value),ft&&(ft=Dn.inclusive)}return new yf(dt,ft)}(y,p),F=function(Le,Ue){const dt=[];let ft=!0;for(const en of Ng(Ue)){const Dn=0===en.kind?JV(Le,en.fieldPath,Le.endAt):QV(Le,en.fieldPath,Le.endAt);dt.push(Dn.value),ft&&(ft=Dn.inclusive)}return new yf(dt,ft)}(y,p),z=this.en(p,y,P),K=this.en(p,y,F),De=this.nn(p,y,M),Be=this.sn(p.indexId,E,z,P.inclusive,K,F.inclusive,De);return ae.forEach(Be,Le=>i.J(Le,e.limit).next(Ue=>{Ue.forEach(dt=>{const ft=rt.fromSegments(dt.documentKey);c.has(ft)||(c=c.add(ft),d.push(ft))})}))}).next(()=>d)}return ae.resolve(null)})}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:_8(Fn.create(t.filters,"and")).map(i=>gR(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Xe.set(t,e),e)}sn(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),y=p/(null!=e?e.length:1),b=[];for(let E=0;E<p;++E){const M=e?this.rn(e[E/y]):BD,P=this.on(t,M,i[E%y],r),F=this.un(t,M,s[E%y],c),z=d.map(K=>this.on(t,M,K,!0));b.push(...this.createRange(P,F,z))}return b}on(t,e,i,r){const s=new Zg(t,rt.empty(),e,i);return r?s:s.Ue()}un(t,e,i,r){const s=new Zg(t,rt.empty(),e,i);return r?s.Ue():s}tn(t,e){const i=new m8(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.je(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;const r=this.Ze(e);return ae.forEach(r,s=>this.tn(t,s).next(c=>{c?0!==i&&c.fields.length<function(d){let p=new qn(Bi.comparator),y=!1;for(const b of d.filters)for(const E of b.getFlattenedFilters())E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?y=!0:p=p.add(E.field));for(const b of d.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(y?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}cn(t,e){const i=new mC;for(const r of Ng(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);Kg.Ie.ue(s,c)}return i.Fe()}rn(t){const e=new mC;return Kg.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const i=new mC;return Kg.Ie.ue(Ug(this.databaseId,e),i.qe(function(r){const s=Ng(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Fe()}nn(t,e,i){if(null===i)return[];let r=[];r.push(new mC);let s=0;for(const c of Ng(t)){const d=i[s++];for(const p of r)if(this.hn(e,c.fieldPath)&&eC(d))r=this.ln(r,c,d);else{const y=p.qe(c.kind);Kg.Ie.ue(d,y)}}return this.fn(r)}en(t,e,i){return this.nn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Fe();return e}ln(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new mC;p.seed(d.Fe()),Kg.Ie.ue(c,p.qe(e.kind)),s.push(p)}return s}hn(t,e){return!!t.filters.find(i=>i instanceof pn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=UD(t),r=yC(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return ae.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(y,b){const E=b?new K0(b.sequenceNumber,new Ko(qg(b.readTime),new rt(Zc(b.documentKey)),b.largestBatchId)):K0.empty(),M=y.fields.map(([P,F])=>new bD(Bi.fromServerFormat(P),F));return new wD(y.indexId,y.collectionGroup,M,E)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Xt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=UD(t),s=yC(t);return this.dn(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ae.forEach(d,p=>s.put(KB(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return ae.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ae.forEach(d,p=>this._n(t,r,p).next(y=>{const b=this.wn(s,p);return y.isEqual(b)?ae.resolve():this.mn(t,s,p,y,b)}))))})}gn(t,e,i,r){return _C(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(i,e.key),documentKey:e.key.path.toArray()})}yn(t,e,i,r){return _C(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(i,e.key),e.key.path.toArray()])}_n(t,e,i){const r=_C(t);let s=new qn(bf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,e)])},(c,d)=>{s=s.add(new Zg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}wn(t,e){let i=new qn(bf);const r=this.cn(e,t);if(null==r)return i;const s=sR(e);if(null!=s){const c=t.data.field(s.fieldPath);if(eC(c))for(const d of c.arrayValue.values||[])i=i.add(new Zg(e.indexId,t.key,this.rn(d),r))}else i=i.add(new Zg(e.indexId,t.key,BD,r));return i}mn(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,y,b,E){const M=d.getIterator(),P=p.getIterator();let F=Ly(M),z=Ly(P);for(;F||z;){let K=!1,De=!1;if(F&&z){const Be=y(F,z);Be<0?De=!0:Be>0&&(K=!0)}else null!=F?De=!0:K=!0;K?(b(z),z=Ly(P)):De?(E(F),F=Ly(M)):(F=Ly(M),z=Ly(P))}}(r,s,bf,d=>{c.push(this.gn(t,e,i,d))},d=>{c.push(this.yn(t,e,i,d))}),ae.waitFor(c)}dn(t){let e=1;return yC(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>bf(c,d)).filter((c,d,p)=>!d||0!==bf(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=bf(c,t),p=bf(c,e);if(0===d)r[0]=t.Ue();else if(d>0&&p<0)r.push(c),r.push(c.Ue());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2){if(this.pn(r[c],r[c+1]))return[];s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,BD,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,BD,[]]))}return s}pn(t,e){return bf(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(iU)}getMinOffset(t,e){return ae.mapArray(this.Ze(e),i=>this.tn(t,i).next(r=>r||gt())).next(iU)}}function nU(n){return Hr(n,"collectionParents")}function _C(n){return Hr(n,"indexEntries")}function UD(n){return Hr(n,"indexConfiguration")}function yC(n){return Hr(n,"indexState")}function iU(n){Et(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;oR(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Ko(t.readTime,t.documentKey,e)}const rU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class go{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new go(t,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sU(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Z({range:c},(b,E,M)=>(d++,M.delete()));s.push(p.next(()=>{Et(1===d)}));const y=[];for(const b of e.mutations){const E=UB(t,b.key.path,e.batchId);s.push(r.delete(E)),y.push(b.key)}return ae.waitFor(s).next(()=>y)}function HD(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw gt();t=n.noDocument}return JSON.stringify(t).length}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(41943040,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class GD{constructor(t,e,i,r){this.userId=t,this.yt=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static re(t,e,i,r){Et(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new GD(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cf(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=qy(t),c=Cf(t);return c.add({}).next(d=>{Et("number"==typeof d);const p=new SR(d,e,i,r),y=function(M,P,F){const z=F.baseMutations.map(De=>fC(M.ie,De)),K=F.mutations.map(De=>fC(M.ie,De));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:z,mutations:K}}(this.yt,this.userId,p),b=[];let E=new qn((M,P)=>Xt(M.canonicalString(),P.canonicalString()));for(const M of r){const P=UB(this.userId,M.key.path,d);E=E.add(M.key.path.popLast()),b.push(c.put(y)),b.push(s.put(P,qY))}return E.forEach(M=>{b.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.In[d]=p.keys()}),ae.waitFor(b).next(()=>p)})}lookupMutationBatch(t,e){return Cf(t).get(e).next(i=>i?(Et(i.userId===this.userId),Wg(this.yt,i)):null)}Tn(t,e){return this.In[e]?ae.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Cf(t).Z({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Et(d.batchId>=i),s=Wg(this.yt,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Cf(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cf(t).W("userMutationsIndex",e).next(i=>i.map(r=>Wg(this.yt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=ND(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return qy(t).Z({range:r},(c,d,p)=>{const[y,b,E]=c,M=Zc(b);if(y===this.userId&&e.path.isEqual(M))return Cf(t).get(E).next(P=>{if(!P)throw gt();Et(P.userId===this.userId),s.push(Wg(this.yt,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new qn(Xt);const r=[];return e.forEach(s=>{const c=ND(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=qy(t).Z({range:d},(y,b,E)=>{const[M,P,F]=y,z=Zc(P);M===this.userId&&s.path.isEqual(z)?i=i.add(F):E.done()});r.push(p)}),ae.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=ND(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new qn(Xt);return qy(t).Z({range:c},(p,y,b)=>{const[E,M,P]=p,F=Zc(M);E===this.userId&&i.isPrefixOf(F)?F.length===r&&(d=d.add(P)):b.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Cf(t).get(s).next(c=>{if(null===c)throw gt();Et(c.userId===this.userId),i.push(Wg(this.yt,c))}))}),ae.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return sU(t.se,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),ae.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ae.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return qy(t).Z({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=Zc(s[1]);r.push(p)}else d.done()}).next(()=>{Et(0===r.length)})})}containsKey(t,e){return oU(t,this.userId,e)}Rn(t){return aU(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oU(n,t,e){const i=ND(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return qy(n).Z({range:s,X:!0},(d,p,y)=>{const[b,E,M]=d;b===t&&E===r&&(c=!0),y.done()}).next(()=>c)}function Cf(n){return Hr(n,"mutations")}function qy(n){return Hr(n,"documentMutations")}function aU(n){return Hr(n,"mutationQueues")}class Yg{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Yg(0)}static vn(){return new Yg(-1)}}class w8{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new Yg(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Mt.fromTimestamp(new bi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Wy(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Et(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Wy(t).Z((c,d)=>{const p=pC(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>ae.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Wy(t).Z((i,r)=>{const s=pC(r);e(s)})}Vn(t){return lU(t).get("targetGlobalKey").next(e=>(Et(null!==e),e))}Sn(t,e){return lU(t).put("targetGlobalKey",e)}Dn(t,e){return Wy(t).put(qB(this.yt,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Hg(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Wy(t).Z({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const y=pC(d);nC(e,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Tf(t);return e.forEach(c=>{const d=Hs(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),ae.waitFor(r)}removeMatchingKeys(t,e,i){const r=Tf(t);return ae.forEach(e,s=>{const c=Hs(s.path);return ae.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Tf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Tf(t);let s=rn();return r.Z({range:i,X:!0},(c,d,p)=>{const y=Zc(c[1]),b=new rt(y);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=Hs(e.path),r=IDBKeyRange.bound([i],[EV(i)],!1,!0);let s=0;return Tf(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,d],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}ne(t,e){return Wy(t).get(e).next(i=>i?pC(i):null)}}function Wy(n){return Hr(n,"targets")}function lU(n){return Hr(n,"targetGlobal")}function Tf(n){return Hr(n,"targetDocuments")}function cU([n,t],[e,i]){const r=Xt(n,e);return 0===r?Xt(t,i):r}class b8{constructor(t){this.xn=t,this.buffer=new qn(cU),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();cU(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class C8{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,pe.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){ff(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield hf(i)}yield e.Fn(3e5)}))}}class T8{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ae.resolve(Zo.at);const i=new b8(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(rU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rU):this.qn(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let i,r,s,c,d,p,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(s=E,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(y=Date.now(),iR()<=gs.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${E} documents in `+(y-p)+`ms\nTotal Duration: ${y-b}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:E})))}}class E8{constructor(t,e){this.db=t,this.garbageCollector=new T8(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Un(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return zD(t,i)}removeReference(t,e,i){return zD(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return zD(t,e)}Gn(t,e){return function(i,r){let s=!1;return aU(i).tt(c=>oU(i,c,r).next(d=>(d&&(s=!0),ae.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,d)=>{if(d<=e){const p=this.Gn(t,c).next(y=>{if(!y)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Mt.min()),Tf(t).delete([0,Hs(c.path)])))});r.push(p)}}).next(()=>ae.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return zD(t,e)}Kn(t,e){const i=Tf(t);let r,s=Zo.at;return i.Z({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:y})=>{0===c?(s!==Zo.at&&e(new rt(Zc(r)),s),s=y,r=p):s=Zo.at}).next(()=>{s!==Zo.at&&e(new rt(Zc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function zD(n,t){return Tf(n).put((i=n.currentSequenceNumber,{targetId:0,path:Hs(t.path),sequenceNumber:i}));var i}class uU{constructor(){this.changes=new vf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ui.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ae.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class I8{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Qg(t).put(i)}removeEntry(t,e,i){return Qg(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],FD(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=ui.newInvalidDocument(e);return Qg(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vC(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:ui.newInvalidDocument(e)};return Qg(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vC(e))},(r,s)=>{i={document:this.jn(e,s),size:HD(s)}}).next(()=>i)}getEntries(t,e){let i=po();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=po(),r=new Hi(rt.comparator);return this.zn(t,e,(s,c)=>{const d=this.jn(s,c);i=i.insert(s,d),r=r.insert(s,HD(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return ae.resolve();let r=new qn(pU);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(vC(r.first()),vC(r.last())),c=r.getIterator();let d=c.getNext();return Qg(t).Z({index:"documentKeyIndex",range:s},(p,y,b)=>{const E=rt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&pU(d,E)<0;)i(d,null),d=c.getNext();d&&d.isEqual(E)&&(i(d,y),d=c.hasNext()?c.getNext():null),d?b.j(vC(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const s=e.path,c=[s.popLast().toArray(),s.lastSegment(),FD(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qg(t).W(IDBKeyRange.bound(c,d,!0)).next(p=>{let y=po();for(const b of p){const E=this.jn(rt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);E.isFoundDocument()&&(rC(e,E)||r.has(E.key))&&(y=y.insert(E.key,E))}return y})}getAllFromCollectionGroup(t,e,i,r){let s=po();const c=fU(e,i),d=fU(e,Ko.max());return Qg(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,y,b)=>{const E=this.jn(rt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(E.key,E),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new S8(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return hU(t).get("remoteDocumentGlobalKey").next(e=>(Et(!!e),e))}Qn(t,e){return hU(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function u8(n,t){let e;if(t.document)e=RB(n.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=rt.fromSegments(t.noDocument.path),r=qg(t.noDocument.readTime);e=ui.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt();{const i=rt.fromSegments(t.unknownDocument.path),r=qg(t.unknownDocument.version);e=ui.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new bi(i[0],i[1]);return Mt.fromTimestamp(r)}(t.readTime)),e}(this.yt,e);if(!i.isNoDocument()||!i.version.isEqual(Mt.min()))return i}return ui.newInvalidDocument(t)}}function dU(n){return new I8(n)}class S8 extends uU{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new vf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new qn((s,c)=>Xt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=jB(this.Yn.yt,c);r=r.add(s.path.popLast());const y=HD(p);i+=y-d.size,e.push(this.Yn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=jB(this.Yn.yt,c.convertToNoDocument(Mt.min()));e.push(this.Yn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),ae.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function hU(n){return Hr(n,"remoteDocumentGlobal")}function Qg(n){return Hr(n,"remoteDocumentsV14")}function vC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function fU(n,t){const e=t.documentKey.path.toArray();return[n,FD(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function pU(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Xt(e[s],i[s]),r)return r;return r=Xt(e.length,i.length),r||(r=Xt(e[e.length-2],i[i.length-2]),r||Xt(e[e.length-1],i[i.length-1]))}class D8{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class gU{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&oC(i.mutation,r,fo.empty(),bi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,rn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=rn()){const r=Wc();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=aC();return s.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Wc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,rn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=po();const c=lC(),d=lC();return e.forEach((p,y)=>{const b=i.get(y.key);r.has(y.key)&&(void 0===b||b.mutation instanceof Nd)?s=s.insert(y.key,y):void 0!==b?(c.set(y.key,b.mutation.getFieldMask()),oC(b.mutation,y,b.mutation.getFieldMask(),bi.now())):c.set(y.key,fo.empty())}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((y,b)=>c.set(y,b)),e.forEach((y,b)=>{var E;return d.set(y,new D8(b,null!==(E=c.get(y))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=lC();let r=new Hi((c,d)=>c-d),s=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=e.get(p);if(null===y)return;let b=i.get(p)||fo.empty();b=d.applyToLocalView(y,b),i.set(p,b);const E=(r.get(d.batchId)||rn()).add(p);r=r.insert(d.batchId,E)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,b=p.value,E=bB();b.forEach(M=>{if(!s.has(M)){const P=hB(e.get(M),i.get(M));null!==P&&E.set(M,P),s=s.add(M)}}),c.push(this.documentOverlayCache.saveOverlays(t,y,E))}return ae.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return rt.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):_R(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):ae.resolve(Wc());let d=-1,p=s;return c.next(y=>ae.forEach(y,(b,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(b)?ae.resolve():this.remoteDocumentCache.getEntry(t,b).next(M=>{p=p.insert(b,M)}))).next(()=>this.populateOverlays(t,y,s)).next(()=>this.computeViews(t,p,y,rn())).next(b=>({batchId:d,changes:wB(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(i=>{let r=aC();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=aC();return this.indexManager.getCollectionParents(t,r).next(c=>ae.forEach(c,d=>{const p=(y=e,b=d.child(r),new Pd(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(y=>{y.forEach((b,E)=>{s=s.insert(b,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(s=>{r.forEach((d,p)=>{const y=p.getKey();null===s.get(y)&&(s=s.insert(y,ui.newInvalidDocument(y)))});let c=aC();return s.forEach((d,p)=>{const y=r.get(d);void 0!==y&&oC(y.mutation,p,fo.empty(),bi.now()),rC(e,p)&&(c=c.insert(d,p))}),c})}}class x8{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return ae.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:er(i.createTime)}),ae.resolve()}getNamedQuery(t,e){return ae.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:AR(i.bundledQuery),readTime:er(i.readTime)}),ae.resolve();var i}}class A8{constructor(){this.overlays=new Hi(rt.comparator),this.es=new Map}getOverlay(t,e){return ae.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Wc();return ae.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.oe(t,e,s)}),ae.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),ae.resolve()}getOverlaysForCollection(t,e,i){const r=Wc(),s=e.length+1,c=new rt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ae.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Hi((y,b)=>y-b);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let b=s.get(y.largestBatchId);null===b&&(b=Wc(),s=s.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const d=Wc(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>d.set(y,b)),!(d.size()>=r)););return ae.resolve(d)}oe(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new xR(e,i));let s=this.es.get(e);void 0===s&&(s=rn(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class FR{constructor(){this.ns=new qn(Gr.ss),this.rs=new qn(Gr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Gr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Gr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new rt(new vn([])),i=new Gr(e,t),r=new Gr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new rt(new vn([])),i=new Gr(e,t),r=new Gr(e,t+1);let s=rn();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Gr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Gr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return rt.comparator(t.key,e.key)||Xt(t._s,e._s)}static os(t,e){return Xt(t._s,e._s)||rt.comparator(t.key,e.key)}}class M8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new qn(Gr.ss)}checkEmpty(t){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new SR(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.gs=this.gs.add(new Gr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(t,e){return ae.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Gr(e,0),r=new Gr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const d=this.ys(c._s);s.push(d)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new qn(Xt);return e.forEach(r=>{const s=new Gr(r,0),c=new Gr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],d=>{i=i.add(d._s)})}),ae.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;rt.isDocumentKey(s)||(s=s.child(""));const c=new Gr(new rt(s),0);let d=new qn(Xt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(p._s)),!0)},c),ae.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Et(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return ae.forEach(e.mutations,r=>{const s=new Gr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Gr(e,0),r=this.gs.firstAfterOrEqual(i);return ae.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ae.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class k8{constructor(t){this.Es=t,this.docs=new Hi(rt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ae.resolve(i?i.document.mutableCopy():ui.newInvalidDocument(e))}getEntries(t,e){let i=po();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ui.newInvalidDocument(r))}),ae.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=po();const c=e.path,d=new rt(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:b}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||oR(SV(b),i)<=0||(r.has(b.key)||rC(e,b))&&(s=s.insert(b.key,b.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(t,e,i,r){gt()}As(t,e){return ae.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new R8(this)}getSize(t){return ae.resolve(this.size)}}class R8 extends uU{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),ae.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class O8{constructor(t){this.persistence=t,this.Rs=new vf(e=>Hg(e),nC),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new FR,this.targetCount=0,this.vs=Yg.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),ae.resolve()}getLastRemoteSnapshotVersion(t){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ae.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),ae.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Yg(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,ae.resolve()}updateTargetData(t,e){return this.Dn(e),ae.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,ae.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ae.waitFor(s).next(()=>r)}getTargetCount(t){return ae.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return ae.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),ae.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),ae.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),ae.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return ae.resolve(i)}containsKey(t,e){return ae.resolve(this.Ps.containsKey(e))}}class mU{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new Zo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new O8(this),this.indexManager=new y8,this.remoteDocumentCache=new k8(i=>this.referenceDelegate.xs(i)),this.yt=new $B(e),this.Ns=new x8(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new A8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new M8(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new P8(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(t,e){return ae.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class P8 extends xV{constructor(t){super(),this.currentSequenceNumber=t}}class $D{constructor(t){this.persistence=t,this.Fs=new FR,this.$s=null}static Bs(t){return new $D(t)}get Ls(){if(this.$s)return this.$s;throw gt()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),ae.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),ae.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,i=>{const r=rt.fromPath(i);return this.qs(t,r).next(s=>{s||e.removeEntry(r,Mt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.qs(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}qs(t,e){return ae.or([()=>ae.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class N8{constructor(t){this.yt=t}$(t,e,i,r){const s=new CD("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BB,{unique:!0}),d.createObjectStore("documentMutations"),_U(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=ae.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),_U(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BB,{unique:!0});const b=p.store("mutations"),E=y.map(M=>b.put(M));return ae.waitFor(E)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Us(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:s8});p.createIndex("collectionPathOverlayIndex",o8,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",a8,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:WY});p.createIndex("documentKeyIndex",KY),p.createIndex("collectionGroupIndex",ZY)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:e8}).createIndex("sequenceNumberIndex",t8,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:n8}).createIndex("documentKeyIndex",r8,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=HD(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>ae.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(d=>ae.forEach(d,p=>{Et(p.userId===s.userId);const y=Wg(this.yt,p);return sU(t,s.userId,y).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,d)=>{const p=new vn(c),y=[0,Hs(p)];s.push(e.get(y).next(b=>b?ae.resolve():e.put({targetId:0,path:Hs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ae.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:XY});const i=e.store("collectionParents"),r=new NR,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:Hs(p)})}};return e.store("remoteDocuments").Z({X:!0},(c,d)=>{const p=new vn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,d,p],y)=>{const b=Zc(d);return s(b.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=pC(r),c=qB(this.yt,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(y=c,y.document?new rt(vn.fromString(y.document.name).popFirst(5)):y.noDocument?rt.fromSegments(y.noDocument.path):y.unknownDocument?rt.fromSegments(y.unknownDocument.path):gt()).path.toArray();var y;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(b))}).next(()=>ae.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=dU(this.yt),s=new mU($D.Bs,this.yt.ie);return i.W().next(c=>{const d=new Map;return c.forEach(p=>{var y;let b=null!==(y=d.get(p.userId))&&void 0!==y?y:rn();Wg(this.yt,p).keys().forEach(E=>b=b.add(E)),d.set(p.userId,b)}),ae.forEach(d,(p,y)=>{const b=new Ur(y),E=LD.re(this.yt,b),M=s.getIndexManager(b),P=GD.re(b,this.yt,M,s.referenceDelegate);return new gU(r,P,E,M).recalculateAndSaveOverlaysForDocumentKeys(new IR(e,Zo.at),p).next()})})}}function _U(n){n.createObjectStore("targetDocuments",{keyPath:QY}).createIndex("documentTargetsIndex",JY,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YY,{unique:!0}),n.createObjectStore("targetGlobal")}const LR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VR{constructor(t,e,i,r,s,c,d,p,y,b,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=d,this.Js=y,this.Ys=b,this.Xs=E,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!VR.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new E8(this,r),this.ii=e+"main",this.yt=new $B(p),this.ri=new kl(this.ii,this.Xs,new N8(this.yt)),this.Cs=new w8(this.referenceDelegate,this.yt),this.remoteDocumentCache=dU(this.yt),this.Ns=new d8,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&Xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,LR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new Zo(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,pe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,pe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,pe.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>jD(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(ff(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return wC(t).get("owner").next(e=>ae.resolve(this.mi(e)))}gi(t){return jD(t).delete(this.clientId)}yi(){var t=this;return(0,pe.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Hr(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return ae.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?ae.resolve(!0):wC(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,LR);return!1}}return!(!this.networkEnabled||!this.inForeground)||jD(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,pe.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new IR(e,Zo.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>jD(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return GD.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new v8(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return LD.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?c8:14===c?zB:13===c?GB:12===c?l8:11===c?HB:void gt();var c;let d;return this.ri.runTransaction(t,r,s,p=>(d=new IR(p,this.Ss?this.Ss.next():Zo.at),"readwrite-primary"===e?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw Xi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,DV);return i(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(t){return wC(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,LR)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wC(t).put("owner",e)}static C(){return kl.C()}_i(t){const e=wC(t);return e.get("owner").next(i=>this.mi(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ae.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Xi(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Xi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Xi("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function wC(n){return Hr(n,"owner")}function jD(n){return Hr(n,"clientMetadata")}function BR(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class UR{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=rn(),r=rn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new UR(t,e.fromCache,i,r)}}class yU{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Oi(t,e,r,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(eB(e))return ae.resolve(null);let i=Us(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=AD(e,null,"F"),i=Us(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=rn(...s);return this.Ni.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const y=this.Fi(e,d);return this.$i(e,y,c,p.readTime)?this.ki(t,AD(e,null,"F")):this.Bi(t,y,e,p)}))})))}Oi(t,e,i,r){return eB(e)||r.isEqual(Mt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Mi(t,e):(iR()<=gs.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vR(e)),this.Bi(t,c,e,IV(r,-1)))})}Fi(t,e){let i=new qn(iB(t));return e.forEach((r,s)=>{rC(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(t,e){return iR()<=gs.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",vR(e)),this.Ni.getDocumentsMatchingQuery(t,e,Ko.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class F8{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.yt=r,this.qi=new Hi(Xt),this.Ui=new vf(s=>Hg(s),nC),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new gU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qi))}}function vU(n,t,e,i){return new F8(n,t,e,i)}function wU(n,t){return HR.apply(this,arguments)}function HR(){return HR=(0,pe.Z)(function*(n,t){const e=at(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=rn();for(const y of r){c.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of s){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return e.localDocuments.getDocuments(i,p).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:d}))})})}),HR.apply(this,arguments)}function L8(n,t){const e=at(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,y){const b=p.batch,E=b.keys();let M=ae.resolve();return E.forEach(P=>{M=M.next(()=>y.getEntry(d,P)).next(F=>{const z=p.docVersions.get(P);Et(null!==z),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),y.addEntry(F)))})}),M.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=rn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function bU(n){const t=at(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function V8(n,t){const e=at(n),i=t.snapshotVersion;let r=e.qi;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.qi;const d=[];t.targetChanges.forEach((b,E)=>{const M=r.get(E);if(!M)return;d.push(e.Cs.removeMatchingKeys(s,b.removedDocuments,E).next(()=>e.Cs.addMatchingKeys(s,b.addedDocuments,E)));let P=M.withSequenceNumber(s.currentSequenceNumber);var F,z,K;t.targetMismatches.has(E)?P=P.withResumeToken(Sr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(b.resumeToken,i)),r=r.insert(E,P),z=P,K=b,(0===(F=M).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(s,P))});let p=po(),y=rn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(CU(s,c,t.documentUpdates).next(b=>{p=b.Wi,y=b.zi})),!i.isEqual(Mt.min())){const b=e.Cs.getLastRemoteSnapshotVersion(s).next(E=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return ae.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(e.qi=r,s))}function CU(n,t,e){let i=rn(),r=rn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=po();return e.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Mt.min())?(t.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(p),c=c.insert(d,p)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:c,zi:r}})}function B8(n,t){const e=at(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Ky(n,t){const e=at(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,ae.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new wf(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.qi.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.qi=e.qi.insert(i.targetId,i),e.Ui.set(t,i.targetId)),i})}function Zy(n,t,e){return GR.apply(this,arguments)}function GR(){return GR=(0,pe.Z)(function*(n,t,e){const i=at(n),r=i.qi.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!ff(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.qi=i.qi.remove(t),i.Ui.delete(r.target)}),GR.apply(this,arguments)}function qD(n,t,e){const i=at(n);let r=Mt.min(),s=rn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,y){const b=at(d),E=b.Ui.get(y);return void 0!==E?ae.resolve(b.qi.get(E)):b.Cs.getTargetData(p,y)}(i,c,Us(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:Mt.min(),e?s:rn())).next(d=>(IU(i,nB(t),d),{documents:d,Hi:s})))}function TU(n,t){const e=at(n),i=at(e.Cs),r=e.qi.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ne(s,t).next(c=>c?c.target:null))}function EU(n,t){const e=at(n),i=e.Ki.get(t)||Mt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,IV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(IU(e,t,r),r))}function IU(n,t,e){let i=n.Ki.get(t)||Mt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function zR(){return zR=(0,pe.Z)(function*(n,t,e,i){const r=at(n);let s=rn(),c=po();for(const y of e){const b=t.Ji(y.metadata.name);y.document&&(s=s.add(b));const E=t.Yi(y);E.setReadTime(t.Xi(y.metadata.readTime)),c=c.insert(b,E)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Ky(r,(y=i,Us(Vy(vn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>CU(y,d,c).next(b=>(d.apply(y),b)).next(b=>r.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,b.Wi,b.zi)).next(()=>b.Wi)))}),zR.apply(this,arguments)}function H8(n,t){return $R.apply(this,arguments)}function $R(){return $R=(0,pe.Z)(function*(n,t,e=rn()){const i=yield Ky(n,Us(AR(t.bundledQuery))),r=at(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=er(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const d=i.withResumeToken(Sr.EMPTY_BYTE_STRING,c);return r.qi=r.qi.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),$R.apply(this,arguments)}function SU(n,t){return`firestore_clients_${n}_${t}`}function DU(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function jR(n,t){return`firestore_targets_${n}_${t}`}class WD{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ne(r.error.code,r.error.message))),c?new WD(t,e,r.state,s):(Xi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class bC{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ne(i.error.code,i.error.message))),s?new bC(t,i.state,r):(Xi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class KD{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=OD();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=RV(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new KD(t,s):(Xi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class qR{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new qR(e.clientId,e.onlineState):(Xi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class WR{constructor(){this.activeTargetIds=OD()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class KR{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Hi(Xt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=SU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new WR),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,pe.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(SU(t.persistenceKey,r));if(s){const c=KD.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(jR(this.persistenceKey,t));if(i){const r=bC.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(jR(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=Zo.at;if(null!=s)try{const d=JSON.parse(s);Et("number"==typeof d),c=d}catch(d){Xi("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Zo.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new WD(this.currentUser,t,e,i),s=DU(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=DU(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=jR(this.persistenceKey,t),s=new bC(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return KD.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return WD.Zi(new Ur(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return bC.Zi(r,e)}yr(t){return qR.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,pe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(c,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=OD();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class xU{constructor(){this.Lr=new WR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new WR,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class G8{Ur(t){}shutdown(){}}class AU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const z8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $8{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class j8 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,s){const c=this.ho(t,e);$e("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(t,c,d,i).then(p=>($e("RestConnection","Received: ",p),p),p=>{throw Pg("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}_o(t,e,i,r,s,c){return this.ao(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ry,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.oo}/v1/${e}:${z8[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const d=new z5;d.setWithCredentials(!0),d.listenOnce(U5.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case nR.NO_ERROR:const y=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(y)),s(y);break;case nR.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case nR.HTTP_ERROR:const b=d.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const M=E?.error;if(M&&M.status&&M.message){const P=function(F){const z=F.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(z)>=0?z:ce.UNKNOWN}(M.status);c(new Ne(P,M.message))}else c(new Ne(ce.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=V5(),c=B5(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new G5({})),this.lo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=r.join("");$e("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let b=!1,E=!1;const M=new $8({Hr:F=>{E?$e("Connection","Not sending because WebChannel is closed:",F):(b||($e("Connection","Opening WebChannel transport."),y.open(),b=!0),$e("Connection","WebChannel sending:",F),y.send(F))},Jr:()=>y.close()}),P=(F,z,K)=>{F.listen(z,De=>{try{K(De)}catch(Be){setTimeout(()=>{throw Be},0)}})};return P(y,vD.EventType.OPEN,()=>{E||$e("Connection","WebChannel transport opened.")}),P(y,vD.EventType.CLOSE,()=>{E||(E=!0,$e("Connection","WebChannel transport closed"),M.io())}),P(y,vD.EventType.ERROR,F=>{E||(E=!0,Pg("Connection","WebChannel transport errored:",F),M.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),P(y,vD.EventType.MESSAGE,F=>{var z;if(!E){const K=F.data[0];Et(!!K);const Be=K.error||(null===(z=K[0])||void 0===z?void 0:z.error);if(Be){$e("Connection","WebChannel received error:",Be);const Le=Be.status;let Ue=function(ft){const en=pr[ft];if(void 0!==en)return yB(en)}(Le),dt=Be.message;void 0===Ue&&(Ue=ce.INTERNAL,dt="Unknown error status: "+Le+" with message "+Be.message),E=!0,M.io(new Ne(Ue,dt)),y.close()}else $e("Connection","WebChannel received:",K),M.ro(K)}}),P(c,H5.STAT_EVENT,F=>{F.stat===vV.PROXY?$e("Connection","Detected buffering proxy"):F.stat===vV.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function MU(){return typeof window<"u"?window:null}function ZD(){return typeof document<"u"?document:null}function CC(n){return new NY(n,!0)}class ZR{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class kU{constructor(t,e,i,r,s,c,d,p){this.Hs=t,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ZR(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,pe.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,pe.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,pe.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ce.RESOURCE_EXHAUSTED?(Xi(e.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ce.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q8 extends kU{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.yt=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function VY(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:gt(),r=t.targetChange.targetIds||[],s=function(p,y){return p.wt?(Et(void 0===y||"string"==typeof y),Sr.fromBase64String(y||"")):(Et(void 0===y||y instanceof Uint8Array),Sr.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const y=void 0===p.code?ce.UNKNOWN:yB(p.code);return new Ne(y,p.message||"")}(c);e=new TB(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Kc(n,i.document.name),s=er(i.document.updateTime),c=i.document.createTime?er(i.document.createTime):Mt.min(),d=new as({mapValue:{fields:i.document.fields}}),p=ui.newFoundDocument(r,s,c,d);e=new PD(i.targetIds||[],i.removedTargetIds||[],p.key,p)}else if("documentDelete"in t){const i=t.documentDelete,r=Kc(n,i.document),s=i.readTime?er(i.readTime):Mt.min(),c=ui.newNoDocument(r,s);e=new PD([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Kc(n,i.document);e=new PD([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return gt();{const i=t.filter,s=new SY(i.count||0);e=new CB(i.targetId,s)}}var p;return e}(this.yt,t),i=function(r){if(!("targetChange"in r))return Mt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Mt.min():s.readTime?er(s.readTime):Mt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=hC(this.yt),e.addTarget=function(r,s){let c;const d=s.target;return c=SD(d)?{documents:OB(r,d)}:{query:ER(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=DB(r,s.resumeToken):s.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=zy(r,s.snapshotVersion.toTimestamp())),c}(this.yt,t);const i=function UY(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=hC(this.yt),e.removeTarget=t,this.Bo(e)}}class W8 extends kU{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Et(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function BY(n,t){return n&&n.length>0?(Et(void 0!==t),n.map(e=>function(i,r){let s=er(i.updateTime?i.updateTime:r);return s.isEqual(Mt.min())&&(s=er(r)),new TY(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=er(t.commitTime);return this.listener.Zo(i,e)}return Et(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=hC(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>fC(this.yt,i))};this.Bo(e)}}class K8 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.yt=r,this.nu=!1}su(){if(this.nu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ne(ce.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ce.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Y8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xi(e),this.ou=!1):$e("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Q8{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(d=>{i.enqueueAndForget((0,pe.Z)(function*(){var p;Fd(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,pe.Z)(function*(y){const b=at(y);b._u.add(4),yield Yy(b),b.gu.set("Unknown"),b._u.delete(4),yield TC(b)}),function(y){return p.apply(this,arguments)})(c))}))}),this.gu=new Y8(i,r)}}function TC(n){return QR.apply(this,arguments)}function QR(){return QR=(0,pe.Z)(function*(n){if(Fd(n))for(const t of n.wu)yield t(!0)}),QR.apply(this,arguments)}function Yy(n){return JR.apply(this,arguments)}function JR(){return JR=(0,pe.Z)(function*(n){for(const t of n.wu)yield t(!1)}),JR.apply(this,arguments)}function YD(n,t){const e=at(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),tO(e)?eO(e):Jy(e).ko()&&XR(e,t))}function EC(n,t){const e=at(n),i=Jy(e);e.du.delete(t),i.ko()&&RU(e,t),0===e.du.size&&(i.ko()?i.Fo():Fd(e)&&e.gu.set("Unknown"))}function XR(n,t){n.yu.Ot(t.targetId),Jy(n).zo(t)}function RU(n,t){n.yu.Ot(t),Jy(n).Ho(t)}function eO(n){n.yu=new kY({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>n.du.get(t)||null}),Jy(n).start(),n.gu.uu()}function tO(n){return Fd(n)&&!Jy(n).No()&&n.du.size>0}function Fd(n){return 0===at(n)._u.size}function OU(n){n.yu=void 0}function J8(n){return nO.apply(this,arguments)}function nO(){return nO=(0,pe.Z)(function*(n){n.du.forEach((t,e)=>{XR(n,t)})}),nO.apply(this,arguments)}function X8(n,t){return iO.apply(this,arguments)}function iO(){return iO=(0,pe.Z)(function*(n,t){OU(n),tO(n)?(n.gu.hu(t),eO(n)):n.gu.set("Unknown")}),iO.apply(this,arguments)}function eQ(n,t,e){return rO.apply(this,arguments)}function rO(){return rO=(0,pe.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof TB&&2===t.state&&t.cause)try{yield(i=(0,pe.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield QD(n,i)}else if(t instanceof PD?n.yu.Kt(t):t instanceof CB?n.yu.Jt(t):n.yu.jt(t),!e.isEqual(Mt.min()))try{const i=yield bU(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.Zt(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=r.du.get(p);y&&r.du.set(p,y.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r.du.get(d);if(!p)return;r.du.set(d,p.withResumeToken(Sr.EMPTY_BYTE_STRING,p.snapshotVersion)),RU(r,d);const y=new wf(p.target,d,1,p.sequenceNumber);XR(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield QD(n,i)}var i}),rO.apply(this,arguments)}function QD(n,t,e){return sO.apply(this,arguments)}function sO(){return sO=(0,pe.Z)(function*(n,t,e){if(!ff(t))throw t;n._u.add(1),yield Yy(n),n.gu.set("Offline"),e||(e=()=>bU(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield TC(n)}))}),sO.apply(this,arguments)}function PU(n,t){return t().catch(e=>QD(n,e,t))}function Qy(n){return oO.apply(this,arguments)}function oO(){return oO=(0,pe.Z)(function*(n){const t=at(n),e=Ef(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;tQ(t);)try{const r=yield B8(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,nQ(t,r)}catch(r){yield QD(t,r)}NU(t)&&FU(t)}),oO.apply(this,arguments)}function tQ(n){return Fd(n)&&n.fu.length<10}function nQ(n,t){n.fu.push(t);const e=Ef(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function NU(n){return Fd(n)&&!Ef(n).No()&&n.fu.length>0}function FU(n){Ef(n).start()}function iQ(n){return aO.apply(this,arguments)}function aO(){return aO=(0,pe.Z)(function*(n){Ef(n).eu()}),aO.apply(this,arguments)}function rQ(n){return lO.apply(this,arguments)}function lO(){return lO=(0,pe.Z)(function*(n){const t=Ef(n);for(const e of n.fu)t.Xo(e.mutations)}),lO.apply(this,arguments)}function sQ(n,t,e){return cO.apply(this,arguments)}function cO(){return cO=(0,pe.Z)(function*(n,t,e){const i=n.fu.shift(),r=DR.from(i,t,e);yield PU(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Qy(n)}),cO.apply(this,arguments)}function oQ(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,pe.Z)(function*(n,t){var e;t&&Ef(n).Yo&&(yield(e=(0,pe.Z)(function*(i,r){if(_B(s=r.code)&&s!==ce.ABORTED){const c=i.fu.shift();Ef(i).Mo(),yield PU(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Qy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),NU(n)&&FU(n)}),uO.apply(this,arguments)}function LU(n,t){return dO.apply(this,arguments)}function dO(){return dO=(0,pe.Z)(function*(n,t){const e=at(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=Fd(e);e._u.add(3),yield Yy(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield TC(e)}),dO.apply(this,arguments)}function hO(n,t){return fO.apply(this,arguments)}function fO(){return fO=(0,pe.Z)(function*(n,t){const e=at(n);t?(e._u.delete(2),yield TC(e)):t||(e._u.add(2),yield Yy(e),e.gu.set("Unknown"))}),fO.apply(this,arguments)}function Jy(n){return n.pu||(n.pu=function(t,e,i){const r=at(t);return r.su(),new q8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:J8.bind(null,n),Zr:X8.bind(null,n),Wo:eQ.bind(null,n)}),n.wu.push(function(){var t=(0,pe.Z)(function*(e){e?(n.pu.Mo(),tO(n)?eO(n):n.gu.set("Unknown")):(yield n.pu.stop(),OU(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function Ef(n){return n.Iu||(n.Iu=function(t,e,i){const r=at(t);return r.su(),new W8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:iQ.bind(null,n),Zr:oQ.bind(null,n),tu:rQ.bind(null,n),Zo:sQ.bind(null,n)}),n.wu.push(function(){var t=(0,pe.Z)(function*(e){e?(n.Iu.Mo(),yield Qy(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class pO{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new pO(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xy(n,t){if(Xi("AsyncQueue",`${t}: ${n}`),ff(n))return new Ne(ce.UNAVAILABLE,`${t}: ${n}`);throw n}class ev{constructor(t){this.comparator=t?(e,i)=>t(e,i)||rt.comparator(e.key,i.key):(e,i)=>rt.comparator(e.key,i.key),this.keyedMap=aC(),this.sortedSet=new Hi(this.comparator)}static emptySet(t){return new ev(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ev)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new ev;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class VU{constructor(){this.Tu=new Hi(rt.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):gt():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class tv{constructor(t,e,i,r,s,c,d,p,y){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,e,i,r,s){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new tv(t,e,ev.emptySet(e),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&iC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class aQ{constructor(){this.Au=void 0,this.listeners=[]}}class lQ{constructor(){this.queries=new vf(t=>tB(t),iC),this.onlineState="Unknown",this.Ru=new Set}}function gO(n,t){return mO.apply(this,arguments)}function mO(){return mO=(0,pe.Z)(function*(n,t){const e=at(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new aQ),r)try{s.Au=yield e.onListen(i)}catch(c){const d=Xy(c,`Initialization of query '${vR(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&vO(e)}),mO.apply(this,arguments)}function _O(n,t){return yO.apply(this,arguments)}function yO(){return yO=(0,pe.Z)(function*(n,t){const e=at(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),yO.apply(this,arguments)}function cQ(n,t){const e=at(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Pu(r)&&(i=!0);c.Au=r}}i&&vO(e)}function uQ(n,t,e){const i=at(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function vO(n){n.Ru.forEach(t=>{t.next()})}class wO{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new tv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=tv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class dQ{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class BU{constructor(t){this.yt=t}Ji(t){return Kc(this.yt,t)}Yi(t){return t.metadata.exists?RB(this.yt,t.document,!1):ui.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return er(t)}}class hQ{constructor(t,e,i){this.Mu=t,this.localStore=e,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UU(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=vn.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new BU(this.yt);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||rn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,pe.Z)(function*(){const e=yield function U8(n,t,e,i){return zR.apply(this,arguments)}(t.localStore,new BU(t.yt),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield H8(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function UU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class HU{constructor(t){this.key=t}}class GU{constructor(t){this.key=t}}class zU{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=rn(),this.mutatedKeys=rn(),this.Gu=iB(t),this.Qu=new ev(this.Gu)}get ju(){return this.qu}Wu(t,e){const i=e?e.zu:new VU,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,E)=>{const M=r.get(b),P=rC(this.query,E)?E:null,F=!!M&&this.mutatedKeys.has(M.key),z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let K=!1;M&&P?M.data.isEqual(P.data)?F!==z&&(i.track({type:3,doc:P}),K=!0):this.Hu(M,P)||(i.track({type:2,doc:P}),K=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(d=!0)):!M&&P?(i.track({type:0,doc:P}),K=!0):M&&!P&&(i.track({type:1,doc:M}),K=!0,(p||y)&&(d=!0)),K&&(P?(c=c.add(P),s=z?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Qu:c,zu:i,$i:d,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((y,b)=>function(E,M){const P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return P(E)-P(M)}(y.type,b.type)||this.Gu(y.doc,b.doc)),this.Ju(i);const c=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==s.length||p?{snapshot:new tv(this.query,t.Qu,r,s,t.mutatedKeys,0===d,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new VU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.qu=this.qu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.qu=this.qu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=rn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new GU(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new HU(i))}),e}tc(t){this.qu=t.Hi,this.Ku=rn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return tv.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class fQ{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class pQ{constructor(t){this.key=t,this.nc=!1}}class gQ{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new vf(d=>tB(d),iC),this.rc=new Map,this.oc=new Set,this.uc=new Hi(rt.comparator),this.cc=new Map,this.ac=new FR,this.hc={},this.lc=new Map,this.fc=Yg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function mQ(n,t){return bO.apply(this,arguments)}function bO(){return bO=(0,pe.Z)(function*(n,t){const e=$O(n);let i,r;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const c=yield Ky(e.localStore,Us(t));e.isPrimaryClient&&YD(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield CO(e,t,i,"current"===d,c.resumeToken)}return r}),bO.apply(this,arguments)}function CO(n,t,e,i,r){return TO.apply(this,arguments)}function TO(){return TO=(0,pe.Z)(function*(n,t,e,i,r){n._c=(E,M,P)=>{return(F=(0,pe.Z)(function*(z,K,De,Be){let Le=K.view.Wu(De);Le.$i&&(Le=yield qD(z.localStore,K.query,!1).then(({documents:ft})=>K.view.Wu(ft,Le)));const Ue=Be&&Be.targetChanges.get(K.targetId),dt=K.view.applyChanges(Le,z.isPrimaryClient,Ue);return OO(z,K.targetId,dt.Xu),dt.snapshot}),function(z,K,De,Be){return F.apply(this,arguments)})(n,E,M,P);var F};const s=yield qD(n.localStore,t,!0),c=new zU(t,s.Hi),d=c.Wu(s.documents),p=uC.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),y=c.applyChanges(d,n.isPrimaryClient,p);OO(n,e,y.Xu);const b=new fQ(t,e,c);return n.ic.set(t,b),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),y.snapshot}),TO.apply(this,arguments)}function _Q(n,t){return EO.apply(this,arguments)}function EO(){return EO=(0,pe.Z)(function*(n,t){const e=at(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(s=>!iC(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zy(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),EC(e.remoteStore,i.targetId),nv(e,i.targetId)}).catch(hf))):(nv(e,i.targetId),yield Zy(e.localStore,i.targetId,!0))}),EO.apply(this,arguments)}function IO(){return IO=(0,pe.Z)(function*(n,t,e){const i=jO(n);try{const r=yield function(s,c){const d=at(s),p=bi.now(),y=c.reduce((M,P)=>M.add(P.key),rn());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let P=po(),F=rn();return d.Gi.getEntries(M,y).next(z=>{P=z,P.forEach((K,De)=>{De.isValidDocument()||(F=F.add(K))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,P)).next(z=>{b=z;const K=[];for(const De of c){const Be=IY(De,b.get(De.key).overlayedDocument);null!=Be&&K.push(new Nd(De.key,Be,YV(Be.value.mapValue),Ci.exists(!0)))}return d.mutationQueue.addMutationBatch(M,p,K,c)}).next(z=>{E=z;const K=z.applyToLocalDocumentSet(b,F);return d.documentOverlayCache.saveOverlays(M,z.batchId,K)})}).then(()=>({batchId:E.batchId,changes:wB(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.hc[s.currentUser.toKey()];p||(p=new Hi(Xt)),p=p.insert(c,d),s.hc[s.currentUser.toKey()]=p}(i,r.batchId,e),yield Ld(i,r.changes),yield Qy(i.remoteStore)}catch(r){const s=Xy(r,"Failed to persist write");e.reject(s)}}),IO.apply(this,arguments)}function $U(n,t){return SO.apply(this,arguments)}function SO(){return SO=(0,pe.Z)(function*(n,t){const e=at(n);try{const i=yield V8(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.cc.get(s);c&&(Et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Et(c.nc):r.removedDocuments.size>0&&(Et(c.nc),c.nc=!1))}),yield Ld(e,i,t)}catch(i){yield hf(i)}}),SO.apply(this,arguments)}function jU(n,t,e){const i=at(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((s,c)=>{const d=c.view.bu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=at(s);d.onlineState=c;let p=!1;d.queries.forEach((y,b)=>{for(const E of b.listeners)E.bu(c)&&(p=!0)}),p&&vO(d)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function vQ(n,t,e){return DO.apply(this,arguments)}function DO(){return DO=(0,pe.Z)(function*(n,t,e){const i=at(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),s=r&&r.key;if(s){let c=new Hi(rt.comparator);c=c.insert(s,ui.newNoDocument(s,Mt.min()));const d=rn().add(s),p=new cC(Mt.min(),new Map,new qn(Xt),c,d);yield $U(i,p),i.uc=i.uc.remove(s),i.cc.delete(t),PO(i)}else yield Zy(i.localStore,t,!1).then(()=>nv(i,t,e)).catch(hf)}),DO.apply(this,arguments)}function wQ(n,t){return xO.apply(this,arguments)}function xO(){return xO=(0,pe.Z)(function*(n,t){const e=at(n),i=t.batch.batchId;try{const r=yield L8(e.localStore,t);RO(e,i,null),kO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ld(e,r)}catch(r){yield hf(r)}}),xO.apply(this,arguments)}function bQ(n,t,e){return AO.apply(this,arguments)}function AO(){return AO=(0,pe.Z)(function*(n,t,e){const i=at(n);try{const r=yield function(s,c){const d=at(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,c).next(b=>(Et(null!==b),y=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,t);RO(i,t,e),kO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ld(i,r)}catch(r){yield hf(r)}}),AO.apply(this,arguments)}function MO(){return MO=(0,pe.Z)(function*(n,t){const e=at(n);Fd(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=at(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=Xy(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),MO.apply(this,arguments)}function kO(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function RO(n,t,e){const i=at(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function nv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||qU(n,i)})}function qU(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(EC(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),PO(n))}function OO(n,t,e){for(const i of e)i instanceof HU?(n.ac.addReference(i.key,t),TQ(n,i)):i instanceof GU?($e("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||qU(n,i.key)):gt()}function TQ(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||($e("SyncEngine","New document in limbo: "+e),n.oc.add(i),PO(n))}function PO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new rt(vn.fromString(t)),i=n.fc.next();n.cc.set(i,new pQ(e)),n.uc=n.uc.insert(e,i),YD(n.remoteStore,new wf(Us(Vy(e.path)),i,2,Zo.at))}}function Ld(n,t,e){return NO.apply(this,arguments)}function NO(){return NO=(0,pe.Z)(function*(n,t,e){const i=at(n),r=[],s=[],c=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,p)=>{c.push(i._c(p,t,e).then(y=>{if((y||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const b=UR.Ci(p.targetId,y);s.push(b)}}))}),yield Promise.all(c),i.sc.Wo(r),yield(d=(0,pe.Z)(function*(p,y){const b=at(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ae.forEach(y,M=>ae.forEach(M.Si,P=>b.persistence.referenceDelegate.addReference(E,M.targetId,P)).next(()=>ae.forEach(M.Di,P=>b.persistence.referenceDelegate.removeReference(E,M.targetId,P)))))}catch(E){if(!ff(E))throw E;$e("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const M=E.targetId;if(!E.fromCache){const P=b.qi.get(M),z=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.qi=b.qi.insert(M,z)}}}),function(p,y){return d.apply(this,arguments)})(i.localStore,s))}),NO.apply(this,arguments)}function EQ(n,t){return FO.apply(this,arguments)}function FO(){return FO=(0,pe.Z)(function*(n,t){const e=at(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield wU(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(c=>{c.forEach(d=>{d.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ld(e,i.ji)}var r}),FO.apply(this,arguments)}function IQ(n,t){const e=at(n),i=e.cc.get(t);if(i&&i.nc)return rn().add(i.key);{let r=rn();const s=e.rc.get(t);if(!s)return r;for(const c of s){const d=e.ic.get(c);r=r.unionWith(d.view.ju)}return r}}function SQ(n,t){return LO.apply(this,arguments)}function LO(){return LO=(0,pe.Z)(function*(n,t){const e=at(n),i=yield qD(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&OO(e,t.targetId,r.Xu),r}),LO.apply(this,arguments)}function DQ(n,t){return VO.apply(this,arguments)}function VO(){return VO=(0,pe.Z)(function*(n,t){const e=at(n);return EU(e.localStore,t).then(i=>Ld(e,i))}),VO.apply(this,arguments)}function xQ(n,t,e,i){return BO.apply(this,arguments)}function BO(){return BO=(0,pe.Z)(function*(n,t,e,i){const r=at(n),s=yield function(c,d){const p=at(c),y=at(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Tn(b,d).next(E=>E?p.localDocuments.getDocuments(b,E):ae.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield Qy(r.remoteStore):"acknowledged"===e||"rejected"===e?(RO(r,t,i||null),kO(r,t),d=t,at(at(r.localStore).mutationQueue).An(d)):gt(),yield Ld(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),BO.apply(this,arguments)}function UO(){return UO=(0,pe.Z)(function*(n,t){const e=at(n);if($O(e),jO(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield WU(e,i.toArray());e.dc=!0,yield hO(e.remoteStore,!0);for(const s of r)YD(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(nv(e,c),Zy(e.localStore,c,!0))),EC(e.remoteStore,c)}),yield r,yield WU(e,i),function(s){const c=at(s);c.cc.forEach((d,p)=>{EC(c.remoteStore,p)}),c.ac.fs(),c.cc=new Map,c.uc=new Hi(rt.comparator)}(e),e.dc=!1,yield hO(e.remoteStore,!1)}}),UO.apply(this,arguments)}function WU(n,t,e){return HO.apply(this,arguments)}function HO(){return HO=(0,pe.Z)(function*(n,t,e){const i=at(n),r=[],s=[];for(const c of t){let d;const p=i.rc.get(c);if(p&&0!==p.length){d=yield Ky(i.localStore,Us(p[0]));for(const y of p){const b=i.ic.get(y),E=yield SQ(i,b);E.snapshot&&s.push(E.snapshot)}}else{const y=yield TU(i.localStore,c);d=yield Ky(i.localStore,y),yield CO(i,KU(y),c,!1,d.resumeToken)}r.push(d)}return i.sc.Wo(s),r}),HO.apply(this,arguments)}function KU(n){return XV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function MQ(n){const t=at(n);return at(at(t.localStore).persistence).vi()}function kQ(n,t,e,i){return GO.apply(this,arguments)}function GO(){return GO=(0,pe.Z)(function*(n,t,e,i){const r=at(n);if(r.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield EU(r.localStore,nB(s[0])),d=cC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Sr.EMPTY_BYTE_STRING);yield Ld(r,c,d);break}case"rejected":yield Zy(r.localStore,t,!0),nv(r,t,i);break;default:gt()}}),GO.apply(this,arguments)}function RQ(n,t,e){return zO.apply(this,arguments)}function zO(){return zO=(0,pe.Z)(function*(n,t,e){const i=$O(n);if(i.dc){for(const r of t){if(i.rc.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield TU(i.localStore,r),c=yield Ky(i.localStore,s);yield CO(i,KU(s),c.targetId,!1,c.resumeToken),YD(i.remoteStore,c)}for(const r of e)i.rc.has(r)&&(yield Zy(i.localStore,r,!1).then(()=>{EC(i.remoteStore,r),nv(i,r)}).catch(hf))}}),zO.apply(this,arguments)}function $O(n){const t=at(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=$U.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=IQ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vQ.bind(null,t),t.sc.Wo=cQ.bind(null,t.eventManager),t.sc.wc=uQ.bind(null,t.eventManager),t}function jO(n){const t=at(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wQ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bQ.bind(null,t),t}class ZU{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,pe.Z)(function*(){e.yt=CC(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return vU(this.persistence,new yU,t.initialUser,this.yt)}yc(t){return new mU($D.Bs,this.yt)}gc(t){return new xU}terminate(){var t=this;return(0,pe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class YU extends ZU{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield jO(i.Ac.syncEngine),yield Qy(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return vU(this.persistence,new yU,t.initialUser,this.yt)}Tc(t,e){return new C8(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new sY(e,this.persistence);return new rY(t.asyncQueue,i)}yc(t){const e=BR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new VR(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,MU(),ZD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new xU}}class PQ extends YU{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,pe.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof KR&&(i.sharedClientState.syncEngine={Fr:xQ.bind(null,r),$r:kQ.bind(null,r),Br:RQ.bind(null,r),vi:MQ.bind(null,r),Mr:DQ.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,pe.Z)(function*(c){yield function AQ(n,t){return UO.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(t){const e=MU();if(!KR.C(e))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=BR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new KR(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class qO{initialize(t,e){var i=this;return(0,pe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>jU(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=EQ.bind(null,i.syncEngine),yield hO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new lQ}createDatastore(t){const e=CC(t.databaseInfo.databaseId),i=new j8(t.databaseInfo);return new K8(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>jU(this.syncEngine,d,0),c=AU.C()?new AU:new G8,new Q8(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,y){const b=new gQ(i,r,s,c,d,p);return y&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,pe.Z)(function*(e){const i=at(e);$e("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Yy(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function WO(n,t,e){if(!e)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function QU(n,t,e,i){if(!0===t&&!0===i)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function JU(n){if(!rt.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XU(n){if(rt.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":gt()}function gn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=JD(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function eH(n,t){if(t<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const tH=new Map;class nH{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,QU("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class IC{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nH(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new q5;switch(e.type){case"gapi":return new Y5(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=tH.get(t);e&&($e("ComponentProvider","Removing Datastore"),tH.delete(t),e.terminate())}(this),Promise.resolve()}}class di{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new di(this.firestore,t,this._key)}}class ls{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ls(this.firestore,t,this._query)}}class Yc extends ls{constructor(t,e,i){super(t,e,Vy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new di(this.firestore,null,new rt(t))}withConverter(t){return new Yc(this.firestore,t,this._path)}}function rH(n,t,...e){if(n=(0,N.m9)(n),WO("collection","path",t),n instanceof IC){const i=vn.fromString(t,...e);return XU(i),new Yc(n,null,i)}{if(!(n instanceof di||n instanceof Yc))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(t,...e));return XU(i),new Yc(n.firestore,null,i)}}function XD(n,t,...e){if(n=(0,N.m9)(n),1===arguments.length&&(t=TV.R()),WO("doc","path",t),n instanceof IC){const i=vn.fromString(t,...e);return JU(i),new di(n,null,new rt(i))}{if(!(n instanceof di||n instanceof Yc))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(t,...e));return JU(i),new di(n.firestore,n instanceof Yc?n.converter:null,new rt(i))}}function sH(n,t){return n=(0,N.m9)(n),t=(0,N.m9)(t),(n instanceof di||n instanceof Yc)&&(t instanceof di||t instanceof Yc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function KO(n,t){return n=(0,N.m9)(n),t=(0,N.m9)(t),n instanceof ls&&t instanceof ls&&n.firestore===t.firestore&&iC(n._query,t._query)&&n.converter===t.converter}function oH(n,t=10240){let e=0;return{read:()=>(0,pe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ex{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class FQ{constructor(t,e){this.Pc=t,this.yt=e,this.metadata=new Ir,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,pe.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,pe.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,pe.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(r);return new dQ(JSON.parse(s),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,pe.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,pe.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,pe.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class BQ{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,pe.Z)(function*(s,c){const d=at(s),p=hC(d.yt)+"/documents",y={documents:c.map(P=>dC(d.yt,P))},b=yield d._o("BatchGetDocuments",p,y,c.length),E=new Map;b.forEach(P=>{const F=function LY(n,t){return"found"in t?function(e,i){Et(!!i.found);const r=Kc(e,i.found.name),s=er(i.found.updateTime),c=i.found.createTime?er(i.found.createTime):Mt.min(),d=new as({mapValue:{fields:i.found.fields}});return ui.newFoundDocument(r,s,c,d)}(n,t):"missing"in t?function(e,i){Et(!!i.missing),Et(!!i.readTime);const r=Kc(e,i.missing),s=er(i.readTime);return ui.newNoDocument(r,s)}(n,t):gt()}(d.yt,P);E.set(F.key.toString(),F)});const M=[];return c.forEach(P=>{const F=E.get(P.toString());Et(!!F),M.push(F)}),M}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Gy(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=rt.fromPath(r);t.mutations.push(new wR(s,t.precondition(s)))}),yield(i=(0,pe.Z)(function*(r,s){const c=at(r),d=hC(c.yt)+"/documents",p={writes:s.map(y=>fC(c.yt,y))};yield c.ao("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw gt();e=Mt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Mt.min())?Ci.exists(!1):Ci.updateTime(e):Ci.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Mt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ci.updateTime(e)}return Ci.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class UQ{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new ZR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,pe.Z)(function*(){const e=new BQ(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Fc(s)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!Y0(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!_B(e)}return!1}}class HQ{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Ur.UNAUTHENTICATED,this.clientId=TV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,pe.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,pe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Xy(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function aH(n,t){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,pe.Z)(function*(s){i.isEqual(s)||(yield wU(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),ZO.apply(this,arguments)}function lH(n,t){return YO.apply(this,arguments)}function YO(){return YO=(0,pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield QO(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>LU(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>LU(t.remoteStore,s)),n.onlineComponents=t}),YO.apply(this,arguments)}function QO(n){return JO.apply(this,arguments)}function JO(){return JO=(0,pe.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield aH(n,new ZU)),n.offlineComponents}),JO.apply(this,arguments)}function tx(n){return XO.apply(this,arguments)}function XO(){return XO=(0,pe.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield lH(n,new qO)),n.onlineComponents}),XO.apply(this,arguments)}function cH(n){return QO(n).then(t=>t.persistence)}function nx(n){return QO(n).then(t=>t.localStore)}function eP(n){return tx(n).then(t=>t.remoteStore)}function tP(n){return tx(n).then(t=>t.syncEngine)}function iv(n){return nP.apply(this,arguments)}function nP(){return nP=(0,pe.Z)(function*(n){const t=yield tx(n),e=t.eventManager;return e.onListen=mQ.bind(null,t.syncEngine),e.onUnlisten=_Q.bind(null,t.syncEngine),e}),nP.apply(this,arguments)}function dH(n,t,e={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(r,s,c,d,p){const y=new ex({next:E=>{s.enqueueAndForget(()=>_O(r,b));const M=E.docs.has(c);!M&&E.fromCache?p.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&E.fromCache&&d&&"server"===d.source?p.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new wO(Vy(c.path),y,{includeMetadataChanges:!0,Nu:!0});return gO(r,b)}(yield iv(n),n.asyncQueue,t,e,i)})),i.promise}function hH(n,t,e={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(r,s,c,d,p){const y=new ex({next:E=>{s.enqueueAndForget(()=>_O(r,b)),E.fromCache&&"server"===d.source?p.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new wO(c,y,{includeMetadataChanges:!0,Nu:!0});return gO(r,b)}(yield iv(n),n.asyncQueue,t,e,i)})),i.promise}class ZQ{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ZR(this,"async_queue_retry"),this.Wc=()=>{const e=ZD();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=ZD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=ZD();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise(()=>{});const e=new Ir;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,pe.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!ff(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Xi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=pO.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.Uc.push(r),r}zc(){this.Kc&&gt()}verifyOperationInProgress(){}Xc(){var t=this;return(0,pe.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function iP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class YQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class hi extends IC{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new ZQ,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fH(this),this._firestoreClient.terminate()}}function tr(n){return n._firestoreClient||fH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fH(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new oY(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new HQ(n._authCredentials,n._appCheckCredentials,n._queue,i)}function pH(n,t,e){const i=new Ir;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield aH(n,e),yield lH(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;Pg("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function gH(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qc(Sr.fromBase64String(t))}catch(e){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Qc(Sr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Jg{constructor(t){this._methodName=t}}class ix{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xt(this._lat,t._lat)||Xt(this._long,t._long)}}const a7=/^__.*__$/;class l7{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new Nd(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hy(t,this.data,e,this.fieldTransforms)}}class mH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Nd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function _H(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class rx{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.yt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new rx(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return ax(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(_H(this.sa)&&a7.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class c7{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=i||CC(t)}da(t,e,i,r=!1){return new rx({sa:t,methodName:e,fa:i,path:Bi.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Xg(n){const t=n._freezeSettings(),e=CC(n._databaseId);return new c7(n._databaseId,!!t.ignoreUndefinedProperties,e)}function sx(n,t,e,i,r,s={}){const c=n.da(s.merge||s.mergeFields?2:0,t,e,r);aP("Data must be an object, but it was:",c,i);const d=wH(i,c);let p,y;if(s.merge)p=new fo(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const E of s.mergeFields){const M=lP(t,E,e);if(!c.contains(M))throw new Ne(ce.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);CH(b,M)||b.push(M)}p=new fo(b),y=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,y=c.fieldTransforms;return new l7(new as(d),p,y)}class SC extends Jg{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof SC}}function yH(n,t,e){return new rx({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.yt,t.ignoreUndefinedProperties)}class rP extends Jg{_toFieldTransform(t){return new sC(t.path,new By)}isEqual(t){return t instanceof rP}}class u7 extends Jg{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=yH(this,t,!0),i=this._a.map(s=>em(s,e)),r=new zg(i);return new sC(t.path,r)}isEqual(t){return this===t}}class d7 extends Jg{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=yH(this,t,!0),i=this._a.map(s=>em(s,e)),r=new $g(i);return new sC(t.path,r)}isEqual(t){return this===t}}class h7 extends Jg{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new Uy(t.yt,oB(t.yt,this.wa));return new sC(t.path,e)}isEqual(t){return this===t}}function sP(n,t,e,i){const r=n.da(1,t,e);aP("Data must be an object, but it was:",r,i);const s=[],c=as.empty();Lg(i,(p,y)=>{const b=ox(t,p,e);y=(0,N.m9)(y);const E=r.ca(b);if(y instanceof SC)s.push(b);else{const M=em(y,E);null!=M&&(s.push(b),c.set(b,M))}});const d=new fo(s);return new mH(c,d,r.fieldTransforms)}function oP(n,t,e,i,r,s){const c=n.da(1,t,e),d=[lP(t,i,e)],p=[r];if(s.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(lP(t,s[M])),p.push(s[M+1]);const y=[],b=as.empty();for(let M=d.length-1;M>=0;--M)if(!CH(y,d[M])){const P=d[M];let F=p[M];F=(0,N.m9)(F);const z=c.ca(P);if(F instanceof SC)y.push(P);else{const K=em(F,z);null!=K&&(y.push(P),b.set(P,K))}}const E=new fo(y);return new mH(b,E,c.fieldTransforms)}function vH(n,t,e,i=!1){return em(e,n.da(i?4:3,t))}function em(n,t){if(bH(n=(0,N.m9)(n)))return aP("Unsupported field value:",t,n),wH(n,t);if(n instanceof Jg)return function(e,i){if(!_H(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=em(c,i.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,N.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oB(i.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=bi.fromDate(e);return{timestampValue:zy(i.yt,r)}}if(e instanceof bi){const r=new bi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zy(i.yt,r)}}if(e instanceof ix)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qc)return{bytesValue:DB(i.yt,e._byteString)};if(e instanceof di){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:bR(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${JD(e)}`)}(n,t)}function wH(n,t){const e={};return kV(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lg(n,(i,r)=>{const s=em(r,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function bH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bi||n instanceof ix||n instanceof Qc||n instanceof di||n instanceof Jg)}function aP(n,t,e){if(!bH(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=JD(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function lP(n,t,e){if((t=(0,N.m9)(t))instanceof Vd)return t._internalPath;if("string"==typeof t)return ox(n,t);throw ax("Field path arguments must be of type string or ",n,!1,void 0,e)}const f7=new RegExp("[~\\*/\\[\\]]");function ox(n,t,e){if(t.search(f7)>=0)throw ax(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Vd(...t.split("."))._internalPath}catch{throw ax(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ax(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Ne(ce.INVALID_ARGUMENT,d+n+p)}function CH(n,t){return n.some(e=>e.isEqual(t))}class DC{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new di(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new p7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(lx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class p7 extends DC{data(){return super.data()}}function lx(n,t){return"string"==typeof t?ox(n,t):t instanceof Vd?t._internalPath:t._delegate._internalPath}function TH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cP{}class xC extends cP{}function If(n,t,...e){let i=[];t instanceof cP&&i.push(t),i=i.concat(e),function(r){const s=r.filter(d=>d instanceof rv).length,c=r.filter(d=>d instanceof AC).length;if(s>1||s>0&&c>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class AC extends xC{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new AC(t,e,i)}_apply(t){const e=this._parse(t);return DH(t._query,e),new ls(t.firestore,t.converter,yR(t._query,e))}_parse(t){const e=Xg(t.firestore);return function(r,s,c,d,p,y,b){let E;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){SH(b,y);const M=[];for(const P of b)M.push(IH(d,r,P));E={arrayValue:{values:M}}}else E=IH(d,r,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||SH(b,y),E=vH(c,"where",b,"in"===y||"not-in"===y);return pn.create(p,y,E)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class rv extends cP{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new rv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Fn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let s=i;const c=r.getFlattenedFilters();for(const d of c)DH(s,d),s=yR(s,d)}(t._query,e),new ls(t.firestore,t.converter,yR(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class uP extends xC{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new uP(t,e)}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Fy(r,s);return function(d,p){if(null===mR(d)){const y=xD(d);null!==y&&xH(0,y,p.field)}}(i,c),c}(t._query,this._field,this._direction);return new ls(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Pd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class cx extends xC{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new cx(t,e,i)}_apply(t){return new ls(t.firestore,t.converter,AD(t._query,this._limit,this._limitType))}}class ux extends xC{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new ux(t,e,i)}_apply(t){const e=EH(t,this.type,this._docOrFields,this._inclusive);return new ls(t.firestore,t.converter,(r=e,new Pd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class dx extends xC{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new dx(t,e,i)}_apply(t){const e=EH(t,this.type,this._docOrFields,this._inclusive);return new ls(t.firestore,t.converter,(r=e,new Pd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function EH(n,t,e,i){if(e[0]=(0,N.m9)(e[0]),e[0]instanceof DC)return function(r,s,c,d,p){if(!d)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const b of Gg(r))if(b.field.isKeyField())y.push(Ug(s,d.key));else{const E=d.data.field(b.field);if(cR(E))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const M=b.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(E)}return new yf(y,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Xg(n.firestore);return function(s,c,d,p,y,b){const E=s.explicitOrderBy;if(y.length>E.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let P=0;P<y.length;P++){const F=y[P];if(E[P].field.isKeyField()){if("string"!=typeof F)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!_R(s)&&-1!==F.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const z=s.path.child(vn.fromString(F));if(!rt.isDocumentKey(z))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const K=new rt(z);M.push(Ug(c,K))}else{const z=vH(d,p,F);M.push(z)}}return new yf(M,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function IH(n,t,e){if("string"==typeof(e=(0,N.m9)(e))){if(""===e)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_R(t)&&-1!==e.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(vn.fromString(e));if(!rt.isDocumentKey(i))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ug(n,new rt(i))}if(e instanceof di)return Ug(n,e._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${JD(e)}.`)}function SH(n,t){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function DH(n,t){if(t.isInequality()){const i=xD(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=mR(n);null!==s&&xH(0,r,s)}const e=function(i,r){for(const s of i)for(const c of s.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Ne(ce.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function xH(n,t,e){if(!e.isEqual(t))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class dP{convertValue(t,e="none"){switch(Bg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Vg(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw gt()}}convertObject(t,e){const i={};return Lg(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new ix(Ui(t.latitude),Ui(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=OV(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(J0(t));default:return null}}convertTimestamp(t){const e=gf(t);return new bi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=vn.fromString(t);Et(LB(i));const r=new pf(i.get(1),i.get(3)),s=new rt(i.popFirst(5));return r.isEqual(e)||Xi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function hx(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class T7 extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new di(this.firestore,null,e)}}class tm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Bd extends DC{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new MC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(lx("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class MC extends Bd{data(t={}){return super.data(t)}}class Sf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new tm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new MC(this._firestore,this._userDataWriter,i.key,i,new tm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new MC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new tm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new MC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new tm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:E7(c.type),doc:d,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function E7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function MH(n,t){return n instanceof Bd&&t instanceof Bd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Sf&&t instanceof Sf&&n._firestore===t._firestore&&KO(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Df extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new di(this.firestore,null,e)}}function kH(n,t,e){n=gn(n,di);const i=gn(n.firestore,hi),r=hx(n.converter,t,e);return sv(i,[sx(Xg(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ci.none())])}function RH(n,t,e,...i){n=gn(n,di);const r=gn(n.firestore,hi),s=Xg(r);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof Vd?oP(s,"updateDoc",n._key,t,e,i):sP(s,"updateDoc",n._key,t),sv(r,[c.toMutation(n._key,Ci.exists(!0))])}function OH(n,...t){var e,i,r;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||iP(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(iP(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),t[c+2]=null===(r=E.complete)||void 0===r?void 0:r.bind(E)}let p,y,b;if(n instanceof di)y=gn(n.firestore,hi),b=Vy(n._key.path),p={next:E=>{t[c]&&t[c](hP(y,n,E))},error:t[c+1],complete:t[c+2]};else{const E=gn(n,ls);y=gn(E.firestore,hi),b=E._query;const M=new Df(y);p={next:P=>{t[c]&&t[c](new Sf(y,M,E,P))},error:t[c+1],complete:t[c+2]},TH(n._query)}return function(E,M,P,F){const z=new ex(F),K=new wO(M,z,P);return E.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return gO(yield iv(E),K)})),()=>{z.bc(),E.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return _O(yield iv(E),K)}))}}(tr(y),b,d,p)}function sv(n,t){return function(e,i){const r=new Ir;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function yQ(n,t,e){return IO.apply(this,arguments)}(yield tP(e),i,r)})),r.promise}(tr(n),t)}function hP(n,t,e){const i=e.docs.get(t._key),r=new Df(n);return new Bd(n,r,t._key,i,new tm(e.hasPendingWrites,e.fromCache),t.converter)}const P7={maxAttempts:5};class PH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Xg(t)}set(t,e,i){this._verifyNotCommitted();const r=xf(t,this._firestore),s=hx(r.converter,e,i),c=sx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Ci.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=xf(t,this._firestore);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof Vd?oP(this._dataReader,"WriteBatch.update",s._key,e,i,r):sP(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Ci.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=xf(t,this._firestore);return this._mutations=this._mutations.concat(new Gy(e._key,Ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xf(n,t){if((n=(0,N.m9)(n)).firestore!==t)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class N7 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Xg(t)}get(t){const e=xf(t,this._firestore),i=new T7(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return gt();const s=r[0];if(s.isFoundDocument())return new DC(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new DC(this._firestore,i,e._key,null,e.converter);throw gt()})}set(t,e,i){const r=xf(t,this._firestore),s=hx(r.converter,e,i),c=sx(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=xf(t,this._firestore);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof Vd?oP(this._dataReader,"Transaction.update",s._key,e,i,r):sP(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=xf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=xf(t,this._firestore),i=new Df(this._firestore);return super.get(t).then(r=>new Bd(this._firestore,i,e._key,r._document,new tm(!1,!1),e.converter))}}function fP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function FH(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function LH(){if(!function aY(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Ry=ur.SDK_VERSION,(0,ur._registerComponent)(new io.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new hi(new K5(e.getProvider("auth-internal")),new Q5(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pf(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,ur.registerVersion)(wV,"3.8.3",n),(0,ur.registerVersion)(wV,"3.8.3","esm2017")}();class kC{constructor(t){this._delegate=t}static fromBase64String(t){return LH(),new kC(Qc.fromBase64String(t))}static fromUint8Array(t){return FH(),new kC(Qc.fromUint8Array(t))}toBase64(){return LH(),this._delegate.toBase64()}toUint8Array(){return FH(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pP(n){return function $7(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class j7{enableIndexedDbPersistence(t,e){return function JQ(n,t){gH(n=gn(n,hi));const e=tr(n),i=n._freezeSettings(),r=new qO;return pH(e,r,new YU(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function XQ(n){gH(n=gn(n,hi));const t=tr(n),e=n._freezeSettings(),i=new qO;return pH(t,i,new PQ(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function e7(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(e=(0,pe.Z)(function*(i){if(!kl.C())return Promise.resolve();const r=i+"main";yield kl.delete(r)}),function(i){return e.apply(this,arguments)})(BR(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class VH{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof pf||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Pg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function iH(n,t,e,i={}){var r;const s=(n=gn(n,IC))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Ur.MOCK_USER;else{c=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ur(p)}n._authCredentials=new W5(new bV(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function n7(n){return function GQ(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield cH(n),e=yield eP(n);return t.setNetworkEnabled(!0),function(i){const r=at(i);return r._u.delete(0),TC(r)}(e)}))}(tr(n=gn(n,hi)))}(this._delegate)}disableNetwork(){return function r7(n){return function zQ(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const t=yield cH(n),e=yield eP(n);return t.setNetworkEnabled(!1),(i=(0,pe.Z)(function*(r){const s=at(r);s._u.add(0),yield Yy(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(tr(n=gn(n,hi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,QU("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function t7(n){return function(t){const e=new Ir;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function CQ(n,t){return MO.apply(this,arguments)}(yield tP(t),e)})),e.promise}(tr(n=gn(n,hi)))}(this._delegate)}onSnapshotsInSync(t){return function O7(n,t){return function qQ(n,t){const e=new ex(t);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield iv(n),r=e,at(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return i=yield iv(n),r=e,void at(i).Ru.delete(r);var i,r}))}}(tr(n=gn(n,hi)),iP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new ov(this,rH(this._delegate,t))}catch(e){throw Gs(e,"collection()","Firestore.collection()")}}doc(t){try{return new La(this,XD(this._delegate,t))}catch(e){throw Gs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new zs(this,function NQ(n,t){if(n=gn(n,IC),WO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ls(n,null,(e=t,new Pd(vn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Gs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function F7(n,t,e){n=gn(n,hi);const i=Object.assign(Object.assign({},P7),e);return function(r){if(r.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new Ir;return r.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const p=yield function uH(n){return tx(n).then(t=>t.datastore)}(r);new UQ(r.asyncQueue,p,c,s,d).run()})),d.promise}(tr(n),r=>t(new N7(n,r)),i)}(this._delegate,e=>t(new BH(this,e)))}batch(){return tr(this._delegate),new UH(new PH(this._delegate,t=>sv(this._delegate,t)))}loadBundle(t){return function s7(n,t){const e=tr(n=gn(n,hi)),i=new YQ;return function WQ(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return oH(p,y);if(p instanceof ArrayBuffer)return oH(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new FQ(p,c);var p}(e,CC(t));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function OQ(n,t,e){const i=at(n);var r;(r=(0,pe.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(M,P){const F=at(M),z=er(P.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",K=>F.Ns.getBundleMetadata(K,P.id)).then(K=>!!K&&K.createTime.compareTo(z)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(UU(p));const y=new hQ(p,s.localStore,c.yt);let b=yield c.mc();for(;b;){const M=yield y.Fu(b);M&&d._updateProgress(M),b=yield c.mc()}const E=yield y.complete();return yield Ld(s,E.Lu,void 0),yield function(M,P){const F=at(M);return F.persistence.runTransaction("Save bundle","readwrite",z=>F.Ns.saveBundleMetadata(z,P))}(s.localStore,p),d._completeWith(E.progress),Promise.resolve(E.Bu)}catch(p){return Pg("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var M}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield tP(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function o7(n,t){return function KQ(n,t){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(e,i){const r=at(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield nx(n),t)}))}(tr(n=gn(n,hi)),t).then(e=>e?new ls(n,null,e.query):null)}(this._delegate,t).then(e=>e?new zs(this,e):null)}}class fx extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new kC(new Qc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return La.forKey(e,this.firestore,null)}}class BH{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new fx(t)}get(t){const e=im(t);return this._delegate.get(e).then(i=>new RC(this._firestore,new Bd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=im(t);return i?(fP("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=im(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=im(t);return this._delegate.delete(e),this}}class UH{constructor(t){this._delegate=t}set(t,e,i){const r=im(t);return i?(fP("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=im(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=im(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class nm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new MC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new OC(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=nm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new nm(t,new fx(t),e),r.set(e,s)),s}}nm.INSTANCES=new WeakMap;class La{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new fx(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new La(e,new di(e._delegate,i,new rt(t)))}static forKey(t,e,i){return new La(e,new di(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new ov(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new ov(this.firestore,rH(this._delegate,t))}catch(e){throw Gs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,N.m9)(t))instanceof di&&sH(this._delegate,t)}set(t,e){e=fP("DocumentReference.set",e);try{return e?kH(this._delegate,t,e):kH(this._delegate,t)}catch(i){throw Gs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?RH(this._delegate,t):RH(this._delegate,t,e,...i)}catch(r){throw Gs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function k7(n){return sv(gn(n.firestore,hi),[new Gy(n._key,Ci.none())])}(this._delegate)}onSnapshot(...t){const e=HH(t),i=GH(t,r=>new RC(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return OH(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function S7(n){n=gn(n,di);const t=gn(n.firestore,hi),e=tr(t),i=new Df(t);return function $Q(n,t){const e=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(r,s,c){try{const d=yield function(p,y){const b=at(p);return b.persistence.runTransaction("read document","readonly",E=>b.localDocuments.getDocument(E,y))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Xy(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield nx(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Bd(t,i,n._key,r,new tm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function D7(n){n=gn(n,di);const t=gn(n.firestore,hi);return dH(tr(t),n._key,{source:"server"}).then(e=>hP(t,n,e))}(this._delegate):function I7(n){n=gn(n,di);const t=gn(n.firestore,hi);return dH(tr(t),n._key).then(e=>hP(t,n,e))}(this._delegate),e.then(i=>new RC(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new La(this.firestore,this._delegate.withConverter(t?nm.getInstance(this.firestore,t):null))}}function Gs(n,t,e){return n.message=n.message.replace(t,e),n}function HH(n){for(const t of n)if("object"==typeof t&&!pP(t))return t;return{}}function GH(n,t){var e,i;let r;return r=pP(n[0])?n[0]:pP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class RC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new La(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return MH(this._delegate,t._delegate)}}class OC extends RC{data(t){const e=this._delegate.data(t);return function j5(n,t){n||gt()}(void 0!==e),e}}class zs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new fx(t)}where(t,e,i){try{return new zs(this.firestore,If(this._delegate,function g7(n,t,e){const i=t,r=lx("where",n);return AC._create(r,i,e)}(t,e,i)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new zs(this.firestore,If(this._delegate,function m7(n,t="asc"){const e=t,i=lx("orderBy",n);return uP._create(i,e)}(t,e)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new zs(this.firestore,If(this._delegate,function _7(n){return eH("limit",n),cx._create("limit",n,"F")}(t)))}catch(e){throw Gs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new zs(this.firestore,If(this._delegate,function y7(n){return eH("limitToLast",n),cx._create("limitToLast",n,"L")}(t)))}catch(e){throw Gs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new zs(this.firestore,If(this._delegate,function v7(...n){return ux._create("startAt",n,!0)}(...t)))}catch(e){throw Gs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new zs(this.firestore,If(this._delegate,function w7(...n){return ux._create("startAfter",n,!1)}(...t)))}catch(e){throw Gs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new zs(this.firestore,If(this._delegate,function b7(...n){return dx._create("endBefore",n,!1)}(...t)))}catch(e){throw Gs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new zs(this.firestore,If(this._delegate,function C7(...n){return dx._create("endAt",n,!0)}(...t)))}catch(e){throw Gs(e,"endAt()","Query.endAt()")}}isEqual(t){return KO(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function A7(n){n=gn(n,ls);const t=gn(n.firestore,hi),e=tr(t),i=new Df(t);return function jQ(n,t){const e=new Ir;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(i=(0,pe.Z)(function*(r,s,c){try{const d=yield qD(r,s,!0),p=new zU(s,d.Hi),y=p.Wu(d.documents),b=p.applyChanges(y,!1);c.resolve(b.snapshot)}catch(d){const p=Xy(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield nx(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Sf(t,i,n,r))}(this._delegate):"server"===t?.source?function M7(n){n=gn(n,ls);const t=gn(n.firestore,hi),e=tr(t),i=new Df(t);return hH(e,n._query,{source:"server"}).then(r=>new Sf(t,i,n,r))}(this._delegate):function x7(n){n=gn(n,ls);const t=gn(n.firestore,hi),e=tr(t),i=new Df(t);return TH(n._query),hH(e,n._query).then(r=>new Sf(t,i,n,r))}(this._delegate),e.then(i=>new gP(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=HH(t),i=GH(t,r=>new gP(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return OH(this._delegate,e,i)}withConverter(t){return new zs(this.firestore,this._delegate.withConverter(t?nm.getInstance(this.firestore,t):null))}}class W7{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new OC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new OC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new W7(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new OC(this._firestore,i))})}isEqual(t){return MH(this._delegate,t._delegate)}}class ov extends zs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new La(this.firestore,t):null}doc(t){try{return new La(this.firestore,void 0===t?XD(this._delegate):XD(this._delegate,t))}catch(e){throw Gs(e,"doc()","CollectionReference.doc()")}}add(t){return function R7(n,t){const e=gn(n.firestore,hi),i=XD(n),r=hx(n.converter,t);return sv(e,[sx(Xg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ci.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new La(this.firestore,e))}isEqual(t){return sH(this._delegate,t._delegate)}withConverter(t){return new ov(this.firestore,this._delegate.withConverter(t?nm.getInstance(this.firestore,t):null))}}function im(n){return gn(n,di)}class mP{constructor(...t){this._delegate=new Vd(...t)}static documentId(){return new mP(Bi.keyField().canonicalString())}isEqual(t){return(t=(0,N.m9)(t))instanceof Vd&&this._delegate._internalPath.isEqual(t._internalPath)}}class rm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function V7(){return new rP("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new rm(t)}static delete(){const t=function L7(){return new SC("deleteField")}();return t._methodName="FieldValue.delete",new rm(t)}static arrayUnion(...t){const e=function B7(...n){return new u7("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new rm(e)}static arrayRemove(...t){const e=function U7(...n){return new d7("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new rm(e)}static increment(t){const e=function H7(n){return new h7("increment",n)}(t);return e._methodName="FieldValue.increment",new rm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const K7={Firestore:VH,GeoPoint:ix,Timestamp:bi,Blob:kC,Transaction:BH,WriteBatch:UH,DocumentReference:La,DocumentSnapshot:RC,Query:zs,QueryDocumentSnapshot:OC,QuerySnapshot:gP,CollectionReference:ov,FieldPath:mP,FieldValue:rm,setLogLevel:function q7(n){!function $5(n){df.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function zH(n,t){return function Q7(n,t=Xn.z){return new Ki.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function _P(n,t){return zH(n,t).pipe((0,Ee.U)(e=>({payload:e,type:"query"})))}function px(n,t){return _P(n,t).pipe(dS(void 0),mk(),(0,Ee.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(b=>b.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function $H(n,t,e){return px(n,e).pipe(fc((i,r)=>function X7(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function e9(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return yP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return yP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return yP(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),_m(),(0,Ee.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function yP(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function jH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Y7(n){(function Z7(n,t){n.INTERNAL.registerComponent(new io.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},K7)))})(n,(t,e)=>new VH(t,e,new j7)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(ym.Z);class qH{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=px(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ee.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(dS(void 0),mk(),Go(([i,r])=>r.length>0||!i),(0,Ee.U)(([i,r])=>r),yn.iC)}auditTrail(t){return this.stateChanges(t).pipe(fc((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=jH(t);return $H(this.query,e,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(t={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),yn.iC)}get(t){return(0,an.D)(this.query.get(t)).pipe(yn.iC)}add(t){return this.ref.add(t)}doc(t){return new WH(this.ref.doc(t),this.afs)}}class WH{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=YH(i,e);return new qH(r,s,this.afs)}snapshotChanges(){return function J7(n,t){return zH(n,t).pipe(dS(void 0),mk(),(0,Ee.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ee.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,an.D)(this.ref.get(t)).pipe(yn.iC)}}class t9{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?px(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Go(e=>e.length>0),yn.iC):px(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(t){return this.stateChanges(t).pipe(fc((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=jH(t);return $H(this.query,e,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(t={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),yn.iC)}get(t){return(0,an.D)(this.query.get(t)).pipe(yn.iC)}}const KH=new o.OlP("angularfire2.enableFirestorePersistence"),ZH=new o.OlP("angularfire2.firestore.persistenceSettings"),n9=new o.OlP("angularfire2.firestore.settings"),r9=new o.OlP("angularfire2.firestore.use-emulator");function YH(n,t=(e=>e)){return{query:t(n),ref:n}}let s9=(()=>{class n{constructor(e,i,r,s,c,d,p,y,b,E,M,P,F,z,K,De,Be){this.schedulers=p;const Le=(0,Pi.on)(e,d,i),Ue=b;E&&ib(Le,d,M,F,z,K,P,De),[this.firestore,this.persistenceEnabled$]=(0,Pi.cc)(`${Le.name}.firestore`,"AngularFirestore",Le.name,()=>{const dt=d.runOutsideAngular(()=>Le.firestore());if(s&&dt.settings(s),Ue&&dt.useEmulator(...Ue),r&&!Pl(c)){const ft=()=>{try{return(0,an.D)(dt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(en){return typeof console<"u"&&console.warn(en),ct(!1)}};return[dt,d.runOutsideAngular(ft)]}return[dt,ct(!1)]},[s,Ue,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=YH(r,i),d=this.schedulers.ngZone.run(()=>s);return new qH(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new t9(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new WH(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi.Dh),o.LFG(Pi.xv,8),o.LFG(KH,8),o.LFG(n9,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(yn.HU),o.LFG(ZH,8),o.LFG(r9,8),o.LFG(ng,8),o.LFG(Vc,8),o.LFG(U_,8),o.LFG(nb,8),o.LFG(QE,8),o.LFG(H_,8),o.LFG(tg,8),o.LFG(eg,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),o9=(()=>{class n{constructor(){tb.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:KH,useValue:!0},{provide:ZH,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[s9]}),n})();const QH="firebasestorage.googleapis.com",JH="storageBucket";class xi extends N.ZR{constructor(t,e,i=0){super(vP(t),`Firebase Storage: ${e} (${vP(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return vP(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ni=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ni||(ni={})),ni))();function vP(n){return"storage/"+n}function wP(){return new xi(ni.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function XH(){return new xi(ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e3(){return new xi(ni.CANCELED,"User canceled the upload/download.")}function t3(){return new xi(ni.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function av(n){return new xi(ni.INVALID_ARGUMENT,n)}function n3(){return new xi(ni.APP_DELETED,"The Firebase app was deleted.")}function r3(n){return new xi(ni.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function PC(n,t){return new xi(ni.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function NC(n){throw new xi(ni.INTERNAL_ERROR,"Internal error: "+n)}class Cs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Cs.makeFromUrl(t,e)}catch{return new Cs(t,"")}if(""===i.path)return i;throw function _9(n){return new xi(ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Ue){Ue.path_=decodeURIComponent(Ue.path)}const E=e.replace(/[.]/g,"\\."),Le=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ue){"/"===Ue.path.charAt(Ue.path.length-1)&&(Ue.path_=Ue.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===QH?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ue=0;Ue<Le.length;Ue++){const dt=Le[Ue],ft=dt.regex.exec(t);if(ft){let Dn=ft[dt.indices.path];Dn||(Dn=""),i=new Cs(ft[dt.indices.bucket],Dn),dt.postModify(i);break}}if(null==i)throw function m9(n){return new xi(ni.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return i}}class C9{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function gx(n){return"string"==typeof n||n instanceof String}function s3(n){return bP()&&n instanceof Blob}function bP(){return typeof Blob<"u"&&!(0,N.UG)()}function CP(n,t,e,i){if(i<t)throw av(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw av(`Invalid value for '${n}'. Expected ${e} or less.`)}function Ud(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function o3(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Af=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Af||(Af={})),Af))();function a3(n,t){const e=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==t.indexOf(n);return e||r||s}class x9{constructor(t,e,i,r,s,c,d,p,y,b,E,M=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=E,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,F)=>{this.resolve_=P,this.reject_=F,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function I9(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=wP();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?n3():e3():XH())};this.canceled_?e(0,new mx(!1,null,!0)):this.backoffId_=function T9(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let y=!1;function b(...K){y||(y=!0,t.apply(null,K))}function E(K){r=setTimeout(()=>{r=null,n(P,p())},K)}function M(){s&&clearTimeout(s)}function P(K,...De){if(y)return void M();if(K)return M(),void b.call(null,K,...De);if(p()||c)return M(),void b.call(null,K,...De);let Le;i<64&&(i*=2),1===d?(d=2,Le=0):Le=1e3*(i+Math.random()),E(Le)}let F=!1;function z(K){F||(F=!0,M(),!y&&(null!==r?(K||(d=2),clearTimeout(r),E(0)):K||(d=1)))}return E(0),s=setTimeout(()=>{c=!0,z(!0)},e),z}((i,r)=>{if(r)return void i(!1,new mx(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Af.NO_ERROR,p=s.getStatus();if(!d||a3(p,this.additionalRetryCodes_)&&this.retry){const b=s.getErrorCode()===Af.ABORT;return void i(!1,new mx(!1,null,b))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new mx(y,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function E9(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mx{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function N9(...n){const t=function P9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(bP())return new Blob(n);throw new xi(ni.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TP{constructor(t,e){this.data=t,this.contentType=e||null}}function EP(n,t){switch(n){case Yo.RAW:return new TP(l3(t));case Yo.BASE64:case Yo.BASE64URL:return new TP(c3(n,t));case Yo.DATA_URL:return new TP(function B9(n){const t=new u3(n);return t.base64?c3(Yo.BASE64,t.rest):function V9(n){let t;try{t=decodeURIComponent(n)}catch{throw PC(Yo.DATA_URL,"Malformed data URL.")}return l3(t)}(t.rest)}(t),function U9(n){return new u3(n).contentType}(t))}throw wP()}function l3(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function c3(n,t){switch(n){case Yo.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw PC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Yo.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw PC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function L9(n){if(typeof atob>"u")throw function b9(n){return new xi(ni.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(t)}catch(r){throw r.message.includes("polyfill")?r:PC(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class u3{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw PC(Yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function H9(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Jc{constructor(t,e){let i=0,r="";s3(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(s3(this.data_)){const r=function F9(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Jc(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Jc(i,!0)}}static getBlob(...t){if(bP()){const e=t.map(i=>i instanceof Jc?i.data_:i);return new Jc(N9.apply(null,e))}{const e=t.map(c=>gx(c)?EP(Yo.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Jc(r,!0)}}uploadData(){return this.data_}}function IP(n){let t;try{t=JSON.parse(n)}catch{return null}return function D9(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function d3(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function $9(n,t){return t}class $s{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||$9}}let _x=null;function FC(){if(_x)return _x;const n=[];n.push(new $s("bucket")),n.push(new $s("generation")),n.push(new $s("metageneration")),n.push(new $s("name","fullPath",!0));const e=new $s("name");e.xform=function t(s,c){return function j9(n){return!gx(n)||n.length<2?n:d3(n)}(c)},n.push(e);const r=new $s("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new $s("timeCreated")),n.push(new $s("updated")),n.push(new $s("md5Hash",null,!0)),n.push(new $s("cacheControl",null,!0)),n.push(new $s("contentDisposition",null,!0)),n.push(new $s("contentEncoding",null,!0)),n.push(new $s("contentLanguage",null,!0)),n.push(new $s("contentType",null,!0)),n.push(new $s("metadata","customMetadata",!0)),_x=n,_x}function h3(n,t,e){const i=IP(t);return null===i?null:function W9(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function q9(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Cs(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function SP(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const f3="prefixes";class Xc{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function eu(n){if(!n)throw wP()}function yx(n,t){return function e(i,r){const s=h3(n,r,t);return eu(null!==s),s}}function lv(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function p9(){return new xi(ni.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function f9(){return new xi(ni.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function h9(n){return new xi(ni.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function g9(n){return new xi(ni.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}}function LC(n){const t=lv(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function d9(n){return new xi(ni.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function g3(n,t,e){const r=Ud(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Xc(r,"GET",yx(n,e),c);return d.errorHandler=LC(t),d}function X9(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Ud(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new Xc(d,"GET",function Q9(n,t){return function e(i,r){const s=function Y9(n,t,e){const i=IP(e);return null===i?null:function Z9(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[f3])for(const r of e[f3]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Cs(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Cs(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return eu(null!==s),s}}(n,t.bucket),y);return b.urlParams=s,b.errorHandler=lv(t),b}function _3(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function iJ(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class vx{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function DP(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{eu(!1)}return eu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const aJ={STATE_CHANGED:"state_changed"},js={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xP(n){switch(n){case"running":case"pausing":case"canceling":return js.RUNNING;case"paused":return js.PAUSED;case"success":return js.SUCCESS;case"canceled":return js.CANCELED;default:return js.ERROR}}class lJ{constructor(t,e,i){if(function S9(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function cv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class cJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Af.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Af.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Af.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw NC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw NC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw NC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw NC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw NC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class uJ extends cJ{initXhr(){this.xhr_.responseType="text"}}function Rl(){return new uJ}class b3{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=FC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ni.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(a3(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=XH()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ni.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function rJ(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=_3(t,i,r),d={name:c.fullPath},p=Ud(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=SP(c,e),F=new Xc(p,"POST",function P(z){let K;DP(z);try{K=z.getResponseHeader("X-Goog-Upload-URL")}catch{eu(!1)}return eu(gx(K)),K},n.maxUploadRetryTime);return F.urlParams=d,F.headers=b,F.body=E,F.errorHandler=lv(t),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Rl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function sJ(n,t,e,i){const p=new Xc(e,"POST",function s(y){const b=DP(y,["active","final"]);let E=null;try{E=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{eu(!1)}E||eu(!1);const M=Number(E);return eu(!isNaN(M)),new vx(M,i.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=lv(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,Rl,e,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new vx(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function oJ(n,t,e,i,r,s,c,d){const p=new vx(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function v9(){return new xi(ni.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let b=y;r>0&&(b=Math.min(b,r));const E=p.current;let P="";P=0===b?"finalize":y===b?"upload, finalize":"upload";const F={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${p.current}`},z=i.slice(E,E+b);if(null===z)throw t3();const Le=new Xc(e,"POST",function K(Ue,dt){const ft=DP(Ue,["active","final"]),en=p.current+b,Dn=i.size();let fi;return fi="final"===ft?yx(t,s)(Ue,dt):null,new vx(en,Dn,"final"===ft,fi)},t.maxUploadRetryTime);return Le.headers=F,Le.body=z.uploadData(),Le.progressCallback=d||null,Le.errorHandler=lv(n),Le}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,Rl,r,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=g3(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Rl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function y3(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Le="";for(let Ue=0;Ue<2;Ue++)Le+=Math.random().toString().slice(2);return Le}();c["Content-Type"]="multipart/related; boundary="+p;const y=_3(t,i,r),b=SP(y,e),P=Jc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw t3();const F={name:y.fullPath},z=Ud(s,n.host,n._protocol),De=n.maxUploadRetryTime,Be=new Xc(z,"POST",yx(n,e),De);return Be.urlParams=F,Be.headers=c,Be.body=P.uploadData(),Be.errorHandler=lv(t),Be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Rl,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=e3(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=xP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new lJ(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(xP(this._state)){case js.SUCCESS:cv(this._resolve.bind(null,this.snapshot))();break;case js.CANCELED:case js.ERROR:cv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(xP(this._state)){case js.RUNNING:case js.PAUSED:t.next&&cv(t.next.bind(t,this.snapshot))();break;case js.SUCCESS:t.complete&&cv(t.complete.bind(t))();break;default:t.error&&cv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class sm{constructor(t,e){this._service=t,this._location=e instanceof Cs?e:Cs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new sm(t,e)}get root(){const t=new Cs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d3(this._location.path)}get storage(){return this._service}get parent(){const t=function G9(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Cs(this._location.bucket,t);return new sm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw r3(t)}}function T3(n,t,e){return AP.apply(this,arguments)}function AP(){return AP=(0,pe.Z)(function*(n,t,e){const r=yield E3(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield T3(n,t,r.nextPageToken))}),AP.apply(this,arguments)}function E3(n,t){null!=t&&"number"==typeof t.maxResults&&CP("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=X9(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,Rl)}function CJ(n){n._throwIfRoot("getDownloadURL");const t=function eJ(n,t,e){const r=Ud(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Xc(r,"GET",function J9(n,t){return function e(i,r){const s=h3(n,r,t);return eu(null!==s),function K9(n,t,e,i){const r=IP(t);if(null===r||!gx(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const E=n.fullPath;return Ud("/b/"+c(n.bucket)+"/o/"+c(E),e,i)+o3({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=LC(t),d}(n.storage,n._location,FC());return n.storage.makeRequestWithTokens(t,Rl).then(e=>{if(null===e)throw function w9(){return new xi(ni.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return e})}function I3(n,t){const e=function z9(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Cs(n._location.bucket,e);return new sm(n.storage,i)}function S3(n,t){if(n instanceof MP){const e=n;if(null==e._bucket)throw function y9(){return new xi(ni.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JH+"' property when initializing the app?")}();const i=new sm(e,e._bucket);return null!=t?S3(i,t):i}return void 0!==t?I3(n,t):n}function SJ(n,t){if(t&&function EJ(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof MP)return function IJ(n,t){return new sm(n,t)}(n,t);throw av("To use ref(service, url), the first argument must be a Storage instance.")}return S3(n,t)}function D3(n,t){const e=t?.[JH];return null==e?null:Cs.makeFromBucketSpec(e,n)}class MP{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=QH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Cs.makeFromBucketSpec(r,this._host):D3(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Cs.makeFromBucketSpec(this._url,t):D3(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){CP("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){CP("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,pe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,pe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new sm(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new C9(n3());{const c=function O9(n,t,e,i,r,s,c=!0){const d=o3(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function k9(n,t){t&&(n["X-Firebase-GMPID"]=t)}(y,t),function A9(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(y,e),function M9(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(y,s),function R9(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(y,i),new x9(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(t,e){var i=this;return(0,pe.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const x3="@firebase/storage";function k3(n,t){return SJ(n=(0,N.m9)(n),t)}function FJ(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new MP(e,i,r,t,ur.SDK_VERSION)}!function LJ(){(0,ur._registerComponent)(new io.wA("storage",FJ,"PUBLIC").setMultipleInstances(!0)),(0,ur.registerVersion)(x3,"0.11.1",""),(0,ur.registerVersion)(x3,"0.11.1","esm2017")}();class wx{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class O3{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wx(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new wx(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new wx(c,this,this._ref)):{next:e.next?c=>e.next(new wx(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class P3{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Hd(t,this._service))}get items(){return this._delegate.items.map(t=>new Hd(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hd{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function NJ(n,t){return I3(n,t)}(this._delegate,t);return new Hd(e,this.storage)}get root(){return new Hd(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Hd(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new O3(function xJ(n,t,e){return function _J(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new b3(n,new Jc(t),e)}(n=(0,N.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Yo.RAW,i){this._throwIfRoot("putString");const r=EP(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new O3(new b3(this._delegate,new Jc(r.data,!0),s),this)}listAll(){return function RJ(n){return function vJ(n){const t={prefixes:[],items:[]};return T3(n,t).then(()=>t)}(n=(0,N.m9)(n))}(this._delegate).then(t=>new P3(t,this.storage))}list(t){return function kJ(n,t){return E3(n=(0,N.m9)(n),t)}(this._delegate,t||void 0).then(e=>new P3(e,this.storage))}getMetadata(){return function AJ(n){return function wJ(n){n._throwIfRoot("getMetadata");const t=g3(n.storage,n._location,FC());return n.storage.makeRequestWithTokens(t,Rl)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(t){return function MJ(n,t){return function bJ(n,t){n._throwIfRoot("updateMetadata");const e=function tJ(n,t,e,i){const s=Ud(t.fullServerUrl(),n.host,n._protocol),d=SP(e,i),y=n.maxOperationRetryTime,b=new Xc(s,"PATCH",yx(n,i),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=LC(t),b}(n.storage,n._location,t,FC());return n.storage.makeRequestWithTokens(e,Rl)}(n=(0,N.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function OJ(n){return CJ(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PJ(n){return function TJ(n){n._throwIfRoot("deleteObject");const t=function nJ(n,t){const i=Ud(t.fullServerUrl(),n.host,n._protocol),d=new Xc(i,"DELETE",function c(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=LC(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Rl)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw r3(t)}}class N3{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(F3(t))throw av("ref() expected a child path but got a URL, use refFromURL instead.");return new Hd(k3(this._delegate,t),this)}refFromURL(t){if(!F3(t))throw av("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cs.makeFromUrl(t,this._delegate.host)}catch{throw av("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hd(k3(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function R3(n,t,e,i={}){!function DJ(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,N.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function F3(n){return/^[A-Za-z]+:\/\//.test(n)}function HJ(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new N3(e,i)}function L3(n){const t=function zJ(n){return new Ki.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function a9(n,t=Xn.z){return(0,Oi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=c+n,b=t.now();if(b<y)return r=this.schedule(void 0,y-b),void i.add(r);d()}e.subscribe((0,ai.x)(i,y=>{s=y,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Ee.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function bx(n){return{getDownloadURL:()=>ct(void 0).pipe(yn.fc,ei(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>ct(void 0).pipe(yn.fc,ei(()=>n.getMetadata()),yn.iC),delete:()=>(0,an.D)(n.delete()),child:t=>bx(n.child(t)),updateMetadata:t=>(0,an.D)(n.updateMetadata(t)),put:(t,e)=>L3(n.put(t,e)),putString:(t,e,i)=>L3(n.putString(t,e,i)),list:t=>(0,an.D)(n.list(t)),listAll:()=>(0,an.D)(n.listAll())}}!function GJ(n){const t={TaskState:js,TaskEvent:aJ,StringFormat:Yo,Storage:N3,Reference:Hd};n.INTERNAL.registerComponent(new io.wA("storage-compat",HJ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.1")}(ym.Z);const $J=new o.OlP("angularfire2.storageBucket"),jJ=new o.OlP("angularfire2.storage.maxUploadRetryTime"),qJ=new o.OlP("angularfire2.storage.maxOperationRetryTime"),WJ=new o.OlP("angularfire2.storage.use-emulator");let KJ=(()=>{class n{constructor(e,i,r,s,c,d,p,y,b,E){const M=(0,Pi.on)(e,c,i);this.storage=(0,Pi.cc)(`${M.name}.storage.${r}`,"AngularFireStorage",M.name,()=>{const P=c.runOutsideAngular(()=>M.storage(r||void 0)),F=b;return F&&P.useEmulator(...F),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(e){return bx(this.storage.ref(e))}refFromURL(e){return bx(this.storage.refFromURL(e))}upload(e,i,r){return bx(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi.Dh),o.LFG(Pi.xv,8),o.LFG($J,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(yn.HU),o.LFG(jJ,8),o.LFG(qJ,8),o.LFG(WJ,8),o.LFG(eg,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),YJ=(()=>{class n{constructor(){tb.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[KJ],imports:[ZJ]}),n})(),yX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,b0,xl,oS,we,b0,oS,we]}),n})(),IX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,we]}),n})(),MX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,we]}),n})(),PX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En]}),n})();function NX(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.label)}}function FX(n,t){1&n&&o.GkF(0)}const VC=function(n){return{height:n}},LX=function(n,t){return{"p-highlight":n,"p-disabled":t}},VX=function(n){return{"p-highlight":n}},U3=function(n){return{"pi pi-check":n}},BC=function(n){return{$implicit:n}},BX=["container"],UX=["overlay"],HX=["filterInput"],GX=["in"],zX=["items"],$X=["scroller"];function jX(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.valuesAsString||"empty")}}function qX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",20),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw().$implicit,c=o.oxw(3);return o.KtG(c.removeChip(s,r))}),o.qZA()}}function WX(n,t){if(1&n&&(o.TgZ(0,"div",16,17)(2,"span",18),o._uU(3),o.qZA(),o.YNc(4,qX,1,0,"span",19),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(3);o.xp6(3),o.Oqu(i.findLabelByValue(e)),o.xp6(1),o.Q6J("ngIf",!i.disabled)}}function KX(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.Oqu(e.placeholder||e.defaultLabel||"empty")}}function ZX(n,t){if(1&n&&(o.ynx(0),o.YNc(1,WX,5,2,"div",15),o.YNc(2,KX,2,1,"ng-container",7),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.value),o.xp6(1),o.Q6J("ngIf",!e.value||0===e.value.length)}}function YX(n,t){if(1&n&&(o.ynx(0),o.YNc(1,jX,2,1,"ng-container",7),o.YNc(2,ZX,3,2,"ng-container",7),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf","comma"===e.display),o.xp6(1),o.Q6J("ngIf","chip"===e.display)}}function QX(n,t){1&n&&o.GkF(0)}function JX(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",21),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.clear(r))}),o.qZA()}}function XX(n,t){1&n&&o.GkF(0)}function eee(n,t){1&n&&o.GkF(0)}const H3=function(n){return{options:n}};function tee(n,t){if(1&n&&(o.ynx(0),o.YNc(1,eee,1,0,"ng-container",8),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",o.VKq(2,H3,e.filterOptions))}}const nee=function(n){return{"p-checkbox-disabled":n}},iee=function(n,t,e){return{"p-highlight":n,"p-focus":t,"p-disabled":e}};function ree(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",36)(1,"div",2)(2,"input",37),o.NdJ("focus",function(){o.CHM(e);const r=o.oxw(4);return o.KtG(r.onHeaderCheckboxFocus())})("blur",function(){o.CHM(e);const r=o.oxw(4);return o.KtG(r.onHeaderCheckboxBlur())})("keydown.space",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.toggleAll(r))}),o.qZA()(),o.TgZ(3,"div",38),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.toggleAll(r))}),o._UZ(4,"span",39),o.qZA()()}if(2&n){const e=o.oxw(4);o.Q6J("ngClass",o.VKq(6,nee,e.disabled||e.toggleAllDisabled)),o.xp6(2),o.Q6J("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),o.xp6(1),o.Q6J("ngClass",o.kEZ(8,iee,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),o.uIk("aria-checked",e.allChecked),o.xp6(1),o.Q6J("ngClass",o.VKq(12,U3,e.allChecked))}}function see(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",40)(1,"input",41,42),o.NdJ("input",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onFilterInputChange(r))}),o.qZA(),o._UZ(3,"span",43),o.qZA()}if(2&n){const e=o.oxw(4);o.xp6(1),o.Q6J("value",e.filterValue||"")("disabled",e.disabled),o.uIk("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function oee(n,t){if(1&n){const e=o.EpF();o.YNc(0,ree,5,14,"div",32),o.YNc(1,see,4,5,"div",33),o.TgZ(2,"button",34),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(3);return o.KtG(s.close(r))}),o._UZ(3,"span",35),o.qZA()}if(2&n){const e=o.oxw(3);o.Q6J("ngIf",e.showToggleAll&&!e.selectionLimit),o.xp6(1),o.Q6J("ngIf",e.filter)}}function aee(n,t){if(1&n&&(o.TgZ(0,"div",28),o.Hsn(1),o.YNc(2,XX,1,0,"ng-container",29),o.YNc(3,tee,2,4,"ng-container",30),o.YNc(4,oee,4,2,"ng-template",null,31,o.W1O),o.qZA()),2&n){const e=o.MAs(5),i=o.oxw(2);o.xp6(2),o.Q6J("ngTemplateOutlet",i.headerTemplate),o.xp6(1),o.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function lee(n,t){1&n&&o.GkF(0)}const G3=function(n,t){return{$implicit:n,options:t}};function cee(n,t){if(1&n&&o.YNc(0,lee,1,0,"ng-container",8),2&n){const e=t.$implicit,i=t.options;o.oxw(2);const r=o.MAs(6);o.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",o.WLB(2,G3,e,i))}}function uee(n,t){1&n&&o.GkF(0)}function dee(n,t){if(1&n&&o.YNc(0,uee,1,0,"ng-container",8),2&n){const e=t.options,i=o.oxw(4);o.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",o.VKq(2,H3,e))}}function hee(n,t){1&n&&(o.ynx(0),o.YNc(1,dee,1,4,"ng-template",46),o.BQk())}function fee(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-scroller",44,45),o.NdJ("onLazyLoad",function(r){o.CHM(e);const s=o.oxw(2);return o.KtG(s.onLazyLoad.emit(r))}),o.YNc(2,cee,1,5,"ng-template",14),o.YNc(3,hee,2,0,"ng-container",7),o.qZA()}if(2&n){const e=o.oxw(2);o.Akn(o.VKq(9,VC,e.scrollHeight)),o.Q6J("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),o.xp6(3),o.Q6J("ngIf",e.loaderTemplate)}}function pee(n,t){1&n&&o.GkF(0)}const gee=function(){return{}};function mee(n,t){if(1&n&&(o.ynx(0),o.YNc(1,pee,1,0,"ng-container",8),o.BQk()),2&n){o.oxw();const e=o.MAs(6),i=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",o.WLB(3,G3,i.optionsToRender,o.DdM(2,gee)))}}function _ee(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(4);o.xp6(1),o.Oqu(i.getOptionGroupLabel(e)||"empty")}}function yee(n,t){1&n&&o.GkF(0)}function vee(n,t){1&n&&o.GkF(0)}function wee(n,t){if(1&n&&(o.TgZ(0,"li",52),o.YNc(1,_ee,2,1,"span",7),o.YNc(2,yee,1,0,"ng-container",8),o.qZA(),o.YNc(3,vee,1,0,"ng-container",8)),2&n){const e=t.$implicit,i=o.oxw(2).options,r=o.MAs(5),s=o.oxw(2);o.Q6J("ngStyle",o.VKq(6,VC,i.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!s.groupTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",o.VKq(8,BC,e)),o.xp6(1),o.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",o.VKq(10,BC,s.getOptionGroupChildren(e)))}}function bee(n,t){if(1&n&&(o.ynx(0),o.YNc(1,wee,4,12,"ng-template",51),o.BQk()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e)}}function Cee(n,t){1&n&&o.GkF(0)}function Tee(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Cee,1,0,"ng-container",8),o.BQk()),2&n){const e=o.oxw().$implicit,i=o.MAs(5);o.xp6(1),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.VKq(2,BC,e))}}function Eee(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-multiSelectItem",53),o.NdJ("onClick",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onOptionClick(r))})("onKeydown",function(r){o.CHM(e);const s=o.oxw(4);return o.KtG(s.onOptionKeydown(r))}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(2).options,r=o.oxw(2);o.Q6J("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",i.itemSize)}}function Iee(n,t){1&n&&o.YNc(0,Eee,1,6,"ng-template",51),2&n&&o.Q6J("ngForOf",t.$implicit)}function See(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(4);o.xp6(1),o.hij(" ",e.emptyFilterMessageLabel," ")}}function Dee(n,t){1&n&&o.GkF(0,null,55)}function xee(n,t){if(1&n&&(o.TgZ(0,"li",54),o.YNc(1,See,2,1,"ng-container",30),o.YNc(2,Dee,2,0,"ng-container",29),o.qZA()),2&n){const e=o.oxw().options,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(4,VC,e.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function Aee(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(4);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function Mee(n,t){1&n&&o.GkF(0,null,56)}function kee(n,t){if(1&n&&(o.TgZ(0,"li",54),o.YNc(1,Aee,2,1,"ng-container",30),o.YNc(2,Mee,2,0,"ng-container",29),o.qZA()),2&n){const e=o.oxw().options,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(4,VC,e.itemSize+"px")),o.xp6(1),o.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),o.xp6(1),o.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function Ree(n,t){if(1&n&&(o.TgZ(0,"ul",47,48),o.YNc(2,bee,2,1,"ng-container",7),o.YNc(3,Tee,2,4,"ng-container",7),o.YNc(4,Iee,1,1,"ng-template",null,49,o.W1O),o.YNc(6,xee,3,6,"li",50),o.YNc(7,kee,3,6,"li",50),o.qZA()),2&n){const e=t.options,i=o.oxw(2);o.Akn(e.contentStyle),o.Q6J("ngClass",e.contentStyleClass),o.xp6(2),o.Q6J("ngIf",i.group),o.xp6(1),o.Q6J("ngIf",!i.group),o.xp6(3),o.Q6J("ngIf",i.hasFilter()&&i.isEmpty()),o.xp6(1),o.Q6J("ngIf",!i.hasFilter()&&i.isEmpty())}}function Oee(n,t){1&n&&o.GkF(0)}function Pee(n,t){if(1&n&&(o.TgZ(0,"div",57),o.Hsn(1,1),o.YNc(2,Oee,1,0,"ng-container",29),o.qZA()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const Nee=function(){return["p-multiselect-panel p-component"]};function Fee(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",22),o.NdJ("keydown",function(r){o.CHM(e);const s=o.oxw();return o.KtG(s.onKeydown(r))}),o.YNc(1,aee,6,3,"div",23),o.TgZ(2,"div",24),o.YNc(3,fee,4,11,"p-scroller",25),o.YNc(4,mee,2,6,"ng-container",7),o.YNc(5,Ree,8,7,"ng-template",null,26,o.W1O),o.qZA(),o.YNc(7,Pee,3,1,"div",27),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngClass",o.DdM(10,Nee))("ngStyle",e.panelStyle),o.xp6(1),o.Q6J("ngIf",e.showHeader),o.xp6(1),o.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),o.xp6(1),o.Q6J("ngIf",e.virtualScroll),o.xp6(1),o.Q6J("ngIf",!e.virtualScroll),o.xp6(3),o.Q6J("ngIf",e.footerFacet||e.footerTemplate)}}const Lee=[[["p-header"]],[["p-footer"]]],Vee=function(n,t,e,i){return{"p-multiselect p-component":!0,"p-multiselect-open":n,"p-multiselect-chip":t,"p-focus":e,"p-disabled":i}},Bee=function(n,t){return{"p-placeholder":n,"p-multiselect-label-empty":t}},Uee=function(){return{"p-multiselect-trigger":!0}},Hee=["p-header","p-footer"],Gee={provide:Li,useExisting:(0,o.Gpc)(()=>$ee),multi:!0};let zee=(()=>{class n{constructor(){this.onClick=new o.vpe,this.onKeydown=new o.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option,selected:this.selected})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"li",0),o.NdJ("click",function(s){return i.onOptionClick(s)})("keydown",function(s){return i.onOptionKeydown(s)}),o.TgZ(1,"div",1)(2,"div",2),o._UZ(3,"span",3),o.qZA()(),o.YNc(4,NX,2,1,"span",4),o.YNc(5,FX,1,0,"ng-container",5),o.qZA()),2&e&&(o.Q6J("ngStyle",o.VKq(9,VC,i.itemSize+"px"))("ngClass",o.WLB(11,LX,i.selected,i.disabled)),o.uIk("aria-label",i.label)("tabindex",i.disabled?null:"0"),o.xp6(2),o.Q6J("ngClass",o.VKq(14,VX,i.selected)),o.xp6(1),o.Q6J("ngClass",o.VKq(16,U3,i.selected)),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(18,BC,i.option)))},dependencies:[vt,An,$n,zn,Bc],encapsulation:2}),n})(),$ee=(()=>{class n{constructor(e,i,r,s,c,d,p){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=c,this.config=d,this.overlayService=p,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.scrollHeight="200px",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new o.vpe,this.onFilter=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClick=new o.vpe,this.onClear=new o.vpe,this.onPanelShow=new o.vpe,this.onPanelHide=new o.vpe,this.onLazyLoad=new o.vpe,this.onRemove=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?ze.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ze.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?ze.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ze.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?ze.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let i=e.option;if(this.isOptionDisabled(i))return;let r=this.getOptionValue(i),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((c,d)=>d!=s),this.onRemove.emit({newValue:this.value,removed:r}),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let i=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(ze.equals(this.value[r],e,this.dataKey)){i=r;break}return i}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let i of e)if(!this.isOptionDisabled(i))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let i=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(c=>{let d=this.isOptionDisabled(c);(!d||d&&this.isSelected(c))&&i.push(this.getOptionValue(c))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&i.push(this.getOptionValue(r))}}),this.value=i}uncheckAll(){let i=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&i.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&i.push(this.getOptionValue(r))}),this.value=i}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onModelTouched()}}hide(){this.overlayVisible=!1,this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,i){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.overlayViewChild?.el?.nativeElement?.contains(e.target)&&!X.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():this.show(),i.focus()))}removeChip(e,i){this.value=this.value.filter(r=>!ze.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:i,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var i=this.findNextItem(e.originalEvent.target.parentElement);i&&i.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 27:case 9:this.hide()}}findNextItem(e){let i=e.nextElementSibling;return i?X.hasClass(i.children[0],"p-disabled")||X.isHidden(i.children[0])||X.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(e){let i=e.previousElementSibling;return i?X.hasClass(i.children[0],"p-disabled")||X.isHidden(i.children[0])||X.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let i=0;i<this.value.length;i++){let r=this.findLabelByValue(this.value[i]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let i=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(i=this.searchLabelByValue(e,s),i))break}return i}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,i){let r=null;for(let s=0;s<i.length;s++){let c=i[s],d=this.getOptionValue(c);if(null==e&&null==d||ze.equals(e,d,this.dataKey)){r=this.getOptionLabel(c);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let i=0,r=0,s=0,c=this.group?0:this.optionsToRender.length;for(let d of e)if(this.group)for(let p of this.getOptionGroupChildren(d)){let y=this.isOptionDisabled(p),b=this.isSelected(p);if(y)b?i++:r++;else{if(!b)return!1;s++}c++}else{let p=this.isOptionDisabled(d),y=this.isSelected(d);if(p)y?i++:r++;else{if(!y)return!1;s++}}return c===i||c===s||s&&c===s+r+i}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(et.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(et.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=i}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(al),o.Y36(k),o.Y36(S))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-multiSelect"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,J,5),o.Suo(r,U,5),o.Suo(r,ee,4)),2&e){let s;o.iGM(s=o.CRH())&&(i.footerFacet=s.first),o.iGM(s=o.CRH())&&(i.headerFacet=s.first),o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(BX,5),o.Gf(UX,5),o.Gf(HX,5),o.Gf(GX,5),o.Gf(zX,5),o.Gf($X,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.overlayViewChild=r.first),o.iGM(r=o.CRH())&&(i.filterInputChild=r.first),o.iGM(r=o.CRH())&&(i.accessibleViewChild=r.first),o.iGM(r=o.CRH())&&(i.itemsViewChild=r.first),o.iGM(r=o.CRH())&&(i.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus||i.overlayVisible)("p-multiselect-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove"},features:[o._Bn([Gee])],ngContentSelectors:Hee,decls:15,vars:41,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,i){if(1&e){const r=o.EpF();o.F$t(Lee),o.TgZ(0,"div",0,1),o.NdJ("click",function(c){o.CHM(r);const d=o.MAs(4);return o.KtG(i.onMouseclick(c,d))}),o.TgZ(2,"div",2)(3,"input",3,4),o.NdJ("focus",function(c){return i.onInputFocus(c)})("blur",function(c){return i.onInputBlur(c)})("keydown",function(c){return i.onKeydown(c)}),o.qZA()(),o.TgZ(5,"div",5)(6,"div",6),o.YNc(7,YX,3,2,"ng-container",7),o.YNc(8,QX,1,0,"ng-container",8),o.qZA(),o.YNc(9,JX,1,0,"i",9),o.qZA(),o.TgZ(10,"div",10),o._UZ(11,"span",11),o.qZA(),o.TgZ(12,"p-overlay",12,13),o.NdJ("visibleChange",function(c){return i.overlayVisible=c})("onAnimationStart",function(c){return i.onOverlayAnimationStart(c)})("onHide",function(){return i.hide()}),o.YNc(14,Fee,8,11,"ng-template",14),o.qZA()()}2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(30,Vee,i.overlayVisible,"chip"===i.display,i.focus,i.disabled))("ngStyle",i.style),o.xp6(3),o.Q6J("disabled",i.disabled),o.uIk("label",i.label)("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("aria-expanded",i.overlayVisible)("aria-labelledby",i.ariaLabelledBy),o.xp6(2),o.Q6J("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),o.xp6(1),o.Q6J("ngClass",o.WLB(35,Bee,i.valuesAsString===(i.defaultLabel||i.placeholder),!(null!=i.valuesAsString&&0!==i.valuesAsString.length||null!=i.placeholder&&0!==i.placeholder.length))),o.xp6(1),o.Q6J("ngIf",!i.selectedItemsTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",o.VKq(38,BC,i.value)),o.xp6(1),o.Q6J("ngIf",null!=i.value&&i.filled&&!i.disabled&&i.showClear),o.xp6(1),o.Q6J("ngClass",o.DdM(40,Uee)),o.xp6(1),o.Q6J("ngClass",i.dropdownIcon),o.xp6(1),o.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[vt,si,An,$n,zn,lM,ee,YN,Bc,uM,zee],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-chip .p-multiselect-label{display:flex}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),jee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[En,sS,we,oS,xl,py,sS,we,py]}),n})();class uv{}uv.\u0275fac=function(t){return new(t||uv)},uv.\u0275mod=o.oAB({type:uv}),uv.\u0275inj=o.cJS({imports:[En,xd,b0]});class dv{}dv.\u0275fac=function(t){return new(t||dv)},dv.\u0275mod=o.oAB({type:dv,bootstrap:[n0]}),dv.\u0275inj=o.cJS({imports:[Sy,ku,UZ,xl,xd,Kb,Pi.hO.initializeApp({apiKey:"AIzaSyDxhiAr9Zc_6wydzJzeeQeKlvDPCquxge4",authDomain:"cjoshi-logistics.firebaseapp.com",databaseURL:"https://cjoshi-logistics-default-rtdb.firebaseio.com",projectId:"cjoshi-logistics",storageBucket:"cjoshi-logistics.appspot.com",messagingSenderId:"594260998551",appId:"1:594260998551:web:40a48d12965b82684becd2"}),lI,o9,YJ,Xh,MX,yX,wg,Xh,IX,WN,R6,aS,lS,PX,jee,nF,uv,n4]}),Qr().bootstrapModule(dv).catch(n=>console.error(n))},9751:(wt,xe,V)=>{V.d(xe,{y:()=>de});var o=V(930),te=V(727),L=V(8822),oe=V(9635),se=V(2416),re=V(576),me=V(2806);let de=(()=>{class Q{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Xe=new Q;return Xe.source=this,Xe.operator=Me,Xe}subscribe(Me,Xe,mt){const ge=function q(Q){return Q&&Q instanceof o.Lv||function j(Q){return Q&&(0,re.m)(Q.next)&&(0,re.m)(Q.error)&&(0,re.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Me)?Me:new o.Hp(Me,Xe,mt);return(0,me.x)(()=>{const{operator:Re,source:ke}=this;ge.add(Re?Re.call(ge,ke):ke?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Xe){Me.error(Xe)}}forEach(Me,Xe){return new(Xe=ue(Xe))((mt,ge)=>{const Re=new o.Hp({next:ke=>{try{Me(ke)}catch(je){ge(je),Re.unsubscribe()}},error:ge,complete:mt});this.subscribe(Re)})}_subscribe(Me){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Me)}[L.L](){return this}pipe(...Me){return(0,oe.U)(Me)(this)}toPromise(Me){return new(Me=ue(Me))((Xe,mt)=>{let ge;this.subscribe(Re=>ge=Re,Re=>mt(Re),()=>Xe(ge))})}}return Q.create=Ye=>new Q(Ye),Q})();function ue(Q){var Ye;return null!==(Ye=Q??se.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(wt,xe,V)=>{V.d(xe,{x:()=>me});var o=V(9751),te=V(727);const oe=(0,V(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=V(8737),re=V(2806);let me=(()=>{class ue extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const Q=new de(this,this);return Q.operator=q,Q}_throwIfClosed(){if(this.closed)throw new oe}next(q){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(q)}})}error(q){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:Q}=this;for(;Q.length;)Q.shift().error(q)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:Q,isStopped:Ye,observers:Me}=this;return Q||Ye?te.Lc:(this.currentObservers=null,Me.push(q),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Me,q)}))}_checkFinalizedStatuses(q){const{hasError:Q,thrownError:Ye,isStopped:Me}=this;Q?q.error(Ye):Me&&q.complete()}asObservable(){const q=new o.y;return q.source=this,q}}return ue.create=(j,q)=>new de(j,q),ue})();class de extends me{constructor(j,q){super(),this.destination=j,this.source=q}next(j){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===Q||Q.call(q,j)}error(j){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===Q||Q.call(q,j)}complete(){var j,q;null===(q=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===q||q.call(j)}_subscribe(j){var q,Q;return null!==(Q=null===(q=this.source)||void 0===q?void 0:q.subscribe(j))&&void 0!==Q?Q:te.Lc}}},930:(wt,xe,V)=>{V.d(xe,{Hp:()=>mt,Lv:()=>Q});var o=V(576),te=V(727),L=V(2416),oe=V(7849),se=V(5032);const re=ue("C",void 0,void 0);function ue(Ae,Te,Oe){return{kind:Ae,value:Te,error:Oe}}var j=V(3410),q=V(2806);class Q extends te.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,te.Nn)(Te)&&Te.add(this)):this.destination=je}static create(Te,Oe,Ge){return new mt(Te,Oe,Ge)}next(Te){this.isStopped?ke(function de(Ae){return ue("N",Ae,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?ke(function me(Ae){return ue("E",void 0,Ae)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?ke(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Me(Ae,Te){return Ye.call(Ae,Te)}class Xe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next(Te)}catch(Ge){ge(Ge)}}error(Te){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error(Te)}catch(Ge){ge(Ge)}else ge(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Oe){ge(Oe)}}}class mt extends Q{constructor(Te,Oe,Ge){let He;if(super(),(0,o.m)(Te)||!Te)He={next:Te??void 0,error:Oe??void 0,complete:Ge??void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(Te),G.unsubscribe=()=>this.unsubscribe(),He={next:Te.next&&Me(Te.next,G),error:Te.error&&Me(Te.error,G),complete:Te.complete&&Me(Te.complete,G)}):He=Te}this.destination=new Xe(He)}}function ge(Ae){L.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ae):(0,oe.h)(Ae)}function ke(Ae,Te){const{onStoppedNotification:Oe}=L.v;Oe&&j.z.setTimeout(()=>Oe(Ae,Te))}const je={closed:!0,next:se.Z,error:function Re(Ae){throw Ae},complete:se.Z}},727:(wt,xe,V)=>{V.d(xe,{Lc:()=>re,w0:()=>se,Nn:()=>me});var o=V(576);const L=(0,V(3888).d)(ue=>function(q){ue(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((Q,Ye)=>`${Ye+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var oe=V(8737);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Me of q)Me.remove(this);else q.remove(this);const{initialTeardown:Q}=this;if((0,o.m)(Q))try{Q()}catch(Me){j=Me instanceof L?Me.errors:[Me]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Me of Ye)try{de(Me)}catch(Xe){j=j??[],Xe instanceof L?j=[...j,...Xe.errors]:j.push(Xe)}}if(j)throw new L(j)}}add(j){var q;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(j)}}_hasParent(j){const{_parentage:q}=this;return q===j||Array.isArray(q)&&q.includes(j)}_addParent(j){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(j),q):q?[q,j]:j}_removeParent(j){const{_parentage:q}=this;q===j?this._parentage=null:Array.isArray(q)&&(0,oe.P)(q,j)}remove(j){const{_finalizers:q}=this;q&&(0,oe.P)(q,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const ue=new se;return ue.closed=!0,ue})();const re=se.EMPTY;function me(ue){return ue instanceof se||ue&&"closed"in ue&&(0,o.m)(ue.remove)&&(0,o.m)(ue.add)&&(0,o.m)(ue.unsubscribe)}function de(ue){(0,o.m)(ue)?ue():ue.unsubscribe()}},2416:(wt,xe,V)=>{V.d(xe,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,xe,V)=>{V.d(xe,{E:()=>te});const te=new(V(9751).y)(se=>se.complete())},8996:(wt,xe,V)=>{V.d(xe,{D:()=>Te});var o=V(8421),te=V(5363),L=V(9468),re=V(9751),de=V(2202),ue=V(576),j=V(9672);function Q(Oe,Ge){if(!Oe)throw new Error("Iterable cannot be null");return new re.y(He=>{(0,j.f)(He,Ge,()=>{const G=Oe[Symbol.asyncIterator]();(0,j.f)(He,Ge,()=>{G.next().then(Ce=>{Ce.done?He.complete():He.next(Ce.value)})},0,!0)})})}var Ye=V(3670),Me=V(8239),Xe=V(1144),mt=V(6495),ge=V(2206),Re=V(4532),ke=V(3260);function Te(Oe,Ge){return Ge?function Ae(Oe,Ge){if(null!=Oe){if((0,Ye.c)(Oe))return function oe(Oe,Ge){return(0,o.Xf)(Oe).pipe((0,L.R)(Ge),(0,te.Q)(Ge))}(Oe,Ge);if((0,Xe.z)(Oe))return function me(Oe,Ge){return new re.y(He=>{let G=0;return Ge.schedule(function(){G===Oe.length?He.complete():(He.next(Oe[G++]),He.closed||this.schedule())})})}(Oe,Ge);if((0,Me.t)(Oe))return function se(Oe,Ge){return(0,o.Xf)(Oe).pipe((0,L.R)(Ge),(0,te.Q)(Ge))}(Oe,Ge);if((0,ge.D)(Oe))return Q(Oe,Ge);if((0,mt.T)(Oe))return function q(Oe,Ge){return new re.y(He=>{let G;return(0,j.f)(He,Ge,()=>{G=Oe[de.h](),(0,j.f)(He,Ge,()=>{let Ce,Ke;try{({value:Ce,done:Ke}=G.next())}catch(nt){return void He.error(nt)}Ke?He.complete():He.next(Ce)},0,!0)}),()=>(0,ue.m)(G?.return)&&G.return()})}(Oe,Ge);if((0,ke.L)(Oe))return function je(Oe,Ge){return Q((0,ke.Q)(Oe),Ge)}(Oe,Ge)}throw(0,Re.z)(Oe)}(Oe,Ge):(0,o.Xf)(Oe)}},8421:(wt,xe,V)=>{V.d(xe,{Xf:()=>Ye});var o=V(655),te=V(1144),L=V(8239),oe=V(9751),se=V(3670),re=V(2206),me=V(4532),de=V(6495),ue=V(3260),j=V(576),q=V(7849),Q=V(8822);function Ye(Ae){if(Ae instanceof oe.y)return Ae;if(null!=Ae){if((0,se.c)(Ae))return function Me(Ae){return new oe.y(Te=>{const Oe=Ae[Q.L]();if((0,j.m)(Oe.subscribe))return Oe.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,te.z)(Ae))return function Xe(Ae){return new oe.y(Te=>{for(let Oe=0;Oe<Ae.length&&!Te.closed;Oe++)Te.next(Ae[Oe]);Te.complete()})}(Ae);if((0,L.t)(Ae))return function mt(Ae){return new oe.y(Te=>{Ae.then(Oe=>{Te.closed||(Te.next(Oe),Te.complete())},Oe=>Te.error(Oe)).then(null,q.h)})}(Ae);if((0,re.D)(Ae))return Re(Ae);if((0,de.T)(Ae))return function ge(Ae){return new oe.y(Te=>{for(const Oe of Ae)if(Te.next(Oe),Te.closed)return;Te.complete()})}(Ae);if((0,ue.L)(Ae))return function ke(Ae){return Re((0,ue.Q)(Ae))}(Ae)}throw(0,me.z)(Ae)}function Re(Ae){return new oe.y(Te=>{(function je(Ae,Te){var Oe,Ge,He,G;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,o.KL)(Ae);!(Ge=yield Oe.next()).done;)if(Te.next(Ge.value),Te.closed)return}catch(Ce){He={error:Ce}}finally{try{Ge&&!Ge.done&&(G=Oe.return)&&(yield G.call(Oe))}finally{if(He)throw He.error}}Te.complete()})})(Ae,Te).catch(Oe=>Te.error(Oe))})}},6451:(wt,xe,V)=>{V.d(xe,{T:()=>re});var o=V(8189),te=V(8421),L=V(515),oe=V(7669),se=V(8996);function re(...me){const de=(0,oe.yG)(me),ue=(0,oe._6)(me,1/0),j=me;return j.length?1===j.length?(0,te.Xf)(j[0]):(0,o.J)(ue)((0,se.D)(j,de)):L.E}},5403:(wt,xe,V)=>{V.d(xe,{x:()=>te});var o=V(930);function te(oe,se,re,me,de){return new L(oe,se,re,me,de)}class L extends o.Lv{constructor(se,re,me,de,ue,j){super(se),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=re?function(q){try{re(q)}catch(Q){se.error(Q)}}:super._next,this._error=de?function(q){try{de(q)}catch(Q){se.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(wt,xe,V)=>{V.d(xe,{U:()=>L});var o=V(4482),te=V(5403);function L(oe,se){return(0,o.e)((re,me)=>{let de=0;re.subscribe((0,te.x)(me,ue=>{me.next(oe.call(se,ue,de++))}))})}},8189:(wt,xe,V)=>{V.d(xe,{J:()=>L});var o=V(5577),te=V(4671);function L(oe=1/0){return(0,o.z)(te.y,oe)}},5577:(wt,xe,V)=>{V.d(xe,{z:()=>de});var o=V(4004),te=V(8421),L=V(4482),oe=V(9672),se=V(5403),me=V(576);function de(ue,j,q=1/0){return(0,me.m)(j)?de((Q,Ye)=>(0,o.U)((Me,Xe)=>j(Q,Me,Ye,Xe))((0,te.Xf)(ue(Q,Ye))),q):("number"==typeof j&&(q=j),(0,L.e)((Q,Ye)=>function re(ue,j,q,Q,Ye,Me,Xe,mt){const ge=[];let Re=0,ke=0,je=!1;const Ae=()=>{je&&!ge.length&&!Re&&j.complete()},Te=Ge=>Re<Q?Oe(Ge):ge.push(Ge),Oe=Ge=>{Me&&j.next(Ge),Re++;let He=!1;(0,te.Xf)(q(Ge,ke++)).subscribe((0,se.x)(j,G=>{Ye?.(G),Me?Te(G):j.next(G)},()=>{He=!0},void 0,()=>{if(He)try{for(Re--;ge.length&&Re<Q;){const G=ge.shift();Xe?(0,oe.f)(j,Xe,()=>Oe(G)):Oe(G)}Ae()}catch(G){j.error(G)}}))};return ue.subscribe((0,se.x)(j,Te,()=>{je=!0,Ae()})),()=>{mt?.()}}(Q,Ye,ue,q)))}},5363:(wt,xe,V)=>{V.d(xe,{Q:()=>oe});var o=V(9672),te=V(4482),L=V(5403);function oe(se,re=0){return(0,te.e)((me,de)=>{me.subscribe((0,L.x)(de,ue=>(0,o.f)(de,se,()=>de.next(ue),re),()=>(0,o.f)(de,se,()=>de.complete(),re),ue=>(0,o.f)(de,se,()=>de.error(ue),re)))})}},3099:(wt,xe,V)=>{V.d(xe,{B:()=>se});var o=V(8421),te=V(7579),L=V(930),oe=V(4482);function se(me={}){const{connector:de=(()=>new te.x),resetOnError:ue=!0,resetOnComplete:j=!0,resetOnRefCountZero:q=!0}=me;return Q=>{let Ye,Me,Xe,mt=0,ge=!1,Re=!1;const ke=()=>{Me?.unsubscribe(),Me=void 0},je=()=>{ke(),Ye=Xe=void 0,ge=Re=!1},Ae=()=>{const Te=Ye;je(),Te?.unsubscribe()};return(0,oe.e)((Te,Oe)=>{mt++,!Re&&!ge&&ke();const Ge=Xe=Xe??de();Oe.add(()=>{mt--,0===mt&&!Re&&!ge&&(Me=re(Ae,q))}),Ge.subscribe(Oe),!Ye&&mt>0&&(Ye=new L.Hp({next:He=>Ge.next(He),error:He=>{Re=!0,ke(),Me=re(je,ue,He),Ge.error(He)},complete:()=>{ge=!0,ke(),Me=re(je,j),Ge.complete()}}),(0,o.Xf)(Te).subscribe(Ye))})(Q)}}function re(me,de,...ue){if(!0===de)return void me();if(!1===de)return;const j=new L.Hp({next:()=>{j.unsubscribe(),me()}});return(0,o.Xf)(de(...ue)).subscribe(j)}},9468:(wt,xe,V)=>{V.d(xe,{R:()=>te});var o=V(4482);function te(L,oe=0){return(0,o.e)((se,re)=>{re.add(L.schedule(()=>se.subscribe(re),oe))})}},8505:(wt,xe,V)=>{V.d(xe,{b:()=>se});var o=V(576),te=V(4482),L=V(5403),oe=V(4671);function se(re,me,de){const ue=(0,o.m)(re)||me||de?{next:re,error:me,complete:de}:re;return ue?(0,te.e)((j,q)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let Ye=!0;j.subscribe((0,L.x)(q,Me=>{var Xe;null===(Xe=ue.next)||void 0===Xe||Xe.call(ue,Me),q.next(Me)},()=>{var Me;Ye=!1,null===(Me=ue.complete)||void 0===Me||Me.call(ue),q.complete()},Me=>{var Xe;Ye=!1,null===(Xe=ue.error)||void 0===Xe||Xe.call(ue,Me),q.error(Me)},()=>{var Me,Xe;Ye&&(null===(Me=ue.unsubscribe)||void 0===Me||Me.call(ue)),null===(Xe=ue.finalize)||void 0===Xe||Xe.call(ue)}))}):oe.y}},4408:(wt,xe,V)=>{V.d(xe,{o:()=>se});var o=V(727);class te extends o.w0{constructor(me,de){super()}schedule(me,de=0){return this}}const L={setInterval(re,me,...de){const{delegate:ue}=L;return ue?.setInterval?ue.setInterval(re,me,...de):setInterval(re,me,...de)},clearInterval(re){const{delegate:me}=L;return(me?.clearInterval||clearInterval)(re)},delegate:void 0};var oe=V(8737);class se extends te{constructor(me,de){super(me,de),this.scheduler=me,this.work=de,this.pending=!1}schedule(me,de=0){var ue;if(this.closed)return this;this.state=me;const j=this.id,q=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(q,j,de)),this.pending=!0,this.delay=de,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(q,this.id,de),this}requestAsyncId(me,de,ue=0){return L.setInterval(me.flush.bind(me,this),ue)}recycleAsyncId(me,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;null!=de&&L.clearInterval(de)}execute(me,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(me,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,de){let j,ue=!1;try{this.work(me)}catch(q){ue=!0,j=q||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:me,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=me&&(this.id=this.recycleAsyncId(de,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,xe,V)=>{V.d(xe,{v:()=>L});var o=V(6063);class te{constructor(se,re=te.now){this.schedulerActionCtor=se,this.now=re}schedule(se,re=0,me){return new this.schedulerActionCtor(this,se).schedule(me,re)}}te.now=o.l.now;class L extends te{constructor(se,re=te.now){super(se,re),this.actions=[],this._active=!1}flush(se){const{actions:re}=this;if(this._active)return void re.push(se);let me;this._active=!0;do{if(me=se.execute(se.state,se.delay))break}while(se=re.shift());if(this._active=!1,me){for(;se=re.shift();)se.unsubscribe();throw me}}}},4986:(wt,xe,V)=>{V.d(xe,{z:()=>L});var o=V(4408);const L=new(V(7565).v)(o.o)},6063:(wt,xe,V)=>{V.d(xe,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(wt,xe,V)=>{V.d(xe,{z:()=>o});const o={setTimeout(te,L,...oe){const{delegate:se}=o;return se?.setTimeout?se.setTimeout(te,L,...oe):setTimeout(te,L,...oe)},clearTimeout(te){const{delegate:L}=o;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(wt,xe,V)=>{V.d(xe,{h:()=>te});const te=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,xe,V)=>{V.d(xe,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,xe,V)=>{V.d(xe,{_6:()=>re,jO:()=>oe,yG:()=>se});var o=V(576);function L(me){return me[me.length-1]}function oe(me){return(0,o.m)(L(me))?me.pop():void 0}function se(me){return function te(me){return me&&(0,o.m)(me.schedule)}(L(me))?me.pop():void 0}function re(me,de){return"number"==typeof L(me)?me.pop():de}},8737:(wt,xe,V)=>{function o(te,L){if(te){const oe=te.indexOf(L);0<=oe&&te.splice(oe,1)}}V.d(xe,{P:()=>o})},3888:(wt,xe,V)=>{function o(te){const oe=te(se=>{Error.call(se),se.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}V.d(xe,{d:()=>o})},2806:(wt,xe,V)=>{V.d(xe,{O:()=>oe,x:()=>L});var o=V(2416);let te=null;function L(se){if(o.v.useDeprecatedSynchronousErrorHandling){const re=!te;if(re&&(te={errorThrown:!1,error:null}),se(),re){const{errorThrown:me,error:de}=te;if(te=null,me)throw de}}else se()}function oe(se){o.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(wt,xe,V)=>{function o(te,L,oe,se=0,re=!1){const me=L.schedule(function(){oe(),re?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(me),!re)return me}V.d(xe,{f:()=>o})},4671:(wt,xe,V)=>{function o(te){return te}V.d(xe,{y:()=>o})},1144:(wt,xe,V)=>{V.d(xe,{z:()=>o});const o=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(wt,xe,V)=>{V.d(xe,{D:()=>te});var o=V(576);function te(L){return Symbol.asyncIterator&&(0,o.m)(L?.[Symbol.asyncIterator])}},576:(wt,xe,V)=>{function o(te){return"function"==typeof te}V.d(xe,{m:()=>o})},3670:(wt,xe,V)=>{V.d(xe,{c:()=>L});var o=V(8822),te=V(576);function L(oe){return(0,te.m)(oe[o.L])}},6495:(wt,xe,V)=>{V.d(xe,{T:()=>L});var o=V(2202),te=V(576);function L(oe){return(0,te.m)(oe?.[o.h])}},8239:(wt,xe,V)=>{V.d(xe,{t:()=>te});var o=V(576);function te(L){return(0,o.m)(L?.then)}},3260:(wt,xe,V)=>{V.d(xe,{L:()=>oe,Q:()=>L});var o=V(655),te=V(576);function L(se){return(0,o.FC)(this,arguments,function*(){const me=se.getReader();try{for(;;){const{value:de,done:ue}=yield(0,o.qq)(me.read());if(ue)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(de)}}finally{me.releaseLock()}})}function oe(se){return(0,te.m)(se?.getReader)}},4482:(wt,xe,V)=>{V.d(xe,{A:()=>te,e:()=>L});var o=V(576);function te(oe){return(0,o.m)(oe?.lift)}function L(oe){return se=>{if(te(se))return se.lift(function(re){try{return oe(re,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,xe,V)=>{function o(){}V.d(xe,{Z:()=>o})},9635:(wt,xe,V)=>{V.d(xe,{U:()=>L,z:()=>te});var o=V(4671);function te(...oe){return L(oe)}function L(oe){return 0===oe.length?o.y:1===oe.length?oe[0]:function(re){return oe.reduce((me,de)=>de(me),re)}}},7849:(wt,xe,V)=>{V.d(xe,{h:()=>L});var o=V(2416),te=V(3410);function L(oe){te.z.setTimeout(()=>{const{onUnhandledError:se}=o.v;if(!se)throw oe;se(oe)})}},4532:(wt,xe,V)=>{function o(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(xe,{z:()=>o})},655:(wt,xe,V)=>{function oe(le,fe){var ve={};for(var Pe in le)Object.prototype.hasOwnProperty.call(le,Pe)&&fe.indexOf(Pe)<0&&(ve[Pe]=le[Pe]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(Pe=Object.getOwnPropertySymbols(le);qe<Pe.length;qe++)fe.indexOf(Pe[qe])<0&&Object.prototype.propertyIsEnumerable.call(le,Pe[qe])&&(ve[Pe[qe]]=le[Pe[qe]])}return ve}function Q(le,fe,ve,Pe){return new(ve||(ve=Promise))(function(Qe,st){function tt(dn){try{At(Pe.next(dn))}catch(ut){st(ut)}}function _n(dn){try{At(Pe.throw(dn))}catch(ut){st(ut)}}function At(dn){dn.done?Qe(dn.value):function qe(Qe){return Qe instanceof ve?Qe:new ve(function(st){st(Qe)})}(dn.value).then(tt,_n)}At((Pe=Pe.apply(le,fe||[])).next())})}function Ae(le){return this instanceof Ae?(this.v=le,this):new Ae(le)}function Te(le,fe,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,Pe=ve.apply(le,fe||[]),Qe=[];return qe={},st("next"),st("throw"),st("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function st(Ht){Pe[Ht]&&(qe[Ht]=function(kn){return new Promise(function(Ln,Rn){Qe.push([Ht,kn,Ln,Rn])>1||tt(Ht,kn)})})}function tt(Ht,kn){try{!function _n(Ht){Ht.value instanceof Ae?Promise.resolve(Ht.value.v).then(At,dn):ut(Qe[0][2],Ht)}(Pe[Ht](kn))}catch(Ln){ut(Qe[0][3],Ln)}}function At(Ht){tt("next",Ht)}function dn(Ht){tt("throw",Ht)}function ut(Ht,kn){Ht(kn),Qe.shift(),Qe.length&&tt(Qe[0][0],Qe[0][1])}}function Ge(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,fe=le[Symbol.asyncIterator];return fe?fe.call(le):(le=function mt(le){var fe="function"==typeof Symbol&&Symbol.iterator,ve=fe&&le[fe],Pe=0;if(ve)return ve.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&Pe>=le.length&&(le=void 0),{value:le&&le[Pe++],done:!le}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),ve={},Pe("next"),Pe("throw"),Pe("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Pe(Qe){ve[Qe]=le[Qe]&&function(st){return new Promise(function(tt,_n){!function qe(Qe,st,tt,_n){Promise.resolve(_n).then(function(At){Qe({value:At,done:tt})},st)}(tt,_n,(st=le[Qe](st)).done,st.value)})}}}V.d(xe,{FC:()=>Te,KL:()=>Ge,_T:()=>oe,mG:()=>Q,qq:()=>Ae})},4650:(wt,xe,V)=>{V.d(xe,{$8M:()=>Ru,$WT:()=>ii,$Z:()=>CT,AFp:()=>FA,ALo:()=>hI,AaK:()=>de,Akn:()=>Bo,AsE:()=>vd,BQk:()=>md,CHM:()=>gu,CRH:()=>Y_,CZH:()=>Yh,CqO:()=>Nc,D6c:()=>iS,DdM:()=>iI,EJc:()=>LI,EpF:()=>Pc,F$t:()=>Lh,F4k:()=>Cw,FYo:()=>wp,FiY:()=>Lu,Gf:()=>gb,GfV:()=>tT,GkF:()=>_s,Gpc:()=>q,HTZ:()=>G_,Hh0:()=>lI,Hsn:()=>$p,JOm:()=>Xr,KtG:()=>Zd,LFG:()=>Je,Lbi:()=>Rb,Lck:()=>nb,MAs:()=>ww,MMx:()=>ng,NdJ:()=>KT,OlP:()=>on,Oqu:()=>Qi,P3R:()=>Um,PXZ:()=>Gb,Q6J:()=>bw,QGY:()=>v_,QbO:()=>VA,Qsj:()=>Eh,R0b:()=>ho,RDi:()=>Po,Rgc:()=>rg,SBq:()=>xc,Sil:()=>wN,Suo:()=>mb,TTD:()=>Nl,TgZ:()=>Fh,Tol:()=>Ow,Udp:()=>T_,VKq:()=>rI,W1O:()=>J_,WLB:()=>ub,X6Q:()=>QA,XFs:()=>It,Xpm:()=>Ua,Xts:()=>Hm,Y36:()=>ld,YKP:()=>U_,YNc:()=>m_,Yjl:()=>Ga,Yz7:()=>ut,Z0I:()=>Rn,ZZ4:()=>hy,_Bn:()=>YE,_UZ:()=>Fr,_Vd:()=>Dc,_c5:()=>ON,_uU:()=>Sl,aQg:()=>tS,c2e:()=>gg,cJS:()=>kn,cg1:()=>Ji,dDg:()=>Lb,dqk:()=>Bt,eFA:()=>ZA,ekj:()=>Rw,eoX:()=>GI,f3M:()=>ht,g9A:()=>kb,h0i:()=>Vc,hGG:()=>PN,hij:()=>Lr,iGM:()=>CI,ifc:()=>sn,ip1:()=>PI,jDz:()=>JE,kEZ:()=>sI,kL8:()=>Kp,l5B:()=>oI,lG2:()=>Ha,lqb:()=>bl,lri:()=>Fb,n5z:()=>Mu,oAB:()=>Hn,oxw:()=>JT,q4F:()=>nT,qLn:()=>Pr,qOj:()=>hd,qZA:()=>zp,qbA:()=>aI,rFY:()=>X,rWj:()=>HI,sBO:()=>KI,s_b:()=>sg,soG:()=>_g,tb:()=>FI,tp0:()=>D,uIk:()=>mw,vHH:()=>ge,vpe:()=>Ma,wAp:()=>Ot,xi3:()=>pI,xp6:()=>oT,ynx:()=>Lo,z2F:()=>cy,zSh:()=>td,zs3:()=>od});var o=V(7579),te=V(727),L=V(9751),oe=V(6451),se=V(3099);function re(a){for(let l in a)if(a[l]===re)return l;throw Error("Could not find renamed property on target object.")}function me(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function de(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(de).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function ue(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const j=re({__forward_ref__:re});function q(a){return a.__forward_ref__=q,a.toString=function(){return de(this())},a}function Q(a){return Ye(a)?a():a}function Ye(a){return"function"==typeof a&&a.hasOwnProperty(j)&&a.__forward_ref__===q}function Me(a){return a&&!!a.\u0275providers}const mt="https://g.co/ng/security#xss";class ge extends Error{constructor(l,u){super(function Re(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}(l,u)),this.code=l}}function ke(a){return"string"==typeof a?a:null==a?"":String(a)}function Ge(a,l){throw new ge(-201,!1)}function st(a,l){null==a&&function tt(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function ut(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function kn(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ln(a){return On(a,nr)||On(a,Tn)}function Rn(a){return null!==Ln(a)}function On(a,l){return a.hasOwnProperty(l)?a[l]:null}function Dr(a){return a&&(a.hasOwnProperty(Ks)||a.hasOwnProperty(mr))?a[Ks]:null}const nr=re({\u0275prov:re}),Ks=re({\u0275inj:re}),Tn=re({ngInjectableDef:re}),mr=re({ngInjectorDef:re});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let Es;function Vn(a){const l=Es;return Es=a,l}function Gi(a,l,u){const h=Ln(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&It.Optional?null:void 0!==l?l:void Ge(de(a))}const Bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Bn={},Pn="__NG_DI_FLAG__",jr="ngTempTokenPath",Jo=/\n/gm,cs="__source";let ln;function zi(a){const l=ln;return ln=a,l}function us(a,l=It.Default){if(void 0===ln)throw new ge(-203,!1);return null===ln?Gi(a,void 0,l):ln.get(a,l&It.Optional?null:void 0,l)}function Je(a,l=It.Default){return(function $r(){return Es}()||us)(Q(a),l)}function ht(a,l=It.Default){return Je(a,Rt(l))}function Rt(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Lt(a){const l=[];for(let u=0;u<a.length;u++){const h=Q(a[u]);if(Array.isArray(h)){if(0===h.length)throw new ge(900,!1);let f,m=It.Default;for(let w=0;w<h.length;w++){const T=h[w],I=$(T);"number"==typeof I?-1===I?f=T.token:m|=I:f=T}l.push(Je(f,m))}else l.push(Je(h))}return l}function Wt(a,l){return a[Pn]=l,a.prototype[Pn]=l,a}function $(a){return a[Pn]}function _e(a){return{toString:a}.toString()}var ie=(()=>((ie=ie||{})[ie.OnPush=0]="OnPush",ie[ie.Default=1]="Default",ie))(),sn=(()=>{return(a=sn||(sn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",sn;var a})();const Un={},xt=[],Ti=re({\u0275cmp:re}),Qt=re({\u0275dir:re}),pi=re({\u0275pipe:re}),Xo=re({\u0275mod:re}),$i=re({\u0275fac:re}),Ba=re({__NG_ELEMENT_ID__:re});let kf=0;function Ua(a){return _e(()=>{const u=!0===a.standalone,h={},f={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===ie.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||xt,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||sn.Emulated,id:"c"+kf++,styles:a.styles||xt,_:null,setInput:null,schemas:a.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=a.dependencies,w=a.features;return f.inputs=iu(a.inputs,h),f.outputs=iu(a.outputs),w&&w.forEach(T=>T(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(nu).filter(Gd):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(Qn).filter(Gd):null,f})}function nu(a){return cn(a)||gi(a)}function Gd(a){return null!==a}function Hn(a){return _e(()=>({type:a.type,bootstrap:a.bootstrap||xt,declarations:a.declarations||xt,imports:a.imports||xt,exports:a.exports||xt,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function iu(a,l){if(null==a)return Un;const u={};for(const h in a)if(a.hasOwnProperty(h)){let f=a[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,l&&(l[f]=m)}return u}const Ha=Ua;function Ga(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function cn(a){return a[Ti]||null}function gi(a){return a[Qt]||null}function Qn(a){return a[pi]||null}function ii(a){const l=cn(a)||gi(a)||Qn(a);return null!==l&&l.standalone}function ji(a,l){const u=a[Xo]||null;if(!u&&!0===l)throw new Error(`Type ${de(a)} does not have '\u0275mod' property.`);return u}function _r(a){return Array.isArray(a)&&"object"==typeof a[1]}function Wr(a){return Array.isArray(a)&&!0===a[1]}function za(a){return 0!=(4&a.flags)}function Kr(a){return a.componentOffset>-1}function ou(a){return 1==(1&a.flags)}function sr(a){return null!==a.template}function $a(a){return 0!=(256&a[2])}function vo(a,l){return a.hasOwnProperty($i)?a[$i]:null}class wo{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Nl(){return sa}function sa(a){return a.type.prototype.ngOnChanges&&(a.setInput=oa),Fl}function Fl(){const a=qa(this),l=a?.current;if(l){const u=a.previous;if(u===Un)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function oa(a,l,u,h){const f=this.declaredInputs[u],m=qa(a)||function Wd(a,l){return a[bo]=l}(a,{previous:Un,current:null}),w=m.current||(m.current={}),T=m.previous,I=T[f];w[f]=new wo(I&&I.currentValue,l,T===Un),a[h]=l}Nl.ngInherit=!0;const bo="__ngSimpleChanges__";function qa(a){return a[bo]||null}function Jn(a){for(;Array.isArray(a);)a=a[0];return a}function Co(a,l){return Jn(l[a])}function oi(a,l){return Jn(l[a.index])}function ca(a,l){return a.data[l]}function To(a,l){return a[l]}function Ei(a,l){const u=l[a];return _r(u)?u:u[0]}function ua(a){return 64==(64&a[2])}function xs(a,l){return null==l?null:a[l]}function Ka(a){a[18]=0}function Za(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Vt={lFrame:hv(null),bindingsEnabled:!0};function Gl(){return Vt.bindingsEnabled}function ye(){return Vt.lFrame.lView}function un(){return Vt.lFrame.tView}function gu(a){return Vt.lFrame.contextLView=a,a[8]}function Zd(a){return Vt.lFrame.contextLView=null,a}function ki(){let a=Ya();for(;null!==a&&64===a.type;)a=a.parent;return a}function Ya(){return Vt.lFrame.currentTNode}function vr(a,l){const u=Vt.lFrame;u.currentTNode=a,u.isParent=l}function $l(){return Vt.lFrame.isParent}function jl(){Vt.lFrame.isParent=!1}function mi(){const a=Vt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Eo(){return Vt.lFrame.bindingIndex++}function fs(a){const l=Vt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Jd(a,l){const u=Vt.lFrame;u.bindingIndex=u.bindingRootIndex=a,yu(l)}function yu(a){Vt.lFrame.currentDirectiveIndex=a}function Xd(){return Vt.lFrame.currentQueryIndex}function vu(a){Vt.lFrame.currentQueryIndex=a}function eh(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Lf(a,l,u){if(u&It.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||u&It.Host||(f=eh(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const h=Vt.lFrame=Vf();return h.currentTNode=l,h.lView=a,!0}function Wl(a){const l=Vf(),u=a[1];Vt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Vf(){const a=Vt.lFrame,l=null===a?null:a.child;return null===l?hv(a):l}function hv(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function um(){const a=Vt.lFrame;return Vt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const wu=um;function dm(){const a=um();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ar(){return Vt.lFrame.selectedIndex}function da(a){Vt.lFrame.selectedIndex=a}function Mn(){const a=Vt.lFrame;return ca(a.tView,a.selectedIndex)}function Ja(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:T,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:R}=m;w&&(a.contentHooks||(a.contentHooks=[])).push(-u,w),T&&((a.contentHooks||(a.contentHooks=[])).push(u,T),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,T)),I&&(a.viewHooks||(a.viewHooks=[])).push(-u,I),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=R&&(a.destroyHooks||(a.destroyHooks=[])).push(u,R)}}function Js(a,l,u){Cu(a,l,3,u)}function fa(a,l,u,h){(3&a[2])===u&&Cu(a,l,u,h)}function kr(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Cu(a,l,u,h){const m=h??-1,w=l.length-1;let T=0;for(let I=void 0!==h?65535&a[18]:0;I<w;I++)if("number"==typeof l[I+1]){if(T=l[I],null!=h&&T>=h)break}else l[I]<0&&(a[18]+=65536),(T<m||-1==m)&&(Kl(a,u,l,I),a[18]=(4294901760&a[18])+I+2),I++}function Kl(a,l,u,h){const f=u[h]<0,m=u[h+1],T=a[f?-u[h]:u[h]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(T)}finally{}}}else try{m.call(T)}finally{}}class ga{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function In(a,l,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],w=u[h++],T=u[h++];a.setAttribute(l,w,T,m)}else{const m=f,w=u[++h];So(m)?a.setProperty(l,m,w):a.setAttribute(l,m,w),h++}}return h}function tl(a){return 3===a||4===a||6===a}function So(a){return 64===a.charCodeAt(0)}function Ms(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const f=l[h];"number"==typeof f?u=f:0===u||nl(a,u,f,null,-1===u||2===u?l[++h]:null)}}return a}function nl(a,l,u,h,f){let m=0,w=a.length;if(-1===l)w=-1;else for(;m<a.length;){const T=a[m++];if("number"==typeof T){if(T===l){w=-1;break}if(T>l){w=m-1;break}}}for(;m<a.length;){const T=a[m];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==f&&(a[m+1]=f));if(h===a[m+1])return void(a[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==w&&(a.splice(w,0,l),m=w+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==f&&a.splice(m++,0,f)}function Iu(a){return-1!==a}function Yl(a){return 32767&a}function Jl(a,l){let u=function Ql(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let Xs=!0;function Do(a){const l=Xs;return Xs=a,l}let Su=0;const lr={};function _a(a,l){const u=ec(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,Ao(h.data,a),Ao(l,null),Ao(h.blueprint,null));const f=il(a,l),m=a.injectorIndex;if(Iu(f)){const w=Yl(f),T=Jl(f,l),I=T[1].data;for(let x=0;x<8;x++)l[m+x]=T[w+x]|I[w+x]}return l[m+8]=f,m}function Ao(a,l){a.push(0,0,0,0,0,0,0,0,l)}function ec(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function il(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,f=l;for(;null!==f;){if(h=Gf(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Du(a,l,u){!function Xl(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ba)&&(h=u[Ba]),null==h&&(h=u[Ba]=Su++);const f=255&h;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function Mo(a,l,u){if(u&It.Optional||void 0!==a)return a;Ge()}function ya(a,l,u,h){if(u&It.Optional&&void 0===h&&(h=null),!(u&(It.Self|It.Host))){const f=a[9],m=Vn(void 0);try{return f?f.get(l,h,u&It.Optional):Gi(l,h,u&It.Optional)}finally{Vn(m)}}return Mo(h,0,u)}function Uf(a,l,u,h=It.Default,f){if(null!==a){if(1024&l[2]){const w=function ku(a,l,u,h,f){let m=a,w=l;for(;null!==m&&null!==w&&1024&w[2]&&!(256&w[2]);){const T=ks(m,w,u,h|It.Self,lr);if(T!==lr)return T;let I=m.parent;if(!I){const x=w[21];if(x){const R=x.get(u,lr,h);if(R!==lr)return R}I=Gf(w),w=w[15]}m=I}return f}(a,l,u,h,lr);if(w!==lr)return w}const m=ks(a,l,u,h,lr);if(m!==lr)return m}return ya(l,u,h,f)}function ks(a,l,u,h,f){const m=function xu(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Ba)?a[Ba]:void 0;return"number"==typeof l?l>=0?255&l:Hf:l}(u);if("function"==typeof m){if(!Lf(l,a,h))return h&It.Host?Mo(f,0,h):ya(l,u,h,f);try{const w=m(h);if(null!=w||h&It.Optional)return w;Ge()}finally{wu()}}else if("number"==typeof m){let w=null,T=ec(a,l),I=-1,x=h&It.Host?l[16][6]:null;for((-1===T||h&It.SkipSelf)&&(I=-1===T?il(a,l):l[T+8],-1!==I&&Yr(h,!1)?(w=l[1],T=Yl(I),l=Jl(I,l)):T=-1);-1!==T;){const R=l[1];if(Au(m,T,R.data)){const B=rl(T,l,u,w,h,x);if(B!==lr)return B}I=l[T+8],-1!==I&&Yr(h,l[1].data[T+8]===x)&&Au(m,T,l)?(w=R,T=Yl(I),l=Jl(I,l)):T=-1}}return f}function rl(a,l,u,h,f,m){const w=l[1],T=w.data[a+8],R=tc(T,w,u,null==h?Kr(T)&&Xs:h!=w&&0!=(3&T.type),f&It.Host&&m===T);return null!==R?Zr(l,w,R,T):lr}function tc(a,l,u,h,f){const m=a.providerIndexes,w=l.data,T=1048575&m,I=a.directiveStart,R=m>>20,W=f?T+R:a.directiveEnd;for(let ne=h?T:T+R;ne<W;ne++){const be=w[ne];if(ne<I&&u===be||ne>=I&&be.type===u)return ne}if(f){const ne=w[I];if(ne&&sr(ne)&&ne.type===u)return I}return null}function Zr(a,l,u,h){let f=a[u];const m=l.data;if(function Rr(a){return a instanceof ga}(f)){const w=f;w.resolving&&function Ae(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new ge(-200,`Circular dependency in DI detected for ${a}${u}`)}(function je(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ke(a)}(m[u]));const T=Do(w.canSeeViewProviders);w.resolving=!0;const I=w.injectImpl?Vn(w.injectImpl):null;Lf(a,h,It.Default);try{f=a[u]=w.factory(void 0,m,a,h),l.firstCreatePass&&u>=h.directiveStart&&function fm(a,l,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(h){const w=sa(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,w),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,w)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==I&&Vn(I),Do(T),w.resolving=!1,wu()}}return f}function Au(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function Yr(a,l){return!(a&It.Self||a&It.Host&&l)}class Qr{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Uf(this._tNode,this._lView,l,Rt(h),u)}}function Hf(){return new Qr(ki(),ye())}function Mu(a){return _e(()=>{const l=a.prototype.constructor,u=l[$i]||nc(l),h=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==h;){const m=f[$i]||nc(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function nc(a){return Ye(a)?()=>{const l=nc(Q(a));return l&&l()}:vo(a)}function Gf(a){const l=a[1],u=l.type;return 2===u?l.declTNode:1===u?a[6]:null}function Ru(a){return function ih(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(tl(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===l)return u[f+1];f+=2}}}return null}(ki(),a)}const sl="__parameters__";function ic(a,l,u){return _e(()=>{const h=function sh(a){return function(...u){if(a){const h=a(...u);for(const f in h)this[f]=h[f]}}}(l);function f(...m){if(this instanceof f)return h.apply(this,m),this;const w=new f(...m);return T.annotation=w,T;function T(I,x,R){const B=I.hasOwnProperty(sl)?I[sl]:Object.defineProperty(I,sl,{value:[]})[sl];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(w),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class on{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ut({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ps(a,l){a.forEach(u=>Array.isArray(u)?ps(u,l):l(u))}function lc(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function ol(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function wa(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function cr(a,l,u){let h=ze(a,l);return h>=0?a[1|h]=u:(h=~h,function Wf(a,l,u,h){let f=a.length;if(f==l)a.push(u,h);else if(1===f)a.push(h,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Kn(a,l){const u=ze(a,l);if(u>=0)return a[1|u]}function ze(a,l){return function uc(a,l,u){let h=0,f=a.length>>u;for(;f!==h;){const m=h+(f-h>>1),w=a[m<<u];if(l===w)return m<<u;w>l?f=m:h=m+1}return~(f<<u)}(a,l,1)}const Lu=Wt(ic("Optional"),8),D=Wt(ic("SkipSelf"),4);var Xr=(()=>((Xr=Xr||{})[Xr.Important=1]="Important",Xr[Xr.DashCase=2]="DashCase",Xr))();const Os=new Map;let ep=0;const cl="__ngContext__";function Ni(a,l){_r(l)?(a[cl]=l[20],function wm(a){Os.set(a[20],a)}(l)):a[cl]=l}function vi(a,l){return undefined(a,l)}function fl(a){const l=a[3];return Wr(l)?l[3]:l}function Hu(a){return Im(a[13])}function np(a){return Im(a[4])}function Im(a){for(;null!==a&&!Wr(a);)a=a[4];return a}function pl(a,l,u,h,f){if(null!=h){let m,w=!1;Wr(h)?m=h:_r(h)&&(w=!0,h=h[0]);const T=Jn(h);0===a&&null!==u?null==f?ml(l,u,T):gl(l,u,T,f||null,!0):1===a&&null!==u?gl(l,u,T,f||null,!0):2===a?function yl(a,l,u){const h=vc(a,l);h&&function fh(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}(l,T,w):3===a&&l.destroyNode(T),null!=m&&function Om(a,l,u,h,f){const m=u[7];m!==Jn(u)&&pl(l,a,h,m,f);for(let T=10;T<u.length;T++){const I=u[T];qu(I[1],I,a,l,h,m)}}(l,a,m,u,f)}}function Gu(a,l,u){return a.createElement(l,u)}function yc(a,l){const u=a[9],h=u.indexOf(l),f=l[3];512&l[2]&&(l[2]&=-513,Za(f,-1)),u.splice(h,1)}function ch(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const f=h[17];null!==f&&f!==a&&yc(f,h),l>0&&(a[u-1][4]=h[4]);const m=ol(a,10+l);!function wv(a,l){qu(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const w=m[19];null!==w&&w.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function ip(a,l){if(!(128&l[2])){const u=l[11];u.destroyNode&&qu(a,l,u,3,null,null),function lh(a){let l=a[13];if(!l)return uh(a[1],a);for(;l;){let u=null;if(_r(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)_r(l)&&uh(l[1],l),l=l[3];null===l&&(l=a),_r(l)&&uh(l[1],l),u=l&&l[4]}l=u}}(l)}}function uh(a,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function Am(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const f=l[u[h]];if(!(f instanceof ga)){const m=u[h+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const T=f[m[w]],I=m[w+1];try{I.call(T)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function dh(a,l){const u=a.cleanup,h=l[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const w=u[m+3];w>=0?h[f=w]():h[f=-w].unsubscribe(),m+=2}else{const w=h[f=u[m+1]];u[m].call(w)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();l[7]=null}}(a,l),1===l[1].type&&l[11].destroy();const u=l[17];if(null!==u&&Wr(l[3])){u!==l[3]&&yc(u,l);const h=l[19];null!==h&&h.detachView(a)}!function Vu(a){Os.delete(a[20])}(l)}}function rp(a,l,u){return function hh(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];{const{componentOffset:f}=h;if(f>-1){const{encapsulation:m}=a.data[h.directiveStart+f];if(m===sn.None||m===sn.Emulated)return null}return oi(h,u)}}(a,l.parent,u)}function gl(a,l,u,h,f){a.insertBefore(l,u,h,f)}function ml(a,l,u){a.appendChild(l,u)}function Mm(a,l,u,h,f){null!==h?gl(a,l,u,h,f):ml(a,l,u)}function vc(a,l){return a.parentNode(l)}function Rm(a,l,u){return gh(a,l,u)}let dp,wl,gh=function ph(a,l,u){return 40&a.type?oi(a,u):null};function ju(a,l,u,h){const f=rp(a,h,l),m=l[11],T=Rm(h.parent||l[6],h,l);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)Mm(m,f,u[I],T,!1);else Mm(m,f,u,T,!1)}function _l(a,l){if(null!==l){const u=l.type;if(3&u)return oi(l,a);if(4&u)return Er(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return _l(a,h);{const f=a[l.index];return Wr(f)?Er(-1,f):Jn(f)}}if(32&u)return vi(l,a)()||Jn(a[l.index]);{const h=op(a,l);return null!==h?Array.isArray(h)?h[0]:_l(fl(a[16]),h):_l(a,l.next)}}return null}function op(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Er(a,l){const u=10+a+1;if(u<l.length){const h=l[u],f=h[1].firstChild;if(null!==f)return _l(h,f)}return l[7]}function mh(a,l,u,h,f,m,w){for(;null!=u;){const T=h[u.index],I=u.type;if(w&&0===l&&(T&&Ni(Jn(T),h),u.flags|=2),32!=(32&u.flags))if(8&I)mh(a,l,u.child,h,f,m,!1),pl(l,a,f,T,m);else if(32&I){const x=vi(u,h);let R;for(;R=x();)pl(l,a,f,R,m);pl(l,a,f,T,m)}else 16&I?Wu(a,l,h,u,f,m):pl(l,a,f,T,m);u=w?u.projectionNext:u.next}}function qu(a,l,u,h,f,m){mh(u,h,a.firstChild,l,f,m,!1)}function Wu(a,l,u,h,f,m){const w=u[16],I=w[6].projection[h.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)pl(l,a,f,I[x],m);else mh(a,l,I,w[3],f,m,!0)}function Oo(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function ro(a,l,u){const{mergedAttrs:h,classes:f,styles:m}=u;null!==h&&In(a,l,h),null!==f&&Oo(a,l,f),null!==m&&function Cv(a,l,u){a.setAttribute(l,"style",u)}(a,l,m)}function Po(a){dp=a}function Fm(a){return function Zu(){if(void 0===wl&&(wl=null,Bt.trustedTypes))try{wl=Bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return wl}()?.createScriptURL(a)||a}class hp{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mt})`}}function C(a){return a instanceof hp?a.changingThisBreaksApplicationSecurity:a}function A(a,l){const u=function O(a){return a instanceof hp&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${mt})`)}return u===l}const Cc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var li=(()=>((li=li||{})[li.NONE=0]="NONE",li[li.HTML=1]="HTML",li[li.STYLE=2]="STYLE",li[li.SCRIPT=3]="SCRIPT",li[li.URL=4]="URL",li[li.RESOURCE_URL=5]="RESOURCE_URL",li))();function gp(a){const l=bh();return l?l.sanitize(li.URL,a)||"":A(a,"URL")?C(a):function Tc(a){return(a=String(a)).match(Cc)?a:"unsafe:"+a}(ke(a))}function so(a){const l=bh();if(l)return Fm(l.sanitize(li.RESOURCE_URL,a)||"");if(A(a,"ResourceURL"))return Fm(C(a));throw new ge(904,!1)}function Um(a,l,u){return function Ev(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?so:gp}(l,u)(a)}function bh(){const a=ye();return a&&a[12]}const Hm=new on("ENVIRONMENT_INITIALIZER"),ed=new on("INJECTOR",-1),Iv=new on("INJECTOR_DEF_TYPES");class Sv{get(l,u=Bn){if(u===Bn){const h=new Error(`NullInjectorError: No provider for ${de(l)}!`);throw h.name="NullInjectorError",h}return u}}function Mx(...a){return{\u0275providers:ZC(0,a),\u0275fromNgModule:!0}}function ZC(a,...l){const u=[],h=new Set;let f;return ps(l,m=>{const w=m;Dv(w,u,[],h)&&(f||(f=[]),f.push(w))}),void 0!==f&&Nn(f,u),u}function Nn(a,l){for(let u=0;u<a.length;u++){const{providers:f}=a[u];Ch(f,m=>{l.push(m)})}}function Dv(a,l,u,h){if(!(a=Q(a)))return!1;let f=null,m=Dr(a);const w=!m&&cn(a);if(m||w){if(w&&!w.standalone)return!1;f=a}else{const I=a.ngModule;if(m=Dr(I),!m)return!1;f=I}const T=h.has(f);if(w){if(T)return!1;if(h.add(f),w.dependencies){const I="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const x of I)Dv(x,l,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let x;h.add(f);try{ps(m.imports,R=>{Dv(R,l,u,h)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&Nn(x,l)}if(!T){const x=vo(f)||(()=>new f);l.push({provide:f,useFactory:x,deps:xt},{provide:Iv,useValue:f,multi:!0},{provide:Hm,useValue:()=>Je(f),multi:!0})}const I=m.providers;null==I||T||Ch(I,R=>{l.push(R)})}}return f!==a&&void 0!==a.providers}function Ch(a,l){for(let u of a)Me(u)&&(u=u.\u0275providers),Array.isArray(u)?Ch(u,l):l(u)}const xv=re({provide:String,useValue:re});function Ec(a){return null!==a&&"object"==typeof a&&xv in a}function Ut(a){return"function"==typeof a}const td=new on("Set Injector scope."),Gm={},ci={};let mp;function zm(){return void 0===mp&&(mp=new Sv),mp}class bl{}class Av extends bl{get destroyed(){return this._destroyed}constructor(l,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mv(l,w=>this.processProvider(w)),this.records.set(ed,Sc(void 0,this)),f.has("environment")&&this.records.set(bl,Sc(void 0,this));const m=this.records.get(td);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Iv.multi,xt,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=zi(this),h=Vn(void 0);try{return l()}finally{zi(u),Vn(h)}}get(l,u=Bn,h=It.Default){this.assertNotDestroyed(),h=Rt(h);const f=zi(this),m=Vn(void 0);try{if(!(h&It.SkipSelf)){let T=this.records.get(l);if(void 0===T){const I=function $m(a){return"function"==typeof a||"object"==typeof a&&a instanceof on}(l)&&Ln(l);T=I&&this.injectableDefInScope(I)?Sc(Ic(l),Gm):null,this.records.set(l,T)}if(null!=T)return this.hydrate(l,T)}return(h&It.Self?zm():this.parent).get(l,u=h&It.Optional&&u===Bn?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[jr]=w[jr]||[]).unshift(de(l)),f)throw w;return function H(a,l,u,h){const f=a[jr];throw l[cs]&&f.unshift(l[cs]),a.message=function Z(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let f=de(l);if(Array.isArray(l))f=l.map(de).join(" -> ");else if("object"==typeof l){let m=[];for(let w in l)if(l.hasOwnProperty(w)){let T=l[w];m.push(w+":"+("string"==typeof T?JSON.stringify(T):de(T)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${a.replace(Jo,"\n  ")}`}("\n"+a.message,f,u,h),a.ngTokenPath=f,a[jr]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{Vn(m),zi(f)}}resolveInjectorInitializers(){const l=zi(this),u=Vn(void 0);try{const h=this.get(Hm.multi,xt,It.Self);for(const f of h)f()}finally{zi(l),Vn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(de(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(l){let u=Ut(l=Q(l))?l:Q(l&&l.provide);const h=function yp(a){return Ec(a)?Sc(void 0,a.useValue):Sc(YC(a),Gm)}(l);if(Ut(l)||!0!==l.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Sc(void 0,Gm,!0),f.factory=()=>Lt(f.multi),this.records.set(u,f)),u=l,f.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===Gm&&(u.value=ci,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Rx(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=Q(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Ic(a){const l=Ln(a),u=null!==l?l.factory:vo(a);if(null!==u)return u;if(a instanceof on)throw new ge(204,!1);if(a instanceof Function)return function _p(a){const l=a.length;if(l>0)throw wa(l,"?"),new ge(204,!1);const u=function gr(a){const l=a&&(a[nr]||a[Tn]);if(l){const u=function Ws(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new ge(204,!1)}function YC(a,l,u){let h;if(Ut(a)){const f=Q(a);return vo(f)||Ic(f)}if(Ec(a))h=()=>Q(a.useValue);else if(function Th(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Lt(a.deps||[]));else if(function Sa(a){return!(!a||!a.useExisting)}(a))h=()=>Je(Q(a.useExisting));else{const f=Q(a&&(a.useClass||a.provide));if(!function vp(a){return!!a.deps}(a))return vo(f)||Ic(f);h=()=>new f(...Lt(a.deps))}return h}function Sc(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Mv(a,l){for(const u of a)Array.isArray(u)?Mv(u,l):u&&Me(u)?Mv(u.\u0275providers,l):l(u)}class Ox{}class QC{}class Px{resolveComponentFactory(l){throw function kv(a){const l=Error(`No component factory found for ${de(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Dc=(()=>{class a{}return a.NULL=new Px,a})();function eT(){return nd(ki(),ye())}function nd(a,l){return new xc(oi(a,l))}let xc=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=eT,a})();function Nx(a){return a instanceof xc?a.nativeElement:a}class wp{}let Eh=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Rv(){const a=ye(),u=Ei(ki().index,a);return(_r(u)?u:a)[11]}(),a})(),Ov=(()=>{class a{}return a.\u0275prov=ut({token:a,providedIn:"root",factory:()=>null}),a})();class tT{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const nT=new tT("15.1.2"),jm={};function Nv(a){return a.ngOriginalError}class Pr{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Nv(l);for(;u&&Nv(u);)u=Nv(u);return u||null}}function Cl(a){return a instanceof Function?a():a}function Bv(a,l,u){let h=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===h||a.charCodeAt(f+m)<=32)return f}u=f+1}}const Ep="ng-template";function rd(a,l,u){let h=0;for(;h<a.length;){let f=a[h++];if(u&&"class"===f){if(f=a[h],-1!==Bv(f.toLowerCase(),l,0))return!0}else if(1===f){for(;h<a.length&&"string"==typeof(f=a[h++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function Km(a){return 4===a.type&&a.value!==Ep}function Vx(a,l,u){return l===(4!==a.type||u?a.value:Ep)}function jn(a,l,u){let h=4;const f=a.attrs||[],m=function Uv(a){for(let l=0;l<a.length;l++)if(tl(a[l]))return l;return a.length}(f);let w=!1;for(let T=0;T<l.length;T++){const I=l[T];if("number"!=typeof I){if(!w)if(4&h){if(h=2|1&h,""!==I&&!Vx(a,I,u)||""===I&&1===l.length){if(Si(h))return!1;w=!0}}else{const x=8&h?I:l[++T];if(8&h&&null!==a.attrs){if(!rd(a.attrs,x,u)){if(Si(h))return!1;w=!0}continue}const B=Ip(8&h?"class":I,f,Km(a),u);if(-1===B){if(Si(h))return!1;w=!0;continue}if(""!==x){let W;W=B>m?"":f[B+1].toLowerCase();const ne=8&h?W:null;if(ne&&-1!==Bv(ne,x,0)||2&h&&x!==W){if(Si(h))return!1;w=!0}}}}else{if(!w&&!Si(h)&&!Si(I))return!1;if(w&&Si(I))continue;w=!1,h=I|1&h}}return Si(h)||w}function Si(a){return 0==(1&a)}function Ip(a,l,u,h){if(null===l)return-1;let f=0;if(h||!u){let m=!1;for(;f<l.length;){const w=l[f];if(w===a)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let T=l[++f];for(;"string"==typeof T;)T=l[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function sd(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function Zm(a,l,u=!1){for(let h=0;h<l.length;h++)if(jn(a,l[h],u))return!0;return!1}function rT(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let f=0;f<a.length;f++)if(a[f]!==h[f])continue e;return!0}}return!1}function Tl(a,l){return a?":not("+l.trim()+")":l}function Hv(a){let l=a[0],u=1,h=2,f="",m=!1;for(;u<a.length;){let w=a[u];if("string"==typeof w)if(2&h){const T=a[++u];f+="["+w+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?f+="."+w:4&h&&(f+=" "+w);else""!==f&&!Si(w)&&(l+=Tl(m,f),f=""),h=w,m=m||!Si(h);u++}return""!==f&&(l+=Tl(m,f)),l}const zt={};function oT(a){aT(un(),ye(),ar()+a,!1)}function aT(a,l,u,h){if(!h)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&Js(l,m,u)}else{const m=a.preOrderHooks;null!==m&&fa(l,m,0,u)}da(u)}function dT(a,l=null,u=null,h){const f=hT(a,l,u,h);return f.resolveInjectorInitializers(),f}function hT(a,l=null,u=null,h,f=new Set){const m=[u||xt,Mx(a)];return h=h||("object"==typeof a?void 0:de(a)),new Av(m,l||zm(),h||null,f)}let od=(()=>{class a{static create(u,h){if(Array.isArray(u))return dT({name:""},h,u,"");{const f=u.name??"";return dT({name:f},u.parent,u.providers,f)}}}return a.THROW_IF_NOT_FOUND=Bn,a.NULL=new Sv,a.\u0275prov=ut({token:a,providedIn:"any",factory:()=>Je(ed)}),a.__NG_ELEMENT_ID__=-1,a})();function ld(a,l=It.Default){const u=ye();return null===u?Je(a,l):Uf(ki(),u,Q(a),l)}function CT(){throw new Error("invalid")}function Qv(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const m=u[h+1];if(-1!==m){const w=a.data[m];vu(u[h]),w.contentQueries(2,l[m],m)}}}function cd(a,l,u,h,f,m,w,T,I,x,R){const B=l.blueprint.slice();return B[0]=f,B[2]=76|h,(null!==R||a&&1024&a[2])&&(B[2]|=1024),Ka(B),B[3]=B[15]=a,B[8]=u,B[10]=w||a&&a[10],B[11]=T||a&&a[11],B[12]=I||a&&a[12]||null,B[9]=x||a&&a[9]||null,B[6]=m,B[20]=function Ta(){return ep++}(),B[21]=R,B[16]=2==l.type?a[16]:B,B}function ud(a,l,u,h,f){let m=a.data[l];if(null===m)m=function Jv(a,l,u,h,f){const m=Ya(),w=$l(),I=a.data[l]=function e_(a,l,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,u,l,h,f);return null===a.firstChild&&(a.firstChild=I),null!==m&&(w?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(a,l,u,h,f),function Qd(){return Vt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const w=function zl(){const a=Vt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return vr(m,!0),m}function Dp(a,l,u,h){if(0===u)return-1;const f=l.length;for(let m=0;m<u;m++)l.push(h),a.blueprint.push(h),a.data.push(null);return f}function Xv(a,l,u){Wl(l);try{const h=a.viewQuery;null!==h&&a_(1,h,u);const f=a.template;null!==f&&ew(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Qv(a,l),a.staticViewQueries&&a_(2,a.viewQuery,u);const m=a.components;null!==m&&function ET(a,l){for(let u=0;u<l.length;u++)cw(a,l[u])}(l,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,dm()}}function xh(a,l,u,h){const f=l[2];if(128!=(128&f)){Wl(l);try{Ka(l),function Qs(a){return Vt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&ew(a,l,u,2,h);const w=3==(3&f);if(w){const x=a.preOrderCheckHooks;null!==x&&Js(l,x,null)}else{const x=a.preOrderHooks;null!==x&&fa(l,x,0,null),kr(l,0)}if(function Qx(a){for(let l=Hu(a);null!==l;l=np(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const f=u[h];512&f[2]||Za(f[3],1),f[2]|=512}}}(l),function kp(a){for(let l=Hu(a);null!==l;l=np(l))for(let u=10;u<l.length;u++){const h=l[u],f=h[1];ua(h)&&xh(f,h,f.template,h[8])}}(l),null!==a.contentQueries&&Qv(a,l),w){const x=a.contentCheckHooks;null!==x&&Js(l,x)}else{const x=a.contentHooks;null!==x&&fa(l,x,1),kr(l,1)}!function TT(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)da(~f);else{const m=f,w=u[++h],T=u[++h];Jd(w,m),T(2,l[m])}}}finally{da(-1)}}(a,l);const T=a.components;null!==T&&function Kx(a,l){for(let u=0;u<l.length;u++)Jx(a,l[u])}(l,T);const I=a.viewQuery;if(null!==I&&a_(2,I,h),w){const x=a.viewCheckHooks;null!==x&&Js(l,x)}else{const x=a.viewHooks;null!==x&&fa(l,x,2),kr(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,Za(l[3],-1))}finally{dm()}}}function ew(a,l,u,h,f){const m=ar(),w=2&h;try{da(-1),w&&l.length>22&&aT(a,l,22,!1),u(h,f)}finally{da(m)}}function tw(a,l,u){if(za(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const w=a.data[m];w.contentQueries&&w.contentQueries(1,u[m],m)}}}function nw(a,l,u){Gl()&&(function kT(a,l,u,h){const f=u.directiveStart,m=u.directiveEnd;Kr(u)&&function Ap(a,l,u){const h=oi(l,a),f=El(u),m=a[10],w=r_(a,cd(a,f,null,u.onPush?32:16,h,l,m,m.createRenderer(h,u),null,null,null));a[l.index]=w}(l,u,a.data[f+u.componentOffset]),a.firstCreatePass||_a(u,l),Ni(h,l);const w=u.initialInputs;for(let T=f;T<m;T++){const I=a.data[T],x=Zr(l,a,T,u);Ni(x,l),null!==w&&ow(0,T-f,x,I,0,w),sr(I)&&(Ei(u.index,l)[8]=Zr(l,a,T,u))}}(a,l,u,oi(u,l)),64==(64&u.flags)&&RT(a,l,u))}function Jm(a,l,u=oi){const h=l.localNames;if(null!==h){let f=l.index+1;for(let m=0;m<h.length;m+=2){const w=h[m+1],T=-1===w?u(l,a):a[w];a[f++]=T}}}function El(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Xm(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Xm(a,l,u,h,f,m,w,T,I,x){const R=22+h,B=R+f,W=function IT(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:zt);return u}(R,B),ne="function"==typeof x?x():x;return W[1]={type:a,blueprint:W,template:u,queries:null,viewQuery:T,declTNode:l,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function xp(a,l,u,h){const f=l_(l);null===u?f.push(h):(f.push(u),a.firstCreatePass&&c_(a).push(h,f.length-1))}function ST(a,l,u,h){for(let f in a)if(a.hasOwnProperty(f)){u=null===u?{}:u;const m=a[f];null===h?DT(u,l,f,m):h.hasOwnProperty(f)&&DT(u,l,h[f],m)}return u}function DT(a,l,u,h){a.hasOwnProperty(u)?a[u].push(l,h):a[u]=[l,h]}function AT(a,l){const u=Ei(l,a);16&u[2]||(u[2]|=32)}function iw(a,l,u,h){let f=!1;if(Gl()){const m=null===h?null:{"":-1},w=function i_(a,l){const u=a.directiveRegistry;let h=null,f=null;if(u)for(let m=0;m<u.length;m++){const w=u[m];if(Zm(l,w.selectors,!1))if(h||(h=[]),sr(w))if(null!==w.findHostDirectiveDefs){const T=[];f=f||new Map,w.findHostDirectiveDefs(w,T,f),h.unshift(...T,w),sw(a,l,T.length)}else h.unshift(w),sw(a,l,0);else f=f||new Map,w.findHostDirectiveDefs?.(w,h,f),h.push(w)}return null===h?null:[h,f]}(a,u);let T,I;null===w?T=I=null:[T,I]=w,null!==T&&(f=!0,MT(a,l,u,T,m,I)),m&&function Ah(a,l,u){if(l){const h=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=u[l[f+1]];if(null==m)throw new ge(-301,!1);h.push(l[f],m)}}}(u,h,m)}return u.mergedAttrs=Ms(u.mergedAttrs,u.attrs),f}function MT(a,l,u,h,f,m){for(let x=0;x<h.length;x++)Du(_a(u,l),a,h[x].type);!function PT(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,h.length);for(let x=0;x<h.length;x++){const R=h[x];R.providersResolver&&R.providersResolver(R)}let w=!1,T=!1,I=Dp(a,l,h.length,null);for(let x=0;x<h.length;x++){const R=h[x];u.mergedAttrs=Ms(u.mergedAttrs,R.hostAttrs),NT(a,u,l,I,R),OT(I,R,f),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const B=R.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),w=!0),!T&&(B.ngOnChanges||B.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),T=!0),I++}!function Zx(a,l,u){const f=l.directiveEnd,m=a.data,w=l.attrs,T=[];let I=null,x=null;for(let R=l.directiveStart;R<f;R++){const B=m[R],W=u?u.get(B):null,be=W?W.outputs:null;I=ST(B.inputs,R,I,W?W.inputs:null),x=ST(B.outputs,R,x,be);const We=null===I||null===w||Km(l)?null:aw(I,R,w);T.push(We)}null!==I&&(I.hasOwnProperty("class")&&(l.flags|=8),I.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=T,l.inputs=I,l.outputs=x}(a,u,m)}function RT(a,l,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,w=function _u(){return Vt.lFrame.currentDirectiveIndex}();try{da(m);for(let T=h;T<f;T++){const I=a.data[T],x=l[T];yu(T),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&rw(I,x)}}finally{da(-1),yu(w)}}function rw(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function sw(a,l,u){l.componentOffset=u,(a.components||(a.components=[])).push(l.index)}function OT(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;sr(l)&&(u[""]=a)}}function NT(a,l,u,h,f){a.data[h]=f;const m=f.factory||(f.factory=vo(f.type)),w=new ga(m,sr(f),ld);a.blueprint[h]=w,u[h]=w,function Yx(a,l,u,h,f){const m=f.hostBindings;if(m){let w=a.hostBindingOpCodes;null===w&&(w=a.hostBindingOpCodes=[]);const T=~l.index;(function n_(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(w)!=T&&w.push(T),w.push(u,h,m)}}(a,l,h,Dp(a,u,f.hostVars,zt),f)}function Ns(a,l,u,h,f,m){const w=oi(a,l);!function Mp(a,l,u,h,f,m,w){if(null==m)a.removeAttribute(l,f,u);else{const T=null==w?ke(m):w(m,h||"",f);a.setAttribute(l,f,T,u)}}(l[11],w,m,a.value,u,h,f)}function ow(a,l,u,h,f,m){const w=m[l];if(null!==w){const T=h.setInput;for(let I=0;I<w.length;){const x=w[I++],R=w[I++],B=w[I++];null!==T?h.setInput(u,B,x,R):u[R]=B}}}function aw(a,l,u){let h=null,f=0;for(;f<u.length;){const m=u[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const w=a[m];for(let T=0;T<w.length;T+=2)if(w[T]===l){h.push(m,w[T+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return h}function FT(a,l,u,h){return[a,!0,!1,l,null,0,h,u,null,null]}function Jx(a,l){const u=Ei(l,a);if(ua(u)){const h=u[1];48&u[2]?xh(h,u,h.template,u[8]):u[5]>0&&lw(u)}}function lw(a){for(let h=Hu(a);null!==h;h=np(h))for(let f=10;f<h.length;f++){const m=h[f];if(ua(m))if(512&m[2]){const w=m[1];xh(w,m,w.template,m[8])}else m[5]>0&&lw(m)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Ei(u[h],a);ua(f)&&f[5]>0&&lw(f)}}function cw(a,l){const u=Ei(l,a),h=u[1];(function uw(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),Xv(h,u,u[8])}function r_(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function s_(a){for(;a;){a[2]|=32;const l=fl(a);if($a(a)&&!l)return a;a=l}return null}function o_(a,l,u,h=!0){const f=l[10];f.begin&&f.begin();try{xh(a,l,a.template,u)}catch(w){throw h&&kc(l,w),w}finally{f.end&&f.end()}}function a_(a,l,u){vu(0),l(a,u)}function l_(a){return a[7]||(a[7]=[])}function c_(a){return a.cleanup||(a.cleanup=[])}function kc(a,l){const u=a[9],h=u?u.get(Pr,null):null;h&&h.handleError(l)}function Op(a,l,u,h,f){for(let m=0;m<u.length;){const w=u[m++],T=u[m++],I=l[w],x=a.data[w];null!==x.setInput?x.setInput(I,f,h,T):I[T]=f}}function Da(a,l,u){const h=Co(l,a);!function Sm(a,l,u){a.setValue(l,u)}(a[11],h,u)}function u_(a,l,u){let h=u?a.styles:null,f=u?a.classes:null,m=0;if(null!==l)for(let w=0;w<l.length;w++){const T=l[w];"number"==typeof T?m=T:1==m?f=ue(f,T):2==m&&(h=ue(h,T+": "+l[++w]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=f:a.classesWithoutHost=f}function dd(a,l,u,h,f=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&h.push(Jn(m)),Wr(m))for(let T=10;T<m.length;T++){const I=m[T],x=I[1].firstChild;null!==x&&dd(I[1],I,x,h)}const w=u.type;if(8&w)dd(a,l,u.child,h);else if(32&w){const T=vi(u,l);let I;for(;I=T();)h.push(I)}else if(16&w){const T=op(l,u);if(Array.isArray(T))h.push(...T);else{const I=fl(l[16]);dd(I[1],I,T,h,!0)}}u=f?u.projectionNext:u.next}return h}class Mh{get rootNodes(){const l=this._lView,u=l[1];return dd(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Wr(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(ch(l,h),ol(u,h))}this._attachedToViewContainer=!1}ip(this._lView[1],this._lView)}onDestroy(l){xp(this._lView[1],this._lView,null,l)}markForCheck(){s_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){o_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _c(a,l){qu(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=l}}class Xx extends Mh{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;o_(l[1],l,l[8],!1)}checkNoChanges(){}get context(){return null}}class kh extends Dc{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=cn(l);return new Pp(u,this.ngModule)}}function d_(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class t1{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){h=Rt(h);const f=this.injector.get(l,jm,h);return f!==jm||u===jm?f:this.parentInjector.get(l,u,h)}}class Pp extends QC{get inputs(){return d_(this.componentDef.inputs)}get outputs(){return d_(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function Sh(a){return a.map(Hv).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,h,f){let m=(f=f||this.ngModule)instanceof bl?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const w=m?new t1(l,m):l,T=w.get(wp,null);if(null===T)throw new ge(407,!1);const I=w.get(Ov,null),x=T.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=h?function Ac(a,l,u){return a.selectRootElement(l,u===sn.ShadowDom)}(x,h,this.componentDef.encapsulation):Gu(x,R,function e1(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(R)),W=this.componentDef.onPush?288:272,ne=Xm(0,null,null,1,0,null,null,null,null,null),be=cd(null,ne,null,W,null,null,T,x,I,w,null);let We,it;Wl(be);try{const yt=this.componentDef;let Nt,Fe=null;yt.findHostDirectiveDefs?(Nt=[],Fe=new Map,yt.findHostDirectiveDefs(yt,Nt,Fe),Nt.push(yt)):Nt=[yt];const Yt=function VT(a,l){const u=a[1];return a[22]=l,ud(u,22,2,"#host",null)}(be,B),ti=function n1(a,l,u,h,f,m,w,T){const I=f[1];!function Np(a,l,u,h){for(const f of a)l.mergedAttrs=Ms(l.mergedAttrs,f.hostAttrs);null!==l.mergedAttrs&&(u_(l,l.mergedAttrs,!0),null!==u&&ro(h,u,l))}(h,a,l,w);const x=m.createRenderer(l,u),R=cd(f,El(u),null,u.onPush?32:16,f[a.index],a,m,x,T||null,null,null);return I.firstCreatePass&&sw(I,a,h.length-1),r_(f,R),f[a.index]=R}(Yt,B,yt,Nt,be,T,x);it=ca(ne,22),B&&function Fp(a,l,u,h){if(h)In(a,u,["ng-version",nT.full]);else{const{attrs:f,classes:m}=function sT(a){const l=[],u=[];let h=1,f=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++h]):8===f&&u.push(m);else{if(!Si(f))break;f=m}h++}return{attrs:l,classes:u}}(l.selectors[0]);f&&In(a,u,f),m&&m.length>0&&Oo(a,u,m.join(" "))}}(x,yt,B,h),void 0!==u&&function r1(a,l,u){const h=a.projection=[];for(let f=0;f<l.length;f++){const m=u[f];h.push(null!=m?Array.from(m):null)}}(it,this.ngContentSelectors,u),We=function xa(a,l,u,h,f,m){const w=ki(),T=f[1],I=oi(w,f);MT(T,f,w,u,null,h);for(let R=0;R<u.length;R++)Ni(Zr(f,T,w.directiveStart+R,w),f);RT(T,f,w),I&&Ni(I,f);const x=Zr(f,T,w.directiveStart+w.componentOffset,w);if(a[8]=f[8]=x,null!==m)for(const R of m)R(x,l);return tw(T,w,a),x}(ti,yt,Nt,Fe,be,[BT]),Xv(ne,be,null)}finally{dm()}return new dw(this.componentType,We,nd(it,be),be,it)}}class dw extends Ox{constructor(l,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Xx(f),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[l])){const m=this._rootLView;Op(m[1],m,f,l,u),AT(m,this._tNode.index)}}get injector(){return new Qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function BT(){const a=ki();Ja(ye()[1],a)}function hd(a){let l=function h_(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let f;if(sr(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new ge(903,!1);f=l.\u0275dir}if(f){if(u){h.push(f);const w=a;w.inputs=fw(a.inputs),w.declaredInputs=fw(a.declaredInputs),w.outputs=fw(a.outputs);const T=f.hostBindings;T&&s1(a,T);const I=f.viewQuery,x=f.contentQueries;if(I&&oo(a,I),x&&UT(a,x),me(a.inputs,f.inputs),me(a.declaredInputs,f.declaredInputs),me(a.outputs,f.outputs),sr(f)&&f.data.animation){const R=a.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const T=m[w];T&&T.ngInherit&&T(a),T===hd&&(u=!1)}}l=Object.getPrototypeOf(l)}!function Lp(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const f=a[h];f.hostVars=l+=f.hostVars,f.hostAttrs=Ms(f.hostAttrs,u=Ms(u,f.hostAttrs))}}(h)}function fw(a){return a===Un?{}:a===xt?[]:a}function oo(a,l){const u=a.viewQuery;a.viewQuery=u?(h,f)=>{l(h,f),u(h,f)}:l}function UT(a,l){const u=a.contentQueries;a.contentQueries=u?(h,f,m)=>{l(h,f,m),u(h,f,m)}:l}function s1(a,l){const u=a.hostBindings;a.hostBindings=u?(h,f)=>{l(h,f),u(h,f)}:l}let Vp=null;function No(){if(!Vp){const a=Bt.Symbol;if(a&&a.iterator)Vp=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Vp=h)}}}return Vp}function Bp(a){return!!Rh(a)&&(Array.isArray(a)||!(a instanceof Map)&&No()in a)}function Rh(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ao(a,l,u){return a[l]=u}function Up(a,l){return a[l]}function Nr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function fd(a,l,u,h){const f=Nr(a,l,u);return Nr(a,l+1,h)||f}function Hp(a,l,u,h,f){const m=fd(a,l,u,h);return Nr(a,l+2,f)||m}function lo(a,l,u,h,f,m){const w=fd(a,l,u,h);return fd(a,l+2,f,m)||w}function mw(a,l,u,h){const f=ye();return Nr(f,Eo(),l)&&(un(),Ns(Mn(),f,a,l,u,h)),mw}function pd(a,l,u,h,f,m){const T=fd(a,function wr(){return Vt.lFrame.bindingIndex}(),u,f);return fs(2),T?l+ke(u)+h+ke(f)+m:zt}function m_(a,l,u,h,f,m,w,T){const I=ye(),x=un(),R=a+22,B=x.firstCreatePass?function d1(a,l,u,h,f,m,w,T,I){const x=l.consts,R=ud(l,a,4,w||null,xs(x,T));iw(l,u,R,xs(x,I)),Ja(l,R);const B=R.tViews=Xm(2,R,h,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,R),B.queries=l.queries.embeddedTView(R)),R}(R,x,I,l,u,h,f,m,w):x.data[R];vr(B,!1);const W=I[11].createComment("");ju(x,I,W,B),Ni(W,I),r_(I,I[R]=FT(W,I,W,B)),ou(B)&&nw(x,I,B),null!=w&&Jm(I,B,T)}function ww(a){return To(function Yd(){return Vt.lFrame.contextLView}(),22+a)}function bw(a,l,u){const h=ye();return Nr(h,Eo(),l)&&function ns(a,l,u,h,f,m,w,T){const I=oi(l,u);let R,x=l.inputs;!T&&null!=x&&(R=x[h])?(Op(a,u,R,h,f),Kr(l)&&AT(u,l.index)):3&l.type&&(h=function xT(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),f=null!=w?w(f,l.value||"",h):f,m.setProperty(I,h,f))}(un(),Mn(),h,a,l,h[11],u,!1),bw}function __(a,l,u,h,f){const w=f?"class":"style";Op(a,u,l.inputs[w],w,h)}function Fh(a,l,u,h){const f=ye(),m=un(),w=22+a,T=f[11],I=f[w]=Gu(T,l,function hm(){return Vt.lFrame.currentNamespace}()),x=m.firstCreatePass?function WT(a,l,u,h,f,m,w){const T=l.consts,x=ud(l,a,2,f,xs(T,m));return iw(l,u,x,xs(T,w)),null!==x.attrs&&u_(x,x.attrs,!1),null!==x.mergedAttrs&&u_(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(w,m,f,0,l,u,h):m.data[w];return vr(x,!0),ro(T,I,x),32!=(32&x.flags)&&ju(m,f,I,x),0===function Hl(){return Vt.lFrame.elementDepthCount}()&&Ni(I,f),function hu(){Vt.lFrame.elementDepthCount++}(),ou(x)&&(nw(m,f,x),tw(m,x,f)),null!==h&&Jm(f,x),Fh}function zp(){let a=ki();$l()?jl():(a=a.parent,vr(a,!1));const l=a;!function fu(){Vt.lFrame.elementDepthCount--}();const u=un();return u.firstCreatePass&&(Ja(u,a),za(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Xa(a){return 0!=(8&a.flags)}(l)&&__(u,l,ye(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Zl(a){return 0!=(16&a.flags)}(l)&&__(u,l,ye(),l.stylesWithoutHost,!1),zp}function Fr(a,l,u,h){return Fh(a,l,u,h),zp(),Fr}function Lo(a,l,u){const h=ye(),f=un(),m=a+22,w=f.firstCreatePass?function y_(a,l,u,h,f){const m=l.consts,w=xs(m,h),T=ud(l,a,8,"ng-container",w);return null!==w&&u_(T,w,!0),iw(l,u,T,xs(m,f)),null!==l.queries&&l.queries.elementStart(l,T),T}(m,f,h,l,u):f.data[m];vr(w,!0);const T=h[m]=h[11].createComment("");return ju(f,h,T,w),Ni(T,h),ou(w)&&(nw(f,h,w),tw(f,w,h)),null!=u&&Jm(h,w),Lo}function md(){let a=ki();const l=un();return $l()?jl():(a=a.parent,vr(a,!1)),l.firstCreatePass&&(Ja(l,a),za(a)&&l.queries.elementEnd(a)),md}function _s(a,l,u){return Lo(a,l,u),md(),_s}function Pc(){return ye()}function v_(a){return!!a&&"function"==typeof a.then}function Cw(a){return!!a&&"function"==typeof a.subscribe}const Nc=Cw;function KT(a,l,u,h){const f=ye(),m=un(),w=ki();return function w_(a,l,u,h,f,m,w){const T=ou(h),x=a.firstCreatePass&&c_(a),R=l[8],B=l_(l);let W=!0;if(3&h.type||w){const We=oi(h,l),it=w?w(We):We,yt=B.length,Nt=w?Yt=>w(Jn(Yt[h.index])):h.index;let Fe=null;if(!w&&T&&(Fe=function f1(a,l,u,h){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===u&&f[m+1]===h){const T=l[7],I=f[m+2];return T.length>I?T[I]:null}"string"==typeof w&&(m+=2)}return null}(a,l,f,h.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=m,Fe.__ngLastListenerFn__=m,W=!1;else{m=QT(h,l,R,m,!1);const Yt=u.listen(it,f,m);B.push(m,Yt),x&&x.push(f,Nt,yt,yt+1)}}else m=QT(h,l,R,m,!1);const ne=h.outputs;let be;if(W&&null!==ne&&(be=ne[f])){const We=be.length;if(We)for(let it=0;it<We;it+=2){const ti=l[be[it]][be[it+1]].subscribe(m),Di=B.length;B.push(m,ti),x&&x.push(f,h.index,Di,-(Di+1))}}}(m,f,f[11],w,a,l,h),KT}function YT(a,l,u,h){try{return!1!==u(h)}catch(f){return kc(a,f),!1}}function QT(a,l,u,h,f){return function m(w){if(w===Function)return h;s_(a.componentOffset>-1?Ei(a.index,l):l);let I=YT(l,0,h,w),x=m.__ngNextListenerFn__;for(;x;)I=YT(l,0,x,w)&&I,x=x.__ngNextListenerFn__;return f&&!1===I&&(w.preventDefault(),w.returnValue=!1),I}}function JT(a=1){return function fv(a){return(Vt.lFrame.contextLView=function th(a,l){for(;a>0;)l=l[15],a--;return l}(a,Vt.lFrame.contextLView))[8]}(a)}function p1(a,l){let u=null;const h=function iT(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===h?Zm(a,m,!0):rT(h,m))return f}else u=f}return u}function Lh(a){const l=ye()[16][6];if(!l.projection){const h=l.projection=wa(a?a.length:1,null),f=h.slice();let m=l.child;for(;null!==m;){const w=a?p1(m,a):0;null!==w&&(f[w]?f[w].projectionNext=m:h[w]=m,f[w]=m),m=m.next}}}function $p(a,l=0,u){const h=ye(),f=un(),m=ud(f,22+a,16,null,u||null);null===m.projection&&(m.projection=l),jl(),32!=(32&m.flags)&&function ap(a,l,u){Wu(l[11],0,l,u,rp(a,u,l),Rm(u.parent||l[6],u,l))}(f,h,m)}function b_(a,l){return a<<17|l<<2}function Fc(a){return a>>17&32767}function Aw(a){return 2|a}function _d(a){return(131068&a)>>2}function Mw(a,l){return-131069&a|l<<2}function kw(a){return 1|a}function tE(a,l,u,h,f){const m=a[u+1],w=null===l;let T=h?Fc(m):_d(m),I=!1;for(;0!==T&&(!1===I||w);){const R=a[T+1];v1(a[T],l)&&(I=!0,a[T+1]=h?kw(R):Aw(R)),T=h?Fc(R):_d(R)}I&&(a[u+1]=h?Aw(m):kw(m))}function v1(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&ze(a,l)>=0}const Yi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nE(a){return a.substring(Yi.key,Yi.keyEnd)}function w1(a){return a.substring(Yi.value,Yi.valueEnd)}function iE(a,l){const u=Yi.textEnd;return u===l?-1:(l=Yi.keyEnd=function C1(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Yi.key=l,u),yd(a,l,u))}function rE(a,l){const u=Yi.textEnd;let h=Yi.key=yd(a,l,u);return u===h?-1:(h=Yi.keyEnd=function sE(a,l,u){let h;for(;l<u&&(45===(h=a.charCodeAt(l))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)l++;return l}(a,h,u),h=oE(a,h,u),h=Yi.value=yd(a,h,u),h=Yi.valueEnd=function T1(a,l,u){let h=-1,f=-1,m=-1,w=l,T=w;for(;w<u;){const I=a.charCodeAt(w++);if(59===I)return T;34===I||39===I?T=w=aE(a,I,w,u):l===w-4&&85===m&&82===f&&76===h&&40===I?T=w=aE(a,41,w,u):I>32&&(T=w),m=f,f=h,h=-33&I}return T}(a,h,u),oE(a,h,u))}function C_(a){Yi.key=0,Yi.keyEnd=0,Yi.value=0,Yi.valueEnd=0,Yi.textEnd=a.length}function yd(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function oE(a,l,u,h){return(l=yd(a,l,u))<u&&l++,l}function aE(a,l,u,h){let f=-1,m=u;for(;m<h;){const w=a.charCodeAt(m++);if(w==l&&92!==f)return m;f=92==w&&92===f?0:w}throw new Error}function T_(a,l,u){return Uo(a,l,u,!1),T_}function Rw(a,l){return Uo(a,l,null,!0),Rw}function Bo(a){Ho(dE,KP,a,!1)}function KP(a,l){for(let u=function Vo(a){return C_(a),rE(a,yd(a,0,Yi.textEnd))}(l);u>=0;u=rE(l,u))dE(a,nE(l),w1(l))}function Ow(a){Ho(cr,Aa,a,!0)}function Aa(a,l){for(let u=function b1(a){return C_(a),iE(a,yd(a,0,Yi.textEnd))}(l);u>=0;u=iE(l,u))cr(a,nE(l),!0)}function Uo(a,l,u,h){const f=ye(),m=un(),w=fs(2);m.firstUpdatePass&&cE(m,a,w,h),l!==zt&&Nr(f,w,l)&&Pw(m,m.data[ar()],f,f[11],a,f[w+1]=function M1(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=de(C(a)))),a}(l,u),h,w)}function Ho(a,l,u,h){const f=un(),m=fs(2);f.firstUpdatePass&&cE(f,null,m,h);const w=ye();if(u!==zt&&Nr(w,m,u)){const T=f.data[ar()];if(fE(T,h)&&!lE(f,m)){let I=h?T.classesWithoutHost:T.stylesWithoutHost;null!==I&&(u=ue(I,u||"")),__(f,T,w,u,h)}else!function A1(a,l,u,h,f,m,w,T){f===zt&&(f=xt);let I=0,x=0,R=0<f.length?f[0]:null,B=0<m.length?m[0]:null;for(;null!==R||null!==B;){const W=I<f.length?f[I+1]:void 0,ne=x<m.length?m[x+1]:void 0;let We,be=null;R===B?(I+=2,x+=2,W!==ne&&(be=B,We=ne)):null===B||null!==R&&R<B?(I+=2,be=R):(x+=2,be=B,We=ne),null!==be&&Pw(a,l,u,h,be,We,w,T),R=I<f.length?f[I]:null,B=x<m.length?m[x]:null}}(f,T,w,w[11],w[m+1],w[m+1]=function x1(a,l,u){if(null==u||""===u)return xt;const h=[],f=C(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)a(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&a(h,m,f[m]);else"string"==typeof f&&l(h,f);return h}(a,l,u),h,m)}}function lE(a,l){return l>=a.expandoStartIndex}function cE(a,l,u,h){const f=a.data;if(null===f[u+1]){const m=f[ar()],w=lE(a,u);fE(m,h)&&null===l&&!w&&(l=!1),l=function E1(a,l,u,h){const f=function As(a){const l=Vt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let m=h?l.residualClasses:l.residualStyles;if(null===f)0===(h?l.classBindings:l.styleBindings)&&(u=E_(u=uE(null,a,l,u,h),l.attrs,h),m=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==f)if(u=uE(f,a,l,u,h),null===m){let I=function I1(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==_d(h))return a[Fc(h)]}(a,l,h);void 0!==I&&Array.isArray(I)&&(I=uE(null,a,l,I[1],h),I=E_(I,l.attrs,h),function S1(a,l,u,h){a[Fc(u?l.classBindings:l.styleBindings)]=h}(a,l,h,I))}else m=function D1(a,l,u){let h;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)h=E_(h,a[m].hostAttrs,u);return E_(h,l.attrs,u)}(a,l,h)}return void 0!==m&&(h?l.residualClasses=m:l.residualStyles=m),u}(f,m,l,h),function _1(a,l,u,h,f,m){let w=m?l.classBindings:l.styleBindings,T=Fc(w),I=_d(w);a[h]=u;let R,x=!1;if(Array.isArray(u)?(R=u[1],(null===R||ze(u,R)>0)&&(x=!0)):R=u,f)if(0!==I){const W=Fc(a[T+1]);a[h+1]=b_(W,T),0!==W&&(a[W+1]=Mw(a[W+1],h)),a[T+1]=function g1(a,l){return 131071&a|l<<17}(a[T+1],h)}else a[h+1]=b_(T,0),0!==T&&(a[T+1]=Mw(a[T+1],h)),T=h;else a[h+1]=b_(I,0),0===T?T=h:a[I+1]=Mw(a[I+1],h),I=h;x&&(a[h+1]=Aw(a[h+1])),tE(a,R,h,!0),tE(a,R,h,!1),function y1(a,l,u,h,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&ze(m,l)>=0&&(u[h+1]=kw(u[h+1]))}(l,R,a,h,m),w=b_(T,I),m?l.classBindings=w:l.styleBindings=w}(f,m,l,u,w,h)}}function uE(a,l,u,h,f){let m=null;const w=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<w&&(m=l[T],h=E_(h,m.hostAttrs,f),m!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function E_(a,l,u){const h=u?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const w=l[m];"number"==typeof w?f=w:f===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),cr(a,w,!!u||l[++m]))}return void 0===a?null:a}function dE(a,l,u){cr(a,l,C(u))}function Pw(a,l,u,h,f,m,w,T){if(!(3&l.type))return;const I=a.data,x=I[T+1],R=function m1(a){return 1==(1&a)}(x)?hE(I,l,u,f,_d(x),w):void 0;I_(R)||(I_(m)||function eE(a){return 2==(2&a)}(x)&&(m=hE(I,null,u,f,T,w)),function Pm(a,l,u,h,f){if(l)f?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Xr.DashCase;null==f?a.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Xr.Important),a.setStyle(u,h,f,m))}}(h,w,Co(ar(),u),f,m))}function hE(a,l,u,h,f,m){const w=null===l;let T;for(;f>0;){const I=a[f],x=Array.isArray(I),R=x?I[1]:I,B=null===R;let W=u[f+1];W===zt&&(W=B?xt:void 0);let ne=B?Kn(W,h):R===h?W:void 0;if(x&&!I_(ne)&&(ne=Kn(I,h)),I_(ne)&&(T=ne,w))return T;const be=a[f+1];f=w?Fc(be):_d(be)}if(null!==l){let I=m?l.residualClasses:l.residualStyles;null!=I&&(T=Kn(I,h))}return T}function I_(a){return void 0!==a}function fE(a,l){return 0!=(a.flags&(l?8:16))}function Sl(a,l=""){const u=ye(),h=un(),f=a+22,m=h.firstCreatePass?ud(h,f,1,l,null):h.data[f],w=u[f]=function Ea(a,l){return a.createText(l)}(u[11],l);ju(h,u,w,m),vr(m,!1)}function Qi(a){return Lr("",a,""),Qi}function Lr(a,l,u){const h=ye(),f=function Rc(a,l,u,h){return Nr(a,Eo(),u)?l+ke(u)+h:zt}(h,a,l,u);return f!==zt&&Da(h,ar(),f),Lr}function vd(a,l,u,h,f){const m=ye(),w=pd(m,a,l,u,h,f);return w!==zt&&Da(m,ar(),w),vd}const Bh=void 0;var Lw=["en",[["a","p"],["AM","PM"],Bh],[["AM","PM"],Bh,Bh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bh,"{1} 'at' {0}",Bh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function YP(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let wd={};function Ji(a){const l=function z1(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=M_(l);if(u)return u;const h=l.split("-")[0];if(u=M_(h),u)return u;if("en"===h)return Lw;throw new ge(701,!1)}function Kp(a){return Ji(a)[Ot.PluralCase]}function M_(a){return a in wd||(wd[a]=Bt.ng&&Bt.ng.common&&Bt.ng.common.locales&&Bt.ng.common.locales[a]),wd[a]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const Uh="en-US";let R_=Uh;function WE(a,l,u,h,f){if(a=Q(a),Array.isArray(a))for(let m=0;m<a.length;m++)WE(a[m],l,u,h,f);else{const m=un(),w=ye();let T=Ut(a)?a:Q(a.provide),I=YC(a);const x=ki(),R=1048575&x.providerIndexes,B=x.directiveStart,W=x.providerIndexes>>20;if(Ut(a)||!a.multi){const ne=new ga(I,f,ld),be=KE(T,l,f?R:R+W,B);-1===be?(Du(_a(x,w),m,T),eb(m,a,l.length),l.push(T),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(ne),w.push(ne)):(u[be]=ne,w[be]=ne)}else{const ne=KE(T,l,R+W,B),be=KE(T,l,R,R+W),it=be>=0&&u[be];if(f&&!it||!f&&!(ne>=0&&u[ne])){Du(_a(x,w),m,T);const yt=function tb(a,l,u,h,f){const m=new ga(a,u,ld);return m.multi=[],m.index=l,m.componentProviders=0,hA(m,f,h&&!u),m}(f?uN:cN,u.length,f,h,I);!f&&it&&(u[be].providerFactory=yt),eb(m,a,l.length,0),l.push(T),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),u.push(yt),w.push(yt)}else eb(m,a,ne>-1?ne:be,hA(u[f?be:ne],I,!f&&h));!f&&h&&it&&u[be].componentProviders++}}}function eb(a,l,u,h){const f=Ut(l),m=function kx(a){return!!a.useClass}(l);if(f||m){const I=(m?Q(l.useClass):l).prototype.ngOnDestroy;if(I){const x=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const R=x.indexOf(u);-1===R?x.push(u,[h,I]):x[R+1].push(h,I)}else x.push(u,I)}}}function hA(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function KE(a,l,u,h){for(let f=u;f<h;f++)if(l[f]===a)return f;return-1}function cN(a,l,u,h){return ZE(this.multi,[])}function uN(a,l,u,h){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,T=Zr(u,u[1],this.providerFactory.index,h);m=T.slice(0,w),ZE(f,m);for(let I=w;I<T.length;I++)m.push(T[I])}else m=[],ZE(f,m);return m}function ZE(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function YE(a,l=[]){return u=>{u.providersResolver=(h,f)=>function lN(a,l,u){const h=un();if(h.firstCreatePass){const f=sr(a);WE(u,h.data,h.blueprint,f,!0),WE(l,h.data,h.blueprint,f,!1)}}(h,f?f(a):a,l)}}class Vc{}class U_{}function nb(a,l){return new H_(a,l??null)}class H_ extends Vc{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kh(this);const h=ji(l);this._bootstrapComponents=Cl(h.bootstrap),this._r3Injector=hT(l,u,[{provide:Vc,useValue:this},{provide:Dc,useValue:this.componentFactoryResolver}],de(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class tg extends U_{constructor(l){super(),this.moduleType=l}create(l){return new H_(this.moduleType,l)}}class ib extends Vc{constructor(l,u,h){super(),this.componentFactoryResolver=new kh(this),this.instance=null;const f=new Av([...l,{provide:Vc,useValue:this},{provide:Dc,useValue:this.componentFactoryResolver}],u||zm(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function ng(a,l,u=null){return new ib(a,l,u).injector}let dN=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=ZC(0,u.type),f=h.length>0?ng([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=ut({token:a,providedIn:"environment",factory:()=>new a(Je(bl))}),a})();function JE(a){a.getStandaloneInjector=l=>l.get(dN).getOrCreateStandaloneInjector(a)}function iI(a,l,u){const h=mi()+a,f=ye();return f[h]===zt?ao(f,h,u?l.call(u):l()):Up(f,h)}function rI(a,l,u,h){return function Bc(a,l,u,h,f,m){const w=l+u;return Nr(a,w,f)?ao(a,w+1,m?h.call(m,f):h(f)):Cd(a,w+1)}(ye(),mi(),a,l,u,h)}function ub(a,l,u,h,f){return xl(ye(),mi(),a,l,u,h,f)}function sI(a,l,u,h,f,m){return function cI(a,l,u,h,f,m,w,T){const I=l+u;return Hp(a,I,f,m,w)?ao(a,I+3,T?h.call(T,f,m,w):h(f,m,w)):Cd(a,I+3)}(ye(),mi(),a,l,u,h,f,m)}function oI(a,l,u,h,f,m,w){return function uI(a,l,u,h,f,m,w,T,I){const x=l+u;return lo(a,x,f,m,w,T)?ao(a,x+4,I?h.call(I,f,m,w,T):h(f,m,w,T)):Cd(a,x+4)}(ye(),mi(),a,l,u,h,f,m,w)}function aI(a,l,u,h,f,m,w,T){const I=mi()+a,x=ye(),R=lo(x,I,u,h,f,m);return Nr(x,I+4,w)||R?ao(x,I+5,T?l.call(T,u,h,f,m,w):l(u,h,f,m,w)):Up(x,I+5)}function G_(a,l,u,h,f,m,w,T,I){const x=mi()+a,R=ye(),B=lo(R,x,u,h,f,m);return fd(R,x+4,w,T)||B?ao(R,x+6,I?l.call(I,u,h,f,m,w,T):l(u,h,f,m,w,T)):Up(R,x+6)}function lI(a,l,u,h,f,m,w,T,I,x){const R=mi()+a,B=ye();let W=lo(B,R,u,h,f,m);return Hp(B,R+4,w,T,I)||W?ao(B,R+7,x?l.call(x,u,h,f,m,w,T,I):l(u,h,f,m,w,T,I)):Up(B,R+7)}function X(a,l,u,h){return function dI(a,l,u,h,f,m){let w=l+u,T=!1;for(let I=0;I<f.length;I++)Nr(a,w++,f[I])&&(T=!0);return T?ao(a,w,h.apply(m,f)):Cd(a,w)}(ye(),mi(),a,l,u,h)}function Cd(a,l){const u=a[l];return u===zt?void 0:u}function xl(a,l,u,h,f,m,w){const T=l+u;return fd(a,T,f,m)?ao(a,T+2,w?h.call(w,f,m):h(f,m)):Cd(a,T+2)}function hI(a,l){const u=un();let h;const f=a+22;u.firstCreatePass?(h=function fI(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=vo(h.type)),w=Vn(ld);try{const T=Do(!1),I=m();return Do(T),function h1(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,ye(),f,I),I}finally{Vn(w)}}function pI(a,l,u,h){const f=a+22,m=ye(),w=To(m,f);return function Wh(a,l){return a[1].data[l].pure}(m,f)?xl(m,mi(),l,w.transform,u,h,w):w.transform(u,h)}function Li(a){return l=>{setTimeout(a,void 0,l)}}const Ma=class Td extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let f=l,m=u||(()=>null),w=h;if(l&&"object"==typeof l){const I=l;f=I.next?.bind(I),m=I.error?.bind(I),w=I.complete?.bind(I)}this.__isAsync&&(m=Li(m),f&&(f=Li(f)),w&&(w=Li(w)));const T=super.subscribe({next:f,error:m,complete:w});return l instanceof te.w0&&l.add(T),T}};function _I(){return this._results[No()]()}class db{get changes(){return this._changes||(this._changes=new Ma)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=No(),h=db.prototype;h[u]||(h[u]=_I)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const f=function br(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function Fu(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let f=a[h],m=l[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rg=(()=>{class a{}return a.__NG_ELEMENT_ID__=bA,a})();const wA=rg,Kh=class extends wA{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tViews,f=cd(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(f[19]=w.createEmbeddedView(h)),Xv(h,f,l),new Mh(f)}};function bA(){return zo(ki(),ye())}function zo(a,l){return 4&a.type?new Kh(l,a,nd(a,l)):null}let sg=(()=>{class a{}return a.__NG_ELEMENT_ID__=Vr,a})();function Vr(){return hb(ki(),ye())}const Uc=sg,yI=class extends Uc{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return nd(this._hostTNode,this._hostLView)}get injector(){return new Qr(this._hostTNode,this._hostLView)}get parentInjector(){const l=il(this._hostTNode,this._hostLView);if(Iu(l)){const u=Jl(l,this._hostLView),h=Yl(l);return new Qr(u[1].data[h+8],u)}return new Qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=CA(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const w=l.createEmbeddedView(u||{},m);return this.insert(w,f),w}createComponent(l,u,h,f,m){const w=l&&!function ac(a){return"function"==typeof a}(l);let T;if(w)T=u;else{const B=u||{};T=B.index,h=B.injector,f=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const I=w?l:new Pp(cn(l)),x=h||this.parentInjector;if(!m&&null==I.ngModule){const W=(w?x:this.parentInjector).get(bl,null);W&&(m=W)}const R=I.create(x,f,void 0,m);return this.insert(R.hostView,T),R}insert(l,u){const h=l._lView,f=h[1];if(function Bl(a){return Wr(a[3])}(h)){const R=this.indexOf(l);if(-1!==R)this.detach(R);else{const B=h[3],W=new yI(B,B[6],B[3]);W.detach(W.indexOf(l))}}const m=this._adjustIndex(u),w=this._lContainer;!function Dm(a,l,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=l),h<m-10?(l[4]=u[f],lc(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const w=l[17];null!==w&&u!==w&&function xm(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(w,l);const T=l[19];null!==T&&T.insertView(a),l[2]|=64}(f,h,w,m);const T=Er(m,w),I=h[11],x=vc(I,w[7]);return null!==x&&function zu(a,l,u,h,f,m){h[0]=f,h[6]=l,qu(a,h,u,1,f,m)}(f,w[6],I,h,x,T),l.attachToViewContainerRef(),lc(z_(w),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=CA(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=ch(this._lContainer,u);h&&(ol(z_(this._lContainer),u),ip(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=ch(this._lContainer,u);return h&&null!=ol(z_(this._lContainer),u)?new Mh(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function CA(a){return a[8]}function z_(a){return a[8]||(a[8]=[])}function hb(a,l){let u;const h=l[a.index];if(Wr(h))u=h;else{let f;if(8&a.type)f=Jn(h);else{const m=l[11];f=m.createComment("");const w=oi(a,l);gl(m,vc(m,w),f,function bv(a,l){return a.nextSibling(l)}(m,w),!1)}l[a.index]=u=FT(h,l,f,a),r_(l,u)}return new yI(u,a,l)}class $_{constructor(l){this.queryList=l,this.matches=null}clone(){return new $_(this.queryList)}setDirty(){this.queryList.setDirty()}}class j_{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const w=u.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new j_(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==yb(l,u).matches&&this.queries[u].setDirty()}}class fb{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class q_{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(l,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new q_(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class W_{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new W_(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(l,u,vI(u,m)),this.matchTNodeWithReadOption(l,u,tc(u,l,m,!1,!1))}else h===rg?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,tc(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===xc||f===sg||f===rg&&4&u.type)this.addMatch(u.index,-2);else{const m=tc(u,l,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function vI(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function wI(a,l,u,h){return-1===u?function K_(a,l){return 11&a.type?nd(a,l):4&a.type?zo(a,l):null}(l,a):-2===u?function bI(a,l,u){return u===xc?nd(l,a):u===rg?zo(l,a):u===sg?hb(l,a):void 0}(a,l,h):Zr(a,a[1],u,l)}function pb(a,l,u,h){const f=l[19].queries[h];if(null===f.matches){const m=a.data,w=u.matches,T=[];for(let I=0;I<w.length;I+=2){const x=w[I];T.push(x<0?null:wI(l,m[x],w[I+1],u.metadata.read))}f.matches=T}return f.matches}function Z_(a,l,u,h){const f=a.queries.getByIndex(u),m=f.matches;if(null!==m){const w=pb(a,l,f,u);for(let T=0;T<m.length;T+=2){const I=m[T];if(I>0)h.push(w[T/2]);else{const x=m[T+1],R=l[-I];for(let B=10;B<R.length;B++){const W=R[B];W[17]===W[3]&&Z_(W[1],W,x,h)}if(null!==R[9]){const B=R[9];for(let W=0;W<B.length;W++){const ne=B[W];Z_(ne[1],ne,x,h)}}}}}return h}function CI(a){const l=ye(),u=un(),h=Xd();vu(h+1);const f=yb(u,h);if(a.dirty&&function Wa(a){return 4==(4&a[2])}(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?Z_(u,l,h,[]):pb(u,l,f,h);a.reset(m,Nx),a.notifyOnChanges()}return!0}return!1}function gb(a,l,u){const h=un();h.firstCreatePass&&(_b(h,new fb(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),Q_(h,ye(),l)}function mb(a,l,u,h){const f=un();if(f.firstCreatePass){const m=ki();_b(f,new fb(l,u,h),m.index),function EI(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}Q_(f,ye(),u)}function Y_(){return function TI(a,l){return a[19].queries[l].queryList}(ye(),Xd())}function Q_(a,l,u){const h=new db(4==(4&u));xp(a,l,h,h.destroy),null===l[19]&&(l[19]=new j_),l[19].queries.push(new $_(h))}function _b(a,l,u){null===a.queries&&(a.queries=new q_),a.queries.track(new W_(l,u))}function yb(a,l){return a.queries.getByIndex(l)}function J_(a,l){return zo(a,l)}function sy(...a){}const PI=new on("Application Initializer");let Yh=(()=>{class a{constructor(u){this.appInits=u,this.resolve=sy,this.reject=sy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(v_(m))u.push(m);else if(Nc(m)){const w=new Promise((T,I)=>{m.subscribe({complete:T,error:I})});u.push(w)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Je(PI,8))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const FA=new on("AppId",{providedIn:"root",factory:function LA(){return`${Mb()}${Mb()}${Mb()}`}});function Mb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kb=new on("Platform Initializer"),Rb=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FI=new on("appBootstrapListener"),VA=new on("AnimationModuleType");let gg=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const _g=new on("LocaleId",{providedIn:"root",factory:()=>ht(_g,It.Optional|It.SkipSelf)||function mg(){return typeof $localize<"u"&&$localize.locale||Uh}()}),LI=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VI{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let wN=(()=>{class a{compileModuleSync(u){return new tg(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=Cl(ji(u).declarations).reduce((w,T)=>{const I=cn(T);return I&&w.push(new Pp(I)),w},[]);return new VI(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Dd=(()=>Promise.resolve(0))();function yg(a){typeof Zone>"u"?Dd.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class ho{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function UA(){let a=Bt.requestAnimationFrame,l=Bt.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function UI(a){const l=()=>{!function GA(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Bt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Pb(a),a.isCheckStableRunning=!0,oy(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Pb(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,w,T)=>{try{return Nb(a),u.invokeTask(f,m,w,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),ay(a)}},onInvoke:(u,h,f,m,w,T,I)=>{try{return Nb(a),u.invoke(f,m,w,T,I)}finally{a.shouldCoalesceRunChangeDetection&&l(),ay(a)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,Pb(a),oy(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new ge(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,l,EN,sy,sy);try{return m.runTask(w,u,h)}finally{m.cancelTask(w)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const EN={};function oy(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Pb(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Nb(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function ay(a){a._nesting--,oy(a)}class zA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,f){return l.apply(u,h)}}const Fb=new on(""),HI=new on("");let Bb,Lb=(()=>{class a{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Bb||(function Vb(a){Bb=a}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),yg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yg(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(Je(ho),Je(GI),Je(HI))},a.\u0275prov=ut({token:a,factory:a.\u0275fac}),a})(),GI=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Bb?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),ka=null;const Ub=new on("AllowMultipleToken"),Hb=new on("PlatformDestroyListeners");class Gb{constructor(l,u){this.name=l,this.token=u}}function ZA(a,l,u=[]){const h=`Platform: ${l}`,f=new on(h);return(m=[])=>{let w=ly();if(!w||w.injector.get(Ub,!1)){const T=[...u,...m,{provide:f,useValue:!0}];a?a(T):function WA(a){if(ka&&!ka.get(Ub,!1))throw new ge(400,!1);ka=a;const l=a.get(Hc);(function zb(a){const l=a.get(kb,null);l&&l.forEach(u=>u())})(a)}(function zI(a=[],l){return od.create({name:l,providers:[{provide:td,useValue:"platform"},{provide:Hb,useValue:new Set([()=>ka=null])},...a]})}(T,h))}return function $b(a){const l=ly();if(!l)throw new ge(401,!1);return l}()}}function ly(){return ka?.get(Hc)??null}let Hc=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function jb(a,l){let u;return u="noop"===a?new zA:("zone.js"===a?void 0:a)||new ho(l),u}(h?.ngZone,function $I(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:ho,useValue:f}];return f.run(()=>{const w=od.create({providers:m,parent:this.injector,name:u.moduleType.name}),T=u.create(w),I=T.injector.get(Pr,null);if(!I)throw new ge(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:R=>{I.handleError(R)}});T.onDestroy(()=>{uy(this._modules,T),x.unsubscribe()})}),function jI(a,l,u){try{const h=u();return v_(h)?h.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(I,f,()=>{const x=T.injector.get(Yh);return x.runInitializers(),x.donePromise.then(()=>(function Zp(a){st(a,"Expected localeId to be defined"),"string"==typeof a&&(R_=a.toLowerCase().replace(/_/g,"-"))}(T.injector.get(_g,Uh)||Uh),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const f=qb({},h);return function $A(a,l,u){const h=new tg(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(cy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new ge(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Hb,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Je(od))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function qb(a,l){return Array.isArray(l)?l.reduce(qb,a):{...a,...l}}let cy=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new L.y(T=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),yg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{I.unsubscribe(),x.unsubscribe()}});this.isStable=(0,oe.T)(m,w.pipe((0,se.B)()))}bootstrap(u,h){const f=u instanceof QC;if(!this._injector.get(Yh).done)throw!f&&ii(u),new ge(405,false);let w;w=f?u:this._injector.get(Dc).resolveComponentFactory(u),this.componentTypes.push(w.componentType);const T=function qA(a){return a.isBoundToModule}(w)?void 0:this._injector.get(Vc),x=w.create(od.NULL,[],h||w.selector,T),R=x.location.nativeElement,B=x.injector.get(Fb,null);return B?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),uy(this.components,x),B?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;uy(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(FI,[]);h.push(...this._bootstrapListeners),h.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>uy(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ge(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(Je(ho),Je(bl),Je(Pr))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function uy(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}function QA(){return!1}let KI=(()=>{class a{}return a.__NG_ELEMENT_ID__=eM,a})();function eM(a){return function ZI(a,l,u){if(Kr(a)&&!u){const h=Ei(a.index,l);return new Mh(h,h)}return 47&a.type?new Mh(l[16],l):null}(ki(),ye(),16==(16&a))}class dy{constructor(){}supports(l){return Bp(l)}create(l){return new Xh(l)}}const RN=(a,l)=>l;class Xh{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||RN}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const w=!h||u&&u.currentIndex<JI(h,f,m)?u:h,T=JI(w,f,m),I=w.currentIndex;if(w===h)f--,h=h._nextRemoved;else if(u=u._next,null==w.previousIndex)f++;else{m||(m=[]);const x=T-f,R=I-f;if(x!=R){for(let W=0;W<x;W++){const ne=W<m.length?m[W]:m[W]=0,be=ne+W;R<=be&&be<x&&(m[W]=ne+1)}m[w.previousIndex]=R-x}}T!==I&&l(w,T,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Bp(l))throw new ge(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,w,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let T=0;T<this.length;T++)m=l[T],w=this._trackByFn(T,m),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,m,w,T)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,w,T),h=!0),u=u._next}else f=0,function gw(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[No()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,T=>{w=this._trackByFn(f,T),null!==u&&Object.is(u.trackById,w)?(h&&(u=this._verifyReinsertion(u,T,w,f)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,w,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,f)):l=this._addAfter(new QI(u,h),m,f),l}_verifyReinsertion(l,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new Qb),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qb),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class QI{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wg{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class Qb{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new wg,this.map.set(u,h)),h.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JI(a,l,u){const h=a.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+l+f}class Oa{constructor(){}supports(l){return l instanceof Map||Rh(l)}create(){return new XI}}class XI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Rh(l)))throw new ge(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const h=new ef(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class ef{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rM(){return new hy([new dy])}let hy=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||rM()),deps:[[a,new D,new Lu]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new ge(901,!1)}}return a.\u0275prov=ut({token:a,providedIn:"root",factory:rM}),a})();function eS(){return new tS([new Oa])}let tS=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||eS()),deps:[[a,new D,new Lu]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new ge(901,!1)}}return a.\u0275prov=ut({token:a,providedIn:"root",factory:eS}),a})();const ON=ZA(null,"core",[]);let PN=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Je(cy))},a.\u0275mod=Hn({type:a}),a.\u0275inj=kn({}),a})();function iS(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(wt,xe,V)=>{V.d(xe,{Z:()=>Xe});var o=V(2090),te=V(4859),L=V(9681),oe=V(1877);class se{constructor(ge,Re){this._delegate=ge,this.firebase=Re,(0,L._addComponent)(ge,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,Re=L._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(ge);return!je.isInitialized()&&"EXPLICIT"===(null===(ke=je.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Re})}_removeServiceInstance(ge,Re=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Re)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const mt=function de(mt){const ge={},Re={__esModule:!0,initializeApp:function Ae(He,G={}){const Ce=L.initializeApp(He,G);if((0,o.r3)(ge,Ce.name))return ge[Ce.name];const Ke=new mt(Ce,Re);return ge[Ce.name]=Ke,Ke},app:je,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Oe(He){const G=He.name,Ce=G.replace("-compat","");if(L._registerComponent(He)&&"PUBLIC"===He.type){const Ke=(nt=je())=>{if("function"!=typeof nt[Ce])throw me.create("invalid-app-argument",{appName:G});return nt[Ce]()};void 0!==He.serviceProps&&(0,o.ZB)(Ke,He.serviceProps),Re[Ce]=Ke,mt.prototype[Ce]=function(...nt){return this._getService.bind(this,G).apply(this,He.multipleInstances?nt:[])}}return"PUBLIC"===He.type?Re[Ce]:null},removeApp:function ke(He){delete ge[He]},useAsService:function Ge(He,G){return"serverAuth"===G?null:G},modularAPIs:L}};function je(He){if(!(0,o.r3)(ge,He=He||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:He});return ge[He]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Te(){return Object.keys(ge).map(He=>ge[He])}}),je.App=mt,Re}(se);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function ge(Re){(0,o.ZB)(mt,Re)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),mt}(),q=new oe.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=j;!function Me(mt){(0,L.registerVersion)("@firebase/app-compat","0.2.3",mt)}()},9681:(wt,xe,V)=>{V.r(xe),V.d(xe,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>gr,_DEFAULT_ENTRY_NAME:()=>qe,_addComponent:()=>_n,_addOrOverwriteComponent:()=>At,_apps:()=>st,_clearComponents:()=>kn,_components:()=>tt,_getProvider:()=>ut,_registerComponent:()=>dn,_removeServiceInstance:()=>Ht,deleteApp:()=>Ks,getApp:()=>Dr,getApps:()=>nr,initializeApp:()=>Ws,onLog:()=>It,registerVersion:()=>mr,setLogLevel:()=>Es});var o=V(5861),te=V(4859),L=V(1877),oe=V(2090),se=V(8766);class re{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function me(Je){return"VERSION"===Je.getComponent()?.type}(ht)){const Rt=ht.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(ht=>ht).join(" ")}}const de="@firebase/app",j=new L.Yd("@firebase/app"),qe="[DEFAULT]",Qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,tt=new Map;function _n(Je,Se){try{Je.container.addComponent(Se)}catch(ht){j.debug(`Component ${Se.name} failed to register with FirebaseApp ${Je.name}`,ht)}}function At(Je,Se){Je.container.addOrOverwriteComponent(Se)}function dn(Je){const Se=Je.name;if(tt.has(Se))return j.debug(`There were multiple attempts to register component ${Se}.`),!1;tt.set(Se,Je);for(const ht of st.values())_n(ht,Je);return!0}function ut(Je,Se){const ht=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),Je.container.getProvider(Se)}function Ht(Je,Se,ht=qe){ut(Je,Se).clearInstance(ht)}function kn(){tt.clear()}const Rn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class On{constructor(Se,ht,Rt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const gr="9.17.1";function Ws(Je,Se={}){let ht=Je;"object"!=typeof Se&&(Se={name:Se});const Rt=Object.assign({name:qe,automaticDataCollectionEnabled:!1},Se),Lt=Rt.name;if("string"!=typeof Lt||!Lt)throw Rn.create("bad-app-name",{appName:String(Lt)});if(ht||(ht=(0,oe.aH)()),!ht)throw Rn.create("no-options");const Wt=st.get(Lt);if(Wt){if((0,oe.vZ)(ht,Wt.options)&&(0,oe.vZ)(Rt,Wt.config))return Wt;throw Rn.create("duplicate-app",{appName:Lt})}const $=new te.H0(Lt);for(const Z of tt.values())$.addComponent(Z);const H=new On(ht,Rt,$);return st.set(Lt,H),H}function Dr(Je=qe){const Se=st.get(Je);if(!Se&&Je===qe)return Ws();if(!Se)throw Rn.create("no-app",{appName:Je});return Se}function nr(){return Array.from(st.values())}function Ks(Je){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,o.Z)(function*(Je){const Se=Je.name;st.has(Se)&&(st.delete(Se),yield Promise.all(Je.container.getProviders().map(ht=>ht.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mr(Je,Se,ht){var Rt;let Lt=null!==(Rt=Qe[Je])&&void 0!==Rt?Rt:Je;ht&&(Lt+=`-${ht}`);const Wt=Lt.match(/\s|\//),$=Se.match(/\s|\//);if(Wt||$){const H=[`Unable to register library "${Lt}" with version "${Se}":`];return Wt&&H.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Wt&&$&&H.push("and"),$&&H.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void j.warn(H.join(" "))}dn(new te.wA(`${Lt}-version`,()=>({library:Lt,version:Se}),"VERSION"))}function It(Je,Se){if(null!==Je&&"function"!=typeof Je)throw Rn.create("invalid-log-argument");(0,L.Am)(Je,Se)}function Es(Je){(0,L.Ub)(Je)}const Gi="firebase-heartbeat-store";let Zs=null;function Bt(){return Zs||(Zs=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Se)=>{0===Se&&Je.createObjectStore(Gi)}}).catch(Je=>{throw Rn.create("idb-open",{originalErrorMessage:Je.message})})),Zs}function kt(){return(kt=(0,o.Z)(function*(Je){try{return(yield Bt()).transaction(Gi).objectStore(Gi).get(Pn(Je))}catch(Se){if(Se instanceof oe.ZR)j.warn(Se.message);else{const ht=Rn.create("idb-get",{originalErrorMessage:Se?.message});j.warn(ht.message)}}})).apply(this,arguments)}function Is(Je,Se){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,o.Z)(function*(Je,Se){try{const Rt=(yield Bt()).transaction(Gi,"readwrite");return yield Rt.objectStore(Gi).put(Se,Pn(Je)),Rt.done}catch(ht){if(ht instanceof oe.ZR)j.warn(ht.message);else{const Rt=Rn.create("idb-set",{originalErrorMessage:ht?.message});j.warn(Rt.message)}}})).apply(this,arguments)}function Pn(Je){return`${Je.name}!${Je.options.appId}`}class Jo{constructor(Se){this.container=Se,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new ln(ht),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Se=this;return(0,o.Z)(function*(){const Rt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=mn();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Se._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Lt))return Se._heartbeatsCache.heartbeats.push({date:Lt,agent:Rt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(Wt=>{const $=new Date(Wt.date).valueOf();return Date.now()-$<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,o.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const ht=mn(),{heartbeatsToSend:Rt,unsentEntries:Lt}=function cs(Je,Se=1024){const ht=[];let Rt=Je.slice();for(const Lt of Je){const Wt=ht.find($=>$.agent===Lt.agent);if(Wt){if(Wt.dates.push(Lt.date),zi(ht)>Se){Wt.dates.pop();break}}else if(ht.push({agent:Lt.agent,dates:[Lt.date]}),zi(ht)>Se){ht.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:Rt}}(Se._heartbeatsCache.heartbeats),Wt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Rt}));return Se._heartbeatsCache.lastSentHeartbeatDate=ht,Lt.length>0?(Se._heartbeatsCache.heartbeats=Lt,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),Wt})()}}function mn(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,o.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function Dt(Je){return kt.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var ht=this;return(0,o.Z)(function*(){var Rt;if(yield ht._canUseIndexedDBPromise){const Wt=yield ht.read();return Is(ht.app,{lastSentHeartbeatDate:null!==(Rt=Se.lastSentHeartbeatDate)&&void 0!==Rt?Rt:Wt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var ht=this;return(0,o.Z)(function*(){var Rt;if(yield ht._canUseIndexedDBPromise){const Wt=yield ht.read();return Is(ht.app,{lastSentHeartbeatDate:null!==(Rt=Se.lastSentHeartbeatDate)&&void 0!==Rt?Rt:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...Se.heartbeats]})}})()}}function zi(Je){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function us(Je){dn(new te.wA("platform-logger",Se=>new re(Se),"PRIVATE")),dn(new te.wA("heartbeat",Se=>new Jo(Se),"PRIVATE")),mr(de,"0.9.3",Je),mr(de,"0.9.3","esm2017"),mr("fire-js","")}("")},4859:(wt,xe,V)=>{V.d(xe,{H0:()=>de,wA:()=>L,zt:()=>se});var o=V(5861),te=V(2090);class L{constructor(j,q,Q){this.name=j,this.instanceFactory=q,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class se{constructor(j,q){this.name=j,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const q=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(q)){const Q=new te.BH;if(this.instancesDeferred.set(q,Q),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:q});Ye&&Q.resolve(Ye)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(j){var q;const Q=this.normalizeInstanceIdentifier(j?.identifier),Ye=null!==(q=j?.optional)&&void 0!==q&&q;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(Ye)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function me(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[q,Q]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(q);try{const Me=this.getOrInitializeService({instanceIdentifier:Ye});Q.resolve(Me)}catch{}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,o.Z)(function*(){const q=Array.from(j.instances.values());yield Promise.all([...q.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...q.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:q={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Q,options:q});for(const[Me,Xe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&Xe.resolve(Ye);return Ye}onInit(j,q){var Q;const Ye=this.normalizeInstanceIdentifier(q),Me=null!==(Q=this.onInitCallbacks.get(Ye))&&void 0!==Q?Q:new Set;Me.add(j),this.onInitCallbacks.set(Ye,Me);const Xe=this.instances.get(Ye);return Xe&&j(Xe,Ye),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,q){const Q=this.onInitCallbacks.get(q);if(Q)for(const Ye of Q)try{Ye(j,q)}catch{}}getOrInitializeService({instanceIdentifier:j,options:q={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===oe?void 0:ue),options:q}),this.instances.set(j,Q),this.instancesOptions.set(j,q),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch{}var ue;return Q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const q=this.getProvider(j.name);if(q.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);q.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const q=new se(j,this);return this.providers.set(j,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,xe,V)=>{V.d(xe,{Am:()=>ue,Ub:()=>de,Yd:()=>me,in:()=>te});const o=[];var te=(()=>{return(j=te||(te={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",te;var j})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oe=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},re=(j,q,...Q)=>{if(q<j.logLevel)return;const Ye=(new Date).toISOString(),Me=se[q];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Me](`[${Ye}]  ${j.name}:`,...Q)};class me{constructor(q){this.name=q,this._logLevel=oe,this._logHandler=re,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in te))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?L[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...q),this._logHandler(this,te.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...q),this._logHandler(this,te.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,te.INFO,...q),this._logHandler(this,te.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,te.WARN,...q),this._logHandler(this,te.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...q),this._logHandler(this,te.ERROR,...q)}}function de(j){o.forEach(q=>{q.setLogLevel(j)})}function ue(j,q){for(const Q of o){let Ye=null;q&&q.level&&(Ye=L[q.level]),Q.userLogHandler=null===j?null:(Me,Xe,...mt)=>{const ge=mt.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");Xe>=(Ye??Me.logLevel)&&j({level:te[Xe].toLowerCase(),message:ge,args:mt,type:Me.name})}}}},259:(wt,xe,V)=>{V.d(xe,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=V(9681);(0,o.registerVersion)("firebase","9.17.1","app")},9260:(wt,xe,V)=>{V.d(xe,{Z:()=>o.Z});var o=V(3942);o.Z.registerVersion("firebase","9.17.1","app-compat")},407:(wt,xe,V)=>{V.r(xe);var o=V(5861),te=V(3942),L=V(2090),oe=V(9681),se=V(1877),re=V(655),me=V(4859);const Xe=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},mt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ke=new se.Yd("@firebase/auth");function je(v,...g){ke.logLevel<=se.in.ERROR&&ke.error(`Auth (${oe.SDK_VERSION}): ${v}`,...g)}function Ae(v,...g){throw He(v,...g)}function Te(v,...g){return He(v,...g)}function Oe(v,g,_){const C=Object.assign(Object.assign({},mt()),{[g]:_});return new L.LL("auth","Firebase",C).create(g,{appName:v.name})}function Ge(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ae(v,"argument-error"),Oe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return ge.create(v,...g)}function G(v,g,..._){if(!v)throw He(g,..._)}function Ce(v){const g="INTERNAL ASSERTION FAILED: "+v;throw je(g),new Error(g)}function Ke(v,g){v||Ce(g)}const nt=new Map;function Ct(v){Ke(v instanceof Function,"Expected a class definition");let g=nt.get(v);return g?(Ke(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,nt.set(v,g),g)}function fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ve(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class st{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ke(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function qe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ve()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tt(v,g){Ke(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class _n{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const At={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new st(3e4,6e4);function ut(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Ht(v,g,_,C){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(v,g,_,C,A={}){return Ln(v,A,(0,o.Z)(function*(){let O={},Y={};C&&("GET"===g?Y=C:O={body:JSON.stringify(C)});const he=(0,L.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Ie=yield v._getAdditionalHeaders();return Ie["Content-Type"]="application/json",v.languageCode&&(Ie["X-Firebase-Locale"]=v.languageCode),_n.fetch()(Ws(v,v.config.apiHost,_,he),Object.assign({method:g,headers:Ie,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ln(v,g,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,o.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},At),g);try{const A=new Dr(v),O=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const Y=yield O.json();if("needConfirmation"in Y)throw nr(v,"account-exists-with-different-credential",Y);if(O.ok&&!("errorMessage"in Y))return Y;{const he=O.ok?Y.errorMessage:Y.error.message,[Ie,Ve]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ie)throw nr(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ie)throw nr(v,"email-already-in-use",Y);if("USER_DISABLED"===Ie)throw nr(v,"user-disabled",Y);const Ze=C[Ie]||Ie.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Oe(v,Ze,Ve);Ae(v,Ze)}}catch(A){if(A instanceof L.ZR)throw A;Ae(v,"network-request-failed")}})).apply(this,arguments)}function On(v,g,_,C){return gr.apply(this,arguments)}function gr(){return(gr=(0,o.Z)(function*(v,g,_,C,A={}){const O=yield Ht(v,g,_,C,A);return"mfaPendingCredential"in O&&Ae(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ws(v,g,_,C){const A=`${g}${_}?${C}`;return v.config.emulator?tt(v.config,A):`${v.config.apiScheme}://${A}`}class Dr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Te(this.auth,"network-request-failed")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nr(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const A=Te(v,g,C);return A.customData._tokenResponse=_,A}function Tn(){return(Tn=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function mr(v,g){return It.apply(this,arguments)}function It(){return(It=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Es(v,g){return $r.apply(this,arguments)}function $r(){return($r=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Vn(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Bt(){return(Bt=(0,o.Z)(function*(v,g=!1){const _=(0,L.m9)(v),C=yield _.getIdToken(g),A=kt(C);G(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,Y=O?.sign_in_provider;return{claims:A,token:C,authTime:Vn(Dt(A.auth_time)),issuedAtTime:Vn(Dt(A.iat)),expirationTime:Vn(Dt(A.exp)),signInProvider:Y||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Dt(v){return 1e3*Number(v)}function kt(v){const[g,_,C]=v.split(".");if(void 0===g||void 0===_||void 0===C)return je("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(_);return A?JSON.parse(A):(je("Failed to decode base64 JWT payload"),null)}catch(A){return je("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Bn(v,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,o.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof L.ZR&&jr(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function jr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Mi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class Jo{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mn(v){return cs.apply(this,arguments)}function cs(){return(cs=(0,o.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),A=yield Bn(v,Es(_,{idToken:C}));G(A?.users.length,_,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const Y=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?Je(O.providerUserInfo):[],he=us(v.providerData,Y),Ze=!!v.isAnonymous&&!(v.email&&O.passwordHash||he?.length),_t={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Jo(O.createdAt,O.lastLoginAt),isAnonymous:Ze};Object.assign(v,_t)})).apply(this,arguments)}function zi(){return(zi=(0,o.Z)(function*(v){const g=(0,L.m9)(v);yield mn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function us(v,g){return[...v.filter(C=>!g.some(A=>A.providerId===C.providerId)),...g]}function Je(v){return v.map(g=>{var{providerId:_}=g,C=(0,re._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function ht(){return(ht=(0,o.Z)(function*(v,g){const _=yield Ln(v,{},(0,o.Z)(function*(){const C=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,Y=Ws(v,A,"/v1/token",`key=${O}`),he=yield v._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",_n.fetch()(Y,{method:"POST",headers:he,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Is(v){const g=kt(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,o.Z)(function*(){return G(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,o.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:Y}=yield function Se(v,g){return ht.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(A,O,Number(Y))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:A,expirationTime:O}=_,Y=new Rt;return C&&(G("string"==typeof C,"internal-error",{appName:g}),Y.refreshToken=C),A&&(G("string"==typeof A,"internal-error",{appName:g}),Y.accessToken=A),O&&(G("number"==typeof O,"internal-error",{appName:g}),Y.expirationTime=O),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Rt,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function Lt(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class Wt{constructor(g){var{uid:_,auth:C,stsTokenManager:A}=g,O=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Jo(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const C=yield Bn(_,_.stsTokenManager.getToken(_.auth,g));return G(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Zs(v){return Bt.apply(this,arguments)}(this,g)}reload(){return function ln(v){return zi.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Wt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,o.Z)(function*(){let A=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield mn(C)),yield C.auth._persistUserIfCurrent(C),A&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield Bn(g,function Ks(v,g){return Tn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,A,O,Y,he,Ie,Ve,Ze;const _t=null!==(C=_.displayName)&&void 0!==C?C:void 0,Gt=null!==(A=_.email)&&void 0!==A?A:void 0,es=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,_h=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,Cc=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Tc=null!==(Ie=_._redirectEventId)&&void 0!==Ie?Ie:void 0,fn=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,qt=null!==(Ze=_.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:Fi,emailVerified:fp,isAnonymous:Qu,providerData:ts,stsTokenManager:Tv}=_;G(Fi&&Tv,g,"internal-error");const $C=Rt.fromJSON(this.name,Tv);G("string"==typeof Fi,g,"internal-error"),Lt(_t,g.name),Lt(Gt,g.name),G("boolean"==typeof fp,g,"internal-error"),G("boolean"==typeof Qu,g,"internal-error"),Lt(es,g.name),Lt(_h,g.name),Lt(Cc,g.name),Lt(Tc,g.name),Lt(fn,g.name),Lt(qt,g.name);const Ju=new Wt({uid:Fi,auth:g,email:Gt,emailVerified:fp,displayName:_t,isAnonymous:Qu,photoURL:_h,phoneNumber:es,tenantId:Cc,stsTokenManager:$C,createdAt:fn,lastLoginAt:qt});return ts&&Array.isArray(ts)&&(Ju.providerData=ts.map(yh=>Object.assign({},yh))),Tc&&(Ju._redirectEventId=Tc),Ju}static _fromIdTokenResponse(g,_,C=!1){return(0,o.Z)(function*(){const A=new Rt;A.updateFromServerResponse(_);const O=new Wt({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:C});return yield mn(O),O})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,C){var A=this;return(0,o.Z)(function*(){A.storage[_]=C})()}_get(_){var C=this;return(0,o.Z)(function*(){const A=C.storage[_];return void 0===A?null:A})()}_remove(_){var C=this;return(0,o.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function Z(v,g,_){return`firebase:${v}:${g}:${_}`}class _e{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:A,name:O}=this.auth;this.fullUserKey=Z(this.userKey,A.apiKey,O),this.fullPersistenceKey=Z("persistence",A.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Wt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,o.Z)(function*(){if(!_.length)return new _e(Ct(H),g,C);const A=(yield Promise.all(_.map(function(){var Ve=(0,o.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let O=A[0]||Ct(H);const Y=Z(C,g.config.apiKey,g.name);let he=null;for(const Ve of _)try{const Ze=yield Ve._get(Y);if(Ze){const _t=Wt._fromJSON(g,Ze);Ve!==O&&(he=_t),O=Ve;break}}catch{}const Ie=A.filter(Ve=>Ve._shouldAllowMigration);return O._shouldAllowMigration&&Ie.length?(O=Ie[0],he&&(yield O._set(Y,he.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,o.Z)(function*(Ze){if(Ze!==O)try{yield Ze._remove(Y)}catch{}});return function(Ze){return Ve.apply(this,arguments)}}())),new _e(O,g,C)):new _e(O,g,C)})()}}function ie(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Un(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(pt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ti(g))return"Blackberry";if(Qt(g))return"Webos";if(Kt(g))return"Safari";if((g.includes("chrome/")||sn(g))&&!g.includes("edge/"))return"Chrome";if(xt(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function pt(v=(0,L.z$)()){return/firefox\//i.test(v)}function Kt(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function sn(v=(0,L.z$)()){return/crios\//i.test(v)}function Un(v=(0,L.z$)()){return/iemobile/i.test(v)}function xt(v=(0,L.z$)()){return/android/i.test(v)}function Ti(v=(0,L.z$)()){return/blackberry/i.test(v)}function Qt(v=(0,L.z$)()){return/webos/i.test(v)}function pi(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function kf(v=(0,L.z$)()){return pi(v)||xt(v)||Qt(v)||Ti(v)||/windows phone/i.test(v)||Un(v)}function Ol(v,g=[]){let _;switch(v){case"Browser":_=ie((0,L.z$)());break;case"Worker":_=`${ie((0,L.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${oe.SDK_VERSION}/${C}`}class nu{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=O=>new Promise((Y,he)=>{try{Y(g(O))}catch(Ie){he(Ie)}});C.onAbort=_,this.queue.push(C);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===g)return;const C=[];try{for(const A of _.queue)yield A(g),A.onAbort&&C.push(A.onAbort)}catch(A){C.reverse();for(const O of C)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Gd{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zd(this),this.idTokenSubscription=new zd(this),this.beforeStateQueue=new nu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=Ct(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var A,O;if(!C._deleted&&(C.persistenceManager=yield _e.create(C,g),!C._deleted)){if(null!==(A=C._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(O=C.currentUser)||void 0===O?void 0:O.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var C;const A=yield _.assertedPersistence.getCurrentUser();let O=A,Y=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Ie=O?._redirectEventId,Ve=yield _.tryRedirectSignIn(g);(!he||he===Ie)&&Ve?.user&&(O=Ve.user,Y=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(O)}catch(he){O=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){try{yield mn(g)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Qe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const C=g?(0,L.m9)(g):null;return C&&G(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,o.Z)(function*(){if(!C._deleted)return g&&G(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,o.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(Ct(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,o.Z)(function*(){const A=yield C.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&Ct(g)||_._popupRedirectResolver;G(C,_,"argument-error"),_.redirectPersistenceManager=yield _e.create(_,[Ct(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var C,A;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,A){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Y,this,"internal-error"),Y.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,C,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ol(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(C["X-Firebase-Client"]=A),C})()}}function Hn(v){return(0,L.m9)(v)}class zd{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ha(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function cn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Qn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(g){return Ce("not implemented")}_linkToIdToken(g,_){return Ce("not implemented")}_getReauthenticationResolver(g){return Ce("not implemented")}}function ii(v,g){return ji.apply(this,arguments)}function ji(){return(ji=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:resetPassword",ut(v,g))})).apply(this,arguments)}function xr(v,g){return ot.apply(this,arguments)}function ot(){return(ot=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function vt(v,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",ut(v,g))})).apply(this,arguments)}function Ss(){return(Ss=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPassword",ut(v,g))})).apply(this,arguments)}function ri(v,g){return si.apply(this,arguments)}function si(){return(si=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendOobCode",ut(v,g))})).apply(this,arguments)}function Gn(v,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,o.Z)(function*(v,g){return ri(v,g)})).apply(this,arguments)}function An(v,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,o.Z)(function*(v,g){return ri(v,g)})).apply(this,arguments)}function ru(v,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,o.Z)(function*(v,g){return ri(v,g)})).apply(this,arguments)}function su(v,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,o.Z)(function*(v,g){return ri(v,g)})).apply(this,arguments)}function ta(){return(ta=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithEmailLink",ut(v,g))})).apply(this,arguments)}function Ar(){return(Ar=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithEmailLink",ut(v,g))})).apply(this,arguments)}class zn extends Qn{constructor(g,_,C,A=null){super("password",C),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new zn(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new zn(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function ir(v,g){return Ss.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function qi(v,g){return ta.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ae(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,o.Z)(function*(){switch(C.signInMethod){case"password":return xr(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function mo(v,g){return Ar.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:Ae(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function $n(v,g){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithIdp",ut(v,g))})).apply(this,arguments)}class Mr extends Qn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Mr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ae("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A}=_,O=(0,re._T)(_,["providerId","signInMethod"]);if(!C||!A)return null;const Y=new Mr(C,A);return Y.idToken=O.idToken||void 0,Y.accessToken=O.accessToken||void 0,Y.secret=O.secret,Y.nonce=O.nonce,Y.pendingToken=O.pendingToken||null,Y}_getIdTokenResponse(g){return $n(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,$n(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,$n(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function $d(v,g){return na.apply(this,arguments)}function na(){return(na=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendVerificationCode",ut(v,g))})).apply(this,arguments)}function rr(){return(rr=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,g))})).apply(this,arguments)}function jd(){return(jd=(0,o.Z)(function*(v,g){const _=yield On(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,g));if(_.temporaryProof)throw nr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const _r={USER_NOT_FOUND:"user-not-found"};function za(){return(za=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),_r)})).apply(this,arguments)}class Kr extends Qn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Kr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Kr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function _o(v,g){return rr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Wi(v,g){return jd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Wr(v,g){return za.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:A,temporaryProof:O}=g;return C||_||A||O?new Kr({verificationId:_,verificationCode:C,phoneNumber:A,temporaryProof:O}):null}}class $a{constructor(g){var _,C,A,O,Y,he;const Ie=(0,L.zd)((0,L.pd)(g)),Ve=null!==(_=Ie.apiKey)&&void 0!==_?_:null,Ze=null!==(C=Ie.oobCode)&&void 0!==C?C:null,_t=function ou(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ie.mode)&&void 0!==A?A:null);G(Ve&&Ze&&_t,"argument-error"),this.apiKey=Ve,this.operation=_t,this.code=Ze,this.continueUrl=null!==(O=Ie.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Y=Ie.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(he=Ie.tenantId)&&void 0!==he?he:null}static parseLink(g){const _=function sr(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,C=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(C?(0,L.zd)((0,L.pd)(C)).link:null)||C||_||g||v}(g);try{return new $a(_)}catch{return null}}}let au=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return zn._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const A=$a.parseLink(C);return G(A,"argument-error"),zn._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ds{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ia extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ja extends ia{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Mr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),Mr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ja.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ja.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:A,pendingToken:O,nonce:Y,providerId:he}=g;if(!C&&!A&&!_&&!O||!he)return null;try{return new ja(he)._credential({idToken:_,accessToken:C,nonce:Y,pendingToken:O})}catch{return null}}}let lu=(()=>{class v extends ia{constructor(){super("facebook.com")}static credential(_){return Mr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Of=(()=>{class v extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Mr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:A}=_;if(!C&&!A)return null;try{return v.credential(C,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Pf=(()=>{class v extends ia{constructor(){super("github.com")}static credential(_){return Mr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ra extends Qn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return $n(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,$n(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,$n(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A,pendingToken:O}=_;return C&&A&&O&&C===A?new ra(C,O):null}static _create(g,_){return new ra(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hs extends Ds{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return hs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return hs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=ra.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return ra._create(C,_)}catch{return null}}}let cm=(()=>{class v extends ia{constructor(){super("twitter.com")}static credential(_,C){return Mr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:A}=_;if(!C||!A)return null;try{return v.credential(C,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function En(v,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signUp",ut(v,g))})).apply(this,arguments)}class or{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,A=!1){return(0,o.Z)(function*(){const O=yield Wt._fromIdTokenResponse(g,C,A),Y=uu(C);return new or({user:O,providerId:Y,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const A=uu(C);return new or({user:g,providerId:A,_tokenResponse:C,operationType:_})})()}}function uu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Nf(){return(Nf=(0,o.Z)(function*(v){var g;const _=Hn(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new or({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield En(_,{returnSecureToken:!0}),A=yield or._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Pl extends L.ZR{constructor(g,_,C,A){var O;super(_.code,_.message),this.operationType=C,this.user=A,Object.setPrototypeOf(this,Pl.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,A){return new Pl(g,_,C,A)}}function vo(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Pl._fromErrorAndOperation(v,O,g,C):O})}function wo(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function sa(){return(sa=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);yield bo(!0,_,g);const{providerUserInfo:C}=yield mr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=wo(C||[]);return _.providerData=_.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Fl(v,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,o.Z)(function*(v,g,_=!1){const C=yield Bn(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return or._forOperation(v,"link",C)})).apply(this,arguments)}function bo(v,g,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,o.Z)(function*(v,g,_){yield mn(g);const A=!1===v?"provider-already-linked":"no-such-provider";G(wo(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function Wd(v,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,o.Z)(function*(v,g,_=!1){const{auth:C}=v,A="reauthenticate";try{const O=yield Bn(v,vo(C,A,g,v),_);G(O.idToken,C,"internal-error");const Y=kt(O.idToken);G(Y,C,"internal-error");const{sub:he}=Y;return G(v.uid===he,C,"user-mismatch"),or._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ae(C,"user-mismatch"),O}})).apply(this,arguments)}function la(v,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,o.Z)(function*(v,g,_=!1){const C="signIn",A=yield vo(v,C,g),O=yield or._fromIdTokenResponse(v,C,A);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Wn(v,g){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,o.Z)(function*(v,g){return la(Hn(v),g)})).apply(this,arguments)}function Jn(v,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);return yield bo(!1,_,g.providerId),Fl(_,g)})).apply(this,arguments)}function Co(v,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,o.Z)(function*(v,g){return Wd((0,L.m9)(v),g)})).apply(this,arguments)}function du(v,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,o.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithCustomToken",ut(v,g))})).apply(this,arguments)}function Ei(){return(Ei=(0,o.Z)(function*(v,g){const _=Hn(v),C=yield du(_,{token:g,returnSecureToken:!0}),A=yield or._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Wa{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?ua._fromServerResponse(g,_):Ae(g,"internal-error")}}class ua extends Wa{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new ua(_)}}function Bl(v,g,_){var C;G((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Ka(){return(Ka=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&Bl(C,A,_),yield An(C,A)})).apply(this,arguments)}function Vt(){return(Vt=(0,o.Z)(function*(v,g,_){yield ii((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Kd(){return(Kd=(0,o.Z)(function*(v,g){yield vt((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function Hl(v,g){return hu.apply(this,arguments)}function hu(){return(hu=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),C=yield ii(_,{oobCode:g}),A=C.requestType;switch(G(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(C.mfaInfo,_,"internal-error");default:G(C.email,_,"internal-error")}let O=null;return C.mfaInfo&&(O=Wa._fromServerResponse(Hn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Gl(){return(Gl=(0,o.Z)(function*(v,g){const{data:_}=yield Hl((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function pu(){return(pu=(0,o.Z)(function*(v,g,_){const C=Hn(v),A=yield En(C,{returnSecureToken:!0,email:g,password:_}),O=yield or._fromIdTokenResponse(C,"signIn",A);return yield C._updateCurrentUser(O.user),O})).apply(this,arguments)}function gu(){return(gu=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,C,"argument-error"),_&&Bl(C,A,_),yield ru(C,A)})).apply(this,arguments)}function Ya(){return(Ya=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),A=au.credentialWithLink(g,_||fe());return G(A._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Wn(C,A)})).apply(this,arguments)}function zl(v,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:createAuthUri",ut(v,g))})).apply(this,arguments)}function jl(){return(jl=(0,o.Z)(function*(v,g){const C={identifier:g,continueUri:ve()?fe():"http://localhost"},{signinMethods:A}=yield zl((0,L.m9)(v),C);return A||[]})).apply(this,arguments)}function mu(){return(mu=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Bl(_.auth,A,g);const{email:O}=yield Gn(_.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function mi(){return(mi=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Bl(C.auth,O,_);const{email:Y}=yield su(C.auth,O);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function wr(v,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function fs(){return(fs=(0,o.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,L.m9)(v),O={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield Bn(C,wr(C.auth,O));C.displayName=Y.displayName||null,C.photoURL=Y.photoUrl||null;const he=C.providerData.find(({providerId:Ie})=>"password"===Ie);he&&(he.displayName=C.displayName,he.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Y)})).apply(this,arguments)}function Jd(v,g,_){return _u.apply(this,arguments)}function _u(){return(_u=(0,o.Z)(function*(v,g,_){const{auth:C}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const Y=yield Bn(v,xr(C,O));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class As{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Xd extends As{constructor(g,_,C,A){super(g,_,C),this.username=A}}class vu extends As{constructor(g,_){super(g,"facebook.com",_)}}class eh extends Xd{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Lf extends As{constructor(g,_){super(g,"google.com",_)}}class Wl extends Xd{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Vf(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function yu(v){var g,_;if(!v)return null;const{providerId:C}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const Y=null===(_=null===(g=kt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new As(O,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!C)return null;switch(C){case"facebook.com":return new vu(O,A);case"github.com":return new eh(O,A);case"google.com":return new Lf(O,A);case"twitter.com":return new Wl(O,A,v.screenName||null);case"custom":case"anonymous":return new As(O,null);default:return new As(O,C,A)}}(_)}class ha{constructor(g,_,C){this.type=g,this.credential=_,this.auth=C}static _fromIdtoken(g,_){return new ha("enroll",g,_)}static _fromMfaPendingCredential(g){return new ha("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ha._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return ha._fromIdtoken(g.multiFactorSession.idToken)}return null}}class bu{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=Hn(g),A=_.customData._serverResponse,O=(A.mfaInfo||[]).map(he=>Wa._fromServerResponse(C,he));G(A.mfaPendingCredential,C,"internal-error");const Y=ha._fromMfaPendingCredential(A.mfaPendingCredential);return new bu(Y,O,function(){var he=(0,o.Z)(function*(Ie){const Ve=yield Ie._process(C,Y);delete A.mfaInfo,delete A.mfaPendingCredential;const Ze=Object.assign(Object.assign({},A),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const _t=yield or._fromIdTokenResponse(C,_.operationType,Ze);return yield C._updateCurrentUser(_t.user),_t;case"reauthenticate":return G(_.user,C,"internal-error"),or._forOperation(_.user,_.operationType,Ze);default:Ae(C,"internal-error")}});return function(Ie){return he.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}function Bf(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:start",ut(v,g))}class Ja{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Wa._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Ja(g)}getSession(){var g=this;return(0,o.Z)(function*(){return ha._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var C=this;return(0,o.Z)(function*(){const A=g,O=yield C.getSession(),Y=yield Bn(C.user,A._process(C.user.auth,O,_));return yield C.user._updateTokensIfNecessary(Y),C.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){const C="string"==typeof g?g:g.uid,A=yield _.user.getIdToken();try{const O=yield Bn(_.user,function fm(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ut(v,g))}(_.user.auth,{idToken:A,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Y})=>Y!==C),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const Js=new WeakMap,kr="__sak";class Cu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(kr,"1"),this.storage.removeItem(kr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tu=(()=>{class v extends Cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Kl(){const v=(0,L.z$)();return Kt(v)||pi(v)}()&&function Ua(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kf(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const A=this.storage.getItem(C),O=this.localCache[C];A!==O&&_(C,O,A)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((he,Ie,Ve)=>{this.notifyListeners(he,Ve)});const A=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(A);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!C)return}const O=()=>{const he=this.storage.getItem(A);!C&&this.localCache[A]===he||this.notifyListeners(A,he)},Y=this.storage.getItem(A);!function Ba(){return(0,L.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,C){this.localCache[_]=C;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var A=()=>super._set,O=this;return(0,o.Z)(function*(){yield A().call(O,_,C),O.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,A=this;return(0,o.Z)(function*(){const O=yield C().call(A,_);return A.localCache[_]=JSON.stringify(O),O})()}_remove(_){var C=()=>super._remove,A=this;return(0,o.Z)(function*(){yield C().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),Io=(()=>{class v extends Cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Zl=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(O=>O.isListeningto(_));if(C)return C;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,o.Z)(function*(){const A=_,{eventId:O,eventType:Y,data:he}=A.data,Ie=C.handlersMap[Y];if(!Ie?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:Y});const Ve=Array.from(Ie).map(function(){var _t=(0,o.Z)(function*(Gt){return Gt(A.origin,he)});return function(Gt){return _t.apply(this,arguments)}}()),Ze=yield function Xa(v){return Promise.all(v.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Ve);A.ports[0].postMessage({status:"done",eventId:O,eventType:Y,response:Ze})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function el(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Eu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var A=this;return(0,o.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Y,he;return new Promise((Ie,Ve)=>{const Ze=el("",20);O.port1.start();const _t=setTimeout(()=>{Ve(new Error("unsupported_event"))},C);he={messageChannel:O,onMessage(Gt){const es=Gt;if(es.data.eventId===Ze)switch(es.data.status){case"ack":clearTimeout(_t),Y=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ie(es.data.response);break;default:clearTimeout(_t),clearTimeout(Y),Ve(new Error("invalid_response"))}}},A.handlers.add(he),O.port1.addEventListener("message",he.onMessage),A.target.postMessage({eventType:g,eventId:Ze,data:_},[O.port2])}).finally(()=>{he&&A.removeMessageHandler(he)})})()}}function In(){return window}function So(){return typeof In().WorkerGlobalScope<"u"&&"function"==typeof In().importScripts}function nl(){return(nl=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ql="firebaseLocalStorageDb",Xs="firebaseLocalStorage",Do="fbase_key";class xo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function eo(v,g){return v.transaction([Xs],g?"readwrite":"readonly").objectStore(Xs)}function Su(){const v=indexedDB.open(Ql,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Xs,{keyPath:Do})}catch(A){_(A)}}),v.addEventListener("success",(0,o.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Xs)?g(C):(C.close(),yield function ma(){const v=indexedDB.deleteDatabase(Ql);return new xo(v).toPromise()}(),g(yield Su()))}))})}function lr(v,g,_){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,o.Z)(function*(v,g,_){const C=eo(v,!0).put({[Do]:g,value:_});return new xo(C).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,o.Z)(function*(v,g){const _=eo(v,!1).get(g),C=yield new xo(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function ec(v,g){const _=eo(v,!0).delete(g);return new xo(_).toPromise()}const Mo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield Su()),_.db})()}_withRetries(_){var C=this;return(0,o.Z)(function*(){let A=0;for(;;)try{const O=yield C._openDb();return yield _(O)}catch(O){if(A++>3)throw O;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return So()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=Zl._getInstance(function Yl(){return So()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,o.Z)(function*(A,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(A,O){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,o.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var C,A;if(_.activeServiceWorker=yield function Ms(){return nl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Eu(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);O&&null!==(C=O[0])&&void 0!==C&&C.fulfilled&&null!==(A=O[0])&&void 0!==A&&A.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,o.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Iu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Su();return yield lr(_,kr,"1"),yield ec(_,kr),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,o.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var A=this;return(0,o.Z)(function*(){return A._withPendingWrite((0,o.Z)(function*(){return yield A._withRetries(O=>lr(O,_,C)),A.localCache[_]=C,A.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,o.Z)(function*(){const A=yield C._withRetries(O=>function _a(v,g){return Ao.apply(this,arguments)}(O,_));return C.localCache[_]=A,A})()}_remove(_){var C=this;return(0,o.Z)(function*(){return C._withPendingWrite((0,o.Z)(function*(){return yield C._withRetries(A=>ec(A,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const C=yield _._withRetries(Y=>{const he=eo(Y,!1).getAll();return new xo(he).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:Y,value:he}of C)O.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(he)&&(_.notifyListeners(Y,he),A.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!O.has(Y)&&(_.notifyListeners(Y,null),A.push(Y));return A})()}notifyListeners(_,C){this.localCache[_]=C;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ya(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:start",ut(v,g))}function rl(){return(rl=(0,o.Z)(function*(v){return(yield Ht(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zr(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=A=>{const O=Te("internal-error");O.customData=A,_(O)},C.type="text/javascript",C.charset="UTF-8",function tc(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function xu(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Qr=1e12;class Hf{constructor(g){this.auth=g,this.counter=Qr,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Mu(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Qr;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Qr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var C;return null===(C=_._widgets.get(g||Qr))||void 0===C||C.execute(),""})()}}class Mu{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;G(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ku=xu("rcb"),Gf=new st(3e4,6e4);class ko{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=In().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function sl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(In().grecaptcha):new Promise((C,A)=>{const O=In().setTimeout(()=>{A(Te(g,"network-request-failed"))},Gf.get());In()[ku]=()=>{In().clearTimeout(O),delete In()[ku];const he=In().grecaptcha;if(!he)return void A(Te(g,"internal-error"));const Ie=he.render;he.render=(Ve,Ze)=>{const _t=Ie(Ve,Ze);return this.counter++,_t},this.hostLanguage=_,C(he)},Zr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ku,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),A(Te(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=In().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class va{load(g){return(0,o.Z)(function*(){return new Hf(g)})()}clearedOneInstance(){}}const rh="recaptcha",sh={theme:"light",type:"image"};class ic{constructor(g,_=Object.assign({},sh),C){this.parameters=_,this.type=rh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(C),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;G(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new va:new ko,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(O=>{const Y=he=>{he&&(g.tokenChangeListeners.delete(Y),O(he))};g.tokenChangeListeners.add(Y),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=In()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){G(ve()&&!So(),g.auth,"internal-error"),yield function pv(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function ks(v){return rl.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ou{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Kr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Pu(){return(Pu=(0,o.Z)(function*(v,g,_){const C=Hn(v),A=yield oh(C,g,(0,L.m9)(_));return new Ou(A,O=>Wn(C,O))})).apply(this,arguments)}function rc(){return(rc=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);yield bo(!1,C,"phone");const A=yield oh(C.auth,g,(0,L.m9)(_));return new Ou(A,O=>Jn(C,O))})).apply(this,arguments)}function $f(){return($f=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),A=yield oh(C.auth,g,(0,L.m9)(_));return new Ou(A,O=>Co(C,O))})).apply(this,arguments)}function oh(v,g,_){return jf.apply(this,arguments)}function jf(){return(jf=(0,o.Z)(function*(v,g,_){var C;const A=yield _.verify();try{let O;if(G("string"==typeof A,v,"argument-error"),G(_.type===rh,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const Y=O.session;if("phoneNumber"in O)return G("enroll"===Y.type,v,"internal-error"),(yield Bf(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{G("signin"===Y.type,v,"internal-error");const he=(null===(C=O.multiFactorHint)||void 0===C?void 0:C.uid)||O.multiFactorUid;return G(he,v,"missing-multi-factor-info"),(yield ya(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield $d(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return Y}}finally{_._reset()}})).apply(this,arguments)}function qf(){return(qf=(0,o.Z)(function*(v,g){yield Fl((0,L.m9)(v),g)})).apply(this,arguments)}let Nu=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Hn(_)}verifyPhoneNumber(_,C){return oh(this.auth,_,(0,L.m9)(C))}static credential(_,C){return Kr._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:A}=_;return C&&A?Kr._fromTokenResponse(C,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Sn(v,g){return g?Ct(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class oc extends Qn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return $n(g,this._buildIdpRequest())}_linkToIdToken(g,_){return $n(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return $n(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ac(v){return la(v.auth,new oc(v),v.bypassAuthState)}function Fu(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),Wd(_,new oc(v),v.bypassAuthState)}function br(v){return ps.apply(this,arguments)}function ps(){return(ps=(0,o.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),Fl(_,new oc(v),v.bypassAuthState)})).apply(this,arguments)}class lc{constructor(g,_,C,A,O=!1){this.auth=g,this.resolver=C,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(C,A){g.pendingPromise={resolve:C,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(C,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:C,sessionId:A,postBody:O,tenantId:Y,error:he,type:Ie}=g;if(he)return void _.reject(he);const Ve={auth:_.auth,requestUri:C,sessionId:A,tenantId:Y||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ie)(Ve))}catch(Ze){_.reject(Ze)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ac;case"linkViaPopup":case"linkViaRedirect":return br;case"reauthViaPopup":case"reauthViaRedirect":return Fu;default:Ae(this.auth,"internal-error")}}resolve(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ol=new st(2e3,1e4);function cc(){return(cc=(0,o.Z)(function*(v,g,_){const C=Hn(v);Ge(v,g,Ds);const A=Sn(C,_);return new Kn(C,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Wf(){return(Wf=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ge(C.auth,g,Ds);const A=Sn(C.auth,_);return new Kn(C.auth,"reauthViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}function cr(){return(cr=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ge(C.auth,g,Ds);const A=Sn(C.auth,_);return new Kn(C.auth,"linkViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}let Kn=(()=>{class v extends lc{constructor(_,C,A,O,Y){super(_,C,O,Y),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const C=yield _.execute();return G(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,o.Z)(function*(){Ke(1===_.filter.length,"Popup operations only handle one event");const C=el();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Te(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,A;this.pollId=null!==(A=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ol.get())};_()}}return v.currentPopupAction=null,v})();const ba=new Map;class uc extends lc{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let C=ba.get(_.auth._key());if(!C){try{const O=(yield function Kf(v,g){return _i.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(O)}catch(A){C=()=>Promise.reject(A)}ba.set(_.auth._key(),C)}return _.bypassAuthState||ba.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const A=yield C.auth._redirectUserForId(g.eventId);if(A)return C.user=A,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function _i(){return(_i=(0,o.Z)(function*(v,g){const _=Ca(g),C=Zn(v);if(!(yield C._isAvailable()))return!1;const A="true"===(yield C._get(_));return yield C._remove(_),A})).apply(this,arguments)}function dc(v,g){return to.apply(this,arguments)}function to(){return(to=(0,o.Z)(function*(v,g){return Zn(v)._set(Ca(g),"true")})).apply(this,arguments)}function Zf(v,g){ba.set(v._key(),g)}function Zn(v){return Ct(v._redirectPersistence)}function Ca(v){return Z("pendingRedirect",v.config.apiKey,v.name)}function S(){return(S=(0,o.Z)(function*(v,g,_){const C=Hn(v);Ge(v,g,Ds),yield C._initializationPromise;const A=Sn(C,_);return yield dc(A,C),A._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ge(C.auth,g,Ds),yield C.auth._initializationPromise;const A=Sn(C.auth,_);yield dc(A,C.auth);const O=yield Pt(C);return A._openRedirect(C.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function we(){return(we=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ge(C.auth,g,Ds),yield C.auth._initializationPromise;const A=Sn(C.auth,_);yield bo(!1,C,g.providerId),yield dc(A,C.auth);const O=yield Pt(C);return A._openRedirect(C.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function bt(){return(bt=(0,o.Z)(function*(v,g){return yield Hn(v)._initializationPromise,Ee(v,g,!1)})).apply(this,arguments)}function Ee(v,g){return jt.apply(this,arguments)}function jt(){return(jt=(0,o.Z)(function*(v,g,_=!1){const C=Hn(v),A=Sn(C,g),Y=yield new uc(C,A,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield C._persistUserIfCurrent(Y.user),yield C._setRedirectUser(null,g)),Y})).apply(this,arguments)}function Pt(v){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,o.Z)(function*(v){const g=el(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Ki{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ct(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return an(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!an(g)){const A=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Te(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rs(g))}saveEventToCache(g){this.cachedEventUids.add(Rs(g)),this.lastProcessedEventTime=Date.now()}}function Rs(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function an({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Jr(v){return no.apply(this,arguments)}function no(){return(no=(0,o.Z)(function*(v,g={}){return Ht(v,"GET","/v1/projects",g)})).apply(this,arguments)}const hc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oi=/^https?/;function ei(){return(ei=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Jr(v);for(const _ of g)try{if(mm(_))return}catch{}Ae(v,"unauthorized-domain")})).apply(this,arguments)}function mm(v){const g=fe(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===C}if(!Oi.test(_))return!1;if(hc.test(v))return C===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(C)}const fc=new st(3e4,6e4);function ll(){const v=In().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let pc=null;function GC(v){return pc=pc||function _m(v){return new Promise((g,_)=>{var C,A,O;function Y(){ll(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ll(),_(Te(v,"network-request-failed"))},timeout:fc.get()})}if(null!==(A=null===(C=In().gapi)||void 0===C?void 0:C.iframes)&&void 0!==A&&A.Iframe)g(gapi.iframes.getContext());else{if(null===(O=In().gapi)||void 0===O||!O.load){const he=xu("iframefcb");return In()[he]=()=>{gapi.load?Y():_(Te(v,"network-request-failed"))},Zr(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ie=>_(Ie))}Y()}}).catch(g=>{throw pc=null,g})}(v),pc}const zC=new st(5e3,15e3),Pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ym(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?tt(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:v.name,v:oe.SDK_VERSION},A=Tx.get(v.config.apiHost);A&&(C.eid=A);const O=v._getFrameworks();return O.length&&(C.fw=O.join(",")),`${_}?${(0,L.xO)(C).slice(1)}`}function pe(){return pe=(0,o.Z)(function*(v){const g=yield GC(v),_=In().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:ym(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pi,dontclear:!0},C=>new Promise(function(){var A=(0,o.Z)(function*(O,Y){yield C.restyle({setHideOnLeave:!1});const he=Te(v,"network-request-failed"),Ie=In().setTimeout(()=>{Y(he)},zC.get());function Ve(){In().clearTimeout(Ie),O(C)}C.ping(Ve).then(Ve,()=>{Y(he)})});return function(O,Y){return A.apply(this,arguments)}}()))}),pe.apply(this,arguments)}const ur={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xr{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Os(v,g,_,C,A,O){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:oe.SDK_VERSION,eventId:A};if(g instanceof Ds){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ie,Ve]of Object.entries(O||{}))Y[Ie]=Ve}if(g instanceof ia){const Ie=g.getScopes().filter(Ve=>""!==Ve);Ie.length>0&&(Y.scopes=Ie.join(","))}v.tenantId&&(Y.tid=v.tenantId);const he=Y;for(const Ie of Object.keys(he))void 0===he[Ie]&&delete he[Ie];return`${function ep({config:v}){return v.emulator?tt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(he).slice(1)}`}const Ta="webStorageSupport",ah=class wm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Io,this._completeRedirectFn=Ee,this._overrideRedirectResult=Zf}_openPopup(g,_,C,A){var O=this;return(0,o.Z)(function*(){var Y;Ke(null===(Y=O.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const he=Os(g,_,C,fe(),A);return function vm(v,g,_,C=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),Y=Math.max((window.screen.availWidth-C)/2,0).toString();let he="";const Ie=Object.assign(Object.assign({},ur),{width:C.toString(),height:A.toString(),top:O,left:Y}),Ve=(0,L.z$)().toLowerCase();_&&(he=sn(Ve)?"_blank":_),pt(Ve)&&(g=g||"http://localhost",Ie.scrollbars="yes");const Ze=Object.entries(Ie).reduce((Gt,[es,_h])=>`${Gt}${es}=${_h},`,"");if(function $i(v=(0,L.z$)()){var g;return pi(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ve)&&"_self"!==he)return function mv(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",he),new Xr(null);const _t=window.open(g||"",he,Ze);G(_t,v,"popup-blocked");try{_t.focus()}catch{}return new Xr(_t)}(g,he,el())})()}_openRedirect(g,_,C,A){var O=this;return(0,o.Z)(function*(){return yield O._originValidation(g),function tl(v){In().location.href=v}(Os(g,_,C,fe(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:O}=this.eventManagers[_];return A?Promise.resolve(A):(Ke(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const C=yield function io(v){return pe.apply(this,arguments)}(g),A=new Ki(g);return C.register("authEvent",O=>(G(O?.authEvent,g,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=C,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ta,{type:Ta},A=>{var O;const Y=null===(O=A?.[0])||void 0===O?void 0:O[Ta];void 0!==Y&&_(!!Y),Ae(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ai(v){return ei.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return kf()||Kt()||pi()}};class Vu{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class Ro extends Vu{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ro(g)}_finalizeEnroll(g,_,C){return function hm(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:finalize",ut(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Uf(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:finalize",ut(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Tr=(()=>{class v{constructor(){}static assertion(_){return Ro._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Bu="@firebase/auth";class cl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dr(){return window}function hl(){return(hl=(0,o.Z)(function*(v,g,_){var C;const{BuildInfo:A}=dr();Ke(g.sessionId,"AuthEvent did not contain a session ID");const O=yield vv(g.sessionId),Y={};return pi()?Y.ibi=A.packageName:xt()?Y.apn=A.packageName:Ae(v,"operation-not-supported-in-this-environment"),A.displayName&&(Y.appDisplayName=A.displayName),Y.sessionId=O,Os(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Y)})).apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(v){const{BuildInfo:g}=dr(),_={};pi()?_.iosBundleId=g.packageName:xt()?_.androidPackageName=g.packageName:Ae(v,"operation-not-supported-in-this-environment"),yield Jr(v,_)})).apply(this,arguments)}function fl(){return(fl=(0,o.Z)(function*(v,g,_){const{cordova:C}=dr();let A=()=>{};try{yield new Promise((O,Y)=>{let he=null;function Ie(){var _t;O();const Gt=null===(_t=C.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Gt&&Gt(),"function"==typeof _?.close&&_.close()}function Ve(){he||(he=window.setTimeout(()=>{Y(Te(v,"redirect-cancelled-by-user"))},2e3))}function Ze(){"visible"===document?.visibilityState&&Ve()}g.addPassiveListener(Ie),document.addEventListener("resume",Ve,!1),xt()&&document.addEventListener("visibilitychange",Ze,!1),A=()=>{g.removePassiveListener(Ie),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",Ze,!1),he&&window.clearTimeout(he)}})}finally{A()}})).apply(this,arguments)}function vv(v){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,o.Z)(function*(v){const g=np(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function np(v){if(Ke(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}(0,L.Pz)("authIdTokenMaxAge"),function Or(v){(0,oe._registerComponent)(new me.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:O,authDomain:Y}=C.options;return((he,Ie)=>{G(O&&!O.includes(":"),"invalid-api-key",{appName:he.name}),G(!Y?.includes(":"),"argument-error",{appName:he.name});const Ve={apiKey:O,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ol(v)},Ze=new Gd(he,Ie,Ve);return function le(v,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(Ct);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,g?.popupRedirectResolver)}(Ze,_),Ze})(C,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new me.wA("auth-internal",g=>{const _=Hn(g.getProvider("auth").getImmediate());return new cl(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Bu,"0.21.3",function Ni(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,oe.registerVersion)(Bu,"0.21.3","esm2017")}("Browser");class pl extends Ki{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,o.Z)(function*(){yield g.initPromise})()}}function mc(v){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,o.Z)(function*(v){const g=yield _c()._get(lh(v));return g&&(yield _c()._remove(lh(v))),g})).apply(this,arguments)}function zu(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function _c(){return Ct(Tu)}function lh(v){return Z("authEvent",v.config.apiKey,v.name)}function yc(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}const uh=class ip{constructor(){this._redirectPersistence=Io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ee,this._overrideRedirectResult=Zf}_initialize(g){var _=this;return(0,o.Z)(function*(){const C=g._key();let A=_.eventManagers.get(C);return A||(A=new pl(g),_.eventManagers.set(C,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){Ae(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,A){var O=this;return(0,o.Z)(function*(){!function yv(v){var g,_,C,A,O,Y,he,Ie,Ve,Ze;const _t=dr();G("function"==typeof(null===(g=_t?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=_t?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(O=null===(A=null===(C=_t?.cordova)||void 0===C?void 0:C.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ie=null===(he=null===(Y=_t?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===he?void 0:he.browsertab)||void 0===Ie?void 0:Ie.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ze=null===(Ve=_t?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===Ze?void 0:Ze.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield O._initialize(g);yield Y.initialized(),Y.resetRedirect(),function gm(){ba.clear()}(),yield O._originValidation(g);const he=function Ea(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:zu(),postBody:null,tenantId:v.tenantId,error:Te(v,"no-auth-event")}}(g,C,A);yield function Sm(v,g){return _c()._set(lh(v),g)}(g,he);const Ie=yield function Tm(v,g,_){return hl.apply(this,arguments)}(g,he,_),Ve=yield function vi(v){const{cordova:g}=dr();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let A=null;C?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function Xo(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(Ie);return function Em(v,g,_){return fl.apply(this,arguments)}(g,Y,Ve)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function tp(v){return gc.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:A,BuildInfo:O}=dr(),Y=setTimeout((0,o.Z)(function*(){yield mc(g),_.onEvent(dh())}),500),he=function(){var Ze=(0,o.Z)(function*(_t){clearTimeout(Y);const Gt=yield mc(g);let es=null;Gt&&_t?.url&&(es=function wv(v,g){var _,C;const A=function xm(v){const g=yc(v),_=g.link?decodeURIComponent(g.link):void 0,C=yc(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return yc(A).link||A||C||_||v}(g);if(A.includes("/__/auth/callback")){const O=yc(A),Y=O.firebaseError?function Dm(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,he=null===(C=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Ie=he?Te(he):null;return Ie?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ie,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Gt,_t.url)),_.onEvent(es||dh())});return function(Gt){return Ze.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,he);const Ie=A,Ve=`${O.packageName.toLowerCase()}://`;dr().handleOpenURL=function(){var Ze=(0,o.Z)(function*(_t){if(_t.toLowerCase().startsWith(Ve)&&he({url:_t}),"function"==typeof Ie)try{Ie(_t)}catch(Gt){console.error(Gt)}});return function(_t){return Ze.apply(this,arguments)}}()}};function dh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function ml(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function fh(v=(0,L.z$)()){return!("file:"!==ml()&&"ionic:"!==ml()&&"capacitor:"!==ml()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function ph(){try{const v=self.localStorage,g=el();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Rm(v=(0,L.z$)()){return function vc(){return(0,L.w1)()&&11===document?.documentMode}()||function bv(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return gh()&&(0,L.hl)()}return!1}function gh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $u(){return(function Mm(){return"http:"===ml()||"https:"===ml()}()||(0,L.ru)()||fh())&&!function km(){return(0,L.b$)()||(0,L.UG)()}()&&ph()&&!gh()}function sp(){return fh()&&typeof document<"u"}function _l(){return(_l=(0,o.Z)(function*(){return!!sp()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Er={LOCAL:"local",NONE:"none",SESSION:"session"},yl=G,mh="persistence";function ap(v){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,o.Z)(function*(v){yield v._initializationPromise;const g=Pm(),_=Z(mh,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function Pm(){var v;try{return(null===(v=function op(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Cv=G;class Oo{constructor(){this.browserResolver=Ct(ah),this.cordovaResolver=Ct(uh),this.underlyingResolver=null,this._redirectPersistence=Io,this._completeRedirectFn=Ee,this._overrideRedirectResult=Zf}_initialize(g){var _=this;return(0,o.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,A){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,C,A)})()}_openRedirect(g,_,C,A){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,C,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return sp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,o.Z)(function*(){if(g.underlyingResolver)return;const _=yield function ju(){return _l.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function ro(v){return v.unwrap()}function lp(v){return Ku(v)}function Ku(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Nu.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let C;switch(_){case"google.com":C=Of;break;case"facebook.com":C=lu;break;case"github.com":C=Pf;break;case"twitter.com":C=cm;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:Y,pendingToken:he,nonce:Ie}=g;return O||Y||A||he?he?_.startsWith("saml.")?ra._create(_,he):Mr._fromParams({providerId:_,signInMethod:_,pendingToken:he,idToken:A,accessToken:O}):new ja(_).credential({idToken:A,accessToken:O,rawNonce:Ie}):null}return v instanceof L.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function Ii(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function vl(v,g){var _;const C=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new dp(v,function Ri(v,g){var _;const C=(0,L.m9)(v),A=g;return G(g.customData.operationType,C,"argument-error"),G(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),bu._fromError(C,A)}(v,g));else if(C){const A=Ku(g),O=g;A&&(O.credential=A,O.tenantId=C.tenantId||void 0,O.email=C.email||void 0,O.phoneNumber=C.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:lp(_),additionalUserInfo:Vf(_),user:Po.getOrCreate(A)}})}function cp(v,g){return up.apply(this,arguments)}function up(){return(up=(0,o.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>Ii(v,_.confirm(C))}})).apply(this,arguments)}class dp{constructor(g,_){this.resolver=_,this.auth=function wc(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Ii(ro(this.auth),this.resolver.resolveSignIn(g))}}class Po{constructor(g){this._delegate=g,this.multiFactor=function fa(v){const g=(0,L.m9)(v);return Js.has(g)||Js.set(g,Ja._fromUser(g)),Js.get(g)}(g)}static getOrCreate(g){return Po.USER_MAP.has(g)||Po.USER_MAP.set(g,new Po(g)),Po.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,o.Z)(function*(){return Ii(_.auth,Jn(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,o.Z)(function*(){return cp(C.auth,function pm(v,g,_){return rc.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,o.Z)(function*(){return Ii(_.auth,function gv(v,g,_){return cr.apply(this,arguments)}(_._delegate,g,Oo))})()}linkWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield ap(Hn(_.auth)),function J(v,g,_){return function ee(v,g,_){return we.apply(this,arguments)}(v,g,_)}(_._delegate,g,Oo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,o.Z)(function*(){return Ii(_.auth,Co(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return cp(this.auth,function zf(v,g,_){return $f.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Ii(this.auth,function HC(v,g,_){return Wf.apply(this,arguments)}(this._delegate,g,Oo))}reauthenticateWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield ap(Hn(_.auth)),function D(v,g,_){return function k(v,g,_){return U.apply(this,arguments)}(v,g,_)}(_._delegate,g,Oo)})()}sendEmailVerification(g){return function Yd(v,g){return mu.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,o.Z)(function*(){return yield function Nl(v,g){return sa.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Qd(v,g){return Jd((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Qa(v,g){return Jd((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function sc(v,g){return qf.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Eo(v,g){return fs.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function ql(v,g,_){return mi.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Po.USER_MAP=new WeakMap;const bc=G;let wl=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;bc(A,"invalid-api-key",{appName:_.name}),bc(A,"invalid-api-key",{appName:_.name});const O=typeof window<"u"?Oo:void 0;this._delegate=C.initialize({options:{persistence:Nm(A,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function iu(v,g,_){const C=Hn(v);G(C._canInitEmulator,C,"emulator-config-failed"),G(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const A=!!_?.disableWarnings,O=Ha(g),{host:Y,port:he}=function Ga(v){const g=Ha(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(C);if(A){const O=A[1];return{host:O,port:cn(C.substr(O.length+1))}}{const[O,Y]=C.split(":");return{host:O,port:cn(Y)}}}(g);C.config.emulator={url:`${O}//${Y}${null===he?"":`:${he}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Y,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function gi(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function Ul(v,g){return Kd.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Hl(this._delegate,_)}confirmPasswordReset(_,C){return function Za(v,g,_){return Vt.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var A=this;return(0,o.Z)(function*(){return Ii(A._delegate,function Ff(v,g,_){return pu.apply(this,arguments)}(A._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function $l(v,g){return jl.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Zd(v,g){return"EMAIL_SIGNIN"===$a.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,o.Z)(function*(){bc($u(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function et(v,g){return bt.apply(this,arguments)}(_._delegate,Oo);return C?Ii(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Am(v,g){Hn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,A){const{next:O,error:Y,complete:he}=Zu(_,C,A);return this._delegate.onAuthStateChanged(O,Y,he)}onIdTokenChanged(_,C,A){const{next:O,error:Y,complete:he}=Zu(_,C,A);return this._delegate.onIdTokenChanged(O,Y,he)}sendSignInLinkToEmail(_,C){return function un(v,g,_){return gu.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function xs(v,g,_){return Ka.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,o.Z)(function*(){let A;switch(function qu(v,g){yl(Object.values(Er).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?yl(g!==Er.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?yl(g===Er.NONE,v,"unsupported-persistence-type"):gh()?yl(g===Er.NONE||g===Er.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):yl(g===Er.NONE||ph(),v,"unsupported-persistence-type")}(C._delegate,_),_){case Er.SESSION:A=Io;break;case Er.LOCAL:A=(yield Ct(Mo)._isAvailable())?Mo:Tu;break;case Er.NONE:A=H;break;default:return Ae("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ii(this._delegate,function qd(v){return Nf.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ii(this._delegate,Wn(this._delegate,_))}signInWithCustomToken(_){return Ii(this._delegate,function To(v,g){return Ei.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return Ii(this._delegate,function ye(v,g,_){return Wn((0,L.m9)(v),au.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return Ii(this._delegate,function ki(v,g,_){return Ya.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return cp(this._delegate,function on(v,g,_){return Pu.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,o.Z)(function*(){return bc($u(),C._delegate,"operation-not-supported-in-this-environment"),Ii(C._delegate,function wa(v,g,_){return cc.apply(this,arguments)}(C._delegate,_,Oo))})()}signInWithRedirect(_){var C=this;return(0,o.Z)(function*(){return bc($u(),C._delegate,"operation-not-supported-in-this-environment"),yield ap(C._delegate),function al(v,g,_){return function Lu(v,g,_){return S.apply(this,arguments)}(v,g,_)}(C._delegate,_,Oo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function fu(v,g){return Gl.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Er,v})();function Zu(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const A=C;return{next:Y=>A(Y&&Po.getOrCreate(Y)),error:g,complete:_}}function Nm(v,g){const _=function Om(v,g){const _=Pm();if(!_)return[];const C=Z(mh,v,g);switch(_.getItem(C)){case Er.NONE:return[H];case Er.LOCAL:return[Mo,Io];case Er.SESSION:return[Io];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(Mo)&&_.push(Mo),typeof window<"u")for(const C of[Tu,Io])_.includes(C)||_.push(C);return _.includes(H)||_.push(H),_}class Yu{constructor(){this.providerId="phone",this._delegate=new Nu(ro(te.Z.auth()))}static credential(g,_){return Nu.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Yu.PHONE_SIGN_IN_METHOD=Nu.PHONE_SIGN_IN_METHOD,Yu.PROVIDER_ID=Nu.PROVIDER_ID;const Fm=G;class hp{constructor(g,_,C=te.Z.app()){var A;Fm(null===(A=C.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new ic(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vm(v){v.INTERNAL.registerComponent(new me.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new wl(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:au,FacebookAuthProvider:lu,GithubAuthProvider:Pf,GoogleAuthProvider:Of,OAuthProvider:ja,SAMLAuthProvider:hs,PhoneAuthProvider:Yu,PhoneMultiFactorGenerator:Tr,RecaptchaVerifier:hp,TwitterAuthProvider:cm,Auth:wl,AuthCredential:Qn,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.3")}(te.Z)},8766:(wt,xe,V)=>{V.d(xe,{Lj:()=>Ae,X3:()=>je});var o=V(5861);let L,oe;const me=new WeakMap,de=new WeakMap,ue=new WeakMap,j=new WeakMap,q=new WeakMap;let Me={get(G,Ce,Ke){if(G instanceof IDBTransaction){if("done"===Ce)return de.get(G);if("objectStoreNames"===Ce)return G.objectStoreNames||ue.get(G);if("store"===Ce)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return Re(G[Ce])},set:(G,Ce,Ke)=>(G[Ce]=Ke,!0),has:(G,Ce)=>G instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in G};function ge(G){return"function"==typeof G?function mt(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ce){return G.apply(ke(this),Ce),Re(me.get(this))}:function(...Ce){return Re(G.apply(ke(this),Ce))}:function(Ce,...Ke){const nt=G.call(ke(this),Ce,...Ke);return ue.set(nt,Ce.sort?Ce.sort():[Ce]),Re(nt)}}(G):(G instanceof IDBTransaction&&function Ye(G){if(de.has(G))return;const Ce=new Promise((Ke,nt)=>{const Ct=()=>{G.removeEventListener("complete",lt),G.removeEventListener("error",le),G.removeEventListener("abort",le)},lt=()=>{Ke(),Ct()},le=()=>{nt(G.error||new DOMException("AbortError","AbortError")),Ct()};G.addEventListener("complete",lt),G.addEventListener("error",le),G.addEventListener("abort",le)});de.set(G,Ce)}(G),((G,Ce)=>Ce.some(Ke=>G instanceof Ke))(G,function se(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Me):G)}function Re(G){if(G instanceof IDBRequest)return function Q(G){const Ce=new Promise((Ke,nt)=>{const Ct=()=>{G.removeEventListener("success",lt),G.removeEventListener("error",le)},lt=()=>{Ke(Re(G.result)),Ct()},le=()=>{nt(G.error),Ct()};G.addEventListener("success",lt),G.addEventListener("error",le)});return Ce.then(Ke=>{Ke instanceof IDBCursor&&me.set(Ke,G)}).catch(()=>{}),q.set(Ce,G),Ce}(G);if(j.has(G))return j.get(G);const Ce=ge(G);return Ce!==G&&(j.set(G,Ce),q.set(Ce,G)),Ce}const ke=G=>q.get(G);function je(G,Ce,{blocked:Ke,upgrade:nt,blocking:Ct,terminated:lt}={}){const le=indexedDB.open(G,Ce),fe=Re(le);return nt&&le.addEventListener("upgradeneeded",ve=>{nt(Re(le.result),ve.oldVersion,ve.newVersion,Re(le.transaction))}),Ke&&le.addEventListener("blocked",()=>Ke()),fe.then(ve=>{lt&&ve.addEventListener("close",()=>lt()),Ct&&ve.addEventListener("versionchange",()=>Ct())}).catch(()=>{}),fe}function Ae(G,{blocked:Ce}={}){const Ke=indexedDB.deleteDatabase(G);return Ce&&Ke.addEventListener("blocked",()=>Ce()),Re(Ke).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],Ge=new Map;function He(G,Ce){if(!(G instanceof IDBDatabase)||Ce in G||"string"!=typeof Ce)return;if(Ge.get(Ce))return Ge.get(Ce);const Ke=Ce.replace(/FromIndex$/,""),nt=Ce!==Ke,Ct=Oe.includes(Ke);if(!(Ke in(nt?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Te.includes(Ke))return;const lt=function(){var le=(0,o.Z)(function*(fe,...ve){const Pe=this.transaction(fe,Ct?"readwrite":"readonly");let qe=Pe.store;return nt&&(qe=qe.index(ve.shift())),(yield Promise.all([qe[Ke](...ve),Ct&&Pe.done]))[0]});return function(ve){return le.apply(this,arguments)}}();return Ge.set(Ce,lt),lt}!function Xe(G){Me=G(Me)}(G=>({...G,get:(Ce,Ke,nt)=>He(Ce,Ke)||G.get(Ce,Ke,nt),has:(Ce,Ke)=>!!He(Ce,Ke)||G.has(Ce,Ke)}))},5861:(wt,xe,V)=>{function o(L,oe,se,re,me,de,ue){try{var j=L[de](ue),q=j.value}catch(Q){return void se(Q)}j.done?oe(q):Promise.resolve(q).then(re,me)}function te(L){return function(){var oe=this,se=arguments;return new Promise(function(re,me){var de=L.apply(oe,se);function ue(q){o(de,re,me,ue,j,"next",q)}function j(q){o(de,re,me,ue,j,"throw",q)}ue(void 0)})}}V.d(xe,{Z:()=>te})}},wt=>{wt(wt.s=4179)}]);
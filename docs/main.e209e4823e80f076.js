"use strict";(self.webpackChunklogistics_primeng=self.webpackChunklogistics_primeng||[]).push([[179],{2011:(bt,Ie,V)=>{V.d(Ie,{Dh:()=>pe,GT:()=>oe,cc:()=>ke,hO:()=>We,on:()=>q,pX:()=>le,xv:()=>he});var s=V(4650),ie=V(9260),F=V(2122);bt=V.hmd(bt);const ae=["ngOnDestroy"],le=(Me,Ae,Ue,xe={})=>new Proxy(Me,{get:(Se,Re)=>Ue.runOutsideAngular(()=>{var Be;if(Me[Re])return!(null===(Be=xe?.spy)||void 0===Be)&&Be.get&&xe.spy.get(Re,Me[Re]),Me[Re];if(ae.indexOf(Re)>-1)return()=>{};const Ve=Ae.toPromise().then(G=>{const Ee=G&&G[Re];return"function"==typeof Ee?Ee.bind(G):Ee&&Ee.then?Ee.then(qe=>Ue.run(()=>qe)):Ue.run(()=>Ee)});return new Proxy(()=>{},{get:(G,Ee)=>Ve[Ee],apply:(G,Ee,qe)=>Ve.then(it=>{var Tt;const ct=it&&it(...qe);return!(null===(Tt=xe?.spy)||void 0===Tt)&&Tt.apply&&xe.spy.apply(Re,qe,ct),ct})})})}),oe=(Me,Ae)=>{Ae.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(xe=>{Object.defineProperty(Me.prototype,xe,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,xe))})})};class ye{constructor(Ae){return Ae}}const pe=new s.OlP("angularfire2.app.options"),he=new s.OlP("angularfire2.app.name");function q(Me,Ae,Ue){const Se="object"==typeof Ue&&Ue||{};Se.name=Se.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Be=ie.Z.apps.filter(Ve=>Ve&&Ve.name===Se.name)[0]||Ae.runOutsideAngular(()=>ie.Z.initializeApp(Me,Se));try{JSON.stringify(Me)!==JSON.stringify(Be.options)&&W("error",`${Be.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(Be)}const W=(Me,...Ae)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Me](...Ae)},X={provide:ye,useFactory:q,deps:[pe,s.R0b,[new s.FiY,he]]};let We=(()=>{class Me{constructor(Ue){ie.Z.registerVersion("angularfire",F.q4.full,"core"),ie.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ie.Z.registerVersion("angular",s.q4F.full,Ue.toString())}static initializeApp(Ue,xe){return{ngModule:Me,providers:[{provide:pe,useValue:Ue},{provide:he,useValue:xe}]}}}return Me.\u0275fac=function(Ue){return new(Ue||Me)(s.LFG(s.Lbi))},Me.\u0275mod=s.oAB({type:Me}),Me.\u0275inj=s.cJS({providers:[X]}),Me})();function ke(Me,Ae,Ue,xe,Se){const[,Re,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Me)||[];if(Re)return function tt(Me,Ae){try{return Me.toString()===Ae.toString()}catch{return Me===Ae}}(Se,Be)||(me("error",`${Ae} was already initialized on the ${Ue} Firebase App with different settings.${_t?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Se,was:Be})),Re;{const Ve=xe();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ve,Se]),Ve}}const _t=!!bt.hot,me=(Me,...Ae)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Me](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(bt,Ie,V)=>{V.d(Ie,{q4:()=>Fc,iC:()=>Pn,HU:()=>Xp,vb:()=>Nt,JM:()=>cr});var s=V(4650),ie=V(259),F=V(5861),ae=V(9681),le=V(2090),oe=V(4859),ye=V(1877),pe=V(8766);const he="@firebase/installations",q="0.6.3",X=`w:${q}`,We="FIS_v2",Ae=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ue(I){return I instanceof le.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Se(I){return{token:I.token,requestStatus:2,expiresIn:it(I.expiresIn),creationTime:Date.now()}}function Re(I,D){return Be.apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(I,D){const U=(yield D.json()).error;return Ae.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ve({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function G(I,{refreshToken:D}){const R=Ve(I);return R.append("Authorization",function Tt(I){return`${We} ${I}`}(D)),R}function Ee(I){return qe.apply(this,arguments)}function qe(){return(qe=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function it(I){return Number(I.replace("s","000"))}function ct(I,D){return ue.apply(this,arguments)}function ue(){return(ue=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:R}){const U=xe(I),te=Ve(I),ne=D.getImmediate({optional:!0});if(ne){const Qe=yield ne.getHeartbeatsHeader();Qe&&te.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:te,body:JSON.stringify({fid:R,authVersion:We,appId:I.appId,sdkVersion:X})},wt=yield Ee(()=>fetch(U,Ye));if(wt.ok){const Qe=yield wt.json();return{fid:Qe.fid||R,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:Se(Qe.authToken)}}throw yield Re("Create Installation",wt)})).apply(this,arguments)}function fe(I){return new Promise(D=>{setTimeout(D,I)})}const Oe=/^[cdef][\w-]{21}$/;function Ke(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function ot(I){return function Te(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Oe.test(R)?R:""}catch{return""}}function nt(I){return`${I.appName}!${I.appId}`}const Cn=new Map;function Mt(I,D){const R=nt(I);jt(R,D),function Bn(I,D){const R=function Hn(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=I=>{jt(I.data.key,I.data.fid)}),qn}();R&&R.postMessage({key:I,fid:D}),function Un(){0===Cn.size&&qn&&(qn.close(),qn=null)}()}(R,D)}function jt(I,D){const R=Cn.get(I);if(R)for(const U of R)U(D)}let qn=null;const xr="firebase-installations-store";let ir=null;function ro(){return ir||(ir=(0,pe.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(xr)}})),ir}function Rn(I,D){return pr.apply(this,arguments)}function pr(){return(pr=(0,F.Z)(function*(I,D){const R=nt(I),te=(yield ro()).transaction(xr,"readwrite"),ne=te.objectStore(xr),_e=yield ne.get(R);return yield ne.put(D,R),yield te.done,(!_e||_e.fid!==D.fid)&&Mt(I,D.fid),D})).apply(this,arguments)}function It(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,F.Z)(function*(I){const D=nt(I),U=(yield ro()).transaction(xr,"readwrite");yield U.objectStore(xr).delete(D),yield U.done})).apply(this,arguments)}function Gr(I,D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,F.Z)(function*(I,D){const R=nt(I),te=(yield ro()).transaction(xr,"readwrite"),ne=te.objectStore(xr),_e=yield ne.get(R),Ye=D(_e);return void 0===Ye?yield ne.delete(R):yield ne.put(Ye,R),yield te.done,Ye&&(!_e||_e.fid!==Ye.fid)&&Mt(I,Ye.fid),Ye})).apply(this,arguments)}function ji(I){return so.apply(this,arguments)}function so(){return(so=(0,F.Z)(function*(I){let D;const R=yield Gr(I.appConfig,U=>{const te=Gt(U),ne=kt(I,te);return D=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Gt(I){return Li(I||{fid:Ke(),registrationStatus:0})}function kt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ae.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function Ot(I,D){return As.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Kn(I)}:{installationEntry:D}}function As(){return(As=(0,F.Z)(function*(I,D){try{const R=yield ct(I,D);return Rn(I.appConfig,R)}catch(R){throw Ue(R)&&409===R.customData.serverCode?yield It(I.appConfig):yield Rn(I.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Kn(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,F.Z)(function*(I){let D=yield jr(I.appConfig);for(;1===D.registrationStatus;)yield fe(100),D=yield jr(I.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield ji(I);return U||R}return D})).apply(this,arguments)}function jr(I){return Gr(I,D=>{if(!D)throw Ae.create("installation-not-found");return Li(D)})}function Li(I){return function ma(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function bn(I,D){return ls.apply(this,arguments)}function ls(){return(ls=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:D},R){const U=dn(I,R),te=G(I,R),ne=D.getImmediate({optional:!0});if(ne){const Qe=yield ne.getHeartbeatsHeader();Qe&&te.append("x-firebase-client",Qe)}const Ye={method:"POST",headers:te,body:JSON.stringify({installation:{sdkVersion:X,appId:I.appId}})},wt=yield Ee(()=>fetch(U,Ye));if(wt.ok)return Se(yield wt.json());throw yield Re("Generate Auth Token",wt)})).apply(this,arguments)}function dn(I,{fid:D}){return`${xe(I)}/${D}/authTokens:generate`}function $i(I){return cs.apply(this,arguments)}function cs(){return(cs=(0,F.Z)(function*(I,D=!1){let R;const U=yield Gr(I.appConfig,ne=>{if(!qt(ne))throw Ae.create("not-registered");const _e=ne.authToken;if(!D&&$(_e))return ne;if(1===_e.requestStatus)return R=Je(I,D),ne;{if(!navigator.onLine)throw Ae.create("app-offline");const Ye=Y(ne);return R=Pt(I,Ye),Ye}});return R?yield R:U.authToken})).apply(this,arguments)}function Je(I,D){return De.apply(this,arguments)}function De(){return(De=(0,F.Z)(function*(I,D){let R=yield dt(I.appConfig);for(;1===R.authToken.requestStatus;)yield fe(100),R=yield dt(I.appConfig);const U=R.authToken;return 0===U.requestStatus?$i(I,D):U})).apply(this,arguments)}function dt(I){return Gr(I,D=>{if(!qt(D))throw Ae.create("not-registered");return function ve(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Pt(I,D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,F.Z)(function*(I,D){try{const R=yield bn(I,D),U=Object.assign(Object.assign({},D),{authToken:R});return yield Rn(I.appConfig,U),R}catch(R){if(!Ue(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Rn(I.appConfig,U)}else yield It(I.appConfig);throw R}})).apply(this,arguments)}function qt(I){return void 0!==I&&2===I.registrationStatus}function $(I){return 2===I.requestStatus&&!function z(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Y(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function ft(){return(ft=(0,F.Z)(function*(I){const D=I,{installationEntry:R,registrationPromise:U}=yield ji(D);return U?U.catch(console.error):$i(D).catch(console.error),R.fid})).apply(this,arguments)}function on(){return(on=(0,F.Z)(function*(I,D=!1){const R=I;return yield Yn(R),(yield $i(R,D)).token})).apply(this,arguments)}function Yn(I){return At.apply(this,arguments)}function At(){return(At=(0,F.Z)(function*(I){const{registrationPromise:D}=yield ji(I);D&&(yield D)})).apply(this,arguments)}function lc(I){return Ae.create("missing-app-config-values",{valueName:I})}const Tu="installations",Qn=I=>{const D=I.getProvider("app").getImmediate(),R=function hl(I){if(!I||!I.options)throw lc("App Configuration");if(!I.name)throw lc("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!I.options[R])throw lc(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},eh=I=>{const D=I.getProvider("app").getImmediate(),R=(0,ae._getProvider)(D,Tu).getImmediate();return{getId:()=>function se(I){return ft.apply(this,arguments)}(R),getToken:te=>function Wt(I){return on.apply(this,arguments)}(R,te)}};(function Eu(){(0,ae._registerComponent)(new oe.wA(Tu,Qn,"PUBLIC")),(0,ae._registerComponent)(new oe.wA("installations-internal",eh,"PRIVATE"))})(),(0,ae.registerVersion)(he,q),(0,ae.registerVersion)(he,q,"esm2017");const pl="@firebase/remote-config",ci=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Io{constructor(D,R,U,te){this.client=D,this.storage=R,this.storageCache=U,this.logger=te}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,te=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${te}.`),te}fetch(D){var R=this;return(0,F.Z)(function*(){const[U,te]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(te&&R.isCachedDataFresh(D.cacheMaxAgeMillis,U))return te;D.eTag=te&&te.eTag;const ne=yield R.client.fetch(D),_e=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&_e.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(_e),ne})()}}function Mr(I=navigator){return I.languages&&I.languages[0]||I.language}class Tn{constructor(D,R,U,te,ne,_e){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=U,this.projectId=te,this.apiKey=ne,this.appId=_e}fetch(D){var R=this;return(0,F.Z)(function*(){const[U,te]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},wt={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:te,app_id:R.appId,language_code:Mr()},Qe={method:"POST",headers:Ye,body:JSON.stringify(wt)},Lt=fetch(_e,Qe),Pe=new Promise((Qr,Fs)=>{D.signal.addEventListener(()=>{const zo=new Error("The operation was aborted.");zo.name="AbortError",Fs(zo)})});let Gn;try{yield Promise.race([Lt,Pe]),Gn=yield Lt}catch(Qr){let Fs="fetch-client-network";throw"AbortError"===Qr?.name&&(Fs="fetch-timeout"),ci.create(Fs,{originalErrorMessage:Qr?.message})}let Ci=Gn.status;const po=Gn.headers.get("ETag")||void 0;let Oi,Ua;if(200===Gn.status){let Qr;try{Qr=yield Gn.json()}catch(Fs){throw ci.create("fetch-client-parse",{originalErrorMessage:Fs?.message})}Oi=Qr.entries,Ua=Qr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ua?Ci=500:"NO_CHANGE"===Ua?Ci=304:("NO_TEMPLATE"===Ua||"EMPTY_CONFIG"===Ua)&&(Oi={}),304!==Ci&&200!==Ci)throw ci.create("fetch-status",{httpStatus:Ci});return{status:Ci,eTag:po,config:Oi}})()}}class us{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,F.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:U}){var te=this;return(0,F.Z)(function*(){yield function wn(I,D){return new Promise((R,U)=>{const te=Math.max(D-Date.now(),0),ne=setTimeout(R,te);I.addEventListener(()=>{clearTimeout(ne),U(ci.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const ne=yield te.client.fetch(D);return yield te.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Mn(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const _e={throttleEndTimeMillis:Date.now()+(0,le.$s)(U),backoffCount:U+1};return yield te.storage.setThrottleMetadata(_e),te.attemptFetch(D,_e)}})()}}class ba{constructor(D,R,U,te,ne){this.app=D,this._client=R,this._storageCache=U,this._storage=te,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Do(I,D){const R=I.target.error||void 0;return ci.create(D,{originalErrorMessage:R&&R?.message})}const sr="app_namespace_store";class $r{constructor(D,R,U,te=function fr(){return new Promise((I,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{D(Do(U,"storage-open"))},R.onsuccess=U=>{I(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(sr,{keyPath:"compositeKey"})}}catch(R){D(ci.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=D,this.appName=R,this.namespace=U,this.openDbPromise=te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((te,ne)=>{const Ye=U.transaction([sr],"readonly").objectStore(sr),wt=R.createCompositeKey(D);try{const Qe=Ye.get(wt);Qe.onerror=Lt=>{ne(Do(Lt,"storage-get"))},Qe.onsuccess=Lt=>{const Pe=Lt.target.result;te(Pe?Pe.value:void 0)}}catch(Qe){ne(ci.create("storage-get",{originalErrorMessage:Qe?.message}))}})})()}set(D,R){var U=this;return(0,F.Z)(function*(){const te=yield U.openDbPromise;return new Promise((ne,_e)=>{const wt=te.transaction([sr],"readwrite").objectStore(sr),Qe=U.createCompositeKey(D);try{const Lt=wt.put({compositeKey:Qe,value:R});Lt.onerror=Pe=>{_e(Do(Pe,"storage-set"))},Lt.onsuccess=()=>{ne()}}catch(Lt){_e(ci.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(D){var R=this;return(0,F.Z)(function*(){const U=yield R.openDbPromise;return new Promise((te,ne)=>{const Ye=U.transaction([sr],"readwrite").objectStore(sr),wt=R.createCompositeKey(D);try{const Qe=Ye.delete(wt);Qe.onerror=Lt=>{ne(Do(Lt,"storage-delete"))},Qe.onsuccess=()=>{te()}}catch(Qe){ne(ci.create("storage-delete",{originalErrorMessage:Qe?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class gl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const R=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),te=D.storage.getActiveConfig(),ne=yield R;ne&&(D.lastFetchStatus=ne);const _e=yield U;_e&&(D.lastSuccessfulFetchTimestampMillis=_e);const Ye=yield te;Ye&&(D.activeConfig=Ye)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ml(){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,F.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Zr(){(0,ae._registerComponent)(new oe.wA("remote-config",function I(D,{instanceIdentifier:R}){const U=D.getProvider("app").getImmediate(),te=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ci.create("registration-window");if(!(0,le.hl)())throw ci.create("indexed-db-unavailable");const{projectId:ne,apiKey:_e,appId:Ye}=U.options;if(!ne)throw ci.create("registration-project-id");if(!_e)throw ci.create("registration-api-key");if(!Ye)throw ci.create("registration-app-id");const wt=new $r(Ye,U.name,R=R||"firebase"),Qe=new gl(wt),Lt=new ye.Yd(pl);Lt.logLevel=ye.in.ERROR;const Pe=new Tn(te,ae.SDK_VERSION,R,ne,_e,Ye),Gn=new us(Pe,wt),Ci=new Io(Gn,wt,Qe,Lt),po=new ba(U,Ci,Qe,wt,Lt);return function Jn(I){const D=(0,le.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(po),po},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(pl,"0.4.3"),(0,ae.registerVersion)(pl,"0.4.3","esm2017")}();const Du="/firebase-messaging-sw.js",qr="/firebase-cloud-messaging-push-scope",wa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xu="google.c.a.c_id",Bp="google.c.a.c_l",Hp="google.c.a.ts",hm="google.c.a.e";var xo=(()=>{return(I=xo||(xo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",xo;var I})();function ds(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pm(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),te=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)te[ne]=U.charCodeAt(ne);return te}const fn="fcm_token_details_db",or="fcm_token_object_Store";function Au(I){return ih.apply(this,arguments)}function ih(){return ih=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(fn))return null;let D=null;return(yield(0,pe.X3)(fn,5,{upgrade:(U=(0,F.Z)(function*(te,ne,_e,Ye){var wt;if(ne<2||!te.objectStoreNames.contains(or))return;const Qe=Ye.objectStore(or),Lt=yield Qe.index("fcmSenderId").get(I);if(yield Qe.clear(),Lt)if(2===ne){const Pe=Lt;if(!Pe.auth||!Pe.p256dh||!Pe.endpoint)return;D={token:Pe.fcmToken,createTime:null!==(wt=Pe.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:Pe.auth,p256dh:Pe.p256dh,endpoint:Pe.endpoint,swScope:Pe.swScope,vapidKey:"string"==typeof Pe.vapidKey?Pe.vapidKey:ds(Pe.vapidKey)}}}else if(3===ne){const Pe=Lt;D={token:Pe.fcmToken,createTime:Pe.createTime,subscriptionOptions:{auth:ds(Pe.auth),p256dh:ds(Pe.p256dh),endpoint:Pe.endpoint,swScope:Pe.swScope,vapidKey:ds(Pe.vapidKey)}}}else if(4===ne){const Pe=Lt;D={token:Pe.fcmToken,createTime:Pe.createTime,subscriptionOptions:{auth:ds(Pe.auth),p256dh:ds(Pe.p256dh),endpoint:Pe.endpoint,swScope:Pe.swScope,vapidKey:ds(Pe.vapidKey)}}}}),function(ne,_e,Ye,wt){return U.apply(this,arguments)})})).close(),yield(0,pe.Lj)(fn),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),rh(D)?D:null;var U}),ih.apply(this,arguments)}function rh(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ao="firebase-messaging-store";let dc=null;function Ta(){return dc||(dc=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Ao)}})),dc}function hc(I){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,F.Z)(function*(I){const D=Ia(I),U=yield(yield Ta()).transaction(Ao).objectStore(Ao).get(D);if(U)return U;{const te=yield Au(I.appConfig.senderId);if(te)return yield Mo(I,te),te}})).apply(this,arguments)}function Mo(I,D){return yl.apply(this,arguments)}function yl(){return(yl=(0,F.Z)(function*(I,D){const R=Ia(I),te=(yield Ta()).transaction(Ao,"readwrite");return yield te.objectStore(Ao).put(D,R),yield te.done,D})).apply(this,arguments)}function sh(I){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,F.Z)(function*(I){const D=Ia(I),U=(yield Ta()).transaction(Ao,"readwrite");yield U.objectStore(Ao).delete(D),yield U.done})).apply(this,arguments)}function Ia({appConfig:I}){return I.appId}const ii=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pc(I,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,F.Z)(function*(I,D){const R=yield Oo(I),U=vl(D),te={method:"POST",headers:R,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(Da(I.appConfig),te)).json()}catch(_e){throw ii.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(ne.error)throw ii.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw ii.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function fc(I,D){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,F.Z)(function*(I,D){const R=yield Oo(I),U=vl(D.subscriptionOptions),te={method:"PATCH",headers:R,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${Da(I.appConfig)}/${D.token}`,te)).json()}catch(_e){throw ii.create("token-update-failed",{errorInfo:_e?.toString()})}if(ne.error)throw ii.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw ii.create("token-update-no-token");return ne.token})).apply(this,arguments)}function di(I,D){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,F.Z)(function*(I,D){const U={method:"DELETE",headers:yield Oo(I)};try{const ne=yield(yield fetch(`${Da(I.appConfig)}/${D}`,U)).json();if(ne.error)throw ii.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(te){throw ii.create("token-unsubscribe-failed",{errorInfo:te?.toString()})}})).apply(this,arguments)}function Da({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Oo(I){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*({appConfig:I,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function vl({p256dh:I,auth:D,endpoint:R,vapidKey:U}){const te={web:{endpoint:R,auth:D,p256dh:I}};return U!==wa&&(te.web.applicationPubKey=U),te}const xa=6048e5;function gc(I){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,F.Z)(function*(I){const D=yield Ru(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:ds(D.getKey("auth")),p256dh:ds(D.getKey("p256dh"))},U=yield hc(I.firebaseDependencies);if(U){if(yc(U.subscriptionOptions,R))return Date.now()>=U.createTime+xa?zt(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield di(I.firebaseDependencies,U.token)}catch(te){console.warn(te)}return oh(I.firebaseDependencies,R)}return oh(I.firebaseDependencies,R)})).apply(this,arguments)}function bl(I){return wl.apply(this,arguments)}function wl(){return(wl=(0,F.Z)(function*(I){const D=yield hc(I.firebaseDependencies);D&&(yield di(I.firebaseDependencies,D.token),yield sh(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function zt(I,D){return mc.apply(this,arguments)}function mc(){return(mc=(0,F.Z)(function*(I,D){try{const R=yield fc(I.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield Mo(I.firebaseDependencies,U),R}catch(R){throw yield bl(I),R}})).apply(this,arguments)}function oh(I,D){return _c.apply(this,arguments)}function _c(){return(_c=(0,F.Z)(function*(I,D){const U={token:yield pc(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Mo(I,U),U.token})).apply(this,arguments)}function Ru(I,D){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pm(D)})})).apply(this,arguments)}function yc(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Up(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Pu(I,D){if(!D.notification)return;I.notification={};const R=D.notification.title;R&&(I.notification.title=R);const U=D.notification.body;U&&(I.notification.body=U);const te=D.notification.image;te&&(I.notification.image=te);const ne=D.notification.icon;ne&&(I.notification.icon=ne)}(D,I),function be(I,D){D.data&&(I.data=D.data)}(D,I),function gn(I,D){var R,U,te,ne,_e;if(!(D.fcmOptions||null!==(R=D.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const Ye=null!==(te=null===(U=D.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==te?te:null===(ne=D.notification)||void 0===ne?void 0:ne.click_action;Ye&&(I.fcmOptions.link=Ye);const wt=null===(_e=D.fcmOptions)||void 0===_e?void 0:_e.analytics_label;wt&&(I.fcmOptions.analyticsLabel=wt)}(D,I),D}function Nu(I){return"object"==typeof I&&!!I&&xu in I}function ah(I,D){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<D.length&&R.push(D.charAt(U));return R.join("")}function Cl(I){return ii.create("missing-app-config-values",{valueName:I})}ah("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ah("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vc{constructor(D,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const te=function Fi(I){if(!I||!I.options)throw Cl("App Configuration Object");if(!I.name)throw Cl("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of D)if(!R[U])throw Cl(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:te,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function _r(I){return bc.apply(this,arguments)}function bc(){return(bc=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Du,{scope:qr}),I.swRegistration.update().catch(()=>{})}catch(D){throw ii.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function wc(I,D){return lh.apply(this,arguments)}function lh(){return(lh=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield _r(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ii.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Lu(I,D){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=wa)})).apply(this,arguments)}function yr(){return(yr=(0,F.Z)(function*(I,D){if(!navigator)throw ii.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ii.create("permission-blocked");return yield Lu(I,D?.vapidKey),yield wc(I,D?.serviceWorkerRegistration),gc(I)})).apply(this,arguments)}function ao(I,D,R){return Po.apply(this,arguments)}function Po(){return(Po=(0,F.Z)(function*(I,D,R){const U=hs(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[xu],message_name:R[Bp],message_time:R[Hp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hs(I){switch(I){case xo.NOTIFICATION_CLICKED:return"notification_open";case xo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Tl(){return(Tl=(0,F.Z)(function*(I,D){const R=D.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===xo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Up(R)):I.onMessageHandler.next(Up(R)));const U=R.data;Nu(U)&&"1"===U[hm]&&(yield ao(I,R.messageType,U))})).apply(this,arguments)}const uh="@firebase/messaging",Vu=I=>{const D=new vc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ch(I,D){return Tl.apply(this,arguments)}(D,R)),D},Os=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:U=>function wi(I,D){return yr.apply(this,arguments)}(D,U)}};function Bu(){return hh.apply(this,arguments)}function hh(){return(hh=(0,F.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dh(){(0,ae._registerComponent)(new oe.wA("messaging",Vu,"PUBLIC")),(0,ae._registerComponent)(new oe.wA("messaging-internal",Os,"PRIVATE")),(0,ae.registerVersion)(uh,"0.12.3"),(0,ae.registerVersion)(uh,"0.12.3","esm2017")}();const ph="analytics",ar="firebase_id",Aa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uu="https://www.googletagmanager.com/gtag/js",Vi=new ye.Yd("@firebase/analytics");function jp(I){return Promise.all(I.map(D=>D.catch(R=>R)))}function mm(I,D){const R=document.createElement("script");R.src=`${Uu}?l=${I}&id=${D}`,R.async=!0,document.head.appendChild(R)}function El(I,D,R,U,te,ne){return lo.apply(this,arguments)}function lo(){return(lo=(0,F.Z)(function*(I,D,R,U,te,ne){const _e=U[te];try{if(_e)yield D[_e];else{const wt=(yield jp(R)).find(Qe=>Qe.measurementId===te);wt&&(yield D[wt.appId])}}catch(Ye){Vi.error(Ye)}I("config",te,ne)})).apply(this,arguments)}function Ma(I,D,R,U,te){return Or.apply(this,arguments)}function Or(){return(Or=(0,F.Z)(function*(I,D,R,U,te){try{let ne=[];if(te&&te.send_to){let _e=te.send_to;Array.isArray(_e)||(_e=[_e]);const Ye=yield jp(R);for(const wt of _e){const Qe=Ye.find(Pe=>Pe.measurementId===wt),Lt=Qe&&D[Qe.appId];if(!Lt){ne=[];break}ne.push(Lt)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),I("event",U,te||{})}catch(ne){Vi.error(ne)}})).apply(this,arguments)}function Ra(I){const D=window.document.getElementsByTagName("script");for(const R of Object.values(D))if(R.src&&R.src.includes(Uu)&&R.src.includes(I))return R;return null}const Pr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sl=new class No{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Sc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Il(I){return ju.apply(this,arguments)}function ju(){return(ju=(0,F.Z)(function*(I){var D;const{appId:R,apiKey:U}=I,te={method:"GET",headers:Sc(U)},ne=Aa.replace("{app-id}",R),_e=yield fetch(ne,te);if(200!==_e.status&&304!==_e.status){let Ye="";try{const wt=yield _e.json();null!==(D=wt.error)&&void 0!==D&&D.message&&(Ye=wt.error.message)}catch{}throw Pr.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Ye})}return _e.json()})).apply(this,arguments)}function On(I){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,F.Z)(function*(I,D=Sl,R){const{appId:U,apiKey:te,measurementId:ne}=I.options;if(!U)throw Pr.create("no-app-id");if(!te){if(ne)return{measurementId:ne,appId:U};throw Pr.create("no-api-key")}const _e=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Ic;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==R?R:6e4),Lo({appId:U,apiKey:te,measurementId:ne},_e,Ye,D)})).apply(this,arguments)}function Lo(I,D,R){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:R},U,te=Sl){var ne;const{appId:_e,measurementId:Ye}=I;try{yield xl(U,D)}catch(wt){if(Ye)return Vi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:_e,measurementId:Ye};throw wt}try{const wt=yield Il(I);return te.deleteThrottleMetadata(_e),wt}catch(wt){const Qe=wt;if(!$u(Qe)){if(te.deleteThrottleMetadata(_e),Ye)return Vi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Qe?.message}]`),{appId:_e,measurementId:Ye};throw wt}const Lt=503===Number(null===(ne=Qe?.customData)||void 0===ne?void 0:ne.httpStatus)?(0,le.$s)(R,te.intervalMillis,30):(0,le.$s)(R,te.intervalMillis),Pe={throttleEndTimeMillis:Date.now()+Lt,backoffCount:R+1};return te.setThrottleMetadata(_e,Pe),Vi.debug(`Calling attemptFetch again in ${Lt} millis`),Lo(I,Pe,U,te)}})).apply(this,arguments)}function xl(I,D){return new Promise((R,U)=>{const te=Math.max(D-Date.now(),0),ne=setTimeout(R,te);I.addEventListener(()=>{clearTimeout(ne),U(Pr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function $u(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ic{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Dc,Bo;function co(){return(co=(0,F.Z)(function*(I,D,R,U,te){if(te&&te.global)I("event",R,U);else{const ne=yield D;I("event",R,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function Ac(I){Bo=I}function kl(I){Dc=I}function qu(){return gh.apply(this,arguments)}function gh(){return(gh=(0,F.Z)(function*(){if(!(0,le.hl)())return Vi.warn(Pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(I){return Vi.warn(Pr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function La(){return(La=(0,F.Z)(function*(I,D,R,U,te,ne,_e){var Ye;const wt=On(I);wt.then(Ci=>{R[Ci.measurementId]=Ci.appId,I.options.measurementId&&Ci.measurementId!==I.options.measurementId&&Vi.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Ci.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ci=>Vi.error(Ci)),D.push(wt);const Qe=qu().then(Ci=>{if(Ci)return U.getId()}),[Lt,Pe]=yield Promise.all([wt,Qe]);Ra(ne)||mm(ne,Lt.measurementId),Bo&&(te("consent","default",Bo),Ac(void 0)),te("js",new Date);const Gn=null!==(Ye=_e?.config)&&void 0!==Ye?Ye:{};return Gn.origin="firebase",Gn.update=!0,null!=Pe&&(Gn[ar]=Pe),te("config",Lt.measurementId,Gn),Dc&&(te("set",Dc),kl(void 0)),Lt.measurementId})).apply(this,arguments)}class $p{constructor(D){this.app=D}_delete(){return delete Ns[this.app.options.appId],Promise.resolve()}}let Ns={},Al=[];const Mc={};let Ku,Kr,Wr="dataLayer",Yr=!1;function Rc(I,D,R){!function Yu(){const I=[];if((0,le.ru)()&&I.push("This is a browser extension environment."),(0,le.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((U,te)=>`(${te+1}) ${U}`).join(" "),R=Pr.create("invalid-analytics-context",{errorInfo:D});Vi.warn(R.message)}}();const U=I.options.appId;if(!U)throw Pr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Pr.create("no-api-key");Vi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ns[U])throw Pr.create("already-exists",{id:U});if(!Yr){!function _m(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Wr);const{wrappedGtag:ne,gtagCore:_e}=function Ec(I,D,R,U,te){let ne=function(..._e){window[U].push(arguments)};return window[te]&&"function"==typeof window[te]&&(ne=window[te]),window[te]=function zu(I,D,R,U){function ne(){return(ne=(0,F.Z)(function*(_e,Ye,wt){try{"event"===_e?yield Ma(I,D,R,Ye,wt):"config"===_e?yield El(I,D,R,U,Ye,wt):"consent"===_e?I("consent","update",wt):I("set",Ye)}catch(Qe){Vi.error(Qe)}})).apply(this,arguments)}return function te(_e,Ye,wt){return ne.apply(this,arguments)}}(ne,I,D,R),{gtagCore:ne,wrappedGtag:window[te]}}(Ns,Al,Mc,Wr,"gtag");Kr=ne,Ku=_e,Yr=!0}return Ns[U]=function Ho(I,D,R,U,te,ne,_e){return La.apply(this,arguments)}(I,Al,Mc,D,Ku,Wr,R),new $p(I)}function Ju(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,F.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const cn="@firebase/analytics";!function ym(){(0,ae._registerComponent)(new oe.wA(ph,(D,{options:R})=>Rc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new oe.wA("analytics-internal",function I(D){try{const R=D.getProvider(ph).getImmediate();return{logEvent:(U,te,ne)=>function fv(I,D,R,U){I=(0,le.m9)(I),function xc(I,D,R,U,te){return co.apply(this,arguments)}(Kr,Ns[I.app.options.appId],D,R,U).catch(te=>Vi.error(te))}(R,U,te,ne)}}catch(R){throw Pr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(cn,"0.9.3"),(0,ae.registerVersion)(cn,"0.9.3","esm2017")}();var Pc=V(4408),Kp=V(7565);const Yp=new class yh extends Kp.v{}(class Wp extends Pc.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,R,U):(D.flush(this),0)}});var Qp=V(4986),td=V(8505),Vn=V(9468),Lc=V(5363);const Fc=new s.GfV("7.5.0"),nd="__angularfire_symbol__analyticsIsSupportedValue",vr="__angularfire_symbol__analyticsIsSupported",ps="__angularfire_symbol__remoteConfigIsSupportedValue",Vc="__angularfire_symbol__remoteConfigIsSupported",Rl="__angularfire_symbol__messagingIsSupportedValue",Va="__angularfire_symbol__messagingIsSupported";function cr(I,D,R){if(D){if(1===D.length)return D[0];const ne=D.filter(_e=>_e.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[vr]||(globalThis[vr]=Ju().then(I=>globalThis[nd]=I).catch(()=>globalThis[nd]=!1)),globalThis[Va]||(globalThis[Va]=Bu().then(I=>globalThis[Rl]=I).catch(()=>globalThis[Rl]=!1)),globalThis[Vc]||(globalThis[Vc]=ml().then(I=>globalThis[ps]=I).catch(()=>globalThis[ps]=!1));const Nt=(I,D)=>{const R=D?[D]:(0,ie.C6)(),U=[];return R.forEach(te=>{te.container.getProvider(I).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function Ge(){}class Ba{constructor(D,R=Yp){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,U){const te=this.zone;return this.delegate.schedule(function(_e){te.runGuarded(()=>{D.apply(this,[_e])})},R,U)}}class Ol{constructor(D){this.zone=D,this.task=null}call(D,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ge,{},Ge,Ge)),R.pipe((0,td.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xp=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ba(Zone.current)),this.insideAngular=R.run(()=>new Ba(Zone.current,Qp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(s.LFG(s.R0b))},I.\u0275prov=s.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function xn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Pn(I){return xn(),function Ls(I){return function(R){return(R=R.lift(new Ol(I.ngZone))).pipe((0,Vn.R)(I.outsideAngular),(0,Lc.Q)(I.insideAngular))}}(xn())(I)}},2090:(bt,Ie,V)=>{V.d(Ie,{$s:()=>dt,BH:()=>Se,DV:()=>xr,Dv:()=>Kn,G6:()=>Te,GJ:()=>hr,L:()=>pe,LL:()=>Cn,Pz:()=>xe,Sg:()=>Re,UG:()=>G,UI:()=>ro,US:()=>oe,Wj:()=>Li,Wl:()=>jt,Yr:()=>fe,ZB:()=>W,ZR:()=>nt,aH:()=>Ue,b$:()=>it,cI:()=>ut,dS:()=>bn,eu:()=>ze,g5:()=>F,gK:()=>zn,gQ:()=>ji,h$:()=>ye,hl:()=>Oe,hu:()=>ie,jU:()=>Ee,lb:()=>ma,m9:()=>qt,ne:()=>so,p$:()=>q,pd:()=>Wn,r3:()=>io,ru:()=>qe,tV:()=>he,uI:()=>Ve,ug:()=>ls,vZ:()=>Rn,w1:()=>ct,w9:()=>Un,xO:()=>ks,xb:()=>ir,z$:()=>Be,zI:()=>Ke,zd:()=>Gr});const ie=function($,z){if(!$)throw F(z)},F=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},ae=function($){const z=[];let Y=0;for(let ve=0;ve<$.length;ve++){let se=$.charCodeAt(ve);se<128?z[Y++]=se:se<2048?(z[Y++]=se>>6|192,z[Y++]=63&se|128):55296==(64512&se)&&ve+1<$.length&&56320==(64512&$.charCodeAt(ve+1))?(se=65536+((1023&se)<<10)+(1023&$.charCodeAt(++ve)),z[Y++]=se>>18|240,z[Y++]=se>>12&63|128,z[Y++]=se>>6&63|128,z[Y++]=63&se|128):(z[Y++]=se>>12|224,z[Y++]=se>>6&63|128,z[Y++]=63&se|128)}return z},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,z){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let se=0;se<$.length;se+=3){const ft=$[se],Wt=se+1<$.length,on=Wt?$[se+1]:0,Yn=se+2<$.length,At=Yn?$[se+2]:0;let vi=(15&on)<<2|At>>6,_a=63&At;Yn||(_a=64,Wt||(vi=64)),ve.push(Y[ft>>2],Y[(3&ft)<<4|on>>4],Y[vi],Y[_a])}return ve.join("")},encodeString($,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa($):this.encodeByteArray(ae($),z)},decodeString($,z){return this.HAS_NATIVE_SUPPORT&&!z?atob($):function($){const z=[];let Y=0,ve=0;for(;Y<$.length;){const se=$[Y++];if(se<128)z[ve++]=String.fromCharCode(se);else if(se>191&&se<224){const ft=$[Y++];z[ve++]=String.fromCharCode((31&se)<<6|63&ft)}else if(se>239&&se<365){const Yn=((7&se)<<18|(63&$[Y++])<<12|(63&$[Y++])<<6|63&$[Y++])-65536;z[ve++]=String.fromCharCode(55296+(Yn>>10)),z[ve++]=String.fromCharCode(56320+(1023&Yn))}else{const ft=$[Y++],Wt=$[Y++];z[ve++]=String.fromCharCode((15&se)<<12|(63&ft)<<6|63&Wt)}}return z.join("")}(this.decodeStringToByteArray($,z))},decodeStringToByteArray($,z){this.init_();const Y=z?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let se=0;se<$.length;){const ft=Y[$.charAt(se++)],on=se<$.length?Y[$.charAt(se)]:0;++se;const At=se<$.length?Y[$.charAt(se)]:64;++se;const Jt=se<$.length?Y[$.charAt(se)]:64;if(++se,null==ft||null==on||null==At||null==Jt)throw Error();ve.push(ft<<2|on>>4),64!==At&&(ve.push(on<<4&240|At>>2),64!==Jt&&ve.push(At<<6&192|Jt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ye=function($){const z=ae($);return oe.encodeByteArray(z,!0)},pe=function($){return ye($).replace(/\./g,"")},he=function($){try{return oe.decodeString($,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function q($){return W(void 0,$)}function W($,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return z}for(const Y in z)!z.hasOwnProperty(Y)||!X(Y)||($[Y]=W($[Y],z[Y]));return $}function X($){return"__proto__"!==$}const me=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=$&&he($[1]);return z&&JSON.parse(z)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Ue=()=>{var $;return null===($=me())||void 0===$?void 0:$.config},xe=$=>{var z;return null===(z=me())||void 0===z?void 0:z[`_${$}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,Y)=>{this.resolve=z,this.reject=Y})}wrapCallback(z){return(Y,ve)=>{Y?this.reject(Y):this.resolve(ve),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(Y):z(Y,ve))}}}function Re($,z){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=z||"demo-project",se=$.iat||0,ft=$.sub||$.user_id;if(!ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Wt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:se,exp:se+3600,auth_time:se,sub:ft,user_id:ft,firebase:{sign_in_provider:"custom",identities:{}}},$);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Wt)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function G(){var $;const z=null===($=me())||void 0===$?void 0:$.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function qe(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){const $=Be();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function fe(){return!1}function Te(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function ze(){return new Promise(($,z)=>{try{let Y=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(ve);se.onsuccess=()=>{se.result.close(),Y||self.indexedDB.deleteDatabase(ve),$(!0)},se.onupgradeneeded=()=>{Y=!1},se.onerror=()=>{var ft;z((null===(ft=se.error)||void 0===ft?void 0:ft.message)||"")}}catch(Y){z(Y)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nt extends Error{constructor(z,Y,ve){super(Y),this.code=z,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}}class Cn{constructor(z,Y,ve){this.service=z,this.serviceName=Y,this.errors=ve}create(z,...Y){const ve=Y[0]||{},se=`${this.service}/${z}`,ft=this.errors[z],Wt=ft?function Mt($,z){return $.replace(mn,(Y,ve)=>{const se=z[ve];return null!=se?String(se):`<${ve}?>`})}(ft,ve):"Error";return new nt(se,`${this.serviceName}: ${Wt} (${se}).`,ve)}}const mn=/\{\$([^}]+)}/g;function ut($){return JSON.parse($)}function jt($){return JSON.stringify($)}const Bn=function($){let z={},Y={},ve={},se="";try{const ft=$.split(".");z=ut(he(ft[0])||""),Y=ut(he(ft[1])||""),se=ft[2],ve=Y.d||{},delete Y.d}catch{}return{header:z,claims:Y,data:ve,signature:se}},Un=function($){const Y=Bn($).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},hr=function($){const z=Bn($).claims;return"object"==typeof z&&!0===z.admin};function io($,z){return Object.prototype.hasOwnProperty.call($,z)}function xr($,z){if(Object.prototype.hasOwnProperty.call($,z))return $[z]}function ir($){for(const z in $)if(Object.prototype.hasOwnProperty.call($,z))return!1;return!0}function ro($,z,Y){const ve={};for(const se in $)Object.prototype.hasOwnProperty.call($,se)&&(ve[se]=z.call(Y,$[se],se,$));return ve}function Rn($,z){if($===z)return!0;const Y=Object.keys($),ve=Object.keys(z);for(const se of Y){if(!ve.includes(se))return!1;const ft=$[se],Wt=z[se];if(pr(ft)&&pr(Wt)){if(!Rn(ft,Wt))return!1}else if(ft!==Wt)return!1}for(const se of ve)if(!Y.includes(se))return!1;return!0}function pr($){return null!==$&&"object"==typeof $}function ks($){const z=[];for(const[Y,ve]of Object.entries($))Array.isArray(ve)?ve.forEach(se=>{z.push(encodeURIComponent(Y)+"="+encodeURIComponent(se))}):z.push(encodeURIComponent(Y)+"="+encodeURIComponent(ve));return z.length?"&"+z.join("&"):""}function Gr($){const z={};return $.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[se,ft]=ve.split("=");z[decodeURIComponent(se)]=decodeURIComponent(ft)}}),z}function Wn($){const z=$.indexOf("?");if(!z)return"";const Y=$.indexOf("#",z);return $.substring(z,Y>0?Y:void 0)}class ji{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,Y){Y||(Y=0);const ve=this.W_;if("string"==typeof z)for(let Jt=0;Jt<16;Jt++)ve[Jt]=z.charCodeAt(Y)<<24|z.charCodeAt(Y+1)<<16|z.charCodeAt(Y+2)<<8|z.charCodeAt(Y+3),Y+=4;else for(let Jt=0;Jt<16;Jt++)ve[Jt]=z[Y]<<24|z[Y+1]<<16|z[Y+2]<<8|z[Y+3],Y+=4;for(let Jt=16;Jt<80;Jt++){const vi=ve[Jt-3]^ve[Jt-8]^ve[Jt-14]^ve[Jt-16];ve[Jt]=4294967295&(vi<<1|vi>>>31)}let At,Mi,se=this.chain_[0],ft=this.chain_[1],Wt=this.chain_[2],on=this.chain_[3],Yn=this.chain_[4];for(let Jt=0;Jt<80;Jt++){Jt<40?Jt<20?(At=on^ft&(Wt^on),Mi=1518500249):(At=ft^Wt^on,Mi=1859775393):Jt<60?(At=ft&Wt|on&(ft|Wt),Mi=2400959708):(At=ft^Wt^on,Mi=3395469782);const vi=(se<<5|se>>>27)+At+Yn+Mi+ve[Jt]&4294967295;Yn=on,on=Wt,Wt=4294967295&(ft<<30|ft>>>2),ft=se,se=vi}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+ft&4294967295,this.chain_[2]=this.chain_[2]+Wt&4294967295,this.chain_[3]=this.chain_[3]+on&4294967295,this.chain_[4]=this.chain_[4]+Yn&4294967295}update(z,Y){if(null==z)return;void 0===Y&&(Y=z.length);const ve=Y-this.blockSize;let se=0;const ft=this.buf_;let Wt=this.inbuf_;for(;se<Y;){if(0===Wt)for(;se<=ve;)this.compress_(z,se),se+=this.blockSize;if("string"==typeof z){for(;se<Y;)if(ft[Wt]=z.charCodeAt(se),++Wt,++se,Wt===this.blockSize){this.compress_(ft),Wt=0;break}}else for(;se<Y;)if(ft[Wt]=z[se],++Wt,++se,Wt===this.blockSize){this.compress_(ft),Wt=0;break}}this.inbuf_=Wt,this.total_+=Y}digest(){const z=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Y,Y/=256;this.compress_(this.buf_);let ve=0;for(let se=0;se<5;se++)for(let ft=24;ft>=0;ft-=8)z[ve]=this.chain_[se]>>ft&255,++ve;return z}}function so($,z){const Y=new Gt($,z);return Y.subscribe.bind(Y)}class Gt{constructor(z,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{z(this)}).catch(ve=>{this.error(ve)})}next(z){this.forEachObserver(Y=>{Y.next(z)})}error(z){this.forEachObserver(Y=>{Y.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,Y,ve){let se;if(void 0===z&&void 0===Y&&void 0===ve)throw new Error("Missing Observer.");se=function Ot($,z){if("object"!=typeof $||null===$)return!1;for(const Y of z)if(Y in $&&"function"==typeof $[Y])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:Y,complete:ve},void 0===se.next&&(se.next=As),void 0===se.error&&(se.error=As),void 0===se.complete&&(se.complete=As);const ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),ft}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,z)}sendOne(z,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{Y(this.observers[z])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function As(){}const Kn=function($,z,Y,ve){let se;if(ve<z?se="at least "+z:ve>Y&&(se=0===Y?"none":"no more than "+Y),se)throw new Error($+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+se+".")};function zn($,z){return`${$} failed: ${z} argument `}function Li($,z,Y,ve){if((!ve||Y)&&"function"!=typeof Y)throw new Error(zn($,z)+"must be a valid function.")}function ma($,z,Y,ve){if((!ve||Y)&&("object"!=typeof Y||null===Y))throw new Error(zn($,z)+"must be a valid context object.")}const bn=function($){const z=[];let Y=0;for(let ve=0;ve<$.length;ve++){let se=$.charCodeAt(ve);if(se>=55296&&se<=56319){const ft=se-55296;ve++,ie(ve<$.length,"Surrogate pair missing trail surrogate."),se=65536+(ft<<10)+($.charCodeAt(ve)-56320)}se<128?z[Y++]=se:se<2048?(z[Y++]=se>>6|192,z[Y++]=63&se|128):se<65536?(z[Y++]=se>>12|224,z[Y++]=se>>6&63|128,z[Y++]=63&se|128):(z[Y++]=se>>18|240,z[Y++]=se>>12&63|128,z[Y++]=se>>6&63|128,z[Y++]=63&se|128)}return z},ls=function($){let z=0;for(let Y=0;Y<$.length;Y++){const ve=$.charCodeAt(Y);ve<128?z++:ve<2048?z+=2:ve>=55296&&ve<=56319?(z+=4,Y++):z+=3}return z};function dt($,z=1e3,Y=2){const ve=z*Math.pow(Y,$),se=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+se)}function qt($){return $&&$._delegate?$._delegate:$}},1441:(bt,Ie,V)=>{var s=V(4650);let ie=null;function F(){return ie}class le{}const oe=new s.OlP("DocumentToken");let ye=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function pe(){return(0,s.LFG)(q)}()},providedIn:"platform"}),n})();const he=new s.OlP("Location Initialized");let q=(()=>{class n extends ye{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(e){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=F().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){W()?this._history.pushState(e,i,r):this._location.hash=r}replaceState(e,i,r){W()?this._history.replaceState(e,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function X(){return new q((0,s.LFG)(oe))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function We(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function ke(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let _t=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(Me)},providedIn:"root"}),n})();const me=new s.OlP("appBaseHref");let Me=(()=>{class n extends _t{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,s.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return We(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+tt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const l=this.prepareExternalUrl(r+tt(o));this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,o){const l=this.prepareExternalUrl(r+tt(o));this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ye),s.LFG(me,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ae=(()=>{class n extends _t{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=We(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let l=this.prepareExternalUrl(r+tt(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(e,i,l)}replaceState(e,i,r,o){let l=this.prepareExternalUrl(r+tt(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ye),s.LFG(me,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(e){this._subject=new s.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function Be(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(ke(Re(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+tt(i))}normalize(e){return n.stripTrailingSlash(function Se(n,t){return n&&new RegExp(`^${n}([/;?#]|$)`).test(t)?t.substring(n.length):t}(this._basePath,Re(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+tt(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+tt(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=tt,n.joinWithSlash=We,n.stripTrailingSlash=ke,n.\u0275fac=function(e){return new(e||n)(s.LFG(_t))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function xe(){return new Ue((0,s.LFG)(_t))}()},providedIn:"root"}),n})();function Re(n){return n.replace(/\/index.html$/,"")}const kr=/\s+/,at=[];let pt=(()=>{class n{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=at,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(kr):at}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(kr):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,Boolean(e[i]));this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(kr).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ui{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ln=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new ui(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===o?void 0:o);else if(null!==o){const d=i.get(o);i.move(d,l),Jn(d,r)}});for(let r=0,o=i.length;r<o;r++){const d=i.get(r).context;d.index=r,d.count=o,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Jn(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Jn(n,t){n.context.$implicit=t.item}let pn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Kt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Su("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Su("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Kt{constructor(){this.$implicit=null,this.ngIf=null}}function Su(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}class oo{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let cc=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Ar=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new oo(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(cc,9))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Tn=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,o]=e.split("."),l=-1===r.indexOf("-")?void 0:s.JOm.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,l):this._renderer.removeStyle(this._ngEl.nativeElement,r,l)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.aQg),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),wn=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:l}=this;this._viewRef=i.createEmbeddedView(r,o,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[s.TTD]}),n})(),qr=(()=>{class n{transform(e){return JSON.stringify(e,null,2)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=s.Yjl({name:"json",type:n,pure:!1,standalone:!0}),n})(),fn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const ku="browser";function uc(n){return"server"===n}let Ta=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new hc((0,s.LFG)(oe),window)}),n})();class hc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Mo(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const l=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ea(this.window.history)||Ea(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ea(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class lo extends le{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ma extends lo{static makeCurrent(){!function ae(n){ie||(ie=n)}(new Ma)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function zu(){return Or=Or||document.querySelector("base"),Or?Or.getAttribute("href"):null}();return null==e?null:function Ra(n){Ec=Ec||document.createElement("a"),Ec.setAttribute("href",n);const t=Ec.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Or=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function qi(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Ec,Or=null;const Oa=new s.OlP("TRANSITION_ID"),Gu=[{provide:s.ip1,useFactory:function Pr(n,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const i=F(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[Oa,oe,s.zs3],multi:!0}];let No=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=new s.OlP("EventManagerPlugins");let Sc=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const l=r[o];if(l.supports(e))return this._eventNameToPlugin.set(e,l),l}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Sl),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class Il{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=F().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let ju=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),On=(()=>{class n extends ju{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,r.push(i.appendChild(l))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Dl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Dl))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Dl(n){F().remove(n)}const Lo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ps=/%COMP%/g;function Fo(n,t){return t.flat(100).map(e=>e.replace(Ps,n))}function Vo(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let uo=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Pa(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case s.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Na(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case s.ifc.ShadowDom:return new Bo(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Fo(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Sc),s.LFG(On),s.LFG(s.AFp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class Pa{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Lo[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(kc(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(kc(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const o=Lo[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Lo[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,i,r&s.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Vo(i)):this.eventManager.addEventListener(t,e,Vo(i))}}function kc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Na extends Pa{constructor(t,e,i,r){super(t),this.component=i;const o=Fo(r+"-"+i.id,i.styles);e.addStyles(o),this.contentAttr=function xc(n){return"_ngcontent-%COMP%".replace(Ps,n)}(r+"-"+i.id),this.hostAttr=function co(n){return"_nghost-%COMP%".replace(Ps,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Bo extends Pa{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Fo(r.id,r.styles);for(let l=0;l<o.length;l++){const d=document.createElement("style");d.textContent=o[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ac=(()=>{class n extends Il{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const kl=["alt","control","meta","shift"],qu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ho=(()=>{class n extends Il{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const o=n.parseEventName(i),l=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(e,o.domEventName,l))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let l="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),l="code."),kl.forEach(y=>{const w=i.indexOf(y);w>-1&&(i.splice(w,1),l+=y+".")}),l+=o,0!=i.length||0===o.length)return null;const f={};return f.domEventName=r,f.fullKey=l,f}static matchEventFullKeyCode(e,i){let r=qu[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),kl.forEach(l=>{l!==r&&(0,gh[l])(e)&&(o+=l+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Yr=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:ku},{provide:s.g9A,useValue:function Wr(){Ma.makeCurrent()},multi:!0},{provide:oe,useFactory:function Ku(){return(0,s.RDi)(document),document},deps:[]}]),Zp=new s.OlP(""),Yu=[{provide:s.rWj,useClass:class fh{addToWindow(t){s.dqk.getAngularTestability=(i,r=!0)=>{const o=t.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(i=>{const r=s.dqk.getAllAngularTestabilities();let o=r.length,l=!1;const d=function(f){l=l||f,o--,0==o&&i(l)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?F().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:s.lri,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]}],Rc=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function Wu(){return new s.qLn},deps:[]},{provide:Sl,useClass:Ac,multi:!0,deps:[oe,s.R0b,s.Lbi]},{provide:Sl,useClass:Ho,multi:!0,deps:[oe]},{provide:uo,useClass:uo,deps:[Sc,On,s.AFp]},{provide:s.FYo,useExisting:uo},{provide:ju,useExisting:On},{provide:On,useClass:On,deps:[oe]},{provide:Sc,useClass:Sc,deps:[Sl,s.R0b]},{provide:class sh{},useClass:No,deps:[]},[]];let Qu=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:s.AFp,useValue:e.appId},{provide:Oa,useExisting:s.AFp},Gu]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Zp,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[...Rc,...Yu],imports:[fn,s.hGG]}),n})(),Fa=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Ml(){return new Fa((0,s.LFG)(oe))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Nt=V(7579);class Ge{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var o,l,d,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((l=t.length)!=e.length)return!1;for(o=l;0!=o--;)if(!this.equalsByValue(t[o],e[o]))return!1;return!0}if(i!=r)return!1;var f=t instanceof Date,y=e instanceof Date;if(f!=y)return!1;if(f&&y)return t.getTime()==e.getTime();var w=t instanceof RegExp,E=e instanceof RegExp;if(w!=E)return!1;if(w&&E)return t.toString()==e.toString();var M=Object.keys(t);if((l=M.length)!==Object.keys(e).length)return!1;for(o=l;0!=o--;)if(!Object.prototype.hasOwnProperty.call(e,M[o]))return!1;for(o=l;0!=o--;)if(!this.equalsByValue(t[d=M[o]],e[d]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let o=0,l=i.length;o<l;++o){if(null==r)return null;r=r[i[o]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let o=!1;for(let l=0;l<i.length;l++)if(this.findIndexInList(i[l],r)>e){i.splice(l,0,t),o=!0;break}o||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}static compare(t,e,i,r=1){let o=-1;const l=this.isEmpty(t),d=this.isEmpty(e);return o=l&&d?0:l?r:d?-r:"string"==typeof t&&"string"==typeof e?t.localeCompare(e,i,{numeric:!0}):t<e?-1:t>e?1:0,o}static sort(t,e,i=1,r,o=1){return(1===o?i:o)*Ge.compare(t,e,r,i)}static merge(t,e){if(null!=t||null!=e)return null!=t&&"object"!=typeof t||null!=e&&"object"!=typeof e?null!=t&&"string"!=typeof t||null!=e&&"string"!=typeof e?e||t:[t||"",e||""].join(" "):{...t||{},...e||{}}}}var Ba=0;function Ol(){return"pr_id_"+ ++Ba}var xn=function Xp(){let n=[];const r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,l,d)=>{l&&(l.style.zIndex=String(((o,l)=>{let d=n.length>0?n[n.length-1]:{key:o,value:l},f=d.value+(d.key===o?0:l)+1;return n.push({key:o,value:f}),f})(o,d)))},clear:o=>{o&&((o=>{n=n.filter(l=>l.value!==o)})(r(o)),o.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const Hc=["*"];let Pn=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Ls=(()=>{class n{}return n.AND="and",n.OR="or",n})(),Pl=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let o=Ge.removeAccents(i.toString()).toLocaleLowerCase(r);return Ge.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,o.length)===o},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let o=Ge.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==Ge.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let o=Ge.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===Ge.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let o=Ge.removeAccents(i.toString()).toLocaleLowerCase(r),l=Ge.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==l.indexOf(o,l.length-o.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():Ge.removeAccents(e.toString()).toLocaleLowerCase(r)==Ge.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():Ge.removeAccents(e.toString()).toLocaleLowerCase(r)==Ge.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(Ge.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,o,l){let d=[];if(e)for(let f of e)for(let y of i){let w=Ge.resolveFieldData(f,y);if(this.filters[o](w,r,l)){d.push(f);break}}return d}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ha=(()=>{class n{constructor(){this.messageSource=new Nt.x,this.clearSource=new Nt.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),I=(()=>{class n{constructor(){this.clickSource=new Nt.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[Pn.STARTS_WITH,Pn.CONTAINS,Pn.NOT_CONTAINS,Pn.ENDS_WITH,Pn.EQUALS,Pn.NOT_EQUALS],numeric:[Pn.EQUALS,Pn.NOT_EQUALS,Pn.LESS_THAN,Pn.LESS_THAN_OR_EQUAL_TO,Pn.GREATER_THAN,Pn.GREATER_THAN_OR_EQUAL_TO],date:[Pn.DATE_IS,Pn.DATE_IS_NOT,Pn.DATE_BEFORE,Pn.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Nt.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:Hc,decls:1,vars:0,template:function(e,i){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2}),n})(),te=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:Hc,decls:1,vars:0,template:function(e,i){1&e&&(s.F$t(),s.Hsn(0))},encapsulation:2}),n})(),ne=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),_e=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})(),Ye=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})();var Qe=V(8996),Lt=V(3269);function Pe(...n){const t=(0,Lt.yG)(n);return(0,Qe.D)(n,t)}class Gn extends Nt.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const po=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Oi=V(9751);const{isArray:Ua}=Array,{getPrototypeOf:Qr,prototype:Fs,keys:zo}=Object;function tf(n){if(1===n.length){const t=n[0];if(Ua(t))return{args:t,keys:null};if(function _v(n){return n&&"object"==typeof n&&Qr(n)===Fs}(t)){const e=zo(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Nl=V(4671),gt=V(4004);const{isArray:vm}=Array;function vh(n){return(0,gt.U)(t=>function O0(n,t){return vm(t)?n(...t):n(t)}(n,t))}function bm(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var kn=V(5403),P0=V(9672);function wm(...n){const t=(0,Lt.yG)(n),e=(0,Lt.jO)(n),{args:i,keys:r}=tf(n);if(0===i.length)return(0,Qe.D)([],t);const o=new Oi.y(function nf(n,t,e=Nl.y){return i=>{yv(t,()=>{const{length:r}=n,o=new Array(r);let l=r,d=r;for(let f=0;f<r;f++)yv(t,()=>{const y=(0,Qe.D)(n[f],t);let w=!1;y.subscribe((0,kn.x)(i,E=>{o[f]=E,w||(w=!0,d--),d||i.next(e(o.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,t,r?l=>bm(r,l):Nl.y));return e?o.pipe(vh(e)):o}function yv(n,t,e){n?(0,P0.f)(e,n,t):t()}var bh=V(8189);function Cm(...n){return function N0(){return(0,bh.J)(1)}()((0,Qe.D)(n,(0,Lt.yG)(n)))}var za=V(8421);function wh(n){return new Oi.y(t=>{(0,za.Xf)(n()).subscribe(t)})}var Tm=V(9635),fs=V(576);function Uc(n,t){const e=(0,fs.m)(n)?n:()=>n,i=r=>r.error(e());return new Oi.y(t?r=>t.schedule(i,0,r):i)}var Go=V(515),jo=V(727),En=V(4482);function rf(){return(0,En.e)((n,t)=>{let e=null;n._refCount++;const i=(0,kn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Em extends Oi.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,En.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new jo.w0;const e=this.getSubject();t.add(this.source.subscribe((0,kn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=jo.w0.EMPTY)}return t}refCount(){return rf()(this)}}function Ti(n,t){return(0,En.e)((e,i)=>{let r=null,o=0,l=!1;const d=()=>l&&!r&&i.complete();e.subscribe((0,kn.x)(i,f=>{r?.unsubscribe();let y=0;const w=o++;(0,za.Xf)(n(f,w)).subscribe(r=(0,kn.x)(i,E=>i.next(t?t(f,E,w,y++):E),()=>{r=null,d()}))},()=>{l=!0,d()}))})}function Ga(n){return n<=0?()=>Go.E:(0,En.e)((t,e)=>{let i=0;t.subscribe((0,kn.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Vs(...n){const t=(0,Lt.yG)(n);return(0,En.e)((e,i)=>{(t?Cm(n,e,t):Cm(n,e)).subscribe(i)})}function Jr(n,t){return(0,En.e)((e,i)=>{let r=0;e.subscribe((0,kn.x)(i,o=>n.call(t,o,r++)&&i.next(o)))})}var Bi=V(5577);function Ch(n){return(0,En.e)((t,e)=>{let i=!1;t.subscribe((0,kn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Th(n=vv){return(0,En.e)((t,e)=>{let i=!1;t.subscribe((0,kn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function vv(){return new po}function Bs(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Jr((r,o)=>n(r,o,i)):Nl.y,Ga(1),e?Ch(t):Th(()=>new po))}function Ei(n,t){return(0,fs.m)(t)?(0,Bi.z)(n,t,1):(0,Bi.z)(n,1)}var Si=V(8505);function fo(n){return(0,En.e)((t,e)=>{let o,i=null,r=!1;i=t.subscribe((0,kn.x)(e,void 0,void 0,l=>{o=(0,za.Xf)(n(l,fo(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function sf(n,t,e,i,r){return(o,l)=>{let d=e,f=t,y=0;o.subscribe((0,kn.x)(l,w=>{const E=y++;f=d?n(f,w,E):(d=!0,w),i&&l.next(f)},r&&(()=>{d&&l.next(f),l.complete()})))}}function li(n,t){return(0,En.e)(sf(n,t,arguments.length>=2,!0))}function Ll(n){return n<=0?()=>Go.E:(0,En.e)((t,e)=>{let i=[];t.subscribe((0,kn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function af(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Jr((r,o)=>n(r,o,i)):Nl.y,Ll(1),e?Ch(t):Th(()=>new po))}function Eh(n){return(0,En.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Yt="primary",gs=Symbol("RouteTitle");class bv{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Fl(n){return new bv(n)}function lf(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const l=i[o],d=n[o];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Nr(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Sh(n[r],t[r]))return!1;return!0}function Sh(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}return n===t}function Dm(n){return Array.prototype.concat.apply([],n)}function ja(n){return n.length>0?n[n.length-1]:null}function Yi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function ms(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,Qe.D)(Promise.resolve(n)):Pe(n)}const zc=!1,xm={exact:function cf(n,t,e){if(!Zo(n.segments,t.segments)||!Gc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!cf(n.children[i],t.children[i],e))return!1;return!0},subset:Am},Vl={exact:function km(n,t){return Nr(n,t)},subset:function id(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Sh(n[e],t[e]))},ignored:()=>!0};function Ih(n,t,e){return xm[e.paths](n.root,t.root,e.matrixParams)&&Vl[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Am(n,t,e){return Mm(n,t,t.segments,e)}function Mm(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Zo(r,e)||t.hasChildren()||!Gc(r,e,i))}if(n.segments.length===e.length){if(!Zo(n.segments,e)||!Gc(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Am(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(Zo(n.segments,r)&&Gc(n.segments,r,i)&&n.children[Yt])&&Mm(n.children[Yt],t,o,i)}}function Gc(n,t,e){return t.every((i,r)=>Vl[e](n[r].parameters,i.parameters))}class $o{constructor(t=new nn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fl(this.queryParams)),this._queryParamMap}toString(){return Cv.serialize(this)}}class nn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Yi(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return od(this)}}class rd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Fl(this.parameters)),this._parameterMap}toString(){return Pm(this)}}function Zo(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let Bl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return new Dh},providedIn:"root"}),n})();class Dh{parse(t){const e=new br(t);return new $o(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${jc(t.root,!0)}`,i=function df(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${qo(e)}=${qo(r)}`).join("&"):`${qo(e)}=${qo(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function Om(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Cv=new Dh;function od(n){return n.segments.map(t=>Pm(t)).join("/")}function jc(n,t){if(!n.hasChildren())return od(n);if(t){const e=n.children[Yt]?jc(n.children[Yt],!1):"",i=[];return Yi(n.children,(r,o)=>{o!==Yt&&i.push(`${o}:${jc(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Rm(n,t){let e=[];return Yi(n.children,(i,r)=>{r===Yt&&(e=e.concat(t(i,r)))}),Yi(n.children,(i,r)=>{r!==Yt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Yt?[jc(n.children[Yt],!1)]:[`${r}:${jc(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${od(n)}/${e[0]}`:`${od(n)}/(${e.join("//")})`}}function $a(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qo(n){return $a(n).replace(/%3B/gi,";")}function xh(n){return $a(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uf(n){return decodeURIComponent(n)}function ad(n){return uf(n.replace(/\+/g,"%20"))}function Pm(n){return`${xh(n.path)}${function Nm(n){return Object.keys(n).map(t=>`;${xh(t)}=${xh(n[t])}`).join("")}(n.parameters)}`}const kh=/^[^\/()?;=#]+/;function Za(n){const t=n.match(kh);return t?t[0]:""}const hf=/^[^=?&#]+/,$c=/^[^&#]+/;class br{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Yt]=new nn(t,e)),i}parseSegment(){const t=Za(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new s.vHH(4009,zc);return this.capture(t),new rd(uf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Za(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Za(this.remaining);r&&(i=r,this.capture(i))}t[uf(e)]=uf(i)}parseQueryParam(t){const e=function Ah(n){const t=n.match(hf);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const l=function Lm(n){const t=n.match($c);return t?t[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=ad(e),o=ad(i);if(t.hasOwnProperty(r)){let l=t[r];Array.isArray(l)||(l=[l],t[r]=l),l.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Za(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new s.vHH(4010,zc);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Yt);const l=this.parseChildren();e[o]=1===Object.keys(l).length?l[Yt]:new nn([],l),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new s.vHH(4011,zc)}}function Wo(n){return n.segments.length>0?new nn([],{[Yt]:n}):n}function Hl(n){const t={};for(const i of Object.keys(n.children)){const o=Hl(n.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function ld(n){if(1===n.numberOfChildren&&n.children[Yt]){const t=n.children[Yt];return new nn(n.segments.concat(t.segments),t.children)}return n}(new nn(n.segments,t))}function Ko(n){return n instanceof $o}function Yo(n,t,e,i,r){if(0===e.length)return Wa(t.root,t.root,t.root,i,r);const o=function wr(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pf(!0,0,n);let t=0,e=!1;const i=n.reduce((r,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Yi(o.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===l?(o.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,o]},[]);return new pf(e,t,i)}(e);return o.toRoot()?Wa(t.root,t.root,new nn([],{}),i,r):function l(f){const y=function gf(n,t,e,i){if(n.isAbsolute)return new zl(t.root,!0,0);if(-1===i)return new zl(e,e===t.root,0);return function go(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new s.vHH(4005,!1);r=i.segments.length}return new zl(i,!1,r-o)}(e,i+(Ul(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,t,n.snapshot?._urlSegment,f),w=y.processChildren?Qo(y.segmentGroup,y.index,o.commands):Gl(y.segmentGroup,y.index,o.commands);return Wa(t.root,y.segmentGroup,w,i,r)}(n.snapshot?._lastPathIndex)}function Ul(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qa(n){return"object"==typeof n&&null!=n&&n.outlets}function Wa(n,t,e,i,r){let l,o={};i&&Yi(i,(f,y)=>{o[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),l=n===t?e:Ka(n,t,e);const d=Wo(Hl(l));return new $o(d,o,r)}function Ka(n,t,e){const i={};return Yi(n.children,(r,o)=>{i[o]=r===t?e:Ka(r,t,e)}),new nn(n.segments,i)}class pf{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ul(i[0]))throw new s.vHH(4003,!1);const r=i.find(qa);if(r&&r!==ja(i))throw new s.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zl{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Gl(n,t,e){if(n||(n=new nn([],{})),0===n.segments.length&&n.hasChildren())return Qo(n,t,e);const i=function Vm(n,t,e){let i=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;const l=n.segments[r],d=e[i];if(qa(d))break;const f=`${d}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!Hm(f,y,l))return o;i+=2}else{if(!Hm(f,{},l))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new nn(n.segments.slice(0,i.pathIndex),{});return o.children[Yt]=new nn(n.segments.slice(i.pathIndex),n.children),Qo(o,0,r)}return i.match&&0===r.length?new nn(n.segments,{}):i.match&&!n.hasChildren()?Wc(n,t,e):i.match?Qo(n,0,r):Wc(n,t,e)}function Qo(n,t,e){if(0===e.length)return new nn(n.segments,{});{const i=function qc(n){return qa(n[0])?n[0].outlets:{[Yt]:n}}(e),r={};return!i[Yt]&&n.children[Yt]&&1===n.numberOfChildren&&0===n.children[Yt].segments.length?Qo(n.children[Yt],t,e):(Yi(i,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[l]=Gl(n.children[l],t,o))}),Yi(n.children,(o,l)=>{void 0===i[l]&&(r[l]=o)}),new nn(n.segments,r))}}function Wc(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(qa(o)){const f=Bm(o.outlets);return new nn(i,f)}if(0===r&&Ul(e[0])){i.push(new rd(n.segments[t].path,mf(e[0]))),r++;continue}const l=qa(o)?o.outlets[Yt]:`${o}`,d=r<e.length-1?e[r+1]:null;l&&d&&Ul(d)?(i.push(new rd(l,mf(d))),r+=2):(i.push(new rd(l,{})),r++)}return new nn(i,{})}function Bm(n){const t={};return Yi(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=Wc(new nn([],{}),0,e))}),t}function mf(n){const t={};return Yi(n,(e,i)=>t[i]=`${e}`),t}function Hm(n,t,e){return n==e.path&&Nr(t,e.parameters)}const cd="imperative";class v{constructor(t,e){this.id=t,this.url=e}}class g extends v{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _ extends v{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class C extends v{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class k extends v{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=16}}class P extends v{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class J extends v{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ge extends v{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe extends v{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ht extends v{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ft extends v{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dt{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pi{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hs{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mh{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Um{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ud{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Us{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let yf=(()=>{class n{createUrlTree(e,i,r,o,l,d){return Yo(e||i.root,r,o,l,d)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Gm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(t){return yf.\u0275fac(t)},providedIn:"root"}),n})();class jm{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=$m(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=$m(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=jl(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return jl(t,this._root).map(e=>e.value)}}function $m(n,t){if(n===t.value)return t;for(const e of t.children){const i=$m(n,e);if(i)return i}return null}function jl(n,t){if(n===t.value)return[t];for(const e of t.children){const i=jl(n,e);if(i.length)return i.unshift(t),i}return[]}class zs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function vf(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class gx extends jm{constructor(t,e){super(t),this.snapshot=e,Sv(this,t)}toString(){return this.snapshot.toString()}}function Ev(n,t){const e=function mx(n,t){const l=new bf([],{},{},"",{},Yt,t,null,n.root,-1,{});return new wf("",new zs(l,[]))}(n,t),i=new Gn([new rd("",{})]),r=new Gn({}),o=new Gn({}),l=new Gn({}),d=new Gn(""),f=new Rh(i,r,l,d,o,Yt,t,e.root);return f.snapshot=e.root,new gx(new zs(f,[]),e)}class Rh{constructor(t,e,i,r,o,l,d,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,gt.U)(y=>y[gs]))??Pe(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(t=>Fl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(t=>Fl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function V0(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function _x(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class bf{get title(){return this.data?.[gs]}constructor(t,e,i,r,o,l,d,f,y,w,E){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=l,this.component=d,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wf extends jm{constructor(t,e){super(e),this.url=t,Sv(this,e)}toString(){return Zm(this._root)}}function Sv(n,t){t.value._routerState=n,t.children.forEach(e=>Sv(n,e))}function Zm(n){const t=n.children.length>0?` { ${n.children.map(Zm).join(", ")} } `:"";return`${n.value}${t}`}function Iv(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Nr(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Nr(t.params,e.params)||n.params.next(e.params),function wv(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Nr(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Nr(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ii(n,t){const e=Nr(n.params,t.params)&&function sd(n,t){return Zo(n,t)&&n.every((e,i)=>Nr(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Ii(n.parent,t.parent))}function Cf(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function Dv(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Cf(n,i,r);return Cf(n,i)})}(n,t,e);return new zs(i,r)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=t.value,l.children=t.children.map(d=>Cf(n,d)),l}}const i=function H0(n){return new Rh(new Gn(n.url),new Gn(n.params),new Gn(n.queryParams),new Gn(n.fragment),new Gn(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(o=>Cf(n,o));return new zs(i,r)}}const xv="ngNavigationCancelingError";function U0(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=Ko(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=z0(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function z0(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[xv]=!0,i.cancellationCode=t,e&&(i.url=e),i}function G0(n){return kv(n)&&Ko(n.url)}function kv(n){return n&&n[xv]}class oN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new qm,this.attachRef=null}}let qm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new oN,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yc=!1;let Tf=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Yt,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.parentContexts=(0,s.f3M)(qm),this.location=(0,s.f3M)(s.s_b),this.changeDetector=(0,s.f3M)(s.sBO),this.environmentInjector=(0,s.f3M)(s.lqb)}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new s.vHH(4012,Yc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new s.vHH(4012,Yc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new s.vHH(4012,Yc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new s.vHH(4013,Yc);this._activatedRoute=e;const r=this.location,l=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new j0(e,d,r.injector);if(i&&function $0(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(l);this.activated=r.createComponent(y,r.length,f)}else this.activated=r.createComponent(l,{index:r.length,injector:f,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[s.TTD]}),n})();class j0{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Rh?this.route:t===qm?this.childContexts:this.parent.get(t,e)}}let Wm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[s.jDz],decls:1,vars:0,template:function(e,i){1&e&&s._UZ(0,"router-outlet")},dependencies:[Tf],encapsulation:2}),n})();function yx(n,t){return n.providers&&!n._injector&&(n._injector=(0,s.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Km(n){const t=n.children&&n.children.map(Km),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Yt&&(e.component=Wm),e}function Gs(n){return n.outlet||Yt}function Qc(n,t){const e=n.filter(i=>Gs(i)===t);return e.push(...n.filter(i=>Gs(i)!==t)),e}function Ef(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Ym{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Iv(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=vf(e);t.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,r[l],i),delete r[l]}),Yi(r,(o,l)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(t,e,l.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=vf(t);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:l,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=vf(t);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=vf(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new ud(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Mh(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,o=e?e.value:null;if(Iv(r),r===o)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,l.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Iv(d.route.value),this.activateChildRoutes(t,null,l.children)}else{const d=Ef(r.snapshot),f=d?.get(s._Vd)??null;l.attachRef=null,l.route=r,l.resolver=f,l.injector=d,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(t,null,l.children)}}else this.activateChildRoutes(t,null,i)}}class W0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Oh{constructor(t,e){this.component=t,this.route=e}}function Qm(n,t,e){const i=n._root;return pd(i,t?t._root:null,e,[i.value])}function hd(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,s.Z0I)(n)?t.get(n):n:i}function pd(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=vf(t);return n.children.forEach(l=>{(function Cx(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const f=function Tx(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Zo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Zo(n.url,t.url)||!Nr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ii(n,t)||!Nr(n.queryParams,t.queryParams);default:return!Ii(n,t)}}(l,o,o.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new W0(i)):(o.data=l.data,o._resolvedData=l._resolvedData),pd(n,t,o.component?d?d.children:null:e,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new Oh(d.outlet.component,l))}else l&&Ph(t,d,r),r.canActivateChecks.push(new W0(i)),pd(n,null,o.component?d?d.children:null:e,i,r)})(l,o[l.value.outlet],e,i.concat([l.value]),r),delete o[l.value.outlet]}),Yi(o,(l,d)=>Ph(l,e.getContext(d),r)),r}function Ph(n,t,e){const i=vf(n),r=n.value;Yi(i,(o,l)=>{Ph(o,r.component?t?t.children.getContext(l):null:t,e)}),e.canDeactivateChecks.push(new Oh(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Ya(n){return"function"==typeof n}function Q0(n){return n instanceof po||"EmptyError"===n?.name}const Jm=Symbol("INITIAL_VALUE");function Qa(){return Ti(n=>wm(n.map(t=>t.pipe(Ga(1),Vs(Jm)))).pipe((0,gt.U)(t=>{for(const e of t)if(!0!==e){if(e===Jm)return Jm;if(!1===e||e instanceof $o)return e}return!0}),Jr(t=>t!==Jm),Ga(1)))}function Pv(n){return(0,Tm.z)((0,Si.b)(t=>{if(Ko(t))throw U0(0,t)}),(0,gt.U)(t=>!0===t))}const If={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eT(n,t,e,i,r){const o=Df(n,t,e);return o.matched?function Nv(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?Pe(r.map(l=>{const d=hd(l,n);return ms(function K0(n){return n&&Ya(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(Qa(),Pv()):Pe(!0)}(i=yx(t,i),t,e).pipe((0,gt.U)(l=>!0===l?o:{...If})):Pe(o)}function Df(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...If}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||lf)(e,n,t);if(!r)return{...If};const o={};Yi(r.posParams,(d,f)=>{o[f]=d.path});const l=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function Jc(n,t,e,i){if(e.length>0&&function Nx(n,t,e){return e.some(i=>Xm(n,t,i)&&Gs(i)!==Yt)}(n,e,i)){const o=new nn(t,function Px(n,t,e,i){const r={};r[Yt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Gs(o)!==Yt){const l=new nn([],{});l._sourceSegment=n,l._segmentIndexShift=t.length,r[Gs(o)]=l}return r}(n,t,i,new nn(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function Lx(n,t,e){return e.some(i=>Xm(n,t,i))}(n,e,i)){const o=new nn(n.segments,function Ox(n,t,e,i,r){const o={};for(const l of i)if(Xm(n,e,l)&&!r[Gs(l)]){const d=new nn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,o[Gs(l)]=d}return{...r,...o}}(n,t,e,i,n.children));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const r=new nn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function Xm(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function tT(n,t,e,i){return!!(Gs(n)===i||i!==Yt&&Xm(t,e,n))&&("**"===n.path||Df(t,n,e).matched)}function nT(n,t,e){return 0===t.length&&!n.children[e]}const $l=!1;class mo{constructor(t){this.segmentGroup=t||null}}class iT{constructor(t){this.urlTree=t}}function xf(n){return Uc(new mo(n))}function Fx(n){return Uc(new iT(n))}class sT{constructor(t,e,i,r,o){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const t=Jc(this.urlTree.root,[],[],this.config).segmentGroup,e=new nn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Yt).pipe((0,gt.U)(o=>this.createUrlTree(Hl(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(fo(o=>{if(o instanceof iT)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof mo?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Yt).pipe((0,gt.U)(r=>this.createUrlTree(Hl(r),t.queryParams,t.fragment))).pipe(fo(r=>{throw r instanceof mo?this.noMatchError(r):r}))}noMatchError(t){return new s.vHH(4002,$l)}createUrlTree(t,e,i){const r=Wo(t);return new $o(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,gt.U)(o=>new nn([],o))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,Qe.D)(r).pipe(Ei(o=>{const l=i.children[o],d=Qc(e,o);return this.expandSegmentGroup(t,d,l,o).pipe((0,gt.U)(f=>({segment:f,outlet:o})))}),li((o,l)=>(o[l.outlet]=l.segment,o),{}),af())}expandSegment(t,e,i,r,o,l){return(0,Qe.D)(i).pipe(Ei(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,o,l).pipe(fo(y=>{if(y instanceof mo)return Pe(null);throw y}))),Bs(d=>!!d),fo((d,f)=>{if(Q0(d))return nT(e,r,o)?Pe(new nn([],{})):xf(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,o,l,d){return tT(r,e,o,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,o,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l):xf(e):xf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Fx(o):this.lineralizeSegments(i,o).pipe((0,Bi.z)(l=>{const d=new nn(l,{});return this.expandSegment(t,d,e,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,o,l){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=Df(e,r,o);if(!d)return xf(e);const E=this.applyRedirectCommands(f,r.redirectTo,w);return r.redirectTo.startsWith("/")?Fx(E):this.lineralizeSegments(r,E).pipe((0,Bi.z)(M=>this.expandSegment(t,e,i,M.concat(y),l,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){return"**"===i.path?(t=yx(i,t),i.loadChildren?(i._loadedRoutes?Pe({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,gt.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new nn(r,{})))):Pe(new nn(r,{}))):eT(e,i,r,t).pipe(Ti(({matched:l,consumedSegments:d,remainingSegments:f})=>l?this.getChildConfig(t=i._injector??t,i,r).pipe((0,Bi.z)(w=>{const E=w.injector??t,M=w.routes,{segmentGroup:N,slicedSegments:B}=Jc(e,d,f,M),j=new nn(N.segments,N.children);if(0===B.length&&j.hasChildren())return this.expandChildren(E,M,j).pipe((0,gt.U)(Ze=>new nn(d,Ze)));if(0===M.length&&0===B.length)return Pe(new nn(d,{}));const Q=Gs(i)===o;return this.expandSegment(E,j,M,B,Q?Yt:o,!0).pipe((0,gt.U)($e=>new nn(d.concat($e.segments),$e.children)))})):xf(e)))}getChildConfig(t,e,i){return e.children?Pe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Pe({routes:e._loadedRoutes,injector:e._loadedInjector}):function X0(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?Pe(!0):Pe(r.map(l=>{const d=hd(l,n);return ms(function Sx(n){return n&&Ya(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(Qa(),Pv())}(t,e,i).pipe((0,Bi.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,Si.b)(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function rT(n){return Uc(z0($l,3))}())):Pe({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Pe(i);if(r.numberOfChildren>1||!r.children[Yt])return Uc(new s.vHH(4e3,$l));r=r.children[Yt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const o=this.createSegmentGroup(t,e.root,i,r);return new $o(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Yi(t,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[o]=e[d]}else i[o]=r}),i}createSegmentGroup(t,e,i,r){const o=this.createSegments(t,e.segments,i,r);let l={};return Yi(e.children,(d,f)=>{l[f]=this.createSegmentGroup(t,d,i,r)}),new nn(o,l)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new s.vHH(4001,$l);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class lT{}class Jo{constructor(t,e,i,r,o,l,d){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.urlSerializer=d}recognize(){const t=Jc(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Yt).pipe((0,gt.U)(e=>{if(null===e)return null;const i=new bf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zs(i,e),o=new wf(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,i=V0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,Qe.D)(Object.keys(i.children)).pipe(Ei(r=>{const o=i.children[r],l=Qc(e,r);return this.processSegmentGroup(t,l,o,r)}),li((r,o)=>r&&o?(r.push(...o),r):null),function Sm(n,t=!1){return(0,En.e)((e,i)=>{let r=0;e.subscribe((0,kn.x)(i,o=>{const l=n(o,r++);(l||t)&&i.next(o),!l&&i.complete()}))})}(r=>null!==r),Ch(null),af(),(0,gt.U)(r=>{if(null===r)return null;const o=uT(r);return function Hx(n){n.sort((t,e)=>t.value.outlet===Yt?-1:e.value.outlet===Yt?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,i,r,o){return(0,Qe.D)(e).pipe(Ei(l=>this.processSegmentAgainstRoute(l._injector??t,l,i,r,o)),Bs(l=>!!l),fo(l=>{if(Q0(l))return nT(i,r,o)?Pe([]):Pe(null);throw l}))}processSegmentAgainstRoute(t,e,i,r,o){if(e.redirectTo||!tT(e,i,r,o))return Pe(null);let l;if("**"===e.path){const d=r.length>0?ja(r).parameters:{},f=Lv(i)+r.length;l=Pe({snapshot:new bf(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hT(e),Gs(e),e.component??e._loadedComponent??null,e,dT(i),f,pT(e)),consumedSegments:[],remainingSegments:[]})}else l=eT(i,e,r,t).pipe((0,gt.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:w})=>{if(!d)return null;const E=Lv(i)+f.length;return{snapshot:new bf(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hT(e),Gs(e),e.component??e._loadedComponent??null,e,dT(i),E,pT(e)),consumedSegments:f,remainingSegments:y}}));return l.pipe(Ti(d=>{if(null===d)return Pe(null);const{snapshot:f,consumedSegments:y,remainingSegments:w}=d;t=e._injector??t;const E=e._loadedInjector??t,M=function cT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:N,slicedSegments:B}=Jc(i,y,w,M.filter(Q=>void 0===Q.redirectTo));if(0===B.length&&N.hasChildren())return this.processChildren(E,M,N).pipe((0,gt.U)(Q=>null===Q?null:[new zs(f,Q)]));if(0===M.length&&0===B.length)return Pe([new zs(f,[])]);const j=Gs(e)===o;return this.processSegment(E,M,N,B,j?Yt:o).pipe((0,gt.U)(Q=>null===Q?null:[new zs(f,Q)]))}))}}function Ux(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function uT(n){const t=[],e=new Set;for(const i of n){if(!Ux(i)){t.push(i);continue}const r=t.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=uT(i.children);t.push(new zs(i.value,r))}return t.filter(i=>!e.has(i))}function dT(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Lv(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function hT(n){return n.data||{}}function pT(n){return n.resolve||{}}function Fv(n){return"string"==typeof n.title||null===n.title}function Vv(n){return Ti(t=>{const e=n(t);return e?(0,Qe.D)(e).pipe((0,gt.U)(()=>t)):Pe(t)})}const Lh=new s.OlP("ROUTES");let vT=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Pe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=ms(e.loadComponent()).pipe((0,gt.U)(Bv),(0,Si.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Eh(()=>{this.componentLoaders.delete(e)})),r=new Em(i,()=>new Nt.x).pipe(rf());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,gt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let f,y,w=!1;Array.isArray(d)?y=d:(f=d.create(e).injector,y=Dm(f.get(Lh,[],s.XFs.Self|s.XFs.Optional)));return{routes:y.map(Km),injector:f}}),Eh(()=>{this.childrenLoaders.delete(i)})),l=new Em(o,()=>new Nt.x).pipe(rf());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(e){return ms(e()).pipe((0,gt.U)(Bv),(0,Bi.z)(r=>r instanceof s.YKP||Array.isArray(r)?Pe(r):(0,Qe.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.zs3),s.LFG(s.Sil))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bv(n){return function bT(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let e_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Nt.x,this.configLoader=(0,s.f3M)(vT),this.environmentInjector=(0,s.f3M)(s.lqb),this.urlSerializer=(0,s.f3M)(Bl),this.rootContexts=(0,s.f3M)(qm),this.navigationId=0,this.afterPreactivation=()=>Pe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Pi(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Dt(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e){return this.transitions=new Gn({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cd,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Jr(i=>0!==i.id),(0,gt.U)(i=>({...i,extractedUrl:e.urlHandlingStrategy.extract(i.rawUrl)})),Ti(i=>{let r=!1,o=!1;return Pe(i).pipe((0,Si.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ti(l=>{const d=e.browserUrlTree.toString(),f=!e.navigated||l.extractedUrl.toString()!==d||d!==e.currentUrlTree.toString();if(!f&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new k(l.id,e.serializeUrl(i.rawUrl),w,0)),e.rawUrlTree=l.rawUrl,l.resolve(null),Go.E}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return t_(l.source)&&(e.browserUrlTree=l.extractedUrl),Pe(l).pipe(Ti(w=>{const E=this.transitions?.getValue();return this.events.next(new g(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?Go.E:Promise.resolve(w)}),function oT(n,t,e,i){return Ti(r=>function uN(n,t,e,i,r){return new sT(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,gt.U)(o=>({...r,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,Si.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function Qt(n,t,e,i,r){return(0,Bi.z)(o=>function Bx(n,t,e,i,r,o,l="emptyOnly"){return new Jo(n,t,e,i,r,l,o).recognize().pipe(Ti(d=>null===d?function Vx(n){return new Oi.y(t=>t.error(n))}(new lT):Pe(d)))}(n,t,e,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r).pipe((0,gt.U)(l=>({...o,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Si.b)(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=e.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);e.setBrowserUrl(M,w)}e.browserUrlTree=w.urlAfterRedirects}const E=new J(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:w,extractedUrl:E,source:M,restoredState:N,extras:B}=l,j=new g(w,this.urlSerializer.serialize(E),M,N);this.events.next(j);const Q=Ev(E,this.rootComponentType).snapshot;return Pe(i={...l,targetSnapshot:Q,urlAfterRedirects:E,extras:{...B,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new k(l.id,e.serializeUrl(i.extractedUrl),w,1)),e.rawUrlTree=l.rawUrl,l.resolve(null),Go.E}}),(0,Si.b)(l=>{const d=new ge(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),(0,gt.U)(l=>i={...l,guards:Qm(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function xx(n,t){return(0,Bi.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:l}}=e;return 0===l.length&&0===o.length?Pe({...e,guardsResult:!0}):function Nh(n,t,e,i){return(0,Qe.D)(n).pipe((0,Bi.z)(r=>function Rx(n,t,e,i,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Pe(o.map(d=>{const f=Ef(t)??r,y=hd(d,f);return ms(function Dx(n){return n&&Ya(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,i):f.runInContext(()=>y(n,t,e,i))).pipe(Bs())})).pipe(Qa()):Pe(!0)}(r.component,r.route,e,t,i)),Bs(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Bi.z)(d=>d&&function Ex(n){return"boolean"==typeof n}(d)?function Sf(n,t,e,i){return(0,Qe.D)(t).pipe(Ei(r=>Cm(function J0(n,t){return null!==n&&t&&t(new Hs(n)),Pe(!0)}(r.route.parent,i),function kx(n,t){return null!==n&&t&&t(new Um(n)),Pe(!0)}(r.route,i),function Mx(n,t,e){const i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(l=>function dd(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(l)).filter(l=>null!==l).map(l=>wh(()=>Pe(l.guards.map(f=>{const y=Ef(l.node)??e,w=hd(f,y);return ms(function Ov(n){return n&&Ya(n.canActivateChild)}(w)?w.canActivateChild(i,n):y.runInContext(()=>w(i,n))).pipe(Bs())})).pipe(Qa())));return Pe(o).pipe(Qa())}(n,r.path,e),function Ax(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Pe(!0);const r=i.map(o=>wh(()=>{const l=Ef(t)??e,d=hd(o,l);return ms(function Ix(n){return n&&Ya(n.canActivate)}(d)?d.canActivate(t,n):l.runInContext(()=>d(t,n))).pipe(Bs())}));return Pe(r).pipe(Qa())}(n,r.route,e))),Bs(r=>!0!==r,!0))}(i,o,n,t):Pe(d)),(0,gt.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Si.b)(l=>{if(i.guardsResult=l.guardsResult,Ko(l.guardsResult))throw U0(0,l.guardsResult);const d=new Xe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Jr(l=>!!l.guardsResult||(e.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Vv(l=>{if(l.guards.canActivateChecks.length)return Pe(l).pipe((0,Si.b)(d=>{const f=new ht(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ti(d=>{let f=!1;return Pe(d).pipe(function fT(n,t){return(0,Bi.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Pe(e);let o=0;return(0,Qe.D)(r).pipe(Ei(l=>function gT(n,t,e,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!Fv(r)&&(o[gs]=r.title),function mT(n,t,e,i){const r=function Gx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Pe({});const o={};return(0,Qe.D)(r).pipe((0,Bi.z)(l=>function jx(n,t,e,i){const r=Ef(t)??i,o=hd(n,r);return ms(o.resolve?o.resolve(t,e):r.runInContext(()=>o(t,e)))}(n[l],t,e,i).pipe(Bs(),(0,Si.b)(d=>{o[l]=d}))),Ll(1),function Im(n){return(0,gt.U)(()=>n)}(o),fo(l=>Q0(l)?Go.E:Uc(l)))}(o,n,t,i).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=V0(n,e).resolve,r&&Fv(r)&&(n.data[gs]=r.title),null)))}(l.route,i,n,t)),(0,Si.b)(()=>o++),Ll(1),(0,Bi.z)(l=>o===r.length?Pe(e):Go.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,Si.b)({next:()=>f=!0,complete:()=>{f||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,Si.b)(d=>{const f=new Ft(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Vv(l=>{const d=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,Si.b)(w=>{f.component=w}),(0,gt.U)(()=>{})));for(const w of f.children)y.push(...d(w));return y};return wm(d(l.targetSnapshot.root)).pipe(Ch(),Ga(1))}),Vv(()=>this.afterPreactivation()),(0,gt.U)(l=>{const d=function B0(n,t,e){const i=Cf(n,t._root,e?e._root:void 0);return new gx(i,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:d}}),(0,Si.b)(l=>{e.currentUrlTree=l.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),e.routerState=l.targetRouterState,"deferred"===e.urlUpdateStrategy&&(l.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,l),e.browserUrlTree=l.urlAfterRedirects)}),((n,t,e)=>(0,gt.U)(i=>(new Ym(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l)),(0,Si.b)({next:l=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new _(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{r=!0}}),Eh(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),fo(l=>{if(o=!0,kv(l)){G0(l)||(e.navigated=!0,e.restoreHistory(i,!0));const d=new C(i.id,this.urlSerializer.serialize(i.extractedUrl),l.message,l.cancellationCode);if(this.events.next(d),G0(l)){const f=e.urlHandlingStrategy.merge(l.url,e.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||t_(i.source)};e.scheduleNavigation(f,cd,null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{e.restoreHistory(i,!0);const d=new P(i.id,this.urlSerializer.serialize(i.extractedUrl),l,i.targetSnapshot??void 0);this.events.next(d);try{i.resolve(e.errorHandler(l))}catch(f){i.reject(f)}}return Go.E}))}))}cancelNavigationTransition(e,i,r){const o=new C(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t_(n){return n!==cd}let n_=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Yt);return i}getResolvedTitleForRoute(e){return e.data[gs]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)($x)},providedIn:"root"}),n})(),$x=(()=>{class n extends n_{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Fa))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(fN)},providedIn:"root"}),n})();class pN{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let fN=(()=>{class n extends pN{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=s.n5z(n)))(i||n)}}(),n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kf=new s.OlP("",{providedIn:"root",factory:()=>({})});let gN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(qx)},providedIn:"root"}),n})(),qx=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wx(n){throw n}function wT(n,t,e){return t.parse("/")}const i_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,s.f3M)(s.c2e),this.isNgZoneEnabled=!1,this.options=(0,s.f3M)(kf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Wx,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||wT,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,s.f3M)(gN),this.routeReuseStrategy=(0,s.f3M)(hN),this.urlCreationStrategy=(0,s.f3M)(Gm),this.titleStrategy=(0,s.f3M)(n_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dm((0,s.f3M)(Lh,{optional:!0})??[]),this.navigationTransitions=(0,s.f3M)(e_),this.urlSerializer=(0,s.f3M)(Bl),this.location=(0,s.f3M)(Ue),this.isNgZoneEnabled=(0,s.f3M)(s.R0b)instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new $o,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ev(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cd,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const o={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const f={...r};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const d=this.parseUrl(e);this.scheduleNavigation(d,i,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(Km),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:l,queryParamsHandling:d,preserveFragment:f}=i,y=f?this.currentUrlTree.fragment:l;let w=null;switch(d){case"merge":w={...this.currentUrlTree.queryParams,...o};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=o||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,w,y??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Ko(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,cd,null,i)}navigate(e,i={skipLocationChange:!1}){return function Yx(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new s.vHH(4008,!1)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...i_}:!1===i?{...Kx}:i,Ko(e))return Ih(this.currentUrlTree,e,r);const o=this.parseUrl(e);return Ih(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(e,i,r,o,l){if(this.disposed)return Promise.resolve(!1);let d,f,y,w;return l?(d=l.resolve,f=l.reject,y=l.promise):y=new Promise((E,M)=>{d=E,f=M}),w="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(E=>Promise.reject(E))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Af=(()=>{class n{constructor(e,i,r,o,l,d){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=l,this.locationStrategy=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Nt.x;const f=l.nativeElement.tagName;this.isAnchorElement="A"===f||"AREA"===f,this.isAnchorElement?this.subscription=e.events.subscribe(y=>{y instanceof _&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,s.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,s.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,s.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,i,r,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||i||r||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:(0,s.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(_s),s.Y36(Rh),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(_t))},n.\u0275dir=s.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(e,i){1&e&&s.NdJ("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&s.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[s.TTD]}),n})(),CT=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,l){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new s.vpe,this.routerEventsSubscription=e.events.subscribe(d=>{d instanceof _&&this.update()})}ngAfterContentInit(){Pe(this.links.changes,Pe(null)).pipe((0,bh.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,Qe.D)(e).pipe((0,bh.J)()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function Qx(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(_s),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(Af,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,Af,5),2&e){let o;s.iGM(o=s.CRH())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[s.TTD]}),n})();class TT{}let ET=(()=>{class n{constructor(e,i,r,o,l){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Jr(e=>e instanceof _),Ei(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=(0,s.MMx)(o.providers,e,`Route: ${o.path}`));const l=o._injector??e,d=o._loadedInjector??l;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(l,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,Qe.D)(r).pipe((0,bh.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Pe(null);const o=r.pipe((0,Bi.z)(l=>null===l?Pe(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??e,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,Qe.D)([o,l]).pipe((0,bh.J)())}return o})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(_s),s.LFG(s.Sil),s.LFG(s.lqb),s.LFG(TT),s.LFG(vT))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const r_=new s.OlP("");let s_=(()=>{class n{constructor(e,i,r,o,l={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof g?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof _&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Us&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Us(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Fh(n,t){return{\u0275kind:n,\u0275providers:t}}function xT(){const n=(0,s.f3M)(s.zs3);return t=>{const e=n.get(s.z2F);if(t!==e.components[0])return;const i=n.get(_s),r=n.get(kT);1===n.get(Vh)&&i.initialNavigation(),n.get(o_,null,s.XFs.Optional)?.setUpPreloading(),n.get(r_,null,s.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const kT=new s.OlP("",{factory:()=>new Nt.x}),Vh=new s.OlP("",{providedIn:"root",factory:()=>1});const o_=new s.OlP("");function a_(n){return Fh(0,[{provide:o_,useExisting:ET},{provide:TT,useExisting:n}])}const Uv=new s.OlP("ROUTER_FORROOT_GUARD"),zv=[Ue,{provide:Bl,useClass:Dh},_s,qm,{provide:Rh,useFactory:function IT(n){return n.routerState.root},deps:[_s]},vT,[]];function t1(){return new s.PXZ("Router",_s)}let Of=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[zv,[],{provide:Lh,multi:!0,useValue:e},{provide:Uv,useFactory:PT,deps:[[_s,new s.FiY,new s.tp0]]},{provide:kf,useValue:i||{}},i?.useHash?{provide:_t,useClass:Ae}:{provide:_t,useClass:Me},{provide:r_,useFactory:()=>{const n=(0,s.f3M)(Ta),t=(0,s.f3M)(s.R0b),e=(0,s.f3M)(kf),i=(0,s.f3M)(e_),r=(0,s.f3M)(Bl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new s_(r,i,n,t,e)}},i?.preloadingStrategy?a_(i.preloadingStrategy).\u0275providers:[],{provide:s.PXZ,multi:!0,useFactory:t1},i?.initialNavigation?r1(i):[],[{provide:NT,useFactory:xT},{provide:s.tb,multi:!0,useExisting:NT}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Lh,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Uv,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Wm]}),n})();function PT(n){return"guarded"}function r1(n){return["disabled"===n.initialNavigation?Fh(3,[{provide:s.ip1,multi:!0,useFactory:()=>{const t=(0,s.f3M)(_s);return()=>{t.setUpLocationChangeListener()}}},{provide:Vh,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fh(2,[{provide:Vh,useValue:0},{provide:s.ip1,multi:!0,deps:[s.zs3],useFactory:t=>{const e=t.get(he,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=t.get(_s),l=t.get(kT);(function i(r){t.get(_s).events.pipe(Jr(l=>l instanceof _||l instanceof C||l instanceof P),(0,gt.U)(l=>l instanceof _||l instanceof C&&(0===l.code||1===l.code)&&null),Jr(l=>null!==l),Ga(1)).subscribe(()=>{r()})})(()=>{r(!0)}),t.get(e_).afterPreactivation=()=>(r(!0),l.closed?Pe(void 0):l),o.initialNavigation()}))}}]).\u0275providers:[]]}const NT=new s.OlP("");let ee=(()=>{class n{static addClass(e,i){e&&i&&(e.classList?e.classList.add(i):e.className+=" "+i)}static addMultipleClasses(e,i){if(e&&i)if(e.classList){let r=i.trim().split(" ");for(let o=0;o<r.length;o++)e.classList.add(r[o])}else{let r=i.split(" ");for(let o=0;o<r.length;o++)e.className+=" "+r[o]}}static removeClass(e,i){e&&i&&(e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,i){return!(!e||!i)&&(e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var o=0;o<i.length;o++){if(i[o]==e)return r;1==i[o].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],o=0;for(var l=0;l<r.length;l++){if(r[l]==e)return o;r[l].attributes&&r[l].attributes[i]&&1==r[l].nodeType&&o++}return-1}static appendOverlay(e,i,r="self"){"self"!==r&&e&&i&&this.appendChild(e,i)}static alignOverlay(e,i,r="self",o=!0){e&&i&&(o&&(e.style.minWidth||(e.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(e,i):this.absolutePosition(e,i))}static relativePosition(e,i){const r=j=>{if(j)return"relative"===getComputedStyle(j).getPropertyValue("position")?j:r(j.parentElement)},o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),l=i.offsetHeight,d=i.getBoundingClientRect(),f=this.getWindowScrollTop(),y=this.getWindowScrollLeft(),w=this.getViewport(),M=r(e)?.getBoundingClientRect()||{top:-1*f,left:-1*y};let N,B;d.top+l+o.height>w.height?(N=d.top-M.top-o.height,e.style.transformOrigin="bottom",d.top+N<0&&(N=-1*d.top)):(N=l+d.top-M.top,e.style.transformOrigin="top"),B=o.width>w.width?-1*(d.left-M.left):d.left-M.left+o.width>w.width?-1*(d.left-M.left+o.width-w.width):d.left-M.left,e.style.top=N+"px",e.style.left=B+"px"}static absolutePosition(e,i){const r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),o=r.height,l=r.width,d=i.offsetHeight,f=i.offsetWidth,y=i.getBoundingClientRect(),w=this.getWindowScrollTop(),E=this.getWindowScrollLeft(),M=this.getViewport();let N,B;y.top+d+o>M.height?(N=y.top+w-o,e.style.transformOrigin="bottom",N<0&&(N=w)):(N=d+y.top+w,e.style.transformOrigin="top"),B=y.left+l>M.width?Math.max(0,y.left+E+f-l):y.left+E,e.style.top=N+"px",e.style.left=B+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const o=/(auto|scroll)/,l=d=>{let f=window.getComputedStyle(d,null);return o.test(f.getPropertyValue("overflow"))||o.test(f.getPropertyValue("overflowX"))||o.test(f.getPropertyValue("overflowY"))};for(let d of r){let f=1===d.nodeType&&d.dataset.scrollselectors;if(f){let y=f.split(",");for(let w of y){let E=this.findSingle(d,w);E&&l(E)&&i.push(E)}}9!==d.nodeType&&l(d)&&i.push(d)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),o=r?parseFloat(r):0,l=getComputedStyle(e).getPropertyValue("paddingTop"),d=l?parseFloat(l):0,f=e.getBoundingClientRect(),w=i.getBoundingClientRect().top+document.body.scrollTop-(f.top+document.body.scrollTop)-o-d,E=e.scrollTop,M=e.clientHeight,N=this.getOuterHeight(i);w<0?e.scrollTop=E+w:w+N>M&&(e.scrollTop=E+w-M+N)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,o=0,l=function(){o=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=o,r=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(l)||setTimeout(l,16))};l()}static fadeOut(e,i){var r=1,d=50/i;let f=setInterval(()=>{(r-=d)<=0&&(r=0,clearInterval(f)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(l){return-1!==[].indexOf.call(document.querySelectorAll(l),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let o=getComputedStyle(e);r+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let o=getComputedStyle(e);r+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,o=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||o.clientWidth,height:e.innerHeight||r.clientHeight||o.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,i){e&&document.activeElement!==e&&e.focus(i)}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let o of i)(o.offsetWidth||o.offsetHeight||o.getClientRects().length)&&r.push(o);return r}static getNextFocusableElement(e,i=!1){const r=n.getFocusableElements(e);let o=0;if(r&&r.length>0){const l=r.indexOf(r[0].ownerDocument.activeElement);i?o=-1==l||0===l?r.length-1:l-1:-1!=l&&l!==r.length-1&&(o=l+1)}return r[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,i){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof e;if("string"===r)return document.querySelector(e);if("object"===r&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const l=(d=e)&&d.constructor&&d.call&&d.apply?e():e;return l&&9===l.nodeType||this.isExist(l)?l:null}var d}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class Gv{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=ee.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let ys=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(ee.removeClass(i,"p-ink-active"),!ee.getHeight(i)&&!ee.getWidth(i)){let d=Math.max(ee.getOuterWidth(this.el.nativeElement),ee.getOuterHeight(this.el.nativeElement));i.style.height=d+"px",i.style.width=d+"px"}let r=ee.getOffset(this.el.nativeElement),o=e.pageX-r.left+document.body.scrollTop-ee.getWidth(i)/2,l=e.pageY-r.top+document.body.scrollLeft-ee.getHeight(i)/2;i.style.top=l+"px",i.style.left=o+"px",ee.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let d=this.getInk();d&&ee.removeClass(d,"p-ink-active")},401)}getInk(){const e=this.el.nativeElement.children;for(let i=0;i<e.length;i++)if("string"==typeof e[i].className&&-1!==e[i].className.indexOf("p-ink"))return e[i];return null}resetInk(){let e=this.getInk();e&&ee.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),ee.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),ee.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(R,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),vs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();function o1(n,t){1&n&&s.GkF(0)}const a1=function(n,t,e,i){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":i}};function l1(n,t){if(1&n&&s._UZ(0,"span",4),2&n){const e=s.oxw();s.Tol(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),s.Q6J("ngClass",s.l5B(4,a1,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),s.uIk("aria-hidden",!0)}}function LT(n,t){if(1&n&&(s.TgZ(0,"span",5),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.uIk("aria-hidden",e.icon&&!e.label),s.xp6(1),s.Oqu(e.label)}}function c1(n,t){if(1&n&&(s.TgZ(0,"span",4),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.Tol(e.badgeClass),s.Q6J("ngClass",e.badgeStyleClass()),s.xp6(1),s.Oqu(e.badge)}}const u1=function(n,t,e,i,r){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":t,"p-disabled":e,"p-button-loading":i,"p-button-loading-label-only":r}},jv=["*"],md={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let _d=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1,this._internalClasses=Object.values(md)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get htmlElement(){return this.el.nativeElement}ngAfterViewInit(){ee.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const e=[md.button,md.component];return this.icon&&!this.label&&Ge.isEmpty(this.htmlElement.textContent)&&e.push(md.iconOnly),this.loading&&(e.push(md.disabled,md.loading),!this.icon&&this.label&&e.push(md.labelOnly)),e}setStyleClass(){const e=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...e)}createLabel(){if(this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.htmlElement.appendChild(e)}}createIcon(){if(this.icon||this.loading){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&ee.addClass(e,i);let r=this.getIconClass();r&&ee.addMultipleClasses(e,r),this.htmlElement.insertBefore(e,this.htmlElement.firstChild)}}updateLabel(){let e=ee.findSingle(this.htmlElement,".p-button-label");this.label?e?e.textContent=this.label:this.createLabel():e&&this.htmlElement.removeChild(e)}updateIcon(){let e=ee.findSingle(this.htmlElement,".p-button-icon");this.icon||this.loading?e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():e&&this.htmlElement.removeChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),d1=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:jv,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,i){1&e&&(s.F$t(),s.TgZ(0,"button",0),s.NdJ("click",function(o){return i.onClick.emit(o)})("focus",function(o){return i.onFocus.emit(o)})("blur",function(o){return i.onBlur.emit(o)}),s.Hsn(1),s.YNc(2,o1,1,0,"ng-container",1),s.YNc(3,l1,1,9,"span",2),s.YNc(4,LT,2,2,"span",3),s.YNc(5,c1,2,4,"span",2),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngStyle",i.style)("disabled",i.disabled||i.loading)("ngClass",s.qbA(11,u1,i.icon&&!i.label,("top"===i.iconPos||"bottom"===i.iconPos)&&i.label,i.disabled||i.loading,i.loading,i.loading&&!i.icon&&i.label)),s.uIk("type",i.type)("aria-label",i.ariaLabel),s.xp6(2),s.Q6J("ngTemplateOutlet",i.contentTemplate),s.xp6(1),s.Q6J("ngIf",!i.contentTemplate&&(i.icon||i.loading)),s.xp6(1),s.Q6J("ngIf",!i.contentTemplate&&i.label),s.xp6(1),s.Q6J("ngIf",!i.contentTemplate&&i.badge))},dependencies:[pt,pn,wn,Tn,ys],encapsulation:2,changeDetection:0}),n})(),yd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,vs]}),n})(),$v=(()=>{class n{constructor(e,i,r,o,l){this.el=e,this.zone=i,this.config=r,this.renderer=o,this.changeDetector=l,this.escape=!0,this.autoHide=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0,autoHide:!0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){(this.isAutoHide()||!(ee.hasClass(e.toElement,"p-tooltip")||ee.hasClass(e.toElement,"p-tooltip-arrow")||ee.hasClass(e.toElement,"p-tooltip-text")||ee.hasClass(e.relatedTarget,"p-tooltip")))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?ee.appendChild(this.container,this.el.nativeElement):ee.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",i=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),ee.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?xn.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&xn.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+ee.getWindowScrollLeft(),top:e.top+ee.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+ee.getOuterWidth(this.el.nativeElement),r=e.top+(ee.getOuterHeight(this.el.nativeElement)-ee.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-ee.getOuterWidth(this.container),r=e.top+(ee.getOuterHeight(this.el.nativeElement)-ee.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(ee.getOuterWidth(this.el.nativeElement)-ee.getOuterWidth(this.container))/2,r=e.top-ee.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(ee.getOuterWidth(this.el.nativeElement)-ee.getOuterWidth(this.container))/2,r=e.top+ee.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return ee.hasClass(e,"p-inputwrapper")?ee.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,o=ee.getOuterWidth(this.container),l=ee.getOuterHeight(this.container),d=ee.getViewport();return r+o>d.width||r<0||i<0||i+l>d.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Gv(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):ee.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&xn.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(R),s.Y36(s.Qsj),s.Y36(s.sBO))},n.\u0275dir=s.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[s.TTD]}),n})(),$s=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();var Pf=V(5032),Nf=V(4986),FT=V(3532);function VT(n=0,t,e=Nf.P){let i=-1;return null!=t&&((0,FT.K)(t)?e=t:i=t),new Oi.y(r=>{let o=function p1(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let l=0;return e.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function BT(n=0,t=Nf.z){return n<0&&(n=0),VT(n,n,t)}const Zv=function(n){return{"p-hidden":n}};function f1(n,t){if(1&n&&s._UZ(0,"li",4),2&n){const e=s.oxw().$implicit;s.Q6J("ngClass",s.VKq(1,Zv,!1===e.visible))}}function g1(n,t){if(1&n&&s._UZ(0,"span",16),2&n){const e=s.oxw(3).$implicit;s.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function l_(n,t){if(1&n&&(s.TgZ(0,"span",17),s._uU(1),s.qZA()),2&n){const e=s.oxw(3).$implicit;s.xp6(1),s.Oqu(e.label)}}function qv(n,t){if(1&n&&s._UZ(0,"span",18),2&n){const e=s.oxw(3).$implicit;s.Q6J("innerHTML",e.label,s.oJD)}}function c_(n,t){if(1&n&&(s.TgZ(0,"span",19),s._uU(1),s.qZA()),2&n){const e=s.oxw(3).$implicit;s.Q6J("ngClass",e.badgeStyleClass),s.xp6(1),s.Oqu(e.badge)}}const m1=function(n,t){return{"pi-angle-down":n,"pi-angle-right":t}};function Wv(n,t){if(1&n&&s._UZ(0,"span",20),2&n){const e=s.oxw(4);s.Q6J("ngClass",s.WLB(1,m1,e.root,!e.root))}}const _1=function(n){return{"p-menuitem-link":!0,"p-disabled":n}};function HT(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"a",10),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemClick(r,o))})("mouseenter",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemMouseEnter(r,o))})("mouseleave",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemMouseLeave(r,o))}),s.YNc(1,g1,1,2,"span",11),s.YNc(2,l_,2,1,"span",12),s.YNc(3,qv,1,1,"ng-template",null,13,s.W1O),s.YNc(5,c_,2,2,"span",14),s.YNc(6,Wv,1,4,"span",15),s.qZA()}if(2&n){const e=s.MAs(4),i=s.oxw(2).$implicit,r=s.oxw();s.Q6J("target",i.target)("ngClass",s.VKq(14,_1,i.disabled)),s.uIk("href",i.url,s.LSH)("data-automationid",i.automationId)("title",i.title)("id",i.id)("tabindex",i.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),s.xp6(1),s.Q6J("ngIf",i.icon),s.xp6(1),s.Q6J("ngIf",!1!==i.escape)("ngIfElse",e),s.xp6(3),s.Q6J("ngIf",i.badge),s.xp6(1),s.Q6J("ngIf",i.items)}}function UT(n,t){if(1&n&&s._UZ(0,"span",16),2&n){const e=s.oxw(3).$implicit;s.Q6J("ngClass",e.icon)("ngStyle",e.iconStyle)}}function zT(n,t){if(1&n&&(s.TgZ(0,"span",17),s._uU(1),s.qZA()),2&n){const e=s.oxw(3).$implicit;s.xp6(1),s.Oqu(e.label)}}function GT(n,t){if(1&n&&s._UZ(0,"span",18),2&n){const e=s.oxw(3).$implicit;s.Q6J("innerHTML",e.label,s.oJD)}}function Kv(n,t){if(1&n&&(s.TgZ(0,"span",19),s._uU(1),s.qZA()),2&n){const e=s.oxw(3).$implicit;s.Q6J("ngClass",e.badgeStyleClass),s.xp6(1),s.Oqu(e.badge)}}function Zl(n,t){if(1&n&&s._UZ(0,"span",20),2&n){const e=s.oxw(4);s.Q6J("ngClass",s.WLB(1,m1,e.root,!e.root))}}const u_=function(){return{exact:!1}};function d_(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"a",21),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemClick(r,o))})("mouseenter",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemMouseEnter(r,o))})("mouseleave",function(r){s.CHM(e);const o=s.oxw(2).$implicit,l=s.oxw();return s.KtG(l.onItemMouseLeave(r,o))}),s.YNc(1,UT,1,2,"span",11),s.YNc(2,zT,2,1,"span",12),s.YNc(3,GT,1,1,"ng-template",null,22,s.W1O),s.YNc(5,Kv,2,2,"span",14),s.YNc(6,Zl,1,4,"span",15),s.qZA()}if(2&n){const e=s.MAs(4),i=s.oxw(2).$implicit;s.Q6J("routerLink",i.routerLink)("queryParams",i.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.routerLinkActiveOptions||s.DdM(21,u_))("target",i.target)("ngClass",s.VKq(22,_1,i.disabled))("fragment",i.fragment)("queryParamsHandling",i.queryParamsHandling)("preserveFragment",i.preserveFragment)("skipLocationChange",i.skipLocationChange)("replaceUrl",i.replaceUrl)("state",i.state),s.uIk("data-automationid",i.automationId)("title",i.title)("id",i.id)("tabindex",i.disabled?null:"0"),s.xp6(1),s.Q6J("ngIf",i.icon),s.xp6(1),s.Q6J("ngIf",!1!==i.escape)("ngIfElse",e),s.xp6(3),s.Q6J("ngIf",i.badge),s.xp6(1),s.Q6J("ngIf",i.items)}}function Lf(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-menubarSub",23),s.NdJ("leafClick",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.onLeafClick())}),s.qZA()}if(2&n){const e=s.oxw(2).$implicit,i=s.oxw();s.Q6J("parentActive",e===i.activeItem)("item",e)("mobileActive",i.mobileActive)("autoDisplay",i.autoDisplay)}}const y1=function(n,t){return{"p-menuitem":!0,"p-menuitem-active":n,"p-hidden":t}};function jT(n,t){if(1&n&&(s.TgZ(0,"li",5,6),s.YNc(2,HT,7,16,"a",7),s.YNc(3,d_,7,24,"a",8),s.YNc(4,Lf,1,4,"p-menubarSub",9),s.qZA()),2&n){const e=s.oxw().$implicit,i=s.oxw();s.Tol(e.styleClass),s.Q6J("ngClass",s.WLB(8,y1,e===i.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),s.xp6(2),s.Q6J("ngIf",!e.routerLink),s.xp6(1),s.Q6J("ngIf",e.routerLink),s.xp6(1),s.Q6J("ngIf",e.items)}}function $T(n,t){if(1&n&&(s.YNc(0,f1,1,3,"li",2),s.YNc(1,jT,5,11,"li",3)),2&n){const e=t.$implicit;s.Q6J("ngIf",e.separator),s.xp6(1),s.Q6J("ngIf",!e.separator)}}const v1=function(n,t){return{"p-submenu-list":n,"p-menubar-root-list":t}},b1=["menubutton"],Ff=["rootmenu"];function w1(n,t){1&n&&s.GkF(0)}function yN(n,t){if(1&n&&(s.TgZ(0,"div",7),s.YNc(1,w1,1,0,"ng-container",8),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.startTemplate)}}function C1(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"a",9,10),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.toggle(r))}),s._UZ(2,"i",11),s.qZA()}}function T1(n,t){1&n&&s.GkF(0)}function E1(n,t){if(1&n&&(s.TgZ(0,"div",12),s.YNc(1,T1,1,0,"ng-container",8),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.endTemplate)}}function S1(n,t){1&n&&(s.TgZ(0,"div",12),s.Hsn(1),s.qZA())}const I1=function(n){return{"p-menubar p-component":!0,"p-menubar-mobile-active":n}},D1=["*"];let Yv=(()=>{class n{constructor(){this.mouseLeaves=new Nt.x,this.mouseLeft$=this.mouseLeaves.pipe(function h1(n){return(0,En.e)((t,e)=>{let i=!1,r=null,o=null;const l=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const d=r;r=null,e.next(d)}};t.subscribe((0,kn.x)(e,d=>{o?.unsubscribe(),i=!0,r=d,o=(0,kn.x)(e,l,Pf.Z),(0,za.Xf)(n(d)).subscribe(o)},()=>{l(),e.complete()},void 0,()=>{r=o=null}))})}(()=>BT(this.autoHideDelay)),Jr(e=>this.autoHide&&e))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),ZT=(()=>{class n{constructor(e,i,r,o){this.el=e,this.renderer=i,this.cd=r,this.menubarService=o,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new s.vpe,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}ngOnInit(){this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>{this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener()})}onItemClick(e,i){i.disabled?e.preventDefault():(!i.url&&!i.routerLink&&e.preventDefault(),i.command&&i.command({originalEvent:e,item:i}),i.items&&(this.activeItem&&i===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=i,this.root&&this.bindDocumentClickListener())),i.items||this.onLeafClick())}onItemMouseLeave(e,i){this.menubarService.mouseLeaves.next(!0)}onItemMouseEnter(e,i){this.menubarService.mouseLeaves.next(!1),i.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=i,this.bindDocumentClickListener()):(this.activeItem=i,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindDocumentClickListener()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(Yv))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter","mouseleave"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter","mouseleave"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,i){1&e&&(s.TgZ(0,"ul",0),s.YNc(1,$T,2,2,"ng-template",1),s.qZA()),2&e&&(s.Q6J("ngClass",s.WLB(3,v1,!i.root,i.root)),s.uIk("role",i.root?"menubar":"menu"),s.xp6(1),s.Q6J("ngForOf",i.root?i.item:i.item.items))},dependencies:[pt,Ln,pn,Tn,Af,CT,ys,$v,n],encapsulation:2}),n})(),Qv=(()=>{class n{constructor(e,i,r,o,l){this.el=e,this.renderer=i,this.cd=r,this.config=o,this.menubarService=l,this.autoZIndex=!0,this.baseZIndex=0,this.autoHideDelay=100}ngOnInit(){this.menubarService.autoHide=this.autoHide,this.menubarService.autoHideDelay=this.autoHideDelay,this.mouseLeaveSubscriber=this.menubarService.mouseLeft$.subscribe(()=>this.unbindOutsideClickListener())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),xn.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,xn.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),xn.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.mouseLeaveSubscriber.unsubscribe(),this.unbindOutsideClickListener()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(R),s.Y36(Yv))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-menubar"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(b1,5),s.Gf(Ff,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.menubutton=r.first),s.iGM(r=s.CRH())&&(i.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay",autoHide:"autoHide",autoHideDelay:"autoHideDelay"},features:[s._Bn([Yv])],ngContentSelectors:D1,decls:8,vars:15,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0","class","p-menubar-button",3,"click",4,"ngIf"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],[1,"p-menubar-end"]],template:function(e,i){if(1&e&&(s.F$t(),s.TgZ(0,"div",0),s.YNc(1,yN,2,1,"div",1),s.YNc(2,C1,3,0,"a",2),s.TgZ(3,"p-menubarSub",3,4),s.NdJ("leafClick",function(){return i.onLeafClick()}),s.qZA(),s.YNc(5,E1,2,1,"div",5),s.YNc(6,S1,2,0,"ng-template",null,6,s.W1O),s.qZA()),2&e){const r=s.MAs(7);s.Tol(i.styleClass),s.Q6J("ngClass",s.VKq(13,I1,i.mobileActive))("ngStyle",i.style),s.xp6(1),s.Q6J("ngIf",i.startTemplate),s.xp6(1),s.Q6J("ngIf",i.model&&i.model.length>0),s.xp6(1),s.Q6J("item",i.model)("baseZIndex",i.baseZIndex)("autoZIndex",i.autoZIndex)("mobileActive",i.mobileActive)("autoDisplay",i.autoDisplay),s.xp6(2),s.Q6J("ngIf",i.endTemplate)("ngIfElse",r)}},dependencies:[pt,pn,wn,Tn,ZT],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:2}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),n})(),x1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,Of,vs,$s,_e,Of,$s,_e]}),n})();function Jv(n,t){1&n&&(s.TgZ(0,"a",5)(1,"h3",6),s._UZ(2,"img",7),s.qZA()())}class Vf{constructor(){this.items=[],this.username="Chirag Joshi"}ngOnInit(){this.items=[{label:"Packing List",icon:"pi pi-fw pi-cart-plus",items:[{label:"New",icon:"pi pi-fw pi-plus",routerLink:"/packing"},{separator:!0},{label:"Assign Oracle",icon:"pi pi-fw pi-file-edit",routerLink:"/oracle"}]},{label:"Invoice",icon:"pi pi-fw pi-link",items:[{label:"Create",icon:"pi pi-fw pi-plus",routerLink:"/invoice"}]},{label:"Arrange Shipment",icon:"pi pi-fw pi-truck",routerLink:"/shipment"},{label:"Shipment Status",icon:"pi pi-fw pi-flag"},{label:"Receipt Confirmation",icon:"pi pi-fw pi-thumbs-up"},{label:"Reports",icon:"pi pi-fw pi-chart-bar"}]}}Vf.\u0275fac=function(t){return new(t||Vf)},Vf.\u0275cmp=s.Xpm({type:Vf,selectors:[["app-header"]],decls:5,vars:1,consts:[[1,"my-menubar",3,"model"],["pTemplate","start"],[1,"card"],[1,"flex","flex-row","flex-wrap","card-container","blue-container"],["type","button","pButton","","label","Logout","icon","pi pi-power-off",2,"margin-left",".25em"],["routerLink","/",2,"text-decoration","none"],[1,"text-blue-500"],["src","./assets/logo.jpg","height","40","routerLink","/",1,"mr-2"]],template:function(t,e){1&t&&(s.TgZ(0,"p-menubar",0),s.YNc(1,Jv,3,0,"ng-template",1),s.TgZ(2,"div",2)(3,"div",3),s._UZ(4,"button",4),s.qZA()()()),2&t&&s.Q6J("model",e.items)},dependencies:[Af,_d,ne,Qv],styles:["[_nghost-%COMP%]     .my-menubar .p-menubar{width:100%;border:none}"]});class Bf{constructor(t){this.primengConfig=t}ngOnInit(){this.primengConfig.ripple=!0}}Bf.\u0275fac=function(t){return new(t||Bf)(s.Y36(R))},Bf.\u0275cmp=s.Xpm({type:Bf,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&s._UZ(0,"app-header")(1,"router-outlet")},dependencies:[Tf,Vf]});class qT{}var Hh=V(6451),WT=V(3099);function KT(n,t=Nl.y){return n=n??k1,(0,En.e)((e,i)=>{let r,o=!0;e.subscribe((0,kn.x)(i,l=>{const d=t(l);(o||!n(r,d))&&(o=!1,r=d,i.next(l))}))})}function k1(n,t){return n===t}var ri=V(2122),bs=V(2011),Hf=(V(407),V(3942)),Xr=V(4859),we=V(5861),ws=V(9681),L=V(2090),Xo=V(1877);const h_="@firebase/database";let _o="";function Uh(n){_o=n}class Lr{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class vd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Uf=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Lr(t)}}catch{}return new vd},ur=Uf("localStorage"),zf=Uf("sessionStorage"),ea=new Xo.Yd("@firebase/database"),bd=function(){let n=1;return function(){return n++}}(),wd=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const i=e.digest();return L.US.encodeByteArray(i)},Xa=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=Xa.apply(null,i):t+="object"==typeof i?(0,L.Wl)(i):i,t+=" "}return t};let yo=null,Cd=!0;const Td=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ea.logLevel=Xo.in.VERBOSE,yo=ea.log.bind(ea),t&&zf.set("logging_enabled",!0)):"function"==typeof n?yo=n:(yo=null,zf.remove("logging_enabled"))},hi=function(...n){if(!0===Cd&&(Cd=!1,null===yo&&!0===zf.get("logging_enabled")&&Td(!0)),yo){const t=Xa.apply(null,n);yo(t)}},el=function(n){return function(...t){hi(n,...t)}},p_=function(...n){const t="FIREBASE INTERNAL ERROR: "+Xa(...n);ea.error(t)},ta=function(...n){const t=`FIREBASE FATAL ERROR: ${Xa(...n)}`;throw ea.error(t),new Error(t)},Cr=function(...n){const t="FIREBASE WARNING: "+Xa(...n);ea.warn(t)},Gf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ql="[MIN_NAME]",tl="[MAX_NAME]",eu=function(n,t){if(n===t)return 0;if(n===ql||t===tl)return-1;if(t===ql||n===tl)return 1;{const e=$f(n),i=$f(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},M1=function(n,t){return n===t?0:n<t?-1:1},jf=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(t))},f_=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,L.Wl)(t[i]),e+=":",e+=f_(n[t[i]]);return e+="}",e},tE=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Qi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const g_=function(n){(0,L.hu)(!Gf(n),"Invalid JSON number");const i=1023;let r,o,l,d,f;0===n?(o=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(r?1:0),y.reverse();const w=y.join("");let E="";for(f=0;f<64;f+=8){let M=parseInt(w.substr(f,8),2).toString(16);1===M.length&&(M="0"+M),E+=M}return E.toLowerCase()},__=new RegExp("^-?(0*)\\d{1,10}$"),$f=function(n){if(__.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},Wl=function(n){try{n()}catch(t){setTimeout(()=>{throw Cr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},zh=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class nb{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Cr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nE{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cr(t)}}let Gh=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ob=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lb="websocket",cb="long_polling";class Zf{constructor(t,e,i,r,o=!1,l="",d=!1,f=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ur.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ur.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ub(n,t,e){let i;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===lb)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==cb)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function sE(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Qi(e,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}class oE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const v_={},b_={};function w_(n){const t=n.toString();return v_[t]||(v_[t]=new oE),v_[t]}class lE{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Wl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class iu{constructor(t,e,i,r,o,l,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=el(t),this.stats_=w_(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),ub(e,cb,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new lE(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pb((...o)=>{const[l,d,f,y,w]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&ob.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){iu.forceAllow_=!0}static forceDisallow(){iu.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!iu.forceAllow_&&(iu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,L.h$)(e),r=tE(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class pb{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=bd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=pb.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){hi("frame writing exception"),d.stack&&hi(d.stack),hi(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||hi("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{hi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Wf=null;typeof MozWebSocket<"u"?Wf=MozWebSocket:typeof WebSocket<"u"&&(Wf=WebSocket);let Ed=(()=>{class n{constructor(e,i,r,o,l,d,f){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=el(this.connId),this.stats_=w_(i),this.connURL=n.connectionURL_(i,d,f,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,o,l){const d={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&ob.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),o&&(d.ac=o),l&&(d.p=l),ub(e,lb,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ur.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${_o}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new Wf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Wf&&!n.forceDisallow_}static previouslyFailed(){return ur.isInMemoryStorage||!0===ur.get("previous_websocket_failure")}markConnectionHealthy(){ur.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,L.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=tE(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Sd=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[iu,Ed]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Ed&&Ed.isAvailable();let r=i&&!Ed.previouslyFailed();if(e.webSocketOnly&&(i||Cr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ed];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mb{constructor(t,e,i,r,o,l,d,f,y,w){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=el("c:"+this.id+":"),this.transportManager_=new Sd(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=zh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=jf("t",t),i=jf("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=jf("t",t),i=jf("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=jf("t",t);if("d"in t){const i=t.d;if("h"===e){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?p_("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):p_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Cr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),zh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ur.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _b{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class fE{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===e&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class I_ extends fE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new I_}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Sn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function _n(){return new Sn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kl(n){return n.pieces_.length-n.pieceNum_}function jn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Sn(n.pieces_,t)}function D_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ru(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function yE(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Sn(t,0)}function si(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Sn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Sn(e,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Tr(n,t){const e=an(n),i=an(t);if(null===e)return t;if(e===i)return Tr(jn(n),jn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function x_(n,t){const e=ru(n,0),i=ru(t,0);for(let r=0;r<e.length&&r<i.length;r++){const o=eu(e[r],i[r]);if(0!==o)return o}return e.length===i.length?0:e.length<i.length?-1:1}function Kf(n,t){if(Kl(n)!==Kl(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Zs(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Kl(n)>Kl(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class vE{constructor(t,e){this.errorPrefix_=e,this.parts_=ru(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);yb(this)}}function yb(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+su(n))}function su(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class k_ extends fE{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new k_}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Yf=1e3;let M_,Id=(()=>{class n extends _b{constructor(e,i,r,o,l,d,f,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=el("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");k_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&I_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const o=++this.requestNumber_,l={r:o,a:e,b:i};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const i=new L.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,o){this.initConnection_();const l=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:i,query:e,tag:r};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const l={p:r};e.tag&&(l.q=i._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest("q",l,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(r,o),e.onComplete&&e.onComplete(w,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const r=(0,L.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Cr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,L.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const l=o.s,d=o.d||"error";this.authToken_===e&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,i)}sendUnlisten_(e,i,r,o){this.log_("Unlisten on "+e+" for "+i);const l={p:e};o&&(l.q=r,l.t=o),this.sendRequest("n",l)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,o){const l={p:i,d:r};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,i,r,o){this.putInternal("p",e,i,r,o)}merge(e,i,r,o){this.putInternal("m",e,i,r,o)}putInternal(e,i,r,o,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Wl)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):p_("Unrecognized action received from server: "+(0,L.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,we.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),l=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,o())};e.realtime_={close:w,sendRequest:function(N){(0,L.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,B]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);f?hi("getToken() completed but was canceled"):(hi("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=B&&B.token,y=new mb(l,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,o,j=>{Cr(j+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(N){e.log_("Failed to get token: "+N),f||(e.repoInfo_.nodeAdmin&&Cr(N),w())}}})()}interrupt(e){hi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Yf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(l=>f_(l)).join("$"):"default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,i){const r=new Sn(e).toString();let o;if(this.listens.has(r)){const l=this.listens.get(r);o=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,i){hi("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){hi("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+_o.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=I_.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new un(t,e)}}class A_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new un(ql,t),r=new un(ql,e);return 0!==this.compare(i,r)}minPost(){return un.MIN}}class EE extends A_{static get __EMPTY_NODE(){return M_}static set __EMPTY_NODE(t){M_=t}compare(t,e){return eu(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return un.MIN}maxPost(){return new un(tl,M_)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new un(t,M_)}toString(){return".key"}}const nl=new EE;class R_{constructor(t,e,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,r&&(l*=-1),l<0)t=this.isReverse_?t.left:t.right;else{if(0===l){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let P_,sa=(()=>{class n{constructor(e,i,r,o,l){this.key=e,this.value=i,this.color=r??n.RED,this.left=o??Cs.EMPTY_NODE,this.right=l??Cs.EMPTY_NODE}copy(e,i,r,o,l){return new n(e??this.key,i??this.value,r??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,i,r),null):0===l?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,o;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Cs.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Cs{constructor(t,e=Cs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Cs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,sa.BLACK,null,null))}remove(t){return new Cs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,sa.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new R_(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new R_(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new R_(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new R_(this.root_,null,this.comparator_,!0,t)}}function K1(n,t){return eu(n.name,t.name)}function O_(n,t){return eu(n,t)}Cs.EMPTY_NODE=new class W1{copy(t,e,i,r,o){return this}insert(t,e,i){return new sa(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vb=function(n){return"number"==typeof n?"number:"+g_(n):"string:"+n},bb=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===P_||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===P_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wb,Cb,Tb,Dd=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),bb(this.priorityNode_)}static set __childrenNodeConstructor(e){wb=e}static get __childrenNodeConstructor(){return wb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rn(e)?this:".priority"===an(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=an(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===Kl(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vb(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?g_(this.value_):this.value_,this.lazyHash_=wd(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(o>=0,"Unknown leaf type: "+i),(0,L.hu)(l>=0,"Unknown leaf type: "+r),o===l?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class xd extends A_{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),o=i.compareTo(r);return 0===o?eu(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return un.MIN}maxPost(){return new un(tl,new Dd("[PRIORITY-POST]",Tb))}makePost(t,e){const i=Cb(t);return new un(e,new Dd("[PRIORITY-POST]",i))}toString(){return".priority"}},Y1=Math.log(2);class $h{constructor(t){this.count=parseInt(Math.log(t+1)/Y1,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Eb=function(n,t,e,i){n.sort(t);const r=function(f,y){const w=y-f;let E,M;if(0===w)return null;if(1===w)return E=n[f],M=e?e(E):E,new sa(M,E.node,sa.BLACK,null,null);{const N=parseInt(w/2,10)+f,B=r(f,N),j=r(N+1,y);return E=n[N],M=e?e(E):E,new sa(M,E.node,sa.BLACK,B,j)}},d=function(f){let y=null,w=null,E=n.length;const M=function(B,j){const Q=E-B,Ne=E;E-=B;const $e=r(Q+1,Ne),Ze=n[Q],et=e?e(Ze):Ze;N(new sa(et,Ze.node,j,null,$e))},N=function(B){y?(y.left=B,y=B):(w=B,y=B)};for(let B=0;B<f.count;++B){const j=f.nextBitIsOne(),Q=Math.pow(2,f.count-(B+1));j?M(Q,sa.BLACK):(M(Q,sa.BLACK),M(Q,sa.RED))}return w}(new $h(n.length));return new Cs(i||t,d)};let Qf;const Jf={};class il{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(Jf&&Xn,"ChildrenNode.ts has not been loaded"),Qf=Qf||new il({".priority":Jf},{".priority":Xn}),Qf}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Cs?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==nl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=e.getIterator(un.Wrap);let d,l=o.getNext();for(;l;)r=r||t.isDefinedOn(l.node),i.push(l),l=o.getNext();d=r?Eb(i,t.getCompare()):Jf;const f=t.toString(),y=Object.assign({},this.indexSet_);y[f]=t;const w=Object.assign({},this.indexes_);return w[f]=d,new il(w,y)}addToIndexes(t,e){const i=(0,L.UI)(this.indexes_,(r,o)=>{const l=(0,L.DV)(this.indexSet_,o);if((0,L.hu)(l,"Missing index implementation for "+o),r===Jf){if(l.isDefinedOn(t.node)){const d=[],f=e.getIterator(un.Wrap);let y=f.getNext();for(;y;)y.name!==t.name&&d.push(y),y=f.getNext();return d.push(t),Eb(d,l.getCompare())}return Jf}{const d=e.get(t.name);let f=r;return d&&(f=f.remove(new un(t.name,d))),f.insert(t,t.node)}});return new il(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,L.UI)(this.indexes_,r=>{if(r===Jf)return r;{const o=e.get(t.name);return o?r.remove(new un(t.name,o)):r}});return new il(i,this.indexSet_)}}let Zh,tn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&bb(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zh||(Zh=new n(new Cs(O_),null,il.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zh}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?Zh:i}}getChild(e){const i=an(e);return null===i?this:this.getImmediateChild(i).getChild(jn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new un(e,i);let o,l;i.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=o.isEmpty()?Zh:this.priorityNode_;return new n(o,d,l)}}updateChild(e,i){const r=an(e);if(null===r)return i;{(0,L.hu)(".priority"!==an(e)||1===Kl(e),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(jn(e),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,o=0,l=!0;if(this.forEachChild(Xn,(d,f)=>{i[d]=f.val(e),r++,l&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):l=!1}),!e&&l&&o<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+vb(this.getPriority().val())+":"),this.forEachChild(Xn,(i,r)=>{const o=r.hash();""!==o&&(e+=":"+i+":"+o)}),this.lazyHash_=""===e?"":wd(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const o=this.resolveIndex_(r);if(o){const l=o.getPredecessorKey(new un(e,i));return l?l.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new un(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new un(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,un.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,un.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xf?-1:0}withIndex(e){if(e===nl||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===nl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Xn),o=i.getIterator(Xn);let l=r.getNext(),d=o.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=o.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(e){return e===nl?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Xf=new class Vt extends tn{constructor(){super(new Cs(O_),tn.EMPTY_NODE,il.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return tn.EMPTY_NODE}isEmpty(){return!1}};function pi(n,t=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Dd(n,pi(t));if(n instanceof Array){let e=tn.EMPTY_NODE;return Qi(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const o=pi(r);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(i,o))}}),e.updatePriority(pi(t))}{const e=[];let i=!1;if(Qi(n,(l,d)=>{if("."!==l.substring(0,1)){const f=pi(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),e.push(new un(l,f)))}}),0===e.length)return tn.EMPTY_NODE;const o=Eb(e,K1,l=>l.name,O_);if(i){const l=Eb(e,Xn.getCompare());return new tn(o,pi(t),new il({".priority":l},{".priority":Xn}))}return new tn(o,pi(t),il.Default)}}Object.defineProperties(un,{MIN:{value:new un(ql,tn.EMPTY_NODE)},MAX:{value:new un(tl,Xf)}}),EE.__EMPTY_NODE=tn.EMPTY_NODE,Dd.__childrenNodeConstructor=tn,function SE(n){P_=n}(Xf),function DE(n){Tb=n}(Xf),function IE(n){Cb=n}(pi);class ou extends A_{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!rn(t)&&".priority"!==an(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),o=i.compareTo(r);return 0===o?eu(t.name,e.name):o}makePost(t,e){const i=pi(t),r=tn.EMPTY_NODE.updateChild(this.indexPath_,i);return new un(e,r)}maxPost(){const t=tn.EMPTY_NODE.updateChild(this.indexPath_,Xf);return new un(tl,t)}toString(){return ru(this.indexPath_,0).join("/")}}const qh=new class J1 extends A_{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?eu(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(t,e){const i=pi(t);return new un(e,i)}toString(){return".value"}};function eg(n){return{type:"value",snapshotNode:n}}function $n(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function N_(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Wh(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Sb{constructor(t){this.index_=t}updateChild(t,e,i,r,o,l){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?t.hasChild(e)?l.trackChildChange(N_(e,d)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange($n(e,i)):l.trackChildChange(Wh(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Xn,(r,o)=>{e.hasChild(r)||i.trackChildChange(N_(r,o))}),e.isLeafNode()||e.forEachChild(Xn,(r,o)=>{if(t.hasChild(r)){const l=t.getImmediateChild(r);l.equals(o)||i.trackChildChange(Wh(r,o,l))}else i.trackChildChange($n(r,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?tn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Kh{constructor(t){this.indexedFilter_=new Sb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Kh.getStartPost_(t),this.endPost_=Kh.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,o,l){return this.matches(new un(e,i))||(i=tn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,o,l)}updateFullNode(t,e,i){e.isLeafNode()&&(e=tn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(tn.EMPTY_NODE);const o=this;return e.forEachChild(Xn,(l,d)=>{o.matches(new un(l,d))||(r=r.updateImmediateChild(l,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class kE{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Kh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,o,l){return this.rangedFilter_.matches(new un(e,i))||(i=tn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,o,l):this.fullLimitUpdateChild_(t,e,i,o,l)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;r=tn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const d=o.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),l++}}}else{let o;r=e.withIndex(this.index_),r=r.updatePriority(tn.EMPTY_NODE),o=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let l=0;for(;o.hasNext();){const d=o.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:r=r.updateImmediateChild(d.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,o){let l;if(this.reverse_){const E=this.index_.getCompare();l=(M,N)=>E(N,M)}else l=this.index_.getCompare();const d=t;(0,L.hu)(d.numChildren()===this.limit_,"");const f=new un(e,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(e)){const E=d.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===e||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const N=null==M?1:l(M,f);if(w&&!i.isEmpty()&&N>=0)return o?.trackChildChange(Wh(e,i,E)),d.updateImmediateChild(e,i);{o?.trackChildChange(N_(e,E));const j=d.updateImmediateChild(e,tn.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(o?.trackChildChange($n(M.name,M.node)),j.updateImmediateChild(M.name,M.node)):j}}return i.isEmpty()?t:w&&l(y,f)>=0?(null!=o&&(o.trackChildChange(N_(y.name,y.node)),o.trackChildChange($n(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(y.name,tn.EMPTY_NODE)):t}}class tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ql}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const t=new tg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Ib(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Db(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function L_(n,t){const e=n.copy();return e.index_=t,e}function ig(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Xn?e="$priority":n.index_===qh?e="$value":n.index_===nl?e="$key":((0,L.hu)(n.index_ instanceof ou,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Wl)(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function xb(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Xn&&(t.i=n.index_.toString()),t}class rg extends _b{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=el("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const l=rg.getListenId_(t,i),d={};this.listens_[l]=d;const f=ig(t._queryParams);this.restRequest_(o+".json",f,(y,w)=>{let E=w;if(404===y&&(E=null,y=null),null===y&&this.onDataUpdate_(o,E,!1,i),(0,L.DV)(this.listens_,l)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(t,e){const i=rg.getListenId_(t,e);delete this.listens_[i]}get(t){const e=ig(t._queryParams),i=t._path.toString(),r=new L.BH;return this.restRequest_(i+".json",e,(o,l)=>{let d=l;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(e.auth=r.accessToken),o&&o.token&&(e.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,L.cI)(d.responseText)}catch{Cr("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Cr("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class ME{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function F_(){return{value:null,children:new Map}}function rl(n,t,e){if(rn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=an(t);n.children.has(i)||n.children.set(i,F_()),rl(n.children.get(i),t=jn(t),e)}}function kd(n,t){if(rn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Xn,(i,r)=>{rl(n,new Sn(i),r)}),kd(n,t)}}if(n.children.size>0){const e=an(t);return t=jn(t),n.children.has(e)&&kd(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function kb(n,t,e){null!==n.value?e(t,n.value):function nk(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{kb(r,new Sn(t.toString()+"/"+i),e)})}class ik{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Qi(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class rk{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ik(t);const i=1e4+2e4*Math.random();zh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Qi(t,(r,o)=>{o>0&&(0,L.r3)(this.statsToReport_,r)&&(e[r]=o,i=!0)}),i&&this.server_.reportStats(e),zh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var qs=(()=>{return(n=qs||(qs={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",qs;var n})();function PE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ob{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Sn(t));return new Ob(_n(),e,this.revert)}}return(0,L.hu)(an(this.path)===t,"operationForChild called for unrelated child."),new Ob(jn(this.path),this.affectedTree,this.revert)}}class V_{constructor(t,e){this.source=t,this.path=e,this.type=qs.LISTEN_COMPLETE}operationForChild(t){return rn(this.path)?new V_(this.source,_n()):new V_(this.source,jn(this.path))}}class Yh{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=qs.OVERWRITE}operationForChild(t){return rn(this.path)?new Yh(this.source,_n(),this.snap.getImmediateChild(t)):new Yh(this.source,jn(this.path),this.snap)}}class Ad{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=qs.MERGE}operationForChild(t){if(rn(this.path)){const e=this.children.subtree(new Sn(t));return e.isEmpty()?null:e.value?new Yh(this.source,_n(),e.value):new Ad(this.source,_n(),e)}return(0,L.hu)(an(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ad(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class oa{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rn(t))return this.isFullyInitialized()&&!this.filtered_;const e=an(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class sk{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Qh(n,t,e,i,r,o){const l=i.filter(d=>d.type===e);l.sort((d,f)=>function ak(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new un(t.childName,t.snapshotNode),r=new un(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),l.forEach(d=>{const f=function sg(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,o);r.forEach(y=>{y.respondsTo(d.type)&&t.push(y.createEvent(f,n.query_))})})}function B_(n,t){return{eventCache:n,serverCache:t}}function og(n,t,e,i){return B_(new oa(t,e,i),n.serverCache)}function NE(n,t,e,i){return B_(n.eventCache,new oa(t,e,i))}function Pb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Md(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let H_;class ei{constructor(t,e=(()=>(H_||(H_=new Cs(M1)),H_))()){this.value=t,this.children=e}static fromObject(t){let e=new ei(null);return Qi(t,(i,r)=>{e=e.set(new Sn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:_n(),value:this.value};if(rn(t))return null;{const i=an(t),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(jn(t),e);return null!=o?{path:si(new Sn(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rn(t))return this;{const e=an(t),i=this.children.get(e);return null!==i?i.subtree(jn(t)):new ei(null)}}set(t,e){if(rn(t))return new ei(e,this.children);{const i=an(t),o=(this.children.get(i)||new ei(null)).set(jn(t),e),l=this.children.insert(i,o);return new ei(this.value,l)}}remove(t){if(rn(t))return this.children.isEmpty()?new ei(null):new ei(null,this.children);{const e=an(t),i=this.children.get(e);if(i){const r=i.remove(jn(t));let o;return o=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&o.isEmpty()?new ei(null):new ei(this.value,o)}return this}}get(t){if(rn(t))return this.value;{const e=an(t),i=this.children.get(e);return i?i.get(jn(t)):null}}setTree(t,e){if(rn(t))return e;{const i=an(t),o=(this.children.get(i)||new ei(null)).setTree(jn(t),e);let l;return l=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new ei(this.value,l)}}fold(t){return this.fold_(_n(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(si(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,_n(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(rn(t))return null;{const o=an(t),l=this.children.get(o);return l?l.findOnPath_(jn(t),si(e,o),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,_n(),e)}foreachOnPath_(t,e,i){if(rn(t))return this;{this.value&&i(e,this.value);const r=an(t),o=this.children.get(r);return o?o.foreachOnPath_(jn(t),si(e,r),i):new ei(null)}}foreach(t){this.foreach_(_n(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(si(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class es{constructor(t){this.writeTree_=t}static empty(){return new es(new ei(null))}}function ag(n,t,e){if(rn(t))return new es(new ei(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let o=i.value;const l=Tr(r,t);return o=o.updateChild(l,e),new es(n.writeTree_.set(r,o))}{const r=new ei(e),o=n.writeTree_.setTree(t,r);return new es(o)}}}function U_(n,t,e){let i=n;return Qi(e,(r,o)=>{i=ag(i,si(t,r),o)}),i}function LE(n,t){if(rn(t))return es.empty();{const e=n.writeTree_.setTree(t,new ei(null));return new es(e)}}function z_(n,t){return null!=Rd(n,t)}function Rd(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Tr(e.path,t)):null}function Nb(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Xn,(i,r)=>{t.push(new un(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new un(i,r.value))}),t}function au(n,t){if(rn(t))return n;{const e=Rd(n,t);return new es(null!=e?new ei(e):n.writeTree_.subtree(t))}}function lg(n){return n.writeTree_.isEmpty()}function Jh(n,t){return Lb(_n(),n.writeTree_,t)}function Lb(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{".priority"===r?((0,L.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):e=Lb(si(n,r),o,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(si(n,".priority"),i)),e}}function cg(n,t){return G_(t,n)}function hk(n,t){if(n.snap)return Zs(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Zs(si(n.path,e),t))return!0;return!1}function pk(n){return n.visible}function VE(n,t,e){let i=es.empty();for(let r=0;r<n.length;++r){const o=n[r];if(t(o)){const l=o.path;let d;if(o.snap)Zs(e,l)?(d=Tr(e,l),i=ag(i,d,o.snap)):Zs(l,e)&&(d=Tr(l,e),i=ag(i,_n(),o.snap.getChild(d)));else{if(!o.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Zs(e,l))d=Tr(e,l),i=U_(i,d,o.children);else if(Zs(l,e))if(d=Tr(l,e),rn(d))i=U_(i,_n(),o.children);else{const f=(0,L.DV)(o.children,an(d));if(f){const y=f.getChild(jn(d));i=ag(i,_n(),y)}}}}}return i}function BE(n,t,e,i,r){if(i||r){const o=au(n.visibleWrites,t);return!r&&lg(o)?e:r||null!=e||z_(o,_n())?Jh(VE(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Zs(y.path,t)||Zs(t,y.path))},t),e||tn.EMPTY_NODE):null}{const o=Rd(n.visibleWrites,t);if(null!=o)return o;{const l=au(n.visibleWrites,t);return lg(l)?e:null!=e||z_(l,_n())?Jh(l,e||tn.EMPTY_NODE):null}}}function ug(n,t,e,i){return BE(n.writeTree,n.treePath,t,e,i)}function Vb(n,t){return function fk(n,t,e){let i=tn.EMPTY_NODE;const r=Rd(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Xn,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(e){const o=au(n.visibleWrites,t);return e.forEachChild(Xn,(l,d)=>{const f=Jh(au(o,new Sn(l)),d);i=i.updateImmediateChild(l,f)}),Nb(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return Nb(au(n.visibleWrites,t)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,t)}function UE(n,t,e,i){return function gk(n,t,e,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=si(t,e);if(z_(n.visibleWrites,o))return null;{const l=au(n.visibleWrites,o);return lg(l)?r.getChild(e):Jh(l,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function dg(n,t){return function _k(n,t){return Rd(n.visibleWrites,t)}(n.writeTree,si(n.treePath,t))}function Bb(n,t,e){return function mk(n,t,e,i){const r=si(t,e),o=Rd(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(e)?Jh(au(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function zE(n,t){return G_(si(n.treePath,t),n.writeTree)}function G_(n,t){return{treePath:n,writeTree:t}}class Hb{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(i,Wh(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(i,N_(i,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(i,$n(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,Wh(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const j_=new class GE{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class Ub{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new oa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bb(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Md(this.viewCache_),o=function vk(n,t,e,i,r,o){return function yk(n,t,e,i,r,o,l){let d;const f=au(n.visibleWrites,t),y=Rd(f,_n());if(null!=y)d=y;else{if(null==e)return[];d=Jh(f,e)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const w=[],E=l.getCompare(),M=o?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let N=M.getNext();for(;N&&w.length<r;)0!==E(N,i)&&w.push(N),N=M.getNext();return w}}(n.writeTree,n.treePath,t,e,i,r,o)}(this.writes_,r,e,1,i,t);return 0===o.length?null:o[0]}}function Od(n,t,e,i,r,o){const l=t.eventCache;if(null!=dg(i,e))return t;{let d,f;if(rn(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Md(t),E=Vb(i,y instanceof tn?y:tn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,o)}else{const y=ug(i,Md(t));d=n.filter.updateFullNode(t.eventCache.getNode(),y,o)}else{const y=an(e);if(".priority"===y){(0,L.hu)(1===Kl(e),"Can't have a priority with additional path components");const w=l.getNode();f=t.serverCache.getNode();const E=UE(i,e,w,f);d=null!=E?n.filter.updatePriority(w,E):l.getNode()}else{const w=jn(e);let E;if(l.isCompleteForChild(y)){f=t.serverCache.getNode();const M=UE(i,e,l.getNode(),f);E=null!=M?l.getNode().getImmediateChild(y).updateChild(w,M):l.getNode().getImmediateChild(y)}else E=Bb(i,y,t.serverCache);d=null!=E?n.filter.updateChild(l.getNode(),y,E,w,r,o):l.getNode()}}return og(t,d,l.isFullyInitialized()||rn(e),n.filter.filtersNodes())}}function hg(n,t,e,i,r,o,l,d){const f=t.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(rn(e))y=w.updateFullNode(f.getNode(),i,null);else if(w.filtersNodes()&&!f.isFiltered()){const N=f.getNode().updateChild(e,i);y=w.updateFullNode(f.getNode(),N,null)}else{const N=an(e);if(!f.isCompleteForPath(e)&&Kl(e)>1)return t;const B=jn(e),Q=f.getNode().getImmediateChild(N).updateChild(B,i);y=".priority"===N?w.updatePriority(f.getNode(),Q):w.updateChild(f.getNode(),N,Q,B,j_,null)}const E=NE(t,y,f.isFullyInitialized()||rn(e),w.filtersNodes());return Od(n,E,e,r,new Ub(r,E,o),d)}function Gb(n,t,e,i,r,o,l){const d=t.eventCache;let f,y;const w=new Ub(r,t,o);if(rn(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,l),f=og(t,y,!0,n.filter.filtersNodes());else{const E=an(e);if(".priority"===E)y=n.filter.updatePriority(t.eventCache.getNode(),i),f=og(t,y,d.isFullyInitialized(),d.isFiltered());else{const M=jn(e),N=d.getNode().getImmediateChild(E);let B;if(rn(M))B=i;else{const j=w.getCompleteChild(E);B=null!=j?".priority"===D_(M)&&j.getChild(yE(M)).isEmpty()?j:j.updateChild(M,i):tn.EMPTY_NODE}f=N.equals(B)?t:og(t,n.filter.updateChild(d.getNode(),E,B,M,w,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function Ck(n,t){return n.eventCache.isCompleteForChild(t)}function $_(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function jb(n,t,e,i,r,o,l,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,f=t;y=rn(e)?i:new ei(null).setTree(e,i);const w=t.serverCache.getNode();return y.children.inorderTraversal((E,M)=>{if(w.hasChild(E)){const B=$_(0,t.serverCache.getNode().getImmediateChild(E),M);f=hg(n,f,new Sn(E),B,r,o,l,d)}}),y.children.inorderTraversal((E,M)=>{const N=!t.serverCache.isCompleteForChild(E)&&null===M.value;if(!w.hasChild(E)&&!N){const j=$_(0,t.serverCache.getNode().getImmediateChild(E),M);f=hg(n,f,new Sn(E),j,r,o,l,d)}}),f}class Zb{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Sb(i.getIndex()),o=function AE(n){return n.loadsAllData()?new Sb(n.getIndex()):n.hasLimit()?new kE(n):new Kh(n)}(i);this.processor_=function bk(n){return{filter:n}}(o);const l=e.serverCache,d=e.eventCache,f=r.updateFullNode(tn.EMPTY_NODE,l.getNode(),null),y=o.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),w=new oa(f,l.isFullyInitialized(),r.filtersNodes()),E=new oa(y,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=B_(E,w),this.eventGenerator_=new sk(this.query_)}get query(){return this.query_}}function KE(n,t){const e=Md(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!rn(t)&&!e.getImmediateChild(an(t)).isEmpty())?e.getChild(t):null}function qb(n){return 0===n.eventRegistrations_.length}function YE(n,t,e){const i=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(e,r);l&&i.push(l)})}if(t){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function QE(n,t,e,i){t.type===qs.MERGE&&null!==t.source.queryId&&((0,L.hu)(Md(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Pb(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function wk(n,t,e,i,r){const o=new Hb;let l,d;if(e.type===qs.OVERWRITE){const y=e;y.source.fromUser?l=Gb(n,t,y.path,y.snap,i,r,o):((0,L.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered()&&!rn(y.path),l=hg(n,t,y.path,y.snap,i,r,d,o))}else if(e.type===qs.MERGE){const y=e;y.source.fromUser?l=function $E(n,t,e,i,r,o,l){let d=t;return i.foreach((f,y)=>{const w=si(e,f);Ck(t,an(w))&&(d=Gb(n,d,w,y,r,o,l))}),i.foreach((f,y)=>{const w=si(e,f);Ck(t,an(w))||(d=Gb(n,d,w,y,r,o,l))}),d}(n,t,y.path,y.children,i,r,o):((0,L.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered(),l=jb(n,t,y.path,y.children,i,r,d,o))}else if(e.type===qs.ACK_USER_WRITE){const y=e;l=y.revert?function ZE(n,t,e,i,r,o){let l;if(null!=dg(i,e))return t;{const d=new Ub(i,t,r),f=t.eventCache.getNode();let y;if(rn(e)||".priority"===an(e)){let w;if(t.serverCache.isFullyInitialized())w=ug(i,Md(t));else{const E=t.serverCache.getNode();(0,L.hu)(E instanceof tn,"serverChildren would be complete if leaf node"),w=Vb(i,E)}y=n.filter.updateFullNode(f,w,o)}else{const w=an(e);let E=Bb(i,w,t.serverCache);null==E&&t.serverCache.isCompleteForChild(w)&&(E=f.getImmediateChild(w)),y=null!=E?n.filter.updateChild(f,w,E,jn(e),d,o):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,tn.EMPTY_NODE,jn(e),d,o):f,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(l=ug(i,Md(t)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,o)))}return l=t.serverCache.isFullyInitialized()||null!=dg(i,_n()),og(t,y,l,n.filter.filtersNodes())}}(n,t,y.path,i,r,o):function $b(n,t,e,i,r,o,l){if(null!=dg(r,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=i.value){if(rn(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return hg(n,t,e,f.getNode().getChild(e),r,o,d,l);if(rn(e)){let y=new ei(null);return f.getNode().forEachChild(nl,(w,E)=>{y=y.set(new Sn(w),E)}),jb(n,t,e,y,r,o,d,l)}return t}{let y=new ei(null);return i.foreach((w,E)=>{const M=si(e,w);f.isCompleteForPath(M)&&(y=y.set(w,f.getNode().getChild(M)))}),jb(n,t,e,y,r,o,d,l)}}(n,t,y.path,y.affectedTree,i,r,o)}else{if(e.type!==qs.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);l=function Tk(n,t,e,i,r){const o=t.serverCache;return Od(n,NE(t,o.getNode(),o.isFullyInitialized()||rn(e),o.isFiltered()),e,i,j_,r)}(n,t,e.path,i,o)}const f=o.getChanges();return function jE(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Pb(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&e.push(eg(Pb(t)))}}(t,l,f),{viewCache:l,changes:f}}(n.processor_,r,t,e,i);return function zb(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,L.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Wb(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Wb(n,t,e,i){return function ok(n,t,e,i){const r=[],o=[];return t.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function xE(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(l.childName,l.snapshotNode))}),Qh(n,r,"child_removed",t,i,e),Qh(n,r,"child_added",t,i,e),Qh(n,r,"child_moved",o,i,e),Qh(n,r,"child_changed",t,i,e),Qh(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let Kb,Z_;class Yb{constructor(){this.views=new Map}}function Qb(n,t,e,i){const r=t.source.queryId;if(null!==r){const o=n.views.get(r);return(0,L.hu)(null!=o,"SyncTree gave us an op for an invalid query."),QE(o,t,e,i)}{let o=[];for(const l of n.views.values())o=o.concat(QE(l,t,e,i));return o}}function JE(n,t,e,i,r){const l=n.views.get(t._queryIdentifier);if(!l){let d=ug(e,r?i:null),f=!1;d?f=!0:i instanceof tn?(d=Vb(e,i),f=!1):(d=tn.EMPTY_NODE,f=!1);const y=B_(new oa(d,f,!1),new oa(i,r,!1));return new Zb(t,y)}return l}function Jb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Yl(n,t){let e=null;for(const i of n.views.values())e=e||KE(i,t);return e}function Xb(n,t){return t._queryParams.loadsAllData()?pg(n):n.views.get(t._queryIdentifier)}function ew(n,t){return null!=Xb(n,t)}function Ql(n){return null!=pg(n)}function pg(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let nS=1;class tw{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ei(null),this.pendingWriteTree_=function HE(){return{visibleWrites:es.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function q_(n,t,e,i,r){return function ck(n,t,e,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=ag(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?cu(n,new Yh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Jl(n,t,e=!1){const i=function dk(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Fb(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,o=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=e&&hk(d,i.path)?r=!1:Zs(i.path,d.path)&&(o=!0)),l--}return!!r&&(o?(function FE(n){n.visibleWrites=VE(n.allWrites,pk,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=LE(n.visibleWrites,i.path):Qi(i.children,f=>{n.visibleWrites=LE(n.visibleWrites,si(i.path,f))}),!0))}(n.pendingWriteTree_,t)){let o=new ei(null);return null!=i.snap?o=o.set(_n(),!0):Qi(i.children,l=>{o=o.set(new Sn(l),!0)}),cu(n,new Ob(i.path,o,e))}return[]}function Xh(n,t,e){return cu(n,new Yh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function W_(n,t,e,i,r=!1){const o=t._path,l=n.syncPointTree_.get(o);let d=[];if(l&&("default"===t._queryIdentifier||ew(l,t))){const f=function eS(n,t,e,i){const r=t._queryIdentifier,o=[];let l=[];const d=Ql(n);if("default"===r)for(const[f,y]of n.views.entries())l=l.concat(YE(y,e,i)),qb(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||o.push(y.query));else{const f=n.views.get(r);f&&(l=l.concat(YE(f,e,i)),qb(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||o.push(f.query)))}return d&&!Ql(n)&&o.push(new(function Dk(){return(0,L.hu)(Kb,"Reference.ts has not been loaded"),Kb}())(t._repo,t._path)),{removed:o,events:l}}(l,t,e,i);(function wN(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=f.removed;if(d=f.events,!r){const w=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(o,(M,N)=>Ql(N));if(w&&!E){const M=n.syncPointTree_.subtree(o);if(!M.isEmpty()){const N=function Q_(n){return n.fold((t,e,i)=>{if(e&&Ql(e))return[pg(e)];{let r=[];return e&&(r=Jb(e)),Qi(i,(o,l)=>{r=r.concat(l)}),r}})}(M);for(let B=0;B<N.length;++B){const j=N[B],Q=j.query,Ne=K_(n,j);n.listenProvider_.startListening(gg(Q),Xl(n,Q),Ne.hashFn,Ne.onComplete)}}}!E&&y.length>0&&!i&&(w?n.listenProvider_.stopListening(gg(t),null):y.forEach(M=>{const N=n.queryToTagMap.get(Y_(M));n.listenProvider_.stopListening(gg(M),N)}))}!function Mk(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=Y_(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,y)}return d}function sS(n,t,e,i){const r=iw(n,i);if(null!=r){const o=rw(r),l=o.path,d=o.queryId,f=Tr(l,t);return ep(n,l,new Yh(PE(d),f,e))}return[]}function nw(n,t,e,i=!1){const r=t._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(M,N)=>{const B=Tr(M,r);o=o||Yl(N,B),l=l||Ql(N)});let f,d=n.syncPointTree_.get(r);d?(l=l||Ql(d),o=o||Yl(d,_n())):(d=new Yb,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=o?f=!0:(f=!1,o=tn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,B)=>{const j=Yl(B,_n());j&&(o=o.updateImmediateChild(N,j))}));const y=ew(d,t);if(!y&&!t._queryParams.loadsAllData()){const M=Y_(t);(0,L.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const N=function aS(){return nS++}();n.queryToTagMap.set(M,N),n.tagToQueryMap.set(N,M)}let E=function XE(n,t,e,i,r,o){const l=JE(n,t,i,r,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,l),function Ek(n,t){n.eventRegistrations_.push(t)}(l,e),function Sk(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Xn,(o,l)=>{i.push($n(o,l))}),e.isFullyInitialized()&&i.push(eg(e.getNode())),Wb(n,i,e.getNode(),t)}(l,e)}(d,t,e,cg(n.pendingWriteTree_,r),o,f);if(!y&&!l&&!i){const M=Xb(d,t);E=E.concat(function lS(n,t,e){const i=t._path,r=Xl(n,t),o=K_(n,e),l=n.listenProvider_.startListening(gg(t),r,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!Ql(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,E)=>{if(!rn(y)&&w&&Ql(w))return[pg(w).query];{let M=[];return w&&(M=M.concat(Jb(w).map(N=>N.query))),Qi(E,(N,B)=>{M=M.concat(B)}),M}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(gg(w),Xl(n,w))}}return l}(n,t,M))}return E}function lu(n,t,e){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(l,d)=>{const y=Yl(d,Tr(l,t));if(y)return y});return BE(r,t,o,e,!0)}function cu(n,t){return aa(t,n.syncPointTree_,null,cg(n.pendingWriteTree_,_n()))}function aa(n,t,e,i){if(rn(n.path))return oS(n,t,e,i);{const r=t.get(_n());null==e&&null!=r&&(e=Yl(r,_n()));let o=[];const l=an(n.path),d=n.operationForChild(l),f=t.children.get(l);if(f&&d){const y=e?e.getImmediateChild(l):null,w=zE(i,l);o=o.concat(aa(d,f,y,w))}return r&&(o=o.concat(Qb(r,n,i,e))),o}}function oS(n,t,e,i){const r=t.get(_n());null==e&&null!=r&&(e=Yl(r,_n()));let o=[];return t.children.inorderTraversal((l,d)=>{const f=e?e.getImmediateChild(l):null,y=zE(i,l),w=n.operationForChild(l);w&&(o=o.concat(oS(w,d,f,y)))}),r&&(o=o.concat(Qb(r,n,i,e))),o}function K_(n,t){const e=t.query,i=Xl(n,e);return{hashFn:()=>(function qE(n){return n.viewCache_.serverCache.getNode()}(t)||tn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function rS(n,t,e){const i=iw(n,e);if(i){const r=rw(i),o=r.path,l=r.queryId,d=Tr(o,t);return ep(n,o,new V_(PE(l),d))}return[]}(n,e._path,i):function CN(n,t){return cu(n,new V_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function m_(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return W_(n,e,null,o)}}}}function Xl(n,t){const e=Y_(t);return n.queryToTagMap.get(e)}function Y_(n){return n._path.toString()+"$"+n._queryIdentifier}function iw(n,t){return n.tagToQueryMap.get(t)}function rw(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Sn(n.substr(0,t))}}function ep(n,t,e){const i=n.syncPointTree_.get(t);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),Qb(i,e,cg(n.pendingWriteTree_,t),null)}function gg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function fg(){return(0,L.hu)(Z_,"Reference.ts has not been loaded"),Z_}())(n._repo,n._path):n}class mg{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new mg(e)}node(){return this.node_}}class J_{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=si(this.path_,t);return new J_(this.syncTree_,e)}node(){return lu(this.syncTree_,this.path_)}}const X_=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?cS(n[".sv"],t,e):"object"==typeof n[".sv"]?ow(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},cS=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},ow=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,L.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},ey=function(n,t,e,i){return lw(t,new J_(e,n),i)},aw=function(n,t,e){return lw(n,new mg(t),e)};function lw(n,t,e){const i=n.getPriority().val(),r=X_(i,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const l=n,d=X_(l.getValue(),t,e);return d!==l.getValue()||r!==l.getPriority().val()?new Dd(d,pi(r)):n}{const l=n;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Dd(r))),l.forEachChild(Xn,(d,f)=>{const y=lw(f,t.getImmediateChild(d),e);y!==f&&(o=o.updateImmediateChild(d,y))}),o}}class cw{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function ty(n,t){let e=t instanceof Sn?t:new Sn(t),i=n,r=an(e);for(;null!==r;){const o=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new cw(r,i,o),e=jn(e),r=an(e)}return i}function uu(n){return n.node.value}function _g(n,t){n.node.value=t,ny(n)}function uw(n){return n.node.childCount>0}function yg(n,t){Qi(n.node.children,(e,i)=>{t(new cw(e,n,i))})}function dw(n,t,e,i){e&&!i&&t(n),yg(n,r=>{dw(r,t,!0,i)}),e&&i&&t(n)}function tp(n){return new Sn(null===n.parent?n.name:tp(n.parent)+"/"+n.name)}function ny(n){null!==n.parent&&function Ok(n,t,e){const i=function uS(n){return void 0===uu(n)&&!uw(n)}(e),r=(0,L.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,ny(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,ny(n))}(n.parent,n.name,n)}const dS=/[\[\].#$\/\u0000-\u001F\u007F]/,hS=/[\[\].#$\u0000-\u001F\u007F]/,Er=10485760,ec=function(n){return"string"==typeof n&&0!==n.length&&!dS.test(n)},pS=function(n){return"string"==typeof n&&0!==n.length&&!hS.test(n)},iy=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Gf(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},tc=function(n,t,e,i){i&&void 0===t||np((0,L.gK)(n,"value"),t,e)},np=function(n,t,e){const i=e instanceof Sn?new vE(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+su(i));if("function"==typeof t)throw new Error(n+"contains a function "+su(i)+" with contents = "+t.toString());if(Gf(t))throw new Error(n+"contains "+t.toString()+" "+su(i));if("string"==typeof t&&t.length>Er/3&&(0,L.ug)(t)>Er)throw new Error(n+"contains a string greater than "+Er+" utf8 bytes "+su(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,o=!1;if(Qi(t,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!ec(l)))throw new Error(n+" contains an invalid key ("+l+") "+su(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function bE(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),yb(n)})(i,l),np(n,d,i),function wE(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+su(i)+" in addition to actual children.")}},ip=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const o=[];Qi(t,(l,d)=>{const f=new Sn(l);if(np(r,d,si(e,f)),".priority"===D_(f)&&!iy(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const o=ru(i);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!ec(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(x_);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Zs(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},hw=function(n,t,e){if(!e||void 0!==t){if(Gf(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!iy(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Pd=function(n,t,e,i){if(!(i&&void 0===e||ec(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vg=function(n,t,e,i){if(!(i&&void 0===e||pS(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bo=function(n,t){if(".info"===an(t))throw new Error(n+" failed = Can't modify data under /.info/")},mS=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!ec(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pS(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Nk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rp(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],o=r.getPath();null!==e&&!Kf(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(r)}e&&n.eventLists_.push(e)}function pw(n,t,e){rp(n,e),bg(n,i=>Kf(i,t))}function Ts(n,t,e){rp(n,e),bg(n,i=>Zs(i,t)||Zs(t,i))}function bg(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(fw(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function fw(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();yo&&hi("event: "+e.toString()),Wl(i)}}}const Lk="repo_interrupt";class Fk{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=F_(),this.transactionQueueTree_=new cw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Nd(n){const e=n.infoData_.getNode(new Sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function wg(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Nd(n)})}function gw(n,t,e,i,r){n.dataUpdateCount++;const o=new Sn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let l=[];if(r)if(i){const f=(0,L.UI)(e,y=>pi(y));l=function kk(n,t,e,i){const r=iw(n,i);if(r){const o=rw(r),l=o.path,d=o.queryId,f=Tr(l,t),y=ei.fromObject(e);return ep(n,l,new Ad(PE(d),f,y))}return[]}(n.serverSyncTree_,o,f,r)}else{const f=pi(e);l=sS(n.serverSyncTree_,o,f,r)}else if(i){const f=(0,L.UI)(e,y=>pi(y));l=function xk(n,t,e){const i=ei.fromObject(e);return cu(n,new Ad({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,o,f)}else{const f=pi(e);l=Xh(n.serverSyncTree_,o,f)}let d=o;l.length>0&&(d=Cg(n,o)),Ts(n.eventQueue_,d,l)}function ry(n,t){mw(n,"connected",t),!1===t&&function vS(n){Ld(n,"onDisconnectEvents");const t=wg(n),e=F_();kb(n.onDisconnect_,_n(),(r,o)=>{const l=ey(r,o,n.serverSyncTree_,t);rl(e,r,l)});let i=[];kb(e,_n(),(r,o)=>{i=i.concat(Xh(n.serverSyncTree_,r,o));const l=IS(n,r);Cg(n,l)}),n.onDisconnect_=F_(),Ts(n.eventQueue_,_n(),i)}(n)}function mw(n,t,e){const i=new Sn("/.info/"+t),r=pi(e);n.infoData_.updateSnapshot(i,r);const o=Xh(n.infoSyncTree_,i,r);Ts(n.eventQueue_,i,o)}function _w(n){return n.nextWriteId_++}function yw(n,t,e,i,r){Ld(n,"set",{path:t.toString(),value:e,priority:i});const o=wg(n),l=pi(e,i),d=lu(n.serverSyncTree_,t),f=aw(l,d,o),y=_w(n),w=q_(n.serverSyncTree_,t,f,y,!0);rp(n.eventQueue_,w),n.server_.put(t.toString(),l.val(!0),(M,N)=>{const B="ok"===M;B||Cr("set at "+t+" failed: "+M);const j=Jl(n.serverSyncTree_,y,!B);Ts(n.eventQueue_,t,j),nc(0,r,M,N)});const E=IS(n,t);Cg(n,E),Ts(n.eventQueue_,E,[])}function bS(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&kd(n.onDisconnect_,t),nc(0,e,i,r)})}function wS(n,t,e,i){const r=pi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(o,l)=>{"ok"===o&&rl(n.onDisconnect_,t,r),nc(0,i,o,l)})}function vw(n,t,e){let i;i=".info"===an(t._path)?W_(n.infoSyncTree_,t,e):W_(n.serverSyncTree_,t,e),pw(n.eventQueue_,t._path,i)}function bw(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Lk)}function Ld(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),hi(e,...t)}function nc(n,t,e,i){t&&Wl(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,t(l)}})}function sy(n,t,e){return lu(n.serverSyncTree_,t,e)||tn.EMPTY_NODE}function oy(n,t=n.transactionQueueTree_){if(t||ww(n,t),uu(t)){const e=jk(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function zk(n,t,e){const i=e.map(y=>y.currentWriteId),r=sy(n,t,i);let o=r;const l=r.hash();for(let y=0;y<e.length;y++){const w=e[y];(0,L.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const E=Tr(t,w.path);o=o.updateChild(E,w.currentOutputSnapshotRaw)}const d=o.val(!0),f=t;n.server_.put(f.toString(),d,y=>{Ld(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const E=[];for(let M=0;M<e.length;M++)e[M].status=2,w=w.concat(Jl(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&E.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();ww(n,ty(n.transactionQueueTree_,t)),oy(n,n.transactionQueueTree_),Ts(n.eventQueue_,t,w);for(let M=0;M<E.length;M++)Wl(E[M])}else{if("datastale"===y)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Cr("transaction at "+f.toString()+" failed: "+y);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=y}Cg(n,t)}},l)}(n,tp(t),e)}else uw(t)&&yg(t,e=>{oy(n,e)})}function Cg(n,t){const e=Gk(n,t),i=tp(e);return function SS(n,t,e){if(0===t.length)return;const i=[];let r=[];const l=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],y=Tr(e,f.path);let E,w=!1;if((0,L.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,E=f.abortReason,r=r.concat(Jl(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)w=!0,E="maxretry",r=r.concat(Jl(n.serverSyncTree_,f.currentWriteId,!0));else{const M=sy(n,f.path,l);f.currentInputSnapshot=M;const N=t[d].update(M.val());if(void 0!==N){np("transaction failed: Data returned ",N,f.path);let B=pi(N);"object"==typeof N&&null!=N&&(0,L.r3)(N,".priority")||(B=B.updatePriority(M.getPriority()));const Q=f.currentWriteId,Ne=wg(n),$e=aw(B,M,Ne);f.currentOutputSnapshotRaw=B,f.currentOutputSnapshotResolved=$e,f.currentWriteId=_w(n),l.splice(l.indexOf(Q),1),r=r.concat(q_(n.serverSyncTree_,f.path,$e,f.currentWriteId,f.applyLocally)),r=r.concat(Jl(n.serverSyncTree_,Q,!0))}else w=!0,E="nodata",r=r.concat(Jl(n.serverSyncTree_,f.currentWriteId,!0))}Ts(n.eventQueue_,e,r),r=[],w&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}ww(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Wl(i[d]);oy(n,n.transactionQueueTree_)}(n,jk(n,e),i),i}function Gk(n,t){let e,i=n.transactionQueueTree_;for(e=an(t);null!==e&&void 0===uu(i);)i=ty(i,e),e=an(t=jn(t));return i}function jk(n,t){const e=[];return $k(n,t,e),e.sort((i,r)=>i.order-r.order),e}function $k(n,t,e){const i=uu(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);yg(t,r=>{$k(n,r,e)})}function ww(n,t){const e=uu(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,_g(t,e.length>0?e:void 0)}yg(t,i=>{ww(n,i)})}function IS(n,t){const e=tp(Gk(n,t)),i=ty(n.transactionQueueTree_,t);return function Rk(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{DS(n,r)}),DS(n,i),dw(i,r=>{DS(n,r)}),e}function DS(n,t){const e=uu(t);if(e){const i=[];let r=[],o=-1;for(let l=0;l<e.length;l++)3===e[l].status||(1===e[l].status?((0,L.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,e[l].status=3,e[l].abortReason="set"):((0,L.hu)(0===e[l].status,"Unexpected transaction status in abort"),e[l].unwatcher(),r=r.concat(Jl(n.serverSyncTree_,e[l].currentWriteId,!0)),e[l].onComplete&&i.push(e[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?_g(t,void 0):e.length=o+1,Ts(n.eventQueue_,tp(t),r);for(let l=0;l<i.length;l++)Wl(i[l])}}const sp=function(n,t){const e=IN(n),i=e.namespace;return"firebase.com"===e.domain&&ta(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Cr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Zf(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Sn(e.pathString)}},IN=function(n){let t="",e="",i="",r="",o="",l=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(w,E)),w<E&&(r=function EN(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(w,E)));const M=function SN(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Cr(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));y=t.indexOf(":"),y>=0?(l="https"===d||"wss"===d,f=parseInt(t.substring(y+1),10)):y=t.length;const N=t.slice(0,y);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const B=t.indexOf(".");i=t.substring(0,B).toLowerCase(),e=t.substring(B+1),o=i}"ns"in M&&(o=M.ns)}return{host:t,port:f,domain:e,subdomain:i,secure:l,scheme:d,pathString:r,namespace:o}},Cw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ay=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const o=new Array(8);for(r=7;r>=0;r--)o[r]=Cw.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let l=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=Cw.charAt(t[r]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class Tw{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class Ew{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xS{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class ly{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return bS(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){bo("OnDisconnect.remove",this._path);const t=new L.BH;return wS(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){bo("OnDisconnect.set",this._path),tc("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return wS(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){bo("OnDisconnect.setWithPriority",this._path),tc("OnDisconnect.setWithPriority",t,this._path,!1),hw("OnDisconnect.setWithPriority",e,!1);const i=new L.BH;return function CS(n,t,e,i,r){const o=pi(e,i);n.server_.onDisconnectPut(t.toString(),o.val(!0),(l,d)=>{"ok"===l&&rl(n.onDisconnect_,t,o),nc(0,r,l,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){bo("OnDisconnect.update",this._path),ip("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function TS(n,t,e,i){if((0,L.xb)(e))return hi("onDisconnect().update() called with empty data.  Don't do anything."),void nc(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,o)=>{"ok"===r&&Qi(e,(l,d)=>{const f=pi(d);rl(n.onDisconnect_,si(t,l),f)}),nc(0,i,r,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ts{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return rn(this._path)?null:D_(this._path)}get ref(){return new wo(this._repo,this._path)}get _queryIdentifier(){const t=xb(this._queryParams),e=f_(t);return"{}"===e?"default":e}get _queryObject(){return xb(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof ts))return!1;const e=this._repo===t._repo,i=Kf(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _E(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function cy(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function ic(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===nl){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ql)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==tl)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Xn){if(null!=t&&!iy(t)||null!=e&&!iy(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof ou||n.getIndex()===qh,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Sw(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wo extends ts{constructor(t,e){super(t,e,new tg,!1)}get parent(){const t=yE(this._path);return null===t?null:new wo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Fd{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Sn(t),i=Vd(this.ref,t);return new Fd(this._node.getChild(e),i,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Fd(r,Vd(this.ref,i),Xn)))}hasChild(t){const e=new Sn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kS(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?Vd(n._root,t):n._root}function Tg(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=sp(t,n._repo.repoInfo_.nodeAdmin);mS("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&ta("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),kS(n,e.path.toString())}function Vd(n,t){return null===an((n=(0,L.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),vg("child","path",e,!1)):vg("child","path",t,!1),new wo(n._repo,si(n._path,t));var e}function Iw(n,t){n=(0,L.m9)(n),bo("set",n._path),tc("set",t,n._path,!1);const e=new L.BH;return yw(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function kN(n,t){ip("update",t,n._path,!1);const e=new L.BH;return function Bk(n,t,e,i){Ld(n,"update",{path:t.toString(),value:e});let r=!0;const o=wg(n),l={};if(Qi(e,(d,f)=>{r=!1,l[d]=ey(si(t,d),pi(f),n.serverSyncTree_,o)}),r)hi("update() called with empty data.  Don't do anything."),nc(0,i,"ok",void 0);else{const d=_w(n),f=function iS(n,t,e,i){!function uk(n,t,e,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=U_(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=ei.fromObject(e);return cu(n,new Ad({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,l,d);rp(n.eventQueue_,f),n.server_.merge(t.toString(),e,(y,w)=>{const E="ok"===y;E||Cr("update at "+t+" failed: "+y);const M=Jl(n.serverSyncTree_,d,!E),N=M.length>0?Cg(n,t):t;Ts(n.eventQueue_,N,M),nc(0,i,y,w)}),Qi(e,y=>{const w=IS(n,si(t,y));Cg(n,w)}),Ts(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Wk(n){n=(0,L.m9)(n);const t=new xS(()=>{}),e=new op(t);return function Vk(n,t,e){const i=function Ak(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,w)=>{const E=Tr(y,e);i=i||Yl(w,E)});let r=n.syncPointTree_.get(e);r?i=i||Yl(r,_n()):(r=new Yb,n.syncPointTree_=n.syncPointTree_.set(e,r));const o=null!=i,l=o?new oa(i,!0,!1):null;return function WE(n){return Pb(n.viewCache_)}(JE(r,t,cg(n.pendingWriteTree_,t._path),o?l.getNode():tn.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=i?Promise.resolve(i):n.server_.get(t).then(r=>{const o=pi(r).withIndex(t._queryParams.getIndex());let l;if(nw(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())l=Xh(n.serverSyncTree_,t._path,o);else{const d=Xl(n.serverSyncTree_,t);l=sS(n.serverSyncTree_,t._path,o,d)}return Ts(n.eventQueue_,t._path,l),W_(n.serverSyncTree_,t,e,null,!0),o},r=>(Ld(n,"get for query "+(0,L.Wl)(t)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,e).then(i=>new Fd(i,new wo(n._repo,n._path),n._queryParams.getIndex()))}class op{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Tw("value",this,new Fd(t.snapshotNode,new wo(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ew(this,t,e):null}matches(t){return t instanceof op&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Eg{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ew(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const i=Vd(new wo(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Tw(t.type,this,new Fd(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Eg&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uy(n,t,e,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const f=e,y=(w,E)=>{vw(n._repo,n,d),f(w,E)};y.userCallback=e.userCallback,y.context=e.context,e=y}const l=new xS(e,o||void 0),d="value"===t?new op(l):new Eg(t,l);return function Hk(n,t,e){let i;i=".info"===an(t._path)?nw(n.infoSyncTree_,t,e):nw(n.serverSyncTree_,t,e),pw(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>vw(n._repo,n,d)}function Ws(n,t,e,i){return uy(n,"value",t,e,i)}function AS(n,t,e,i){return uy(n,"child_added",t,e,i)}function dy(n,t,e,i){return uy(n,"child_changed",t,e,i)}function MS(n,t,e,i){return uy(n,"child_moved",t,e,i)}function Kk(n,t,e,i){return uy(n,"child_removed",t,e,i)}function Ks(n,t,e){let i=null;const r=e?new xS(e):null;"value"===t?i=new op(r):t&&(i=new Eg(t,r)),vw(n._repo,n,i)}class la{}class hy extends la{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tc("endAt",this._value,t._path,!0);const e=Db(t._queryParams,this._value,this._key);if(Sw(e),ic(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(t._repo,t._path,e,t._orderByCalled)}}class Qk extends la{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tc("endBefore",this._value,t._path,!1);const e=function tk(n,t,e){let i;return i=Db(n,t,n.index_===nl||e?e:ql),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Sw(e),ic(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ts(t._repo,t._path,e,t._orderByCalled)}}class xw extends la{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tc("startAt",this._value,t._path,!0);const e=Ib(t._queryParams,this._value,this._key);if(Sw(e),ic(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ts(t._repo,t._path,e,t._orderByCalled)}}class Jk extends la{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tc("startAfter",this._value,t._path,!1);const e=function ng(n,t,e){let i;return i=Ib(n,t,n.index_===nl||e?e:tl),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(Sw(e),ic(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ts(t._repo,t._path,e,t._orderByCalled)}}class PS extends la{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(t._repo,t._path,function X1(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class NS extends la{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ts(t._repo,t._path,function ek(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class kw extends la{constructor(t){super(),this._path=t}_apply(t){cy(t,"orderByChild");const e=new Sn(this._path);if(rn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new ou(e),r=L_(t._queryParams,i);return ic(r),new ts(t._repo,t._path,r,!0)}}class LS extends la{_apply(t){cy(t,"orderByKey");const e=L_(t._queryParams,nl);return ic(e),new ts(t._repo,t._path,e,!0)}}class rc extends la{_apply(t){cy(t,"orderByPriority");const e=L_(t._queryParams,Xn);return ic(e),new ts(t._repo,t._path,e,!0)}}class AN extends la{_apply(t){cy(t,"orderByValue");const e=L_(t._queryParams,qh);return ic(e),new ts(t._repo,t._path,e,!0)}}class iA extends la{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(tc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new hy(this._value,this._key)._apply(new xw(this._value,this._key)._apply(t))}}function ca(n,...t){let e=(0,L.m9)(n);for(const i of t)e=i._apply(e);return e}(function Ik(n){(0,L.hu)(!Kb,"__referenceConstructor has already been defined"),Kb=n})(wo),function tS(n){(0,L.hu)(!Z_,"__referenceConstructor has already been defined"),Z_=n}(wo);const VS={};function Rw(n,t,e,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,l=sp(o,r),d=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(f=!0,o=`http://${y}?ns=${d.namespace}`,l=sp(o,r),d=l.repoInfo):f=!l.repoInfo.secure;const w=r&&f?new Gh(Gh.OWNER):new nE(n.name,n.options,t);mS("Invalid Firebase Database URL",l),rn(l.path)||ta("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function Ow(n,t,e,i){let r=VS[t.name];r||(r={},VS[t.name]=r);let o=r[n.toURLString()];return o&&ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fk(n,false,e,i),r[n.toURLString()]=o,o}(d,n,w,new nb(n.name,e));return new HS(E,n)}class HS{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function yS(n,t,e){if(n.stats_=w_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new rg(n.repoInfo_,(i,r,o,l)=>{gw(n,i,r,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ry(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Id(n.repoInfo_,t,(i,r,o,l)=>{gw(n,i,r,o,l)},i=>{ry(n,i)},i=>{!function TN(n,t){Qi(t,(e,i)=>{mw(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function aE(n,t){const e=n.toString();return b_[e]||(b_[e]=t()),b_[e]}(n.repoInfo_,()=>new rk(n.stats_,n.server_)),n.infoData_=new ME,n.infoSyncTree_=new tw({startListening:(i,r,o,l)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=Xh(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),mw(n,"connected",!1),n.serverSyncTree_=new tw({startListening:(i,r,o,l)=>(n.server_.listen(i,o,r,(d,f)=>{const y=l(d,f);Ts(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wo(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function MN(n,t){const e=VS[t];(!e||e[n.key]!==n)&&ta(`Database ${t}(${n.repoInfo_}) has already been deleted.`),bw(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ta("Cannot call "+t+" on a deleted database.")}}function Pw(){Sd.IS_TRANSPORT_INITIALIZED&&Cr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function US(){Pw(),iu.forceDisallow()}function zS(){Pw(),Ed.forceDisallow(),iu.forceAllow()}function aA(n,t){Td(n,t)}const ON={".sv":"timestamp"};class lA{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Id.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Id.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function RN(n){Uh(ws.SDK_VERSION),(0,ws._registerComponent)(new Xr.wA("database",(t,{instanceIdentifier:e})=>Rw(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ws.registerVersion)(h_,"0.14.3",n),(0,ws.registerVersion)(h_,"0.14.3","esm2017")}();const VN=new Xo.Yd("@firebase/database-compat"),uA=function(n){VN.warn("FIREBASE WARNING: "+n)};class hA{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),o=>i(o)),r}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,uA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class pA{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class sc{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),vg("DataSnapshot.child","path",t,!1),new sc(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),vg("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new sc(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Es(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class fi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var o;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const l=fi.getCancelAndContextArgs_("Query.on",i,r),d=(y,w)=>{e.call(l.context,new sc(this.database,y),w)};d.userCallback=e,d.context=l.context;const f=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(t){case"value":return Ws(this._delegate,d,f),e;case"child_added":return AS(this._delegate,d,f),e;case"child_removed":return Kk(this._delegate,d,f),e;case"child_changed":return dy(this._delegate,d,f),e;case"child_moved":return MS(this._delegate,d,f),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,Ks(this._delegate,t,r)}else Ks(this._delegate,t)}get(){return Wk(this._delegate).then(t=>new sc(this.database,t))}once(t,e,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const o=fi.getCancelAndContextArgs_("Query.once",i,r),l=new L.BH,d=(y,w)=>{const E=new sc(this.database,y);e&&e.call(o.context,E,w),l.resolve(E)};d.userCallback=e,d.context=o.context;const f=y=>{o.cancel&&o.cancel.call(o.context,y),l.reject(y)};switch(t){case"value":Ws(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":AS(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":Kk(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":dy(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":MS(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new fi(this.database,ca(this._delegate,function Xk(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new PS(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new fi(this.database,ca(this._delegate,function eA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new NS(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new fi(this.database,ca(this._delegate,function du(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vg("orderByChild","path",n,!1),new kw(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new fi(this.database,ca(this._delegate,function Aw(){return new LS}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new fi(this.database,ca(this._delegate,function tA(){return new rc}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new fi(this.database,ca(this._delegate,function nA(){return new AN}()))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new fi(this.database,ca(this._delegate,function RS(n=null,t){return Pd("startAt","key",t,!0),new xw(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new fi(this.database,ca(this._delegate,function OS(n,t){return Pd("startAfter","key",t,!0),new Jk(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new fi(this.database,ca(this._delegate,function Yk(n,t){return Pd("endAt","key",t,!0),new hy(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new fi(this.database,ca(this._delegate,function Dw(n,t){return Pd("endBefore","key",t,!0),new Qk(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new fi(this.database,ca(this._delegate,function rA(n,t){return Pd("equalTo","key",t,!0),new iA(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof fi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,L.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Es(this.database,new wo(this._delegate._repo,this._delegate._path))}}class Es extends fi{constructor(t,e){super(t,new ts(e._repo,e._path,new tg,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Es(this.database,Vd(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Es(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Es(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const i=Iw(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let o=0;o<t.length;++o)r[""+o]=t[o];t=r,uA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bo("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const i=kN(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function qk(n,t,e){if(bo("setWithPriority",n._path),tc("setWithPriority",t,n._path,!1),hw("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return yw(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),o=>i(o)),r}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function xN(n){return bo("remove",n._path),Iw(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function cA(n,t,e){var i;if(n=(0,L.m9)(n),bo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=e?.applyLocally)||void 0===i||i,o=new L.BH,d=Ws(n,()=>{});return function ES(n,t,e,i,r,o){Ld(n,"transaction on "+t);const l={path:t,update:e,onComplete:i,status:null,order:bd(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=sy(n,t,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{np("transaction failed: Data returned ",f,l.path),l.status=0;const y=ty(n.transactionQueueTree_,t),w=uu(y)||[];let E;w.push(l),_g(y,w),"object"==typeof f&&null!==f&&(0,L.r3)(f,".priority")?(E=(0,L.DV)(f,".priority"),(0,L.hu)(iy(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(lu(n.serverSyncTree_,t)||tn.EMPTY_NODE).getPriority().val();const M=wg(n),N=pi(f,E),B=aw(N,d,M);l.currentOutputSnapshotRaw=N,l.currentOutputSnapshotResolved=B,l.currentWriteId=_w(n);const j=q_(n.serverSyncTree_,t,B,l.currentWriteId,l.applyLocally);Ts(n.eventQueue_,t,j),oy(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,y,w)=>{let E=null;f?o.reject(f):(E=new Fd(w,new wo(n._repo,n._path),Xn),o.resolve(new lA(y,E)))},d,r),o.promise}(this._delegate,t,{applyLocally:i}).then(o=>new pA(o.committed,new sc(this.database,o.snapshot)));return e&&r.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),r}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Zk(n,t){n=(0,L.m9)(n),bo("setPriority",n._path),hw("setPriority",t,!1);const e=new L.BH;return yw(n._repo,si(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const i=function DN(n,t){n=(0,L.m9)(n),bo("push",n._path),tc("push",t,n._path,!0);const e=Nd(n._repo),i=ay(e),r=Vd(n,i),o=Vd(n,i);let l;return l=null!=t?Iw(o,t).then(()=>o):Promise.resolve(o),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,t),r=i.then(l=>new Es(this.database,l));e&&r.then(()=>e(null),l=>e(l));const o=new Es(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return bo("Reference.onDisconnect",this._delegate._path),new hA(new ly(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Bd{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:US,forceLongPolling:zS}}useEmulator(t,e,i={}){!function Sg(n,t,e,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ta("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Gh(Gh.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);o=new Gh(l)}!function sA(n,t,e,i){n.repoInfo_=new Zf(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,t,e,o)}(this._delegate,t,e,i)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof Es){const e=Tg(this._delegate,t.toString());return new Es(this,e)}{const e=kS(this._delegate,t);return new Es(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=Tg(this._delegate,t);return new Es(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function GS(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),bw(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function oA(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function Uk(n){n.persistentConnection_&&n.persistentConnection_.resume(Lk)}(n._repo)}(this._delegate)}}Bd.ServerValue={TIMESTAMP:function PN(){return ON}(),increment:n=>function jS(n){return{".sv":{increment:n}}}(n)};var fA=Object.freeze({__proto__:null,initStandalone:function Lw({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){Uh(e);const l=new Xr.zt("auth-internal",new Xr.H0("database-standalone"));return l.setComponent(new Xr.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Bd(Rw(n,l,void 0,t,o),n),namespace:r}}});const Fw=Bd.ServerValue;!function Vw(n){n.INTERNAL.registerComponent(new Xr.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new Bd(r,i)},"PUBLIC").setServiceProps({Reference:Es,Query:fi,Database:Bd,DataSnapshot:sc,enableLogging:aA,INTERNAL:fA,ServerValue:Fw}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.3")}(Hf.Z);var Hd=V(5363),BN=V(6063);class HN extends Nt.x{constructor(t=1/0,e=1/0,i=BN.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;e||(i.push(t),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!t.closed;l+=i?1:2)t.next(o[l]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=e.now();let d=0;for(let f=1;f<i.length&&i[f]<=l;f+=2)d=f;d&&i.splice(0,d+1)}}}function gA(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,WT.B)({connector:()=>new HN(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function mA(n,t){return(0,fs.m)(t)?Ti(()=>n,t):Ti(()=>n)}var fy=V(9468);V(259);const Bw=new Map,YS={activated:!1,tokenObservers:[]},wA={initialized:!1,enabled:!1};function Fr(n){return Bw.get(n)||Object.assign({},YS)}function Hw(){return wA}class KN{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,we.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function YN(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const a=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function u(n){if(!Fr(n).activated)throw a.create("use-before-activation",{appName:n.name})}function m(n,t){return b.apply(this,arguments)}function b(){return(b=(0,we.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const E=yield r.getHeartbeatsHeader();E&&(i["X-Firebase-Client"]=E)}const o={method:"POST",body:JSON.stringify(t),headers:i};let l,d;try{l=yield fetch(n,o)}catch(E){throw a.create("fetch-network-error",{originalErrorMessage:E?.message})}if(200!==l.status)throw a.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(E){throw a.create("fetch-parse-error",{originalErrorMessage:E?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw a.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(f[1]),w=Date.now();return{token:d.token,expireTimeMillis:w+y,issuedAtTimeMillis:w}})).apply(this,arguments)}function x(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const K="firebase-app-check-store";let Ce=null;function je(){return Ce||(Ce=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(a.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(K,{keyPath:"compositeKey"})}}catch(e){t(a.create("storage-open",{originalErrorMessage:e?.message}))}}),Ce)}function ti(){return(ti=(0,we.Z)(function*(n,t){const i=(yield je()).transaction(K,"readwrite"),o=i.objectStore(K).put({compositeKey:n,value:t});return new Promise((l,d)=>{o.onsuccess=f=>{l()},i.onerror=f=>{var y;d(a.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Uw=new Xo.Yd("@firebase/app-check");function SA(n,t){return(0,L.hl)()?function yt(n,t){return function Zt(n,t){return ti.apply(this,arguments)}(function JN(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Uw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function XN(){return Hw().enabled}function eL(){return DA.apply(this,arguments)}function DA(){return(DA=(0,we.Z)(function*(){const n=Hw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Rz={error:"UNKNOWN_ERROR"};function Oz(n){return L.US.encodeString(JSON.stringify(n),!1)}function XS(n){return xA.apply(this,arguments)}function xA(){return(xA=(0,we.Z)(function*(n,t=!1){const e=n.app;u(e);const i=Fr(e);let o,r=i.token;if(r&&!_y(r)&&(i.token=void 0,r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(_y(f)?r=f:yield SA(e,void 0))}if(!t&&r&&_y(r))return{token:r.token};let d,l=!1;if(XN()){i.exchangeTokenPromise||(i.exchangeTokenPromise=m(x(e,yield eL()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const f=yield i.exchangeTokenPromise;return yield SA(e,f),i.token=f,{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield Fr(e).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Uw.warn(f.message):Uw.error(f),o=f}return r?o?d=_y(r)?{token:r.token,internalError:o}:iL(o):(d={token:r.token},i.token=r,yield SA(e,r)):d=iL(o),l&&nL(e,d),d})).apply(this,arguments)}function AA(n,t){const e=Fr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function tL(n){const{app:t}=n,e=Fr(t);let i=e.tokenRefresher;i||(i=function Pz(n){const{app:t}=n;return new KN((0,we.Z)(function*(){let i;if(i=Fr(t).token?yield XS(n,!0):yield XS(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=Fr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function nL(n,t){const e=Fr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function _y(n){return n.expireTimeMillis-Date.now()>0}function iL(n){return{token:Oz(Rz),error:n}}class Nz{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Fr(this.app);for(const e of t)AA(this.app,e.next);return Promise.resolve()}}const dL="app-check-internal";!function Kz(){(0,ws._registerComponent)(new Xr.wA("app-check",n=>function Lz(n,t){return new Nz(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(dL).initialize()})),(0,ws._registerComponent)(new Xr.wA(dL,n=>function Fz(n){return{getToken:t=>XS(n,t),addTokenListener:t=>function kA(n,t,e,i){const{app:r}=n,o=Fr(r);if(o.tokenObservers=[...o.tokenObservers,{next:e,error:i,type:t}],o.token&&_y(o.token)){const d=o.token;Promise.resolve().then(()=>{e({token:d.token}),tL(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>tL(n))}(n,"INTERNAL",t),removeTokenListener:t=>AA(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ws.registerVersion)("@firebase/app-check","0.6.3")}();class tI{constructor(){return(0,ri.vb)("app-check")}}typeof window<"u"&&window;var pL=V(9260);const NA=new s.OlP("angularfire2.auth.use-emulator"),LA=new s.OlP("angularfire2.auth.settings"),FA=new s.OlP("angularfire2.auth.tenant-id"),VA=new s.OlP("angularfire2.auth.langugage-code"),BA=new s.OlP("angularfire2.auth.use-device-language"),HA=new s.OlP("angularfire.auth.persistence"),UA=(n,t,e,i,r,o,l,d)=>(0,bs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),i&&(f.tenantId=i),f.languageCode=r,o&&f.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))f.settings[y]=w;return d&&f.setPersistence(d),f},[e,i,r,o,l,d]);let zA=(()=>{class n{constructor(e,i,r,o,l,d,f,y,w,E,M,N){const B=new Nt.x,j=Pe(void 0).pipe((0,Hd.Q)(l.outsideAngular),Ti(()=>o.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,407)))),(0,gt.U)(()=>(0,bs.on)(e,o,i)),(0,gt.U)(Q=>UA(Q,o,d,y,w,E,f,M)),gA({bufferSize:1,refCount:!1}));if(uc(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Pe(null);else{j.pipe(Bs()).subscribe();const Ne=j.pipe(Ti(et=>et.getRedirectResult().then(vt=>vt,()=>null)),ri.iC,gA({bufferSize:1,refCount:!1})),$e=j.pipe(Ti(et=>new Oi.y(vt=>({unsubscribe:o.runOutsideAngular(()=>et.onAuthStateChanged(Ct=>vt.next(Ct),Ct=>vt.error(Ct),()=>vt.complete()))})))),Ze=j.pipe(Ti(et=>new Oi.y(vt=>({unsubscribe:o.runOutsideAngular(()=>et.onIdTokenChanged(Ct=>vt.next(Ct),Ct=>vt.error(Ct),()=>vt.complete()))}))));this.authState=Ne.pipe(mA($e),(0,fy.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular)),this.user=Ne.pipe(mA(Ze),(0,fy.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular)),this.idToken=this.user.pipe(Ti(et=>et?(0,Qe.D)(et.getIdToken()):Pe(null))),this.idTokenResult=this.user.pipe(Ti(et=>et?(0,Qe.D)(et.getIdTokenResult()):Pe(null))),this.credential=(0,Hh.T)(Ne,B,this.authState.pipe(Jr(et=>!et))).pipe((0,gt.U)(et=>et?.user?et:null),(0,fy.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular))}return(0,bs.pX)(this,j,o,{spy:{apply:(Q,Ne,$e)=>{(Q.startsWith("signIn")||Q.startsWith("createUser"))&&$e.then(Ze=>B.next(Ze))}}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(bs.Dh),s.LFG(bs.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(ri.HU),s.LFG(NA,8),s.LFG(LA,8),s.LFG(FA,8),s.LFG(VA,8),s.LFG(BA,8),s.LFG(HA,8),s.LFG(tI,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function fL(n){return null==n}function gL(n){return"function"==typeof n.set}function mL(n,t){return gL(t)?t:n.ref(t)}function _L(n,t){if(function t6(n){return"string"==typeof n}(n))return t.stringCase();if(gL(n))return t.firebaseCase();if(function n6(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function zw(n,t,e="on",i=Nf.z){return new Oi.y(r=>{let o=null;return o=n[e](t,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,gt.U)(r=>{const{snapshot:o,prevKey:l}=r;let d=null;return o.exists()&&(d=o.key),{type:t,payload:o,prevKey:l,key:d}}),(0,WT.B)())}function yL(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function s6(n,t){const{payload:e,prevKey:i,key:r}=t,o=yL(n,r),l=function r6(n,t){if(fL(t))return 0;{const e=yL(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==e.key)).splice(l,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(l,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function vL(n){return(fL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function bL(n,t,e){return function i6(n,t,e){return zw(n,"value","once",e).pipe(Ti(i=>{const r=[Pe(i)];return t.forEach(o=>r.push(zw(n,o,"on",e))),(0,Hh.T)(...r).pipe(li(s6,[]))}),KT())}(n,t=vL(t),e)}function wL(n,t,e){const i=(t=vL(t)).map(r=>zw(n,r,"on",e));return(0,Hh.T)(...i)}function CL(n,t){return function(i,r){return _L(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function c6(n){return function(e){return e?_L(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function TL(n,t){return function(){return zw(n,"value","on",t)}}const h6=new s.OlP("angularfire2.realtimeDatabaseURL"),p6=new s.OlP("angularfire2.database.use-emulator");let yy=(()=>{class n{constructor(e,i,r,o,l,d,f,y,w,E,M,N,B,j,Q){this.schedulers=d;const Ne=f,$e=(0,bs.on)(e,l,i);y&&UA($e,l,w,M,N,B,E,j),this.database=(0,bs.cc)(`${$e.name}.database.${r}`,"AngularFireDatabase",$e.name,()=>{const Ze=l.runOutsideAngular(()=>$e.database(r||void 0));return Ne&&Ze.useEmulator(...Ne),Ze},[Ne])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>mL(this.database,e));let o=r;return i&&(o=i(r)),function u6(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:CL(i,"update"),set:CL(i,"set"),push:r=>i.push(r),remove:c6(i),snapshotChanges:r=>bL(n,r,e).pipe(ri.iC),stateChanges:r=>wL(n,r,e).pipe(ri.iC),auditTrail:r=>function o6(n,t,e){return function l6(n,t,e){return function a6(n,t){return zw(n,"value","on",t).pipe((0,gt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function YT(...n){const t=(0,Lt.jO)(n);return(0,En.e)((e,i)=>{const r=n.length,o=new Array(r);let l=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,za.Xf)(n[f]).subscribe((0,kn.x)(i,y=>{o[f]=y,!d&&!l[f]&&(l[f]=!0,(d=l.every(Nl.y))&&(l=null))},Pf.Z));e.subscribe((0,kn.x)(i,f=>{if(d){const y=[f,...o];i.next(t?t(...y):y)}}))})}(t),(0,gt.U)(([r,o])=>{const l=r.lastKeyToLoad,d=o.map(f=>f.key);return{actions:o,lastKeyToLoad:l,loadedKeys:d}}),function QT(n){return(0,En.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,kn.x)(e,o=>(i||(i=!n(o,r++)))&&e.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,gt.U)(r=>r.actions))}(n,wL(n,t).pipe(li((r,o)=>[...r,o],[])),e)}(n,r,e).pipe(ri.iC),valueChanges:(r,o)=>bL(n,r,e).pipe((0,gt.U)(d=>d.map(f=>o&&o.idField?Object.assign(Object.assign({},f.payload.val()),{[o.idField]:f.key}):f.payload.val())),ri.iC)}}(o,this)}object(e){return function d6(n,t){return{query:n,snapshotChanges:()=>TL(n,t.schedulers.outsideAngular)().pipe(ri.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>TL(n,t.schedulers.outsideAngular)().pipe(ri.iC,(0,gt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mL(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(bs.Dh),s.LFG(bs.xv,8),s.LFG(h6,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(ri.HU),s.LFG(p6,8),s.LFG(zA,8),s.LFG(NA,8),s.LFG(LA,8),s.LFG(FA,8),s.LFG(VA,8),s.LFG(BA,8),s.LFG(HA,8),s.LFG(tI,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),f6=(()=>{class n{constructor(){pL.Z.registerVersion("angularfire",ri.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[yy]}),n})();class ap{constructor(t){this.db=t,this.dbPath="/tutorials",this.tutorialsRef=t.list(this.dbPath)}getAll(){return this.tutorialsRef}create(t){return this.tutorialsRef.push(t)}update(t,e){return this.tutorialsRef.update(t,e)}delete(t){return this.tutorialsRef.remove(t)}deleteAll(){return this.tutorialsRef.remove()}}ap.\u0275fac=function(t){return new(t||ap)(s.LFG(yy))},ap.\u0275prov=s.Yz7({token:ap,factory:ap.\u0275fac,providedIn:"root"});let EL=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),Ig=(()=>{class n extends EL{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=s.n5z(n)))(i||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const Sr=new s.OlP("NgValueAccessor"),_6={provide:Sr,useExisting:(0,s.Gpc)(()=>Ud),multi:!0},v6=new s.OlP("CompositionEventMode");let Ud=(()=>{class n extends EL{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y6(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(v6,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&s.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[s._Bn([_6]),s.qOj]}),n})();const Ss=new s.OlP("NgValidators"),cp=new s.OlP("NgAsyncValidators");function kL(n){return function lp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function nI(n){return null}function NL(n){return null!=n}function LL(n){return(0,s.QGY)(n)?(0,Qe.D)(n):n}function FL(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function VL(n,t){return t.map(e=>e(n))}function BL(n){return n.map(t=>function C6(n){return!n.validate}(t)?t:e=>t.validate(e))}function GA(n){return null!=n?function HL(n){if(!n)return null;const t=n.filter(NL);return 0==t.length?null:function(e){return FL(VL(e,t))}}(BL(n)):null}function jA(n){return null!=n?function UL(n){if(!n)return null;const t=n.filter(NL);return 0==t.length?null:function(e){return function g6(...n){const t=(0,Lt.jO)(n),{args:e,keys:i}=tf(n),r=new Oi.y(o=>{const{length:l}=e;if(!l)return void o.complete();const d=new Array(l);let f=l,y=l;for(let w=0;w<l;w++){let E=!1;(0,za.Xf)(e[w]).subscribe((0,kn.x)(o,M=>{E||(E=!0,y--),d[w]=M},()=>f--,void 0,()=>{(!f||!E)&&(y||o.next(i?bm(i,d):d),o.complete())}))}});return t?r.pipe(vh(t)):r}(VL(e,t).map(LL)).pipe((0,gt.U)(FL))}}(BL(n)):null}function zL(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function $A(n){return n?Array.isArray(n)?n:[n]:[]}function iI(n,t){return Array.isArray(n)?n.includes(t):n===t}function $L(n,t){const e=$A(t);return $A(n).forEach(r=>{iI(e,r)||e.push(r)}),e}function ZL(n,t){return $A(t).filter(e=>!iI(n,e))}class qL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=GA(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ys extends qL{get formDirective(){return null}get path(){return null}}class up extends qL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class WL{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hu=(()=>{class n extends WL{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(up,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&s.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[s.qOj]}),n})(),vy=(()=>{class n extends WL{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Ys,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&s.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[s.qOj]}),n})();const Gw="VALID",sI="INVALID",by="PENDING",jw="DISABLED";function KA(n){return(oI(n)?n.validators:n)||null}function YA(n,t){return(oI(t)?t.asyncValidators:n)||null}function oI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class JL{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Gw}get invalid(){return this.status===sI}get pending(){return this.status==by}get disabled(){return this.status===jw}get enabled(){return this.status!==jw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators($L(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators($L(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ZL(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ZL(t,this._rawAsyncValidators))}hasValidator(t){return iI(this._rawValidators,t)}hasAsyncValidator(t){return iI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=by,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=jw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Gw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gw||this.status===by)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jw:Gw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=by,this._hasOwnPendingAsyncValidator=!0;const e=LL(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?jw:this.errors?sI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(by)?by:this._anyControlsHaveStatus(sI)?sI:Gw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){oI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function k6(n){return Array.isArray(n)?GA(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function A6(n){return Array.isArray(n)?jA(n):n||null}(this._rawAsyncValidators)}}class QA extends JL{constructor(t,e,i){super(KA(e),YA(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function QL(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new s.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function YL(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new s.vHH(1e3,"");if(!i[e])throw new s.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const wy=new s.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>aI}),aI="always";function $w(n,t,e=aI){JA(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function O6(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&XL(n,t)})}(n,t),function N6(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function P6(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&XL(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function R6(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function uI(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function JA(n,t){const e=function GL(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(zL(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function jL(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(zL(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();uI(t._rawValidators,r),uI(t._rawAsyncValidators,r)}function XL(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const H6={provide:Ys,useExisting:(0,s.Gpc)(()=>dp)},Zw=(()=>Promise.resolve())();let dp=(()=>{class n extends Ys{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new s.vpe,this.form=new QA({},GA(e),jA(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Zw.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),$w(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Zw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Zw.then(()=>{const i=this._findContainer(e.path),r=new QA({});(function eF(n,t){JA(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Zw.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Zw.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function tF(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Ss,10),s.Y36(cp,10),s.Y36(wy,8))},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&s.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([H6]),s.qOj]}),n})();function nF(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function iF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rF=class extends JL{constructor(t=null,e,i){super(KA(e),YA(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oI(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=iF(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){nF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){nF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){iF(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},G6={provide:up,useExisting:(0,s.Gpc)(()=>sl)},aF=(()=>Promise.resolve())();let sl=(()=>{class n extends up{constructor(e,i,r,o,l,d){super(),this._changeDetectorRef=l,this.callSetDisabledState=d,this.control=new rF,this._registered=!1,this.update=new s.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function tM(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(o=>{o.constructor===Ud?e=o:function V6(n){return Object.getPrototypeOf(n.constructor)===Ig}(o)?i=o:r=o}),r||i||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function eM(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$w(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){aF.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&(0,s.D6c)(i);aF.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function lI(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Ys,9),s.Y36(Ss,10),s.Y36(cp,10),s.Y36(Sr,10),s.Y36(s.sBO,8),s.Y36(wy,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([G6]),s.qOj,s.TTD]}),n})(),Cy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),cF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const nM=new s.OlP("NgModelWithFormControlWarning");let Dg=(()=>{class n{constructor(){this._validator=nI}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):nI,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,features:[s.TTD]}),n})();const aG={provide:Ss,useExisting:(0,s.Gpc)(()=>qw),multi:!0};let qw=(()=>{class n extends Dg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=s.D6c,this.createValidator=e=>kL}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=s.n5z(n)))(i||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&s.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[s._Bn([aG]),s.qOj]}),n})(),IF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[cF]}),n})(),Ww=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:wy,useValue:e.callSetDisabledState??aI}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[IF]}),n})(),fG=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:nM,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:wy,useValue:e.callSetDisabledState??aI}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[IF]}),n})();function gG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"div",2)(2,"label",3),s._uU(3,"Title"),s.qZA(),s.TgZ(4,"input",4),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.tutorial.title=r)}),s.qZA()(),s.TgZ(5,"div",2)(6,"label",5),s._uU(7,"Description"),s.qZA(),s.TgZ(8,"input",6),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.tutorial.description=r)}),s.qZA()(),s.TgZ(9,"button",7),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.saveTutorial())}),s._uU(10,"Submit"),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(4),s.Q6J("ngModel",e.tutorial.title),s.xp6(4),s.Q6J("ngModel",e.tutorial.description)}}function mG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"h4"),s._uU(2,"You submitted successfully!"),s.qZA(),s.TgZ(3,"button",7),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.newTutorial())}),s._uU(4,"Add"),s.qZA()()}}class Kw{constructor(t){this.tutorialService=t,this.tutorial=new qT,this.submitted=!1}saveTutorial(){this.tutorialService.create(this.tutorial).then(()=>{console.log("Created new item successfully!"),this.submitted=!0})}newTutorial(){this.submitted=!1,this.tutorial=new qT}}function _G(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.updatePublished(!1))}),s._uU(1," UnPublish "),s.qZA()}}function yG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",11),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.updatePublished(!0))}),s._uU(1," Publish "),s.qZA()}}function vG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2)(1,"h4"),s._uU(2,"Tutorial"),s.qZA(),s.TgZ(3,"form")(4,"div",3)(5,"label",4),s._uU(6,"Title"),s.qZA(),s.TgZ(7,"input",5),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.currentTutorial.title=r)}),s.qZA()(),s.TgZ(8,"div",3)(9,"label",6),s._uU(10,"Description"),s.qZA(),s.TgZ(11,"input",7),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.currentTutorial.description=r)}),s.qZA()(),s.TgZ(12,"div",3)(13,"label")(14,"strong"),s._uU(15,"Status:"),s.qZA()(),s._uU(16),s.qZA()(),s.YNc(17,_G,2,0,"button",8),s.YNc(18,yG,2,0,"button",8),s.TgZ(19,"button",9),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.deleteTutorial())}),s._uU(20," Delete "),s.qZA(),s.TgZ(21,"button",10),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.updateTutorial())}),s._uU(22," Update "),s.qZA(),s.TgZ(23,"p"),s._uU(24),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(7),s.Q6J("ngModel",e.currentTutorial.title),s.xp6(4),s.Q6J("ngModel",e.currentTutorial.description),s.xp6(5),s.hij(" ",e.currentTutorial.published?"Published":"Pending"," "),s.xp6(1),s.Q6J("ngIf",e.currentTutorial.published),s.xp6(1),s.Q6J("ngIf",!e.currentTutorial.published),s.xp6(6),s.Oqu(e.message)}}function bG(n,t){1&n&&(s.TgZ(0,"div"),s._UZ(1,"br"),s.TgZ(2,"p"),s._uU(3,"Cannot access this Tutorial..."),s.qZA()())}Kw.\u0275fac=function(t){return new(t||Kw)(s.Y36(ap))},Kw.\u0275cmp=s.Xpm({type:Kw,selectors:[["app-add-tutorial"]],decls:3,vars:2,consts:[[1,"submit-form"],[4,"ngIf"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,gG,11,2,"div",1),s.YNc(2,mG,5,0,"div",1),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",!e.submitted),s.xp6(1),s.Q6J("ngIf",e.submitted))},dependencies:[pn,Ud,hu,qw,sl],styles:[".submit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]});class Yw{constructor(t){this.tutorialService=t,this.refreshList=new s.vpe,this.currentTutorial={title:"",description:"",published:!1},this.message=""}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentTutorial={...this.tutorial}}updatePublished(t){this.currentTutorial.key&&this.tutorialService.update(this.currentTutorial.key,{published:t}).then(()=>{this.currentTutorial.published=t,this.message="The status was updated successfully!"}).catch(e=>console.log(e))}updateTutorial(){this.currentTutorial.key&&this.tutorialService.update(this.currentTutorial.key,{title:this.currentTutorial.title,description:this.currentTutorial.description}).then(()=>this.message="The tutorial was updated successfully!").catch(e=>console.log(e))}deleteTutorial(){this.currentTutorial.key&&this.tutorialService.delete(this.currentTutorial.key).then(()=>{this.refreshList.emit(),this.message="The tutorial was updated successfully!"}).catch(t=>console.log(t))}}function wG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"li",6),s.NdJ("click",function(){const r=s.CHM(e),o=r.$implicit,l=r.index,d=s.oxw();return s.KtG(d.setActiveTutorial(o,l))}),s._uU(1),s.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=s.oxw();s.ekj("active",i==r.currentIndex),s.xp6(1),s.hij(" ",e.title," ")}}function CG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"app-tutorial-details",7),s.NdJ("refreshList",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.refreshList())}),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(1),s.Q6J("tutorial",e.currentTutorial)}}function TG(n,t){1&n&&(s.TgZ(0,"div"),s._UZ(1,"br"),s.TgZ(2,"p"),s._uU(3,"Please click on a Tutorial..."),s.qZA()())}Yw.\u0275fac=function(t){return new(t||Yw)(s.Y36(ap))},Yw.\u0275cmp=s.Xpm({type:Yw,selectors:[["app-tutorial-details"]],inputs:{tutorial:"tutorial"},outputs:{refreshList:"refreshList"},features:[s.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","title"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","text","id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["class","badge badge-primary mr-2",3,"click",4,"ngIf"],[1,"badge","badge-danger","mr-2",3,"click"],["type","submit",1,"badge","badge-success",3,"click"],[1,"badge","badge-primary","mr-2",3,"click"]],template:function(t,e){1&t&&(s.YNc(0,vG,25,6,"div",0),s.YNc(1,bG,4,0,"div",1)),2&t&&(s.Q6J("ngIf",e.currentTutorial),s.xp6(1),s.Q6J("ngIf",!e.currentTutorial))},dependencies:[pn,Cy,Ud,hu,vy,sl,dp],styles:[".edit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]});class Qw{constructor(t){this.tutorialService=t,this.currentIndex=-1,this.title=""}ngOnInit(){this.retrieveTutorials()}refreshList(){this.currentTutorial=void 0,this.currentIndex=-1,this.retrieveTutorials()}retrieveTutorials(){this.tutorialService.getAll().snapshotChanges().pipe((0,gt.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()})))).subscribe(t=>{this.tutorials=t})}setActiveTutorial(t,e){this.currentTutorial=t,this.currentIndex=e}removeAllTutorials(){this.tutorialService.deleteAll().then(()=>this.refreshList()).catch(t=>console.log(t))}}Qw.\u0275fac=function(t){return new(t||Qw)(s.Y36(ap))},Qw.\u0275cmp=s.Xpm({type:Qw,selectors:[["app-tutorials-list"]],decls:11,vars:3,consts:[[1,"list","row"],[1,"col-md-6"],[1,"list-group"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[1,"m-3","btn","btn-sm","btn-danger",3,"click"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"tutorial","refreshList"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h4"),s._uU(3,"Tutorials List"),s.qZA(),s.TgZ(4,"ul",2),s.YNc(5,wG,2,3,"li",3),s.qZA(),s.TgZ(6,"button",4),s.NdJ("click",function(){return e.removeAllTutorials()}),s._uU(7," Remove All "),s.qZA()(),s.TgZ(8,"div",1),s.YNc(9,CG,2,1,"div",5),s.YNc(10,TG,4,0,"div",5),s.qZA()()),2&t&&(s.xp6(5),s.Q6J("ngForOf",e.tutorials),s.xp6(4),s.Q6J("ngIf",e.currentTutorial),s.xp6(1),s.Q6J("ngIf",!e.currentTutorial))},dependencies:[Ln,pn,Yw],styles:[".list[_ngcontent-%COMP%]{text-align:left;max-width:750px;margin:auto}"]});class EG{}class DF{static anyToDate(t){return new Date(String(t))}}class xg{constructor(t){this.db=t,this.dbPath="/oracle",this.oracleList=t.list(this.dbPath)}getAll(){return this.oracleList}create(t){return this.oracleList.push(t)}update(t,e){return this.oracleList.update(t,e)}delete(t){return this.oracleList.remove(t)}deleteAll(){return this.oracleList.remove()}}xg.\u0275fac=function(t){return new(t||xg)(s.LFG(yy))},xg.\u0275prov=s.Yz7({token:xg,factory:xg.\u0275fac,providedIn:"root"});class Ty{constructor(t){this.db=t,this.dbPath="/invoice",this.invoiceList=t.list(this.dbPath)}getAll(){return this.invoiceList}create(t){return this.invoiceList.push(t)}update(t,e){return this.invoiceList.update(t,e)}delete(t){return this.invoiceList.remove(t)}deleteAll(){return this.invoiceList.remove()}}Ty.\u0275fac=function(t){return new(t||Ty)(s.LFG(yy))},Ty.\u0275prov=s.Yz7({token:Ty,factory:Ty.\u0275fac,providedIn:"root"});let Jw=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(sl,8),s.Y36(s.sBO))},n.\u0275dir=s.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&s.NdJ("input",function(o){return i.onInput(o)}),2&e&&s.ekj("p-filled",i.filled)}}),n})(),Xw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();class xF{}class SG{}const zd="*";function eC(n,t){return{type:7,name:n,definitions:t,options:{}}}function ol(n,t=null){return{type:4,styles:t,timings:n}}function kF(n,t=null){return{type:2,steps:n,options:t}}function ns(n){return{type:6,styles:n,offset:null}}function AF(n,t,e){return{type:0,name:n,styles:t,options:e}}function oc(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function hI(n,t=null){return{type:8,animation:n,options:t}}function IG(n=null){return{type:9,options:n}}function MF(n,t=null){return{type:10,animation:n,options:t}}function DG(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function RF(n){Promise.resolve().then(n)}class tC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){RF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class OF{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const o=this.players.length;0==o?RF(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++e==o&&this._onFinish()}),l.onDestroy(()=>{++i==o&&this._onDestroy()}),l.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const xG=["container"],kG=["inputfield"],AG=["contentWrapper"];function MG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"i",8),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.clear())}),s.qZA()}}function RG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(r){s.CHM(e),s.oxw();const o=s.MAs(1),l=s.oxw();return s.KtG(l.onButtonClick(r,o))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("icon",e.icon)("disabled",e.disabled),s.uIk("aria-label",e.iconAriaLabel)}}function OG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"input",4,5),s.NdJ("focus",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onInputFocus(r))})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onInputKeydown(r))})("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onInputClick())})("blur",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onInputBlur(r))})("input",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onUserInput(r))}),s.qZA(),s.YNc(2,MG,1,0,"i",6),s.YNc(3,RG,1,3,"button",7)}if(2&n){const e=s.oxw();s.Tol(e.inputStyleClass),s.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),s.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),s.xp6(2),s.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),s.xp6(1),s.Q6J("ngIf",e.showIcon)}}function PG(n,t){1&n&&s.GkF(0)}function NG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",30),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onPrevButtonClick(r))}),s._UZ(1,"span",31),s.qZA()}}function LG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",32),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.switchToMonthView(r))})("keydown",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onContainerButtonKeydown(r))}),s._uU(1),s.qZA()}if(2&n){const e=s.oxw().$implicit,i=s.oxw(3);s.Q6J("disabled",i.switchViewButtonDisabled()),s.xp6(1),s.hij(" ",i.getMonthName(e.month)," ")}}function FG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",33),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.switchToYearView(r))})("keydown",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onContainerButtonKeydown(r))}),s._uU(1),s.qZA()}if(2&n){const e=s.oxw().$implicit,i=s.oxw(3);s.Q6J("disabled",i.switchViewButtonDisabled()),s.xp6(1),s.hij(" ",i.getYear(e)," ")}}function VG(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(5);s.xp6(1),s.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function BG(n,t){1&n&&s.GkF(0)}const PF=function(n){return{$implicit:n}};function HG(n,t){if(1&n&&(s.TgZ(0,"span",34),s.YNc(1,VG,2,2,"ng-container",13),s.YNc(2,BG,1,0,"ng-container",35),s.qZA()),2&n){const e=s.oxw(4);s.xp6(1),s.Q6J("ngIf",!e.decadeTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",s.VKq(3,PF,e.yearPickerValues))}}function UG(n,t){if(1&n&&(s.TgZ(0,"th",41)(1,"span"),s._uU(2),s.qZA()()),2&n){const e=s.oxw(5);s.xp6(2),s.Oqu(e.getTranslation("weekHeader"))}}function zG(n,t){if(1&n&&(s.TgZ(0,"th",42)(1,"span"),s._uU(2),s.qZA()()),2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e)}}function GG(n,t){if(1&n&&(s.TgZ(0,"td",45)(1,"span",46),s._uU(2),s.qZA()()),2&n){const e=s.oxw().index,i=s.oxw(2).$implicit;s.xp6(2),s.hij(" ",i.weekNumbers[e]," ")}}function jG(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(e.day)}}function $G(n,t){1&n&&s.GkF(0)}const NF=function(n,t){return{"p-highlight":n,"p-disabled":t}};function ZG(n,t){if(1&n){const e=s.EpF();s.ynx(0),s.TgZ(1,"span",48),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw().$implicit,l=s.oxw(6);return s.KtG(l.onDateSelect(r,o))})("keydown",function(r){s.CHM(e);const o=s.oxw().$implicit,l=s.oxw(3).index,d=s.oxw(3);return s.KtG(d.onDateCellKeydown(r,o,l))}),s.YNc(2,jG,2,1,"ng-container",13),s.YNc(3,$G,1,0,"ng-container",35),s.qZA(),s.BQk()}if(2&n){const e=s.oxw().$implicit,i=s.oxw(6);s.xp6(1),s.Q6J("ngClass",s.WLB(4,NF,i.isSelected(e),!e.selectable)),s.xp6(1),s.Q6J("ngIf",!i.dateTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",s.VKq(7,PF,e))}}const qG=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function WG(n,t){if(1&n&&(s.TgZ(0,"td",47),s.YNc(1,ZG,4,9,"ng-container",13),s.qZA()),2&n){const e=t.$implicit,i=s.oxw(6);s.Q6J("ngClass",s.WLB(2,qG,e.otherMonth,e.today)),s.xp6(1),s.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function KG(n,t){if(1&n&&(s.TgZ(0,"tr"),s.YNc(1,GG,3,1,"td",43),s.YNc(2,WG,2,5,"td",44),s.qZA()),2&n){const e=t.$implicit,i=s.oxw(5);s.xp6(1),s.Q6J("ngIf",i.showWeek),s.xp6(1),s.Q6J("ngForOf",e)}}function YG(n,t){if(1&n&&(s.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),s.YNc(4,UG,3,1,"th",38),s.YNc(5,zG,3,1,"th",39),s.qZA()(),s.TgZ(6,"tbody"),s.YNc(7,KG,3,2,"tr",40),s.qZA()()()),2&n){const e=s.oxw().$implicit,i=s.oxw(3);s.xp6(4),s.Q6J("ngIf",i.showWeek),s.xp6(1),s.Q6J("ngForOf",i.weekDays),s.xp6(2),s.Q6J("ngForOf",e.dates)}}function QG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",20)(1,"div",21),s.YNc(2,NG,2,0,"button",22),s.TgZ(3,"div",23),s.YNc(4,LG,2,2,"button",24),s.YNc(5,FG,2,2,"button",25),s.YNc(6,HG,3,5,"span",26),s.qZA(),s.TgZ(7,"button",27),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onNextButtonClick(r))}),s._UZ(8,"span",28),s.qZA()(),s.YNc(9,YG,8,3,"div",29),s.qZA()}if(2&n){const e=t.index,i=s.oxw(3);s.xp6(2),s.Q6J("ngIf",0===e),s.xp6(2),s.Q6J("ngIf","date"===i.currentView),s.xp6(1),s.Q6J("ngIf","year"!==i.currentView),s.xp6(1),s.Q6J("ngIf","year"===i.currentView),s.xp6(1),s.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),s.xp6(2),s.Q6J("ngIf","date"===i.currentView)}}function JG(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",51),s.NdJ("click",function(r){const l=s.CHM(e).index,d=s.oxw(4);return s.KtG(d.onMonthSelect(r,l))})("keydown",function(r){const l=s.CHM(e).index,d=s.oxw(4);return s.KtG(d.onMonthCellKeydown(r,l))}),s._uU(1),s.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=s.oxw(4);s.Q6J("ngClass",s.WLB(2,NF,r.isMonthSelected(i),r.isMonthDisabled(i))),s.xp6(1),s.hij(" ",e," ")}}function XG(n,t){if(1&n&&(s.TgZ(0,"div",49),s.YNc(1,JG,2,5,"span",50),s.qZA()),2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.monthPickerValues())}}const ej=function(n){return{"p-highlight":n}};function tj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",54),s.NdJ("click",function(r){const l=s.CHM(e).$implicit,d=s.oxw(4);return s.KtG(d.onYearSelect(r,l))})("keydown",function(r){const l=s.CHM(e).$implicit,d=s.oxw(4);return s.KtG(d.onYearCellKeydown(r,l))}),s._uU(1),s.qZA()}if(2&n){const e=t.$implicit,i=s.oxw(4);s.Q6J("ngClass",s.VKq(2,ej,i.isYearSelected(e))),s.xp6(1),s.hij(" ",e," ")}}function nj(n,t){if(1&n&&(s.TgZ(0,"div",52),s.YNc(1,tj,2,4,"span",53),s.qZA()),2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.yearPickerValues())}}function ij(n,t){if(1&n&&(s.ynx(0),s.TgZ(1,"div",16),s.YNc(2,QG,10,7,"div",17),s.qZA(),s.YNc(3,XG,2,1,"div",18),s.YNc(4,nj,2,1,"div",19),s.BQk()),2&n){const e=s.oxw(2);s.xp6(2),s.Q6J("ngForOf",e.months),s.xp6(1),s.Q6J("ngIf","month"===e.currentView),s.xp6(1),s.Q6J("ngIf","year"===e.currentView)}}function rj(n,t){1&n&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function sj(n,t){1&n&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function oj(n,t){if(1&n&&(s.TgZ(0,"div",60)(1,"span"),s._uU(2),s.qZA()()),2&n){const e=s.oxw(3);s.xp6(2),s.Oqu(e.timeSeparator)}}function aj(n,t){1&n&&(s.ynx(0),s._uU(1,"0"),s.BQk())}function lj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",65)(1,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.incrementSecond(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.incrementSecond(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(2,"span",58),s.qZA(),s.TgZ(3,"span"),s.YNc(4,aj,2,0,"ng-container",13),s._uU(5),s.qZA(),s.TgZ(6,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.decrementSecond(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.decrementSecond(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(7,"span",59),s.qZA()()}if(2&n){const e=s.oxw(3);s.xp6(4),s.Q6J("ngIf",e.currentSecond<10),s.xp6(1),s.Oqu(e.currentSecond)}}function cj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",66)(1,"button",67),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.toggleAMPM(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.toggleAMPM(r))}),s._UZ(2,"span",58),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.TgZ(5,"button",67),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.toggleAMPM(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.toggleAMPM(r))}),s._UZ(6,"span",59),s.qZA()()}if(2&n){const e=s.oxw(3);s.xp6(4),s.Oqu(e.pm?"PM":"AM")}}function uj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",55)(1,"div",56)(2,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.incrementHour(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.incrementHour(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(3,"span",58),s.qZA(),s.TgZ(4,"span"),s.YNc(5,rj,2,0,"ng-container",13),s._uU(6),s.qZA(),s.TgZ(7,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.decrementHour(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.decrementHour(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(8,"span",59),s.qZA()(),s.TgZ(9,"div",60)(10,"span"),s._uU(11),s.qZA()(),s.TgZ(12,"div",61)(13,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.incrementMinute(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.incrementMinute(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(14,"span",58),s.qZA(),s.TgZ(15,"span"),s.YNc(16,sj,2,0,"ng-container",13),s._uU(17),s.qZA(),s.TgZ(18,"button",57),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.decrementMinute(r))})("keydown.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.decrementMinute(r))})("mousedown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onTimePickerElementMouseLeave())}),s._UZ(19,"span",59),s.qZA()(),s.YNc(20,oj,3,1,"div",62),s.YNc(21,lj,8,2,"div",63),s.YNc(22,cj,7,1,"div",64),s.qZA()}if(2&n){const e=s.oxw(2);s.xp6(5),s.Q6J("ngIf",e.currentHour<10),s.xp6(1),s.Oqu(e.currentHour),s.xp6(5),s.Oqu(e.timeSeparator),s.xp6(5),s.Q6J("ngIf",e.currentMinute<10),s.xp6(1),s.Oqu(e.currentMinute),s.xp6(3),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf",e.showSeconds),s.xp6(1),s.Q6J("ngIf","12"==e.hourFormat)}}const LF=function(n){return[n]};function dj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",68)(1,"button",69),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTodayButtonClick(r))}),s.qZA(),s.TgZ(2,"button",69),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onContainerButtonKeydown(r))})("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onClearButtonClick(r))}),s.qZA()()}if(2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("label",e.getTranslation("today"))("ngClass",s.VKq(4,LF,e.todayButtonStyleClass)),s.xp6(1),s.Q6J("label",e.getTranslation("clear"))("ngClass",s.VKq(6,LF,e.clearButtonStyleClass))}}function hj(n,t){1&n&&s.GkF(0)}const pj=function(n,t,e,i,r,o){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":o}},FF=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},fj=function(n){return{value:"visibleTouchUI",params:n}},gj=function(n){return{value:"visible",params:n}};function mj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",10,11),s.NdJ("@overlayAnimation.start",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayAnimationDone(r))})("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayClick(r))}),s.Hsn(2),s.YNc(3,PG,1,0,"ng-container",12),s.YNc(4,ij,5,3,"ng-container",13),s.YNc(5,uj,23,8,"div",14),s.YNc(6,dj,3,8,"div",15),s.Hsn(7,1),s.YNc(8,hj,1,0,"ng-container",12),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngStyle",e.panelStyle)("ngClass",s.HTZ(11,pj,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?s.VKq(21,fj,s.WLB(18,FF,e.showTransitionOptions,e.hideTransitionOptions)):s.VKq(26,gj,s.WLB(23,FF,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),s.xp6(3),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",!e.timeOnly),s.xp6(1),s.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),s.xp6(1),s.Q6J("ngIf",e.showButtonBar),s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const _j=[[["p-header"]],[["p-footer"]]],yj=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},vj=["p-header","p-footer"],bj={provide:Sr,useExisting:(0,s.Gpc)(()=>pI),multi:!0};let pI=(()=>{class n{constructor(e,i,r,o,l,d){this.el=e,this.renderer=i,this.cd=r,this.zone=o,this.config=l,this.overlayService=d,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClose=new s.vpe,this.onSelect=new s.vpe,this.onClear=new s.vpe,this.onInput=new s.vpe,this.onTodayClick=new s.vpe,this.onClearClick=new s.vpe,this.onMonthChange=new s.vpe,this.onYearChange=new s.vpe,this.onClickOutside=new s.vpe,this.onShow=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(f,y){return"12"==this.hourFormat?12===f?y?12:0:y?f+12:f:f}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),o=parseInt(i[1]);this.populateYearOptions(r,o)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Ol();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=ee.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(Ye.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let o=e+r,l=i;o>11&&(o=o%11-1,l=i+1),this.months.push(this.createMonth(o,l))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],o=this.getFirstDayOfMonthIndex(e,i),l=this.getDaysCountInMonth(e,i),d=this.getDaysCountInPrevMonth(e,i),f=1,y=new Date,w=[],E=Math.ceil((l+o)/7);for(let M=0;M<E;M++){let N=[];if(0==M){for(let j=d-o+1;j<=d;j++){let Q=this.getPreviousMonthAndYear(e,i);N.push({day:j,month:Q.month,year:Q.year,otherMonth:!0,today:this.isToday(y,j,Q.month,Q.year),selectable:this.isSelectable(j,Q.month,Q.year,!0)})}let B=7-N.length;for(let j=0;j<B;j++)N.push({day:f,month:e,year:i,today:this.isToday(y,f,e,i),selectable:this.isSelectable(f,e,i,!1)}),f++}else for(let B=0;B<7;B++){if(f>l){let j=this.getNextMonthAndYear(e,i);N.push({day:f-l,month:j.month,year:j.year,otherMonth:!0,today:this.isToday(y,f-l,j.month,j.year),selectable:this.isSelectable(f-l,j.month,j.year,!0)})}else N.push({day:f,month:e,year:i,today:this.isToday(y,f,e,i),selectable:this.isSelectable(f,e,i,!1)});f++}this.showWeek&&w.push(this.getWeekNumber(new Date(N[0].year,N[0].month,N[0].day))),r.push(N)}return{month:e,year:i,dates:r,weekNumbers:w}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,o)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],o=this.value[1];!o&&i.getTime()>=r.getTime()?o=i:(r=i,o=null),this.updateModel([r,o])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let o=r.getDay()+this.getSundayIndex();return o>=7?o-7:o}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,o;return 0===e?(r=11,o=i-1):(r=e-1,o=i),{month:r,year:o}}getNextMonthAndYear(e,i){let r,o;return 11===e?(r=0,o=i+1):(r=e+1,o=i),{month:r,year:o}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],o=new Date(this.currentYear,e,1);return o>=i&&o<=(r??i)}return!1}isMonthDisabled(e){for(let i=1;i<this.getDaysCountInMonth(e,this.currentYear)+1;i++)if(this.isSelectable(i,e,this.currentYear,!1))return!1;return!0}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let l=new Date(r.year,r.month,r.day);return e.getTime()<=l.getTime()&&i.getTime()>=l.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,o){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===o}isSelectable(e,i,r,o){let l=!0,d=!0,f=!0,y=!0;return!(o&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(l=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(d=!1),this.disabledDates&&(f=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),l&&d&&f&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let o of this.disabledDates)if(o.getFullYear()===r&&o.getMonth()===i&&o.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let l=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(l)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(ee.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const o=e.currentTarget,l=o.parentElement;switch(e.which){case 40:{o.tabIndex="-1";let d=ee.index(l),f=l.parentElement.nextElementSibling;f?ee.hasClass(f.children[d].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(f.children[d].children[0].tabIndex="0",f.children[d].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{o.tabIndex="-1";let d=ee.index(l),f=l.parentElement.previousElementSibling;if(f){let y=f.children[d].children[0];ee.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{o.tabIndex="-1";let d=l.previousElementSibling;if(d){let f=d.children[0];ee.hasClass(f,"p-disabled")||ee.hasClass(f.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(f.tabIndex="0",f.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{o.tabIndex="-1";let d=l.nextElementSibling;if(d){let f=d.children[0];ee.hasClass(f,"p-disabled")?this.navigateToMonth(!1,r):(f.tabIndex="0",f.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,l=ee.index(r);let d=o[40===e.which?l+3:l-3];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,l=ee.index(r);let d=o[40===e.which?l+2:l-2];d&&(d.tabIndex="0",d.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let d=r.previousElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let d=r.nextElementSibling;d?(d.tabIndex="0",d.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let o=ee.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),l=o[o.length-1];l.tabIndex="0",l.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let o=ee.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");o.tabIndex="0",o.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?ee.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():ee.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=ee.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=ee.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=ee.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),o=ee.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(l=>l.tabIndex=-1),i=o||r[0],0===r.length&&ee.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if("year"===this.currentView){let r=ee.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),o=ee.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(l=>l.tabIndex=-1),i=o||r[0],0===r.length&&ee.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(d=>d.tabIndex=-1)}else if(i=ee.findSingle(e,"span.p-highlight"),!i){let r=ee.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||ee.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||i.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=ee.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,o){let l=this.value;const d=this.convertTo24Hour(e,o);this.isRangeSelection()&&(l=this.value[1]||this.value[0]),this.isMultipleSelection()&&(l=this.value[this.value.length-1]);const f=l?l.toDateString():null;return!(this.minDate&&f&&this.minDate.toDateString()===f&&(this.minDate.getHours()>d||this.minDate.getHours()===d&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&f&&this.maxDate.toDateString()===f&&(this.maxDate.getHours()<d||this.maxDate.getHours()===d&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,o=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(o=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,o)&&(this.currentHour=r,this.pm=o),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,o){let l=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,o),this.cd.markForCheck()},l),r){case 0:1===o?this.incrementHour(e):this.decrementHour(e);break;case 1:1===o?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===o?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let o of r)i.push(this.parseDateTime(o.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let o=0;o<r.length;o++)i[o]=this.parseDateTime(r[o].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const o=this.getDateFormat();if(this.showTime){let l="12"==this.hourFormat?r.pop():null,d=r.pop();i=this.parseDate(r.join(" "),o),this.populateTime(i,d,l)}else i=this.parseDate(e,o)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let o=this.parseTime(i);e.setHours(o.hour),e.setMinutes(o.minute),e.setSeconds(o.second)}isValidDate(e){return e instanceof Date&&Ge.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?xn.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):xn.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&xn.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ee.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=ee.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=ee.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=ee.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",ee.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):ee.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),ee.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),ee.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(ee.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(ee.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||ee.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Ye.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const o=w=>{const E=r+1<i.length&&i.charAt(r+1)===w;return E&&r++,E},l=(w,E,M)=>{let N=""+E;if(o(w))for(;N.length<M;)N="0"+N;return N},d=(w,E,M,N)=>o(w)?N[E]:M[E];let f="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||o("'")?f+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":f+=l("d",e.getDate(),2);break;case"D":f+=d("D",e.getDay(),this.getTranslation(Ye.DAY_NAMES_SHORT),this.getTranslation(Ye.DAY_NAMES));break;case"o":f+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=l("m",e.getMonth()+1,2);break;case"M":f+=d("M",e.getMonth(),this.getTranslation(Ye.MONTH_NAMES_SHORT),this.getTranslation(Ye.MONTH_NAMES));break;case"y":f+=o("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":f+=e.getTime();break;case"!":f+=1e4*e.getTime()+this.ticksTo1970;break;case"'":o("'")?f+="'":y=!0;break;default:f+=i.charAt(r)}return f}formatTime(e){if(!e)return"";let i="",r=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=o<10?"0"+o:o,this.showSeconds&&(i+=":",i+=l<10?"0"+l:l),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let o=parseInt(i[0]),l=parseInt(i[1]),d=this.showSeconds?parseInt(i[2]):null;if(isNaN(o)||isNaN(l)||o>23||l>59||"12"==this.hourFormat&&o>12||this.showSeconds&&(isNaN(d)||d>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==o&&this.pm?o+=12:!this.pm&&12===o&&(o-=12)),{hour:o,minute:l,second:d}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,o,l,B,d=0,f="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,w=-1,E=-1,M=-1,N=!1,j=Ze=>{let et=r+1<i.length&&i.charAt(r+1)===Ze;return et&&r++,et},Q=Ze=>{let et=j(Ze),vt="@"===Ze?14:"!"===Ze?20:"y"===Ze&&et?4:"o"===Ze?3:2,ln=new RegExp("^\\d{"+("y"===Ze?vt:1)+","+vt+"}"),yi=e.substring(d).match(ln);if(!yi)throw"Missing number at position "+d;return d+=yi[0].length,parseInt(yi[0],10)},Ne=(Ze,et,vt)=>{let Ct=-1,ln=j(Ze)?vt:et,yi=[];for(let nr=0;nr<ln.length;nr++)yi.push([nr,ln[nr]]);yi.sort((nr,no)=>-(nr[1].length-no[1].length));for(let nr=0;nr<yi.length;nr++){let no=yi[nr][1];if(e.substr(d,no.length).toLowerCase()===no.toLowerCase()){Ct=yi[nr][0],d+=no.length;break}}if(-1!==Ct)return Ct+1;throw"Unknown name at position "+d},$e=()=>{if(e.charAt(d)!==i.charAt(r))throw"Unexpected literal at position "+d;d++};for("month"===this.view&&(E=1),r=0;r<i.length;r++)if(N)"'"!==i.charAt(r)||j("'")?$e():N=!1;else switch(i.charAt(r)){case"d":E=Q("d");break;case"D":Ne("D",this.getTranslation(Ye.DAY_NAMES_SHORT),this.getTranslation(Ye.DAY_NAMES));break;case"o":M=Q("o");break;case"m":w=Q("m");break;case"M":w=Ne("M",this.getTranslation(Ye.MONTH_NAMES_SHORT),this.getTranslation(Ye.MONTH_NAMES));break;case"y":y=Q("y");break;case"@":B=new Date(Q("@")),y=B.getFullYear(),w=B.getMonth()+1,E=B.getDate();break;case"!":B=new Date((Q("!")-this.ticksTo1970)/1e4),y=B.getFullYear(),w=B.getMonth()+1,E=B.getDate();break;case"'":j("'")?$e():N=!0;break;default:$e()}if(d<e.length&&(l=e.substr(d),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=f?0:-100)),M>-1)for(w=1,E=M;o=this.getDaysCountInMonth(y,w-1),!(E<=o);)w++,E-=o;if("year"===this.view&&(w=-1===w?1:w,E=-1===E?1:E),B=this.daylightSavingAdjust(new Date(y,w-1,E)),B.getFullYear()!==y||B.getMonth()+1!==w||B.getDate()!==E)throw"Invalid date";return B}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,o)=>-1*r.breakpoint.localeCompare(o.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:o,numMonths:l}=i[r],d=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let f=l;f<this.numberOfMonths;f++)d+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${f+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${o}) {\n                            ${d}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Gv(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return ee.hasClass(e.target,"p-datepicker-prev")||ee.hasClass(e.target,"p-datepicker-prev-icon")||ee.hasClass(e.target,"p-datepicker-next")||ee.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!ee.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&xn.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(R),s.Y36(I))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(xG,5),s.Gf(kG,5),s.Gf(AG,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first),s.iGM(r=s.CRH())&&(i.inputfieldViewChild=r.first),s.iGM(r=s.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&s.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[s._Bn([bj])],ngContentSelectors:vj,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(s.F$t(_j),s.TgZ(0,"span",0,1),s.YNc(2,OG,4,17,"ng-template",2),s.YNc(3,mj,9,28,"div",3),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass",s.l5B(6,yj,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),s.xp6(2),s.Q6J("ngIf",!i.inline),s.xp6(1),s.Q6J("ngIf",i.inline||i.overlayVisible))},dependencies:[pt,Ln,pn,wn,Tn,_d,ys],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[eC("overlayAnimation",[AF("visibleTouchUI",ns({transform:"translate(-50%,-50%)",opacity:1})),oc("void => visible",[ns({opacity:0,transform:"scaleY(0.8)"}),ol("{{showTransitionParams}}",ns({opacity:1,transform:"*"}))]),oc("visible => void",[ol("{{hideTransitionParams}}",ns({opacity:0}))]),oc("void => visibleTouchUI",[ns({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),ol("{{showTransitionParams}}")]),oc("visibleTouchUI => void",[ol("{{hideTransitionParams}}",ns({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),VF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,yd,_e,vs,yd,_e]}),n})();const wj=["overlay"],Cj=["content"];function Tj(n,t){1&n&&s.GkF(0)}const Ej=function(n,t,e){return{showTransitionParams:n,hideTransitionParams:t,transform:e}},Sj=function(n){return{value:"visible",params:n}},Ij=function(n){return{mode:n}},Dj=function(n){return{$implicit:n}};function xj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",1,3),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onOverlayContentAnimationDone(r))}),s.Hsn(2),s.YNc(3,Tj,1,0,"ng-container",4),s.qZA()}if(2&n){const e=s.oxw(2);s.Tol(e.contentStyleClass),s.Q6J("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",s.VKq(11,Sj,s.kEZ(7,Ej,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),s.xp6(3),s.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",s.VKq(15,Dj,s.VKq(13,Ij,e.overlayMode)))}}const kj=function(n,t,e,i,r,o,l,d,f,y,w,E,M,N){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":n,"p-overlay-center":t,"p-overlay-top":e,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":o,"p-overlay-bottom-start":l,"p-overlay-bottom-end":d,"p-overlay-left":f,"p-overlay-left-start":y,"p-overlay-left-end":w,"p-overlay-right":E,"p-overlay-right-start":M,"p-overlay-right-end":N}};function Aj(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",1,2),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayClick(r))}),s.YNc(2,xj,4,17,"div",0),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.styleClass),s.Q6J("ngStyle",e.style)("ngClass",s.rFY(5,kj,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),s.xp6(2),s.Q6J("ngIf",e.visible)}}const Mj=["*"],Rj={provide:Sr,useExisting:(0,s.Gpc)(()=>cM),multi:!0},Oj=hI([ns({transform:"{{transform}}",opacity:0}),ol("{{showTransitionParams}}")]),Pj=hI([ol("{{hideTransitionParams}}",ns({transform:"{{transform}}",opacity:0}))]);let cM=(()=>{class n{constructor(e,i,r,o,l,d){this.document=e,this.el=i,this.renderer=r,this.config=o,this.overlayService=l,this.zone=d,this.visibleChange=new s.vpe,this.onBeforeShow=new s.vpe,this.onShow=new s.vpe,this.onBeforeHide=new s.vpe,this.onHide=new s.vpe,this.onAnimationStart=new s.vpe,this.onAnimationDone=new s.vpe,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return Ge.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return Ge.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return Ge.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return Ge.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return ee.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&ee.focus(this.targetEl),this.modal&&ee.addClass(this.document?.body,"p-overflow-hidden")}hide(e,i=!1){this.visible&&(this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&ee.focus(this.targetEl),this.modal&&ee.removeClass(this.document?.body,"p-overflow-hidden"))}alignOverlay(){!this.modal&&ee.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(e){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&xn.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),ee.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&ee.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const i=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),ee.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),xn.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,i){this[e].emit(i),this.options&&this.options[e]&&this.options[e](i),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Gv(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!ee.isTouchDevice()}):!ee.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{this.overlayOptions.hideOnEscape&&27===e.keyCode&&(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!ee.isTouchDevice()}):!ee.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(ee.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),xn.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(oe),s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(R),s.Y36(I),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-overlay"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(wj,5),s.Gf(Cj,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.overlayViewChild=r.first),s.iGM(r=s.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[s._Bn([Rj])],ngContentSelectors:Mj,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(s.F$t(),s.YNc(0,Aj,3,20,"div",0)),2&e&&s.Q6J("ngIf",i.modalVisible)},dependencies:[pt,pn,wn,Tn],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[eC("overlayContentAnimation",[oc(":enter",[MF(Oj)]),oc(":leave",[MF(Pj)])])]},changeDetection:0}),n})(),fI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,_e,_e]}),n})();const Nj=["element"],Lj=["content"];function Fj(n,t){1&n&&s.GkF(0)}const uM=function(n,t){return{$implicit:n,options:t}};function Vj(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Fj,1,0,"ng-container",7),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",s.WLB(2,uM,e.loadedItems,e.getContentOptions()))}}function Bj(n,t){1&n&&s.GkF(0)}function Hj(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Bj,1,0,"ng-container",7),s.BQk()),2&n){const e=t.$implicit,i=t.index,r=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",s.WLB(2,uM,e,r.getOptions(i)))}}const Uj=function(n){return{"p-scroller-loading":n}};function zj(n,t){if(1&n&&(s.TgZ(0,"div",8,9),s.YNc(2,Hj,2,5,"ng-container",10),s.qZA()),2&n){const e=s.oxw(2);s.Q6J("ngClass",s.VKq(4,Uj,e.d_loading))("ngStyle",e.contentStyle),s.xp6(2),s.Q6J("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function Gj(n,t){if(1&n&&s._UZ(0,"div",11),2&n){const e=s.oxw(2);s.Q6J("ngStyle",e.spacerStyle)}}function jj(n,t){1&n&&s.GkF(0)}const $j=function(n){return{numCols:n}},BF=function(n){return{options:n}};function Zj(n,t){if(1&n&&(s.ynx(0),s.YNc(1,jj,1,0,"ng-container",7),s.BQk()),2&n){const e=t.index,i=s.oxw(4);s.xp6(1),s.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",s.VKq(4,BF,i.getLoaderOptions(e,i.both&&s.VKq(2,$j,i._numItemsInViewport.cols))))}}function qj(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Zj,2,6,"ng-container",14),s.BQk()),2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",e.loaderArr)}}function Wj(n,t){1&n&&s.GkF(0)}const Kj=function(){return{styleClass:"p-scroller-loading-icon"}};function Yj(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Wj,1,0,"ng-container",7),s.BQk()),2&n){const e=s.oxw(4);s.xp6(1),s.Q6J("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",s.VKq(3,BF,s.DdM(2,Kj)))}}function Qj(n,t){1&n&&s._UZ(0,"i",16)}function Jj(n,t){if(1&n&&(s.YNc(0,Yj,2,5,"ng-container",0),s.YNc(1,Qj,1,0,"ng-template",null,15,s.W1O)),2&n){const e=s.MAs(2),i=s.oxw(3);s.Q6J("ngIf",i.loaderIconTemplate)("ngIfElse",e)}}const Xj=function(n){return{"p-component-overlay":n}};function e4(n,t){if(1&n&&(s.TgZ(0,"div",12),s.YNc(1,qj,2,1,"ng-container",0),s.YNc(2,Jj,3,2,"ng-template",null,13,s.W1O),s.qZA()),2&n){const e=s.MAs(3),i=s.oxw(2);s.Q6J("ngClass",s.VKq(3,Xj,!i.loaderTemplate)),s.xp6(1),s.Q6J("ngIf",i.loaderTemplate)("ngIfElse",e)}}const t4=function(n,t,e){return{"p-scroller":!0,"p-scroller-inline":n,"p-both-scroll":t,"p-horizontal-scroll":e}};function n4(n,t){if(1&n){const e=s.EpF();s.ynx(0),s.TgZ(1,"div",2,3),s.NdJ("scroll",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onContainerScroll(r))}),s.YNc(3,Vj,2,5,"ng-container",0),s.YNc(4,zj,3,6,"ng-template",null,4,s.W1O),s.YNc(6,Gj,1,1,"div",5),s.YNc(7,e4,4,5,"div",6),s.qZA(),s.BQk()}if(2&n){const e=s.MAs(5),i=s.oxw();s.xp6(1),s.Tol(i._styleClass),s.Q6J("ngStyle",i._style)("ngClass",s.kEZ(10,t4,i.inline,i.both,i.horizontal)),s.uIk("id",i._id)("tabindex",i.tabindex),s.xp6(2),s.Q6J("ngIf",i.contentTemplate)("ngIfElse",e),s.xp6(3),s.Q6J("ngIf",i._showSpacer),s.xp6(1),s.Q6J("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function r4(n,t){1&n&&s.GkF(0)}const s4=function(n,t){return{rows:n,columns:t}};function o4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,r4,1,0,"ng-container",7),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",s.WLB(5,uM,e.items,s.WLB(2,s4,e._items,e.loadedColumns)))}}function a4(n,t){if(1&n&&(s.Hsn(0),s.YNc(1,o4,2,8,"ng-container",17)),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.contentTemplate)}}const l4=["*"];let dM=(()=>{class n{constructor(e,i){this.cd=e,this.zone=i,this.onLazyLoad=new s.vpe,this.onScroll=new s.vpe,this.onScrollIndexChange=new s.vpe,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.isRangeChanged=!1,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let i=!1;if(e.loading){const{previousValue:r,currentValue:o}=e.loading;this.lazy&&r!==o&&o!==this.d_loading&&(this.d_loading=o,i=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:o}=e.numToleratedItems;r!==o&&o!==this.d_numToleratedItems&&(this.d_numToleratedItems=o)}if(e.options){const{previousValue:r,currentValue:o}=e.options;this.lazy&&r?.loading!==o?.loading&&o?.loading!==this.d_loading&&(this.d_loading=o.loading,i=!0),r?.numToleratedItems!==o?.numToleratedItems&&o?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=o.numToleratedItems)}this.initialized&&!i&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){ee.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=ee.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=ee.getHeight(this.elementViewChild.nativeElement),this.defaultContentWidth=ee.getWidth(this.contentEl),this.defaultContentHeight=ee.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||ee.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),o=this.getContentPosition(),l=(w=0,E)=>w<=E?0:w,d=(w,E,M)=>w*E+M,f=(w=0,E=0)=>this.scrollTo({left:w,top:E,behavior:i});let y=0;this.both?(y={rows:l(e[0],r[0]),cols:l(e[1],r[1])},f(d(y.cols,this._itemSize[1],o.left),d(y.rows,this._itemSize[0],o.top))):(y=l(e,r),this.horizontal?f(d(y,this._itemSize,o.left),0):f(0,d(y,this._itemSize,o.top))),this.isRangeChanged=this.first!==y,this.first=y}scrollInView(e,i,r="auto"){if(i){const{first:o,viewport:l}=this.getRenderedRange(),d=(w=0,E=0)=>this.scrollTo({left:w,top:E,behavior:r}),y="to-end"===i;if("to-start"===i){if(this.both)l.first.rows-o.rows>e[0]?d(l.first.cols*this._itemSize[1],(l.first.rows-1)*this._itemSize[0]):l.first.cols-o.cols>e[1]&&d((l.first.cols-1)*this._itemSize[1],l.first.rows*this._itemSize[0]);else if(l.first-o>e){const w=(l.first-1)*this._itemSize;this.horizontal?d(w,0):d(0,w)}}else if(y)if(this.both)l.last.rows-o.rows<=e[0]+1?d(l.first.cols*this._itemSize[1],(l.first.rows+1)*this._itemSize[0]):l.last.cols-o.cols<=e[1]+1&&d((l.first.cols+1)*this._itemSize[1],l.first.rows*this._itemSize[0]);else if(l.last-o<=e+1){const w=(l.first+1)*this._itemSize;this.horizontal?d(w,0):d(0,w)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(o,l)=>Math.floor(o/(l||o));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:o,scrollLeft:l}=this.elementViewChild.nativeElement;this.both?(i={rows:e(o,this._itemSize[0]),cols:e(l,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=e(this.horizontal?l:o,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const e=this.getContentPosition(),i=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,o=(y,w)=>Math.ceil(y/(w||y)),l=y=>Math.ceil(y/2),d=this.both?{rows:o(r,this._itemSize[0]),cols:o(i,this._itemSize[1])}:o(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:d,numToleratedItems:this.d_numToleratedItems||(this.both?[l(d.rows),l(d.cols)]:l(d))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:i}=this.calculateNumItems(),r=(d,f,y,w=!1)=>this.getLast(d+f+(d<y?2:3)*y,w),o=this.first,l=this.both?{rows:r(this.first.rows,e.rows,i[0]),cols:r(this.first.cols,e.cols,i[1],!0)}:r(this.first,e,i);this.last=l,this.numItemsInViewport=e,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:o.cols}:0:o,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";const[e,i]=[ee.getWidth(this.contentEl),ee.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),i!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");const[r,o]=[ee.getWidth(this.elementViewChild.nativeElement),ee.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=o<this.defaultHeight?o+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),i=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),o=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),l=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:i,right:r,top:o,bottom:l,x:i+r,y:o+l}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,o=(l,d)=>this.elementViewChild.nativeElement.style[l]=d;this.both||this.horizontal?(o("height",r),o("width",i)):o("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),i=(r,o,l,d=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(o||[]).length*l+d+"px"};this.both?(i("height",this._items,this._itemSize[0],e.y),i("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,e.x):i("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const i=e?e.first:this.first,r=(l,d)=>l*d,o=(l=0,d=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${l}px, ${d}px, 0)`};if(this.both)o(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const l=r(i,this._itemSize);this.horizontal?o(l,0):o(0,l)}}}onScrollPositionChange(e){const i=e.target,r=this.getContentPosition(),o=(Q,Ne)=>Q?Q>Ne?Q-Ne:Q:0,l=(Q,Ne)=>Math.floor(Q/(Ne||Q)),d=(Q,Ne,$e,Ze,et,vt)=>Q<=et?et:vt?$e-Ze-et:Ne+et-1,f=(Q,Ne,$e,Ze,et,vt,Ct)=>Q<=vt?0:Math.max(0,Ct?Q<Ne?$e:Q-vt:Q>Ne?$e:Q-2*vt),y=(Q,Ne,$e,Ze,et,vt=!1)=>{let Ct=Ne+Ze+2*et;return Q>=et&&(Ct+=et+1),this.getLast(Ct,vt)},w=o(i.scrollTop,r.top),E=o(i.scrollLeft,r.left);let M=this.both?{rows:0,cols:0}:0,N=this.last,B=!1,j=this.lastScrollPos;if(this.both){const Q=this.lastScrollPos.top<=w,Ne=this.lastScrollPos.left<=E;if(!this._appendOnly||this._appendOnly&&(Q||Ne)){const $e={rows:l(w,this._itemSize[0]),cols:l(E,this._itemSize[1])},Ze={rows:d($e.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],Q),cols:d($e.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Ne)};M={rows:f($e.rows,Ze.rows,this.first.rows,0,0,this.d_numToleratedItems[0],Q),cols:f($e.cols,Ze.cols,this.first.cols,0,0,this.d_numToleratedItems[1],Ne)},N={rows:y($e.rows,M.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:y($e.cols,M.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},B=M.rows!==this.first.rows||N.rows!==this.last.rows||M.cols!==this.first.cols||N.cols!==this.last.cols||this.isRangeChanged,j={top:w,left:E}}}else{const Q=this.horizontal?E:w,Ne=this.lastScrollPos<=Q;if(!this._appendOnly||this._appendOnly&&Ne){const $e=l(Q,this._itemSize);M=f($e,d($e,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,Ne),this.first,0,0,this.d_numToleratedItems,Ne),N=y($e,M,0,this.numItemsInViewport,this.d_numToleratedItems),B=M!==this.first||N!==this.last||this.isRangeChanged,j=Q}}return{first:M,last:N,isRangeChanged:B,scrollPos:j}}onScrollChange(e){const{first:i,last:r,isRangeChanged:o,scrollPos:l}=this.onScrollPositionChange(e);if(o){const d={first:i,last:r};if(this.setContentPosition(d),this.first=i,this.last=r,this.lastScrollPos=l,this.handleEvents("onScrollIndexChange",d),this._lazy&&this.isPageChanged){const f={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==f.first||this.lazyLoadState.last!==f.last)&&this.handleEvents("onLazyLoad",f),this.lazyLoadState=f}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(e);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(ee.isVisible(this.elementViewChild?.nativeElement)){const[e,i]=[ee.getWidth(this.elementViewChild.nativeElement),ee.getHeight(this.elementViewChild.nativeElement)],[r,o]=[e!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||o:this.horizontal?r:this.vertical&&o)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=i,this.defaultContentWidth=ee.getWidth(this.contentEl),this.defaultContentHeight=ee.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,i){return this.options&&this.options[e]?this.options[e](i):this[e].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,i)=>this.getLoaderOptions(e,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const i=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,i){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...i}}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-scroller"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(Nj,5),s.Gf(Lj,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.elementViewChild=r.first),s.iGM(r=s.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[s.TTD],ngContentSelectors:l4,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,i){if(1&e&&(s.F$t(),s.YNc(0,n4,8,14,"ng-container",0),s.YNc(1,a4,2,1,"ng-template",null,1,s.W1O)),2&e){const r=s.MAs(2);s.Q6J("ngIf",!i._disabled)("ngIfElse",r)}},dependencies:[pt,Ln,pn,wn,Tn],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),n})(),hp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();function c4(n,t){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.label)}}function u4(n,t){1&n&&s.GkF(0)}const nC=function(n){return{height:n}},d4=function(n,t){return{"p-highlight":n,"p-disabled":t}},h4=function(n){return{"p-highlight":n}},HF=function(n){return{"pi pi-check":n}},iC=function(n){return{$implicit:n}},p4=["container"],f4=["overlay"],g4=["filterInput"],m4=["in"],_4=["items"],y4=["scroller"];function v4(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.valuesAsString||"empty")}}function b4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",20),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw().$implicit,l=s.oxw(3);return s.KtG(l.removeChip(o,r))}),s.qZA()}}function w4(n,t){if(1&n&&(s.TgZ(0,"div",16,17)(2,"span",18),s._uU(3),s.qZA(),s.YNc(4,b4,1,0,"span",19),s.qZA()),2&n){const e=t.$implicit,i=s.oxw(3);s.xp6(3),s.Oqu(i.findLabelByValue(e)),s.xp6(1),s.Q6J("ngIf",!i.disabled)}}function C4(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(3);s.xp6(1),s.Oqu(e.placeholder||e.defaultLabel||"empty")}}function T4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,w4,5,2,"div",15),s.YNc(2,C4,2,1,"ng-container",7),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.value),s.xp6(1),s.Q6J("ngIf",!e.value||0===e.value.length)}}function E4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,v4,2,1,"ng-container",7),s.YNc(2,T4,3,2,"ng-container",7),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf","comma"===e.display),s.xp6(1),s.Q6J("ngIf","chip"===e.display)}}function S4(n,t){1&n&&s.GkF(0)}function I4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"i",21),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.clear(r))}),s.qZA()}}function D4(n,t){1&n&&s.GkF(0)}function x4(n,t){1&n&&s.GkF(0)}const UF=function(n){return{options:n}};function k4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,x4,1,0,"ng-container",8),s.BQk()),2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",s.VKq(2,UF,e.filterOptions))}}const A4=function(n){return{"p-checkbox-disabled":n}},M4=function(n,t,e){return{"p-highlight":n,"p-focus":t,"p-disabled":e}};function R4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",36)(1,"div",2)(2,"input",37),s.NdJ("focus",function(){s.CHM(e);const r=s.oxw(4);return s.KtG(r.onHeaderCheckboxFocus())})("blur",function(){s.CHM(e);const r=s.oxw(4);return s.KtG(r.onHeaderCheckboxBlur())})("keydown.space",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.toggleAll(r))}),s.qZA()(),s.TgZ(3,"div",38),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.toggleAll(r))}),s._UZ(4,"span",39),s.qZA()()}if(2&n){const e=s.oxw(4);s.Q6J("ngClass",s.VKq(6,A4,e.disabled||e.toggleAllDisabled)),s.xp6(2),s.Q6J("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),s.xp6(1),s.Q6J("ngClass",s.kEZ(8,M4,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),s.uIk("aria-checked",e.allChecked),s.xp6(1),s.Q6J("ngClass",s.VKq(12,HF,e.allChecked))}}function O4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",40)(1,"input",41,42),s.NdJ("input",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onFilterInputChange(r))}),s.qZA(),s._UZ(3,"span",43),s.qZA()}if(2&n){const e=s.oxw(4);s.xp6(1),s.Q6J("value",e.filterValue||"")("disabled",e.disabled),s.uIk("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function P4(n,t){if(1&n){const e=s.EpF();s.YNc(0,R4,5,14,"div",32),s.YNc(1,O4,4,5,"div",33),s.TgZ(2,"button",34),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.close(r))}),s._UZ(3,"span",35),s.qZA()}if(2&n){const e=s.oxw(3);s.Q6J("ngIf",e.showToggleAll&&!e.selectionLimit),s.xp6(1),s.Q6J("ngIf",e.filter)}}function N4(n,t){if(1&n&&(s.TgZ(0,"div",28),s.Hsn(1),s.YNc(2,D4,1,0,"ng-container",29),s.YNc(3,k4,2,4,"ng-container",30),s.YNc(4,P4,4,2,"ng-template",null,31,s.W1O),s.qZA()),2&n){const e=s.MAs(5),i=s.oxw(2);s.xp6(2),s.Q6J("ngTemplateOutlet",i.headerTemplate),s.xp6(1),s.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function L4(n,t){1&n&&s.GkF(0)}const zF=function(n,t){return{$implicit:n,options:t}};function F4(n,t){if(1&n&&s.YNc(0,L4,1,0,"ng-container",8),2&n){const e=t.$implicit,i=t.options;s.oxw(2);const r=s.MAs(6);s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.WLB(2,zF,e,i))}}function V4(n,t){1&n&&s.GkF(0)}function B4(n,t){if(1&n&&s.YNc(0,V4,1,0,"ng-container",8),2&n){const e=t.options,i=s.oxw(4);s.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",s.VKq(2,UF,e))}}function H4(n,t){1&n&&(s.ynx(0),s.YNc(1,B4,1,4,"ng-template",46),s.BQk())}function U4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-scroller",44,45),s.NdJ("onLazyLoad",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onLazyLoad.emit(r))}),s.YNc(2,F4,1,5,"ng-template",14),s.YNc(3,H4,2,0,"ng-container",7),s.qZA()}if(2&n){const e=s.oxw(2);s.Akn(s.VKq(9,nC,e.scrollHeight)),s.Q6J("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),s.xp6(3),s.Q6J("ngIf",e.loaderTemplate)}}function z4(n,t){1&n&&s.GkF(0)}const G4=function(){return{}};function j4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,z4,1,0,"ng-container",8),s.BQk()),2&n){s.oxw();const e=s.MAs(6),i=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",s.WLB(3,zF,i.optionsToRender,s.DdM(2,G4)))}}function $4(n,t){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,i=s.oxw(4);s.xp6(1),s.Oqu(i.getOptionGroupLabel(e)||"empty")}}function Z4(n,t){1&n&&s.GkF(0)}function q4(n,t){1&n&&s.GkF(0)}function W4(n,t){if(1&n&&(s.TgZ(0,"li",52),s.YNc(1,$4,2,1,"span",7),s.YNc(2,Z4,1,0,"ng-container",8),s.qZA(),s.YNc(3,q4,1,0,"ng-container",8)),2&n){const e=t.$implicit,i=s.oxw(2).options,r=s.MAs(5),o=s.oxw(2);s.Q6J("ngStyle",s.VKq(6,nC,i.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!o.groupTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",s.VKq(8,iC,e)),s.xp6(1),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.VKq(10,iC,o.getOptionGroupChildren(e)))}}function K4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,W4,4,12,"ng-template",51),s.BQk()),2&n){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngForOf",e)}}function Y4(n,t){1&n&&s.GkF(0)}function Q4(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Y4,1,0,"ng-container",8),s.BQk()),2&n){const e=s.oxw().$implicit,i=s.MAs(5);s.xp6(1),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.VKq(2,iC,e))}}function J4(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-multiSelectItem",53),s.NdJ("onClick",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onOptionClick(r))})("onKeydown",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onOptionKeydown(r))}),s.qZA()}if(2&n){const e=t.$implicit,i=s.oxw(2).options,r=s.oxw(2);s.Q6J("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",i.itemSize)}}function X4(n,t){1&n&&s.YNc(0,J4,1,6,"ng-template",51),2&n&&s.Q6J("ngForOf",t.$implicit)}function e$(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(4);s.xp6(1),s.hij(" ",e.emptyFilterMessageLabel," ")}}function t$(n,t){1&n&&s.GkF(0,null,55)}function n$(n,t){if(1&n&&(s.TgZ(0,"li",54),s.YNc(1,e$,2,1,"ng-container",30),s.YNc(2,t$,2,0,"ng-container",29),s.qZA()),2&n){const e=s.oxw().options,i=s.oxw(2);s.Q6J("ngStyle",s.VKq(4,nC,e.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),s.xp6(1),s.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function i$(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(4);s.xp6(1),s.hij(" ",e.emptyMessageLabel," ")}}function r$(n,t){1&n&&s.GkF(0,null,56)}function s$(n,t){if(1&n&&(s.TgZ(0,"li",54),s.YNc(1,i$,2,1,"ng-container",30),s.YNc(2,r$,2,0,"ng-container",29),s.qZA()),2&n){const e=s.oxw().options,i=s.oxw(2);s.Q6J("ngStyle",s.VKq(4,nC,e.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),s.xp6(1),s.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function o$(n,t){if(1&n&&(s.TgZ(0,"ul",47,48),s.YNc(2,K4,2,1,"ng-container",7),s.YNc(3,Q4,2,4,"ng-container",7),s.YNc(4,X4,1,1,"ng-template",null,49,s.W1O),s.YNc(6,n$,3,6,"li",50),s.YNc(7,s$,3,6,"li",50),s.qZA()),2&n){const e=t.options,i=s.oxw(2);s.Akn(e.contentStyle),s.Q6J("ngClass",e.contentStyleClass),s.xp6(2),s.Q6J("ngIf",i.group),s.xp6(1),s.Q6J("ngIf",!i.group),s.xp6(3),s.Q6J("ngIf",i.hasFilter()&&i.isEmpty()),s.xp6(1),s.Q6J("ngIf",!i.hasFilter()&&i.isEmpty())}}function a$(n,t){1&n&&s.GkF(0)}function l$(n,t){if(1&n&&(s.TgZ(0,"div",57),s.Hsn(1,1),s.YNc(2,a$,1,0,"ng-container",29),s.qZA()),2&n){const e=s.oxw(2);s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const c$=function(){return["p-multiselect-panel p-component"]};function u$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",22),s.NdJ("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onKeydown(r))}),s.YNc(1,N4,6,3,"div",23),s.TgZ(2,"div",24),s.YNc(3,U4,4,11,"p-scroller",25),s.YNc(4,j4,2,6,"ng-container",7),s.YNc(5,o$,8,7,"ng-template",null,26,s.W1O),s.qZA(),s.YNc(7,l$,3,1,"div",27),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngClass",s.DdM(10,c$))("ngStyle",e.panelStyle),s.xp6(1),s.Q6J("ngIf",e.showHeader),s.xp6(1),s.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),s.xp6(1),s.Q6J("ngIf",e.virtualScroll),s.xp6(1),s.Q6J("ngIf",!e.virtualScroll),s.xp6(3),s.Q6J("ngIf",e.footerFacet||e.footerTemplate)}}const d$=[[["p-header"]],[["p-footer"]]],h$=function(n,t,e,i){return{"p-multiselect p-component":!0,"p-multiselect-open":n,"p-multiselect-chip":t,"p-focus":e,"p-disabled":i}},p$=function(n,t){return{"p-placeholder":n,"p-multiselect-label-empty":t}},f$=function(){return{"p-multiselect-trigger":!0}},g$=["p-header","p-footer"],m$={provide:Sr,useExisting:(0,s.Gpc)(()=>hM),multi:!0};let _$=(()=>{class n{constructor(){this.onClick=new s.vpe,this.onKeydown=new s.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option,selected:this.selected})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(s.TgZ(0,"li",0),s.NdJ("click",function(o){return i.onOptionClick(o)})("keydown",function(o){return i.onOptionKeydown(o)}),s.TgZ(1,"div",1)(2,"div",2),s._UZ(3,"span",3),s.qZA()(),s.YNc(4,c4,2,1,"span",4),s.YNc(5,u4,1,0,"ng-container",5),s.qZA()),2&e&&(s.Q6J("ngStyle",s.VKq(9,nC,i.itemSize+"px"))("ngClass",s.WLB(11,d4,i.selected,i.disabled)),s.uIk("aria-label",i.label)("tabindex",i.disabled?null:"0"),s.xp6(2),s.Q6J("ngClass",s.VKq(14,h4,i.selected)),s.xp6(1),s.Q6J("ngClass",s.VKq(16,HF,i.selected)),s.xp6(1),s.Q6J("ngIf",!i.template),s.xp6(1),s.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",s.VKq(18,iC,i.option)))},dependencies:[pt,pn,wn,Tn,ys],encapsulation:2}),n})(),hM=(()=>{class n{constructor(e,i,r,o,l,d,f){this.el=e,this.renderer=i,this.cd=r,this.zone=o,this.filterService=l,this.config=d,this.overlayService=f,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.scrollHeight="200px",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new s.vpe,this.onFilter=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClick=new s.vpe,this.onClear=new s.vpe,this.onPanelShow=new s.vpe,this.onPanelHide=new s.vpe,this.onLazyLoad=new s.vpe,this.onRemove=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?Ge.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ge.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?Ge.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ge.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?Ge.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let i=e.option;if(this.isOptionDisabled(i))return;let r=this.getOptionValue(i),o=this.findSelectionIndex(r);-1!=o?(this.value=this.value.filter((l,d)=>d!=o),this.onRemove.emit({newValue:this.value,removed:r}),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let i=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(Ge.equals(this.value[r],e,this.dataKey)){i=r;break}return i}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let i of e)if(!this.isOptionDisabled(i))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let i=[];this.optionsToRender.forEach(r=>{if(this.group){let o=this.getOptionGroupChildren(r);o&&o.forEach(l=>{let d=this.isOptionDisabled(l);(!d||d&&this.isSelected(l))&&i.push(this.getOptionValue(l))})}else{let o=this.isOptionDisabled(r);(!o||o&&this.isSelected(r))&&i.push(this.getOptionValue(r))}}),this.value=i}uncheckAll(){let i=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(o=>{this.isOptionDisabled(o)&&this.isSelected(o)&&i.push(this.getOptionValue(o))}):this.isOptionDisabled(r)&&this.isSelected(r)&&i.push(this.getOptionValue(r))}),this.value=i}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onModelTouched()}}hide(){this.overlayVisible=!1,this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,i){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.overlayViewChild?.el?.nativeElement?.contains(e.target)&&!ee.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():this.show(),i.focus()))}removeChip(e,i){this.value=this.value.filter(r=>!Ge.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:i,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var i=this.findNextItem(e.originalEvent.target.parentElement);i&&i.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 27:case 9:this.hide()}}findNextItem(e){let i=e.nextElementSibling;return i?ee.hasClass(i.children[0],"p-disabled")||ee.isHidden(i.children[0])||ee.hasClass(i,"p-multiselect-item-group")?this.findNextItem(i):i.children[0]:null}findPrevItem(e){let i=e.previousElementSibling;return i?ee.hasClass(i.children[0],"p-disabled")||ee.isHidden(i.children[0])||ee.hasClass(i,"p-multiselect-item-group")?this.findPrevItem(i):i.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let i=0;i<this.value.length;i++){let r=this.findLabelByValue(this.value[i]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let i=/{(.*?)}/;this.valuesAsString=i.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(i)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let i=null;for(let r=0;r<this.options.length;r++){let o=this.getOptionGroupChildren(this.options[r]);if(o&&(i=this.searchLabelByValue(e,o),i))break}return i}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,i){let r=null;for(let o=0;o<i.length;o++){let l=i[o],d=this.getOptionValue(l);if(null==e&&null==d||Ge.equals(e,d,this.dataKey)){r=this.getOptionLabel(l);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let i=0,r=0,o=0,l=this.group?0:this.optionsToRender.length;for(let d of e)if(this.group)for(let f of this.getOptionGroupChildren(d)){let y=this.isOptionDisabled(f),w=this.isSelected(f);if(y)w?i++:r++;else{if(!w)return!1;o++}l++}else{let f=this.isOptionDisabled(d),y=this.isSelected(d);if(f)y?i++:r++;else{if(!y)return!1;o++}}return l===i||l===o||o&&l===o+r+i}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ye.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ye.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let i=[];for(let r of this.options){let o=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);o&&o.length&&i.push({...r,[this.optionGroupChildren]:o})}this._filteredOptions=i}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(Pl),s.Y36(R),s.Y36(I))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-multiSelect"]],contentQueries:function(e,i,r){if(1&e&&(s.Suo(r,te,5),s.Suo(r,U,5),s.Suo(r,ne,4)),2&e){let o;s.iGM(o=s.CRH())&&(i.footerFacet=o.first),s.iGM(o=s.CRH())&&(i.headerFacet=o.first),s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(p4,5),s.Gf(f4,5),s.Gf(g4,5),s.Gf(m4,5),s.Gf(_4,5),s.Gf(y4,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first),s.iGM(r=s.CRH())&&(i.overlayViewChild=r.first),s.iGM(r=s.CRH())&&(i.filterInputChild=r.first),s.iGM(r=s.CRH())&&(i.accessibleViewChild=r.first),s.iGM(r=s.CRH())&&(i.itemsViewChild=r.first),s.iGM(r=s.CRH())&&(i.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&s.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus||i.overlayVisible)("p-multiselect-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove"},features:[s._Bn([m$])],ngContentSelectors:g$,decls:15,vars:41,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,i){if(1&e){const r=s.EpF();s.F$t(d$),s.TgZ(0,"div",0,1),s.NdJ("click",function(l){s.CHM(r);const d=s.MAs(4);return s.KtG(i.onMouseclick(l,d))}),s.TgZ(2,"div",2)(3,"input",3,4),s.NdJ("focus",function(l){return i.onInputFocus(l)})("blur",function(l){return i.onInputBlur(l)})("keydown",function(l){return i.onKeydown(l)}),s.qZA()(),s.TgZ(5,"div",5)(6,"div",6),s.YNc(7,E4,3,2,"ng-container",7),s.YNc(8,S4,1,0,"ng-container",8),s.qZA(),s.YNc(9,I4,1,0,"i",9),s.qZA(),s.TgZ(10,"div",10),s._UZ(11,"span",11),s.qZA(),s.TgZ(12,"p-overlay",12,13),s.NdJ("visibleChange",function(l){return i.overlayVisible=l})("onAnimationStart",function(l){return i.onOverlayAnimationStart(l)})("onHide",function(){return i.hide()}),s.YNc(14,u$,8,11,"ng-template",14),s.qZA()()}2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass",s.l5B(30,h$,i.overlayVisible,"chip"===i.display,i.focus,i.disabled))("ngStyle",i.style),s.xp6(3),s.Q6J("disabled",i.disabled),s.uIk("label",i.label)("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("aria-expanded",i.overlayVisible)("aria-labelledby",i.ariaLabelledBy),s.xp6(2),s.Q6J("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),s.xp6(1),s.Q6J("ngClass",s.WLB(35,p$,i.valuesAsString===(i.defaultLabel||i.placeholder),!(null!=i.valuesAsString&&0!==i.valuesAsString.length||null!=i.placeholder&&0!==i.placeholder.length))),s.xp6(1),s.Q6J("ngIf",!i.selectedItemsTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",i.selectedItemsTemplate)("ngTemplateOutletContext",s.VKq(38,iC,i.value)),s.xp6(1),s.Q6J("ngIf",null!=i.value&&i.filled&&!i.disabled&&i.showClear),s.xp6(1),s.Q6J("ngClass",s.DdM(40,f$)),s.xp6(1),s.Q6J("ngClass",i.dropdownIcon),s.xp6(1),s.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[pt,Ln,pn,wn,Tn,cM,ne,$v,ys,dM,_$],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-chip .p-multiselect-label{display:flex}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),y$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,fI,_e,$s,vs,hp,fI,_e,hp]}),n})();class rC{constructor(t,e){this.oracleService=t,this.invoiceService=e,this.invoice=new EG,this.oracleList=[],this.selectedOracle=[],this.readOracleList()}readOracleList(){this.oracleService.getAll().snapshotChanges().pipe((0,gt.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()})))).subscribe(t=>{this.oracleList=t})}createInvoice(t){let e;e=t.value,e.date=DF.anyToDate(e.date),this.invoiceService.create(e)}}rC.\u0275fac=function(t){return new(t||rC)(s.Y36(xg),s.Y36(Ty))},rC.\u0275cmp=s.Xpm({type:rC,selectors:[["app-invoice"]],decls:45,vars:10,consts:[[1,"p-card","p-3",2,"margin","50px",3,"ngSubmit"],["myForm","ngForm"],[1,"flex","justify-content-center","mb-3"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12","md:col-6","lg:col-4"],[1,"p-float-label"],["name","invoiceDate","dateFormat","dd-mm-yy",3,"ngModel","ngModelChange"],["for","inputtext"],["type","text","pInputText","","name","invoiceNo",3,"ngModel","ngModelChange"],["name","oracleLists","optionLabel","oracleNo","optionValue","key",3,"options","ngModel","ngModelChange"],["type","text","pInputText","","name","boe",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","declarationNo",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","remarks",3,"ngModel","ngModelChange"],[1,"flex","gap-3","justify-content-end","pb-5"],["pButton","","pRipple","","type","submit","label","Create","icon","pi pi-pencil",1,"w-1","p-button-raised","p-button-text"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"form",0,1),s.NdJ("ngSubmit",function(){s.CHM(i);const o=s.MAs(1);return s.KtG(e.createInvoice(o))}),s.TgZ(2,"div",2)(3,"h4"),s._uU(4,"Invoice Lists"),s.qZA()(),s.TgZ(5,"div",3)(6,"div",4)(7,"span",5)(8,"p-calendar",6),s.NdJ("ngModelChange",function(o){return e.invoice.date=o}),s.qZA(),s.TgZ(9,"label",7),s._uU(10,"Invoice Date"),s.qZA()()(),s.TgZ(11,"div",4)(12,"span",5)(13,"input",8),s.NdJ("ngModelChange",function(o){return e.invoice.no=o}),s.qZA(),s._UZ(14,"br"),s.TgZ(15,"label",7),s._uU(16,"Invoice No."),s.qZA()()(),s.TgZ(17,"div",4)(18,"span",5)(19,"p-multiSelect",9),s.NdJ("ngModelChange",function(o){return e.selectedOracle=o}),s.qZA(),s.TgZ(20,"label",7),s._uU(21,"Oracles"),s.qZA()()(),s.TgZ(22,"div",4)(23,"span",5)(24,"input",10),s.NdJ("ngModelChange",function(o){return e.invoice.boeNo=o}),s.qZA(),s._UZ(25,"br"),s.TgZ(26,"label",7),s._uU(27,"BOE (Bill Of Entry)"),s.qZA()()(),s.TgZ(28,"div",4)(29,"span",5)(30,"input",11),s.NdJ("ngModelChange",function(o){return e.invoice.declarationNo=o}),s.qZA(),s._UZ(31,"br"),s.TgZ(32,"label",7),s._uU(33,"Declaration #"),s.qZA()()(),s.TgZ(34,"div",4)(35,"span",5)(36,"input",12),s.NdJ("ngModelChange",function(o){return e.invoice.remarks=o}),s.qZA(),s._UZ(37,"br"),s.TgZ(38,"label",7),s._uU(39,"Remarks"),s.qZA()()()(),s.TgZ(40,"div",13),s._UZ(41,"button",14),s.qZA(),s._UZ(42,"div"),s.qZA(),s._uU(43),s.ALo(44,"json")}2&t&&(s.xp6(8),s.Q6J("ngModel",e.invoice.date),s.xp6(5),s.Q6J("ngModel",e.invoice.no),s.xp6(6),s.Q6J("options",e.oracleList)("ngModel",e.selectedOracle),s.xp6(5),s.Q6J("ngModel",e.invoice.boeNo),s.xp6(6),s.Q6J("ngModel",e.invoice.declarationNo),s.xp6(6),s.Q6J("ngModel",e.invoice.remarks),s.xp6(7),s.hij(" ",s.lcZ(44,8,e.oracleList),""))},dependencies:[ys,Cy,Ud,hu,vy,sl,dp,_d,Jw,pI,hM,qr]});class GF{}class kg{constructor(t){this.db=t,this.dbPath="/packing",this.packingLists=t.list(this.dbPath)}getById(t){return this.db.object(this.dbPath+"/"+t)}getAll(){return this.packingLists.snapshotChanges().pipe((0,gt.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()}))))}create(t){return this.packingLists.push(t)}update(t,e){return this.packingLists.update(t,e)}delete(t){return this.packingLists.remove(t)}deleteAll(){return this.packingLists.remove()}}kg.\u0275fac=function(t){return new(t||kg)(s.LFG(yy))},kg.\u0275prov=s.Yz7({token:kg,factory:kg.\u0275fac,providedIn:"root"});let v$=(()=>{class n{constructor(e){this.host=e,this.focused=!1}ngAfterViewChecked(){if(!this.focused&&this.autofocus){const e=ee.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),n})(),b$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();function w$(n,t){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&n){const e=s.oxw();let i;s.xp6(1),s.Oqu(null!==(i=e.label)&&void 0!==i?i:"empty")}}function C$(n,t){1&n&&s.GkF(0)}const sC=function(n){return{height:n}},T$=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},pM=function(n){return{$implicit:n}},E$=["container"],S$=["filter"],I$=["in"],D$=["editableInput"],x$=["items"],k$=["scroller"],A$=["overlay"];function M$(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.label||"empty")}}function R$(n,t){1&n&&s.GkF(0)}const O$=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function P$(n,t){if(1&n&&(s.TgZ(0,"span",14),s.YNc(1,M$,2,1,"ng-container",15),s.YNc(2,R$,1,0,"ng-container",16),s.qZA()),2&n){const e=s.oxw();s.Q6J("ngClass",s.VKq(9,O$,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),s.uIk("id",e.labelId),s.xp6(1),s.Q6J("ngIf",!e.selectedItemTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",s.VKq(11,pM,e.selectedOption))}}const N$=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function L$(n,t){if(1&n&&(s.TgZ(0,"span",17),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.Q6J("ngClass",s.VKq(2,N$,null==e.placeholder||0===e.placeholder.length)),s.xp6(1),s.Oqu(e.placeholder||"empty")}}function F$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"input",18,19),s.NdJ("input",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onEditableInputChange(r))})("focus",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onEditableInputFocus(r))})("blur",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onInputBlur(r))}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("disabled",e.disabled),s.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function V$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"i",20),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.clear(r))}),s.qZA()}}function B$(n,t){1&n&&s.GkF(0)}function H$(n,t){1&n&&s.GkF(0)}const jF=function(n){return{options:n}};function U$(n,t){if(1&n&&(s.ynx(0),s.YNc(1,H$,1,0,"ng-container",16),s.BQk()),2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",s.VKq(2,jF,e.filterOptions))}}function z$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",30)(1,"input",31,32),s.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onKeydown(r,!1))})("input",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onFilterInputChange(r))}),s.qZA(),s._UZ(3,"span",33),s.qZA()}if(2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("value",e.filterValue||""),s.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function G$(n,t){if(1&n&&(s.TgZ(0,"div",27),s.NdJ("click",function(i){return i.stopPropagation()}),s.YNc(1,U$,2,4,"ng-container",28),s.YNc(2,z$,4,4,"ng-template",null,29,s.W1O),s.qZA()),2&n){const e=s.MAs(3),i=s.oxw(2);s.xp6(1),s.Q6J("ngIf",i.filterTemplate)("ngIfElse",e)}}function j$(n,t){1&n&&s.GkF(0)}const $F=function(n,t){return{$implicit:n,options:t}};function $$(n,t){if(1&n&&s.YNc(0,j$,1,0,"ng-container",16),2&n){const e=t.$implicit,i=t.options;s.oxw(2);const r=s.MAs(7);s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.WLB(2,$F,e,i))}}function Z$(n,t){1&n&&s.GkF(0)}function q$(n,t){if(1&n&&s.YNc(0,Z$,1,0,"ng-container",16),2&n){const e=t.options,i=s.oxw(4);s.Q6J("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",s.VKq(2,jF,e))}}function W$(n,t){1&n&&(s.ynx(0),s.YNc(1,q$,1,4,"ng-template",36),s.BQk())}function K$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-scroller",34,35),s.NdJ("onLazyLoad",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onLazyLoad.emit(r))}),s.YNc(2,$$,1,5,"ng-template",13),s.YNc(3,W$,2,0,"ng-container",15),s.qZA()}if(2&n){const e=s.oxw(2);s.Akn(s.VKq(8,sC,e.scrollHeight)),s.Q6J("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),s.xp6(3),s.Q6J("ngIf",e.loaderTemplate)}}function Y$(n,t){1&n&&s.GkF(0)}const Q$=function(){return{}};function J$(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Y$,1,0,"ng-container",16),s.BQk()),2&n){s.oxw();const e=s.MAs(7),i=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",s.WLB(3,$F,i.optionsToDisplay,s.DdM(2,Q$)))}}function X$(n,t){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,i=s.oxw(4);s.xp6(1),s.Oqu(i.getOptionGroupLabel(e)||"empty")}}function eZ(n,t){1&n&&s.GkF(0)}function tZ(n,t){1&n&&s.GkF(0)}const ZF=function(n,t){return{$implicit:n,selectedOption:t}};function nZ(n,t){if(1&n&&(s.TgZ(0,"li",42),s.YNc(1,X$,2,1,"span",15),s.YNc(2,eZ,1,0,"ng-container",16),s.qZA(),s.YNc(3,tZ,1,0,"ng-container",16)),2&n){const e=t.$implicit,i=s.oxw(2).options,r=s.MAs(5),o=s.oxw(2);s.Q6J("ngStyle",s.VKq(6,sC,i.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!o.groupTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",s.VKq(8,pM,e)),s.xp6(1),s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.WLB(10,ZF,o.getOptionGroupChildren(e),o.selectedOption))}}function iZ(n,t){if(1&n&&(s.ynx(0),s.YNc(1,nZ,4,13,"ng-template",41),s.BQk()),2&n){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngForOf",e)}}function rZ(n,t){1&n&&s.GkF(0)}function sZ(n,t){if(1&n&&(s.ynx(0),s.YNc(1,rZ,1,0,"ng-container",16),s.BQk()),2&n){const e=s.oxw().$implicit,i=s.MAs(5),r=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.WLB(2,ZF,e,r.selectedOption))}}function oZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-dropdownItem",43),s.NdJ("onClick",function(r){s.CHM(e);const o=s.oxw(4);return s.KtG(o.onItemClick(r))}),s.qZA()}if(2&n){const e=t.$implicit,i=s.oxw().selectedOption,r=s.oxw(3);s.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function aZ(n,t){1&n&&s.YNc(0,oZ,1,5,"ng-template",41),2&n&&s.Q6J("ngForOf",t.$implicit)}function lZ(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(4);s.xp6(1),s.hij(" ",e.emptyFilterMessageLabel," ")}}function cZ(n,t){1&n&&s.GkF(0,null,45)}function uZ(n,t){if(1&n&&(s.TgZ(0,"li",44),s.YNc(1,lZ,2,1,"ng-container",28),s.YNc(2,cZ,2,0,"ng-container",22),s.qZA()),2&n){const e=s.oxw().options,i=s.oxw(2);s.Q6J("ngStyle",s.VKq(4,sC,e.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),s.xp6(1),s.Q6J("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function dZ(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(4);s.xp6(1),s.hij(" ",e.emptyMessageLabel," ")}}function hZ(n,t){1&n&&s.GkF(0,null,46)}function pZ(n,t){if(1&n&&(s.TgZ(0,"li",44),s.YNc(1,dZ,2,1,"ng-container",28),s.YNc(2,hZ,2,0,"ng-container",22),s.qZA()),2&n){const e=s.oxw().options,i=s.oxw(2);s.Q6J("ngStyle",s.VKq(4,sC,e.itemSize+"px")),s.xp6(1),s.Q6J("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),s.xp6(1),s.Q6J("ngTemplateOutlet",i.emptyTemplate)}}function fZ(n,t){if(1&n&&(s.TgZ(0,"ul",37,38),s.YNc(2,iZ,2,1,"ng-container",15),s.YNc(3,sZ,2,5,"ng-container",15),s.YNc(4,aZ,1,1,"ng-template",null,39,s.W1O),s.YNc(6,uZ,3,6,"li",40),s.YNc(7,pZ,3,6,"li",40),s.qZA()),2&n){const e=t.options,i=s.oxw(2);s.Akn(e.contentStyle),s.Q6J("ngClass",e.contentStyleClass),s.uIk("id",i.listId),s.xp6(2),s.Q6J("ngIf",i.group),s.xp6(1),s.Q6J("ngIf",!i.group),s.xp6(3),s.Q6J("ngIf",i.filterValue&&i.isEmpty()),s.xp6(1),s.Q6J("ngIf",!i.filterValue&&i.isEmpty())}}function gZ(n,t){1&n&&s.GkF(0)}function mZ(n,t){if(1&n&&(s.TgZ(0,"div",21),s.YNc(1,B$,1,0,"ng-container",22),s.YNc(2,G$,4,2,"div",23),s.TgZ(3,"div",24),s.YNc(4,K$,4,10,"p-scroller",25),s.YNc(5,J$,2,6,"ng-container",15),s.YNc(6,fZ,8,8,"ng-template",null,26,s.W1O),s.qZA(),s.YNc(8,gZ,1,0,"ng-container",22),s.qZA()),2&n){const e=s.oxw();s.Tol(e.panelStyleClass),s.Q6J("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),s.xp6(1),s.Q6J("ngTemplateOutlet",e.headerTemplate),s.xp6(1),s.Q6J("ngIf",e.filter),s.xp6(1),s.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),s.xp6(1),s.Q6J("ngIf",e.virtualScroll),s.xp6(1),s.Q6J("ngIf",!e.virtualScroll),s.xp6(3),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}const _Z=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},yZ={provide:Sr,useExisting:(0,s.Gpc)(()=>oC),multi:!0};let vZ=(()=>{class n{constructor(){this.onClick=new s.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(s.TgZ(0,"li",0),s.NdJ("click",function(o){return i.onOptionClick(o)}),s.YNc(1,w$,2,1,"span",1),s.YNc(2,C$,1,0,"ng-container",2),s.qZA()),2&e&&(s.Q6J("ngStyle",s.VKq(8,sC,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",s.WLB(10,T$,i.selected,i.disabled)),s.uIk("aria-label",i.label)("aria-selected",i.selected),s.xp6(1),s.Q6J("ngIf",!i.template),s.xp6(1),s.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",s.VKq(13,pM,i.option)))},dependencies:[pt,pn,wn,Tn,ys],encapsulation:2}),n})(),oC=(()=>{class n{constructor(e,i,r,o,l,d){this.el=e,this.renderer=i,this.cd=r,this.zone=o,this.filterService=l,this.config=d,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new s.vpe,this.onFilter=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onClick=new s.vpe,this.onShow=new s.vpe,this.onHide=new s.vpe,this.onClear=new s.vpe,this.onLazyLoad=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=Ol()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&Ge.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return"number"==typeof this.selectedOption&&(this.selectedOption=this.selectedOption.toString()),this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ye.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ye.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Ge.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Ge.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Ge.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Ge.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ge.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=ee.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,"li.p-highlight");e&&ee.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return ee.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=ee.findSingle(this.overlayViewChild.overlayViewChild.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller.scrollToIndex(i)}else{let i=ee.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}if(!i)for(let r=0;r<e;r++){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let o=r.itemIndex+1;o<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[o]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,o=this.findNextEnabledOption(r);o&&(this.selectItem(e,o),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let o=r.itemIndex-1;if(o>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[o]),this.selectedOptionUpdated=!0;else if(o<0){let l=this.optionsToDisplay[r.groupIndex-1];l&&(this.selectItem(e,this.getOptionGroupChildren(l)[this.getOptionGroupChildren(l).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,o=this.findPrevEnabledOption(r);o&&(this.selectItem(e,o),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let o=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(o)}else{let o=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++o)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let o=this.optionsToDisplay[r];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let o=e.groupIndex===r?e.itemIndex+1:0;o<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;o++){let l=this.getOptionGroupChildren(this.optionsToDisplay[r])[o];if(this.getOptionLabel(l).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(l))return l}for(let r=0;r<=e.groupIndex;r++)for(let o=0;o<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);o++){let l=this.getOptionGroupChildren(this.optionsToDisplay[r])[o];if(this.getOptionLabel(l).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(l))return l}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let o=0;o<i.length;o++)if(null==e&&null==this.getOptionValue(i[o])||Ge.equals(e,this.getOptionValue(i[o]),this.dataKey)){r=o;break}return r}findOptionGroupIndex(e,i){let r,o;if(i)for(let l=0;l<i.length&&(r=l,o=this.findOptionIndex(e,this.getOptionGroupChildren(i[l])),-1===o);l++);return-1!==o?{groupIndex:r,itemIndex:o}:-1}findOption(e,i,r){if(this.group&&!r){let o;if(i&&i.length)for(let l of i)if(o=this.findOption(e,this.getOptionGroupChildren(l),!0),o)break;return o}{let o=this.findOptionIndex(e,i);return-1!=o?i[o]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let o=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);o&&o.length&&i.push({...r,[this.optionGroupChildren]:o})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?ee.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ee.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(s.sBO),s.Y36(s.R0b),s.Y36(Pl),s.Y36(R))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(E$,5),s.Gf(S$,5),s.Gf(I$,5),s.Gf(D$,5),s.Gf(x$,5),s.Gf(k$,5),s.Gf(A$,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first),s.iGM(r=s.CRH())&&(i.filterViewChild=r.first),s.iGM(r=s.CRH())&&(i.accessibleViewChild=r.first),s.iGM(r=s.CRH())&&(i.editableInputViewChild=r.first),s.iGM(r=s.CRH())&&(i.itemsViewChild=r.first),s.iGM(r=s.CRH())&&(i.scroller=r.first),s.iGM(r=s.CRH())&&(i.overlayViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&s.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[s._Bn([yZ])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("click",function(o){return i.onMouseclick(o)}),s.TgZ(2,"div",2)(3,"input",3,4),s.NdJ("focus",function(o){return i.onInputFocus(o)})("blur",function(o){return i.onInputBlur(o)})("keydown",function(o){return i.onKeydown(o,!0)}),s.qZA()(),s.YNc(5,P$,3,13,"span",5),s.YNc(6,L$,2,4,"span",6),s.YNc(7,F$,2,4,"input",7),s.YNc(8,V$,1,0,"i",8),s.TgZ(9,"div",9),s._UZ(10,"span",10),s.qZA(),s.TgZ(11,"p-overlay",11,12),s.NdJ("visibleChange",function(o){return i.overlayVisible=o})("onAnimationStart",function(o){return i.onOverlayAnimationStart(o)})("onHide",function(){return i.hide()}),s.YNc(13,mZ,9,11,"ng-template",13),s.qZA()()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass",s.l5B(27,_Z,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),s.xp6(3),s.Q6J("disabled",i.disabled)("autofocus",i.autofocus),s.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("aria-activedescendant",i.overlayVisible?i.labelId:null),s.xp6(2),s.Q6J("ngIf",!i.editable&&null!=i.label),s.xp6(1),s.Q6J("ngIf",!i.editable&&null==i.label),s.xp6(1),s.Q6J("ngIf",i.editable),s.xp6(1),s.Q6J("ngIf",i.isVisibleClearIcon),s.xp6(1),s.uIk("aria-expanded",i.overlayVisible),s.xp6(1),s.Q6J("ngClass",i.dropdownIcon),s.xp6(1),s.Q6J("visible",i.overlayVisible)("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions))},dependencies:[pt,Ln,pn,wn,Tn,cM,ne,$v,dM,v$,vZ],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),n})(),gI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,fI,_e,$s,vs,hp,b$,fI,_e,hp]}),n})();const bZ=["input"];function wZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"i",6),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.clear())}),s.qZA()}}const qF=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},WF=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function CZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",7)(1,"button",8),s.NdJ("mousedown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onUpButtonMouseDown(r))})("mouseup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonMouseUp())})("mouseleave",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonMouseLeave())})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onUpButtonKeyDown(r))})("keyup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonKeyUp())}),s.qZA(),s.TgZ(2,"button",8),s.NdJ("mousedown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onDownButtonMouseDown(r))})("mouseup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonMouseUp())})("mouseleave",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonMouseLeave())})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onDownButtonKeyDown(r))})("keyup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonKeyUp())}),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(1),s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(10,qF))("icon",e.incrementButtonIcon)("disabled",e.disabled),s.xp6(1),s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(11,WF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function TZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",8),s.NdJ("mousedown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onUpButtonMouseDown(r))})("mouseup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonMouseUp())})("mouseleave",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonMouseLeave())})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onUpButtonKeyDown(r))})("keyup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onUpButtonKeyUp())}),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.incrementButtonClass),s.Q6J("ngClass",s.DdM(5,qF))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function EZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",8),s.NdJ("mousedown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onDownButtonMouseDown(r))})("mouseup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonMouseUp())})("mouseleave",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonMouseLeave())})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onDownButtonKeyDown(r))})("keyup",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onDownButtonKeyUp())}),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.decrementButtonClass),s.Q6J("ngClass",s.DdM(5,WF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const SZ=function(n,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},IZ={provide:Sr,useExisting:(0,s.Gpc)(()=>mI),multi:!0};let mI=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onKeyDown=new s.vpe,this.onClear=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(e.map((r,o)=>[r,o]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let i=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(e,i,r){if(this.readonly)return;let o=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},o),this.spin(e,r)}spin(e,i){let r=this.step*i,o=this.parseValue(this.input.nativeElement.value)||0,l=this.validateValue(o+r);this.maxlength&&this.maxlength<this.formatValue(l).length||(this.updateInput(l,null,"spin",null),this.updateModel(e,l),this.handleOnInput(e,o,l))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let i=e.target.selectionStart,r=e.target.selectionEnd,o=e.target.value,l=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(o.charAt(i-1))||e.preventDefault();break;case 39:this.isNumeralChar(o.charAt(i))||e.preventDefault();break;case 13:l=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(l),this.input.nativeElement.setAttribute("aria-valuenow",l),this.updateModel(e,l);break;case 8:if(e.preventDefault(),i===r){const d=o.charAt(i-1),{decimalCharIndex:f,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(d)){const w=this.getDecimalLength(o);if(this._group.test(d))this._group.lastIndex=0,l=o.slice(0,i-2)+o.slice(i-1);else if(this._decimal.test(d))this._decimal.lastIndex=0,w?this.input.nativeElement.setSelectionRange(i-1,i-1):l=o.slice(0,i-1)+o.slice(i);else if(f>0&&i>f){const E=this.isDecimalMode()&&(this.minFractionDigits||0)<w?"":"0";l=o.slice(0,i-1)+E+o.slice(i)}else 1===y?(l=o.slice(0,i-1)+"0"+o.slice(i),l=this.parseValue(l)>0?l:""):l=o.slice(0,i-1)+o.slice(i)}this.updateValue(e,l,null,"delete-single")}else l=this.deleteRange(o,i,r),this.updateValue(e,l,null,"delete-range");break;case 46:if(e.preventDefault(),i===r){const d=o.charAt(i),{decimalCharIndex:f,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(d)){const w=this.getDecimalLength(o);if(this._group.test(d))this._group.lastIndex=0,l=o.slice(0,i)+o.slice(i+2);else if(this._decimal.test(d))this._decimal.lastIndex=0,w?this.input.nativeElement.setSelectionRange(i+1,i+1):l=o.slice(0,i)+o.slice(i+1);else if(f>0&&i>f){const E=this.isDecimalMode()&&(this.minFractionDigits||0)<w?"":"0";l=o.slice(0,i)+E+o.slice(i+1)}else 1===y?(l=o.slice(0,i)+"0"+o.slice(i+1),l=this.parseValue(l)>0?l:""):l=o.slice(0,i)+o.slice(i+1)}this.updateValue(e,l,null,"delete-back-single")}else l=this.deleteRange(o,i,r),this.updateValue(e,l,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let i=e.which||e.keyCode,r=String.fromCharCode(i);const o=this.isDecimalSign(r),l=this.isMinusSign(r);13!=i&&e.preventDefault(),(48<=i&&i<=57||l||o)&&this.insert(e,r,{isDecimalSign:o,isMinusSign:l})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("Text");if(i){let r=this.parseValue(i);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;const o=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:o}}getCharIndexes(e){const i=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const o=e.search(this._suffix);this._suffix.lastIndex=0;const l=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:o,currencyCharIndex:l}}insert(e,i,r={isDecimalSign:!1,isMinusSign:!1}){const o=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==o)return;let l=this.input.nativeElement.selectionStart,d=this.input.nativeElement.selectionEnd,f=this.input.nativeElement.value.trim();const{decimalCharIndex:y,minusCharIndex:w,suffixCharIndex:E,currencyCharIndex:M}=this.getCharIndexes(f);let N;if(r.isMinusSign)0===l&&(N=f,(-1===w||0!==d)&&(N=this.insertText(f,i,0,d)),this.updateValue(e,N,i,"insert"));else if(r.isDecimalSign)y>0&&l===y?this.updateValue(e,f,i,"insert"):(y>l&&y<d||-1===y&&this.maxFractionDigits)&&(N=this.insertText(f,i,l,d),this.updateValue(e,N,i,"insert"));else{const B=this.numberFormat.resolvedOptions().maximumFractionDigits,j=l!==d?"range-insert":"insert";if(y>0&&l>y){if(l+i.length-(y+1)<=B){const Q=M>=l?M-1:E>=l?E:f.length;N=f.slice(0,l)+i+f.slice(l+i.length,Q)+f.slice(Q),this.updateValue(e,N,i,j)}}else N=this.insertText(f,i,l,d),this.updateValue(e,N,i,j)}}insertText(e,i,r,o){if(2===("."===i?i:i.split(".")).length){const d=e.slice(r,o).search(this._decimal);return this._decimal.lastIndex=0,d>0?e.slice(0,r)+this.formatValue(i)+e.slice(o):e||this.formatValue(i)}return o-r===e.length?this.formatValue(i):0===r?i+e.slice(o):o===e.length?e.slice(0,r)+i:e.slice(0,r)+i+e.slice(o)}deleteRange(e,i,r){let o;return o=r-i===e.length?"":0===i?e.slice(r):r===e.length?e.slice(0,i):e.slice(0,i)+e.slice(r),o}initCursor(){let e=this.input.nativeElement.selectionStart,i=this.input.nativeElement.value,r=i.length,o=null,l=(this.prefixChar||"").length;i=i.replace(this._prefix,""),e-=l;let d=i.charAt(e);if(this.isNumeralChar(d))return e+l;let f=e-1;for(;f>=0;){if(d=i.charAt(f),this.isNumeralChar(d)){o=f+l;break}f--}if(null!==o)this.input.nativeElement.setSelectionRange(o+1,o+1);else{for(f=e;f<r;){if(d=i.charAt(f),this.isNumeralChar(d)){o=f+l;break}f++}null!==o&&this.input.nativeElement.setSelectionRange(o,o)}return o||0}onInputClick(){!this.readonly&&this.input.nativeElement.value!==ee.getSelection()&&this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,i,r,o){let l=this.input.nativeElement.value,d=null;null!=i&&(d=this.parseValue(i),d=d||this.allowEmpty?d:0,this.updateInput(d,r,o,i),this.handleOnInput(e,l,d))}handleOnInput(e,i,r){this.isValueChanged(i,r)&&this.onInput.emit({originalEvent:e,value:r,formattedValue:i})}isValueChanged(e,i){return null===i&&null!==e||null!=i&&i!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,i,r,o){i=i||"";let l=this.input.nativeElement.value,d=this.formatValue(e),f=l.length;if(d!==o&&(d=this.concatValues(d,o)),0===f){this.input.nativeElement.value=d,this.input.nativeElement.setSelectionRange(0,0);const w=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(w,w)}else{let y=this.input.nativeElement.selectionStart,w=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<d.length)return;this.input.nativeElement.value=d;let E=d.length;if("range-insert"===r){const M=this.parseValue((l||"").slice(0,y)),B=(null!==M?M.toString():"").split("").join(`(${this.groupChar})?`),j=new RegExp(B,"g");j.test(d);const Q=i.split("").join(`(${this.groupChar})?`),Ne=new RegExp(Q,"g");Ne.test(d.slice(j.lastIndex)),w=j.lastIndex+Ne.lastIndex,this.input.nativeElement.setSelectionRange(w,w)}else if(E===f)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(w+1,w+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(w-1,w-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(w,w);else if("delete-back-single"===r){let M=l.charAt(w-1),N=l.charAt(w),B=f-E,j=this._group.test(N);j&&1===B?w+=1:!j&&this.isNumeralChar(M)&&(w+=-1*B+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(w,w)}else if("-"===l&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const N=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(N,N)}else w+=E-f,this.input.nativeElement.setSelectionRange(w,w)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,i){if(e&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?e.replace(this.suffixChar,"").split(this._decimal)[0]+i.replace(this.suffixChar,"").slice(r)+this.suffixChar:-1!==r?e.split(this._decimal)[0]+i.slice(r):e}return e}getDecimalLength(e){if(e){const i=e.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(e,i),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,i){this.value!==i&&(this.value=i,this.onModelChange(i)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-inputNumber"]],viewQuery:function(e,i){if(1&e&&s.Gf(bZ,5),2&e){let r;s.iGM(r=s.CRH())&&(i.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&s.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputnumber-clearable",i.showClear&&"vertical"!=i.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[s._Bn([IZ]),s.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","tabindex","-1",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","-1",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,i){1&e&&(s.TgZ(0,"span",0)(1,"input",1,2),s.NdJ("input",function(o){return i.onUserInput(o)})("keydown",function(o){return i.onInputKeyDown(o)})("keypress",function(o){return i.onInputKeyPress(o)})("paste",function(o){return i.onPaste(o)})("click",function(){return i.onInputClick()})("focus",function(o){return i.onInputFocus(o)})("blur",function(o){return i.onInputBlur(o)}),s.qZA(),s.YNc(3,wZ,1,0,"i",3),s.YNc(4,CZ,3,12,"span",4),s.YNc(5,TZ,1,6,"button",5),s.YNc(6,EZ,1,6,"button",5),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass",s.kEZ(28,SZ,i.showButtons&&"stacked"===i.buttonLayout,i.showButtons&&"horizontal"===i.buttonLayout,i.showButtons&&"vertical"===i.buttonLayout))("ngStyle",i.style),s.xp6(1),s.Tol(i.inputStyleClass),s.Q6J("ngClass","p-inputnumber-input")("ngStyle",i.inputStyle)("value",i.formattedValue())("disabled",i.disabled)("readonly",i.readonly),s.uIk("placeholder",i.placeholder)("title",i.title)("id",i.inputId)("size",i.size)("name",i.name)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required)("min",i.min)("max",i.max),s.xp6(2),s.Q6J("ngIf","vertical"!=i.buttonLayout&&i.showClear&&i.value),s.xp6(1),s.Q6J("ngIf",i.showButtons&&"stacked"===i.buttonLayout),s.xp6(1),s.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout),s.xp6(1),s.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout))},dependencies:[pt,pn,Tn,Jw,_d],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),_I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,Xw,yd]}),n})();function DZ(n,t){1&n&&s.GkF(0)}const fM=function(n){return{$implicit:n}};function xZ(n,t){if(1&n&&(s.TgZ(0,"div",15),s.YNc(1,DZ,1,0,"ng-container",16),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",s.VKq(2,fM,e.paginatorState))}}function kZ(n,t){if(1&n&&(s.TgZ(0,"span",17),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.currentPageReport)}}const yI=function(n){return{"p-disabled":n}};function AZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",18),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.changePageToFirst(r))}),s._UZ(1,"span",19),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",s.VKq(2,yI,e.isFirstPage()||e.empty()))}}const MZ=function(n){return{"p-highlight":n}};function RZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",22),s.NdJ("click",function(r){const l=s.CHM(e).$implicit,d=s.oxw(3);return s.KtG(d.onPageLinkClick(r,l-1))}),s._uU(1),s.qZA()}if(2&n){const e=t.$implicit,i=s.oxw(3);s.Q6J("ngClass",s.VKq(2,MZ,e-1==i.getPage())),s.xp6(1),s.hij(" ",e," ")}}function OZ(n,t){if(1&n&&(s.TgZ(0,"span",20),s.YNc(1,RZ,2,4,"button",21),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.pageLinks)}}function PZ(n,t){if(1&n&&s._uU(0),2&n){const e=s.oxw(3);s.Oqu(e.currentPageReport)}}function NZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-dropdown",23),s.NdJ("onChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onPageDropdownChange(r))}),s.YNc(1,PZ,1,1,"ng-template",24),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function LZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",25),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.changePageToLast(r))}),s._UZ(1,"span",26),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",s.VKq(2,yI,e.isLastPage()||e.empty()))}}function FZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-inputNumber",27),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.changePage(r-1))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngModel",e.currentPage())("disabled",e.empty())}}function VZ(n,t){1&n&&s.GkF(0)}function BZ(n,t){if(1&n&&s.YNc(0,VZ,1,0,"ng-container",16),2&n){const e=t.$implicit,i=s.oxw(4);s.Q6J("ngTemplateOutlet",i.dropdownItemTemplate)("ngTemplateOutletContext",s.VKq(2,fM,e))}}function HZ(n,t){1&n&&(s.ynx(0),s.YNc(1,BZ,1,4,"ng-template",30),s.BQk())}function UZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-dropdown",28),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.rows=r)})("onChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onRppChange(r))}),s.YNc(1,HZ,2,0,"ng-container",29),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),s.xp6(1),s.Q6J("ngIf",e.dropdownItemTemplate)}}function zZ(n,t){1&n&&s.GkF(0)}function GZ(n,t){if(1&n&&(s.TgZ(0,"div",31),s.YNc(1,zZ,1,0,"ng-container",16),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",s.VKq(2,fM,e.paginatorState))}}function jZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",1),s.YNc(1,xZ,2,4,"div",2),s.YNc(2,kZ,2,1,"span",3),s.YNc(3,AZ,2,4,"button",4),s.TgZ(4,"button",5),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.changePageToPrev(r))}),s._UZ(5,"span",6),s.qZA(),s.YNc(6,OZ,2,1,"span",7),s.YNc(7,NZ,2,5,"p-dropdown",8),s.TgZ(8,"button",9),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.changePageToNext(r))}),s._UZ(9,"span",10),s.qZA(),s.YNc(10,LZ,2,4,"button",11),s.YNc(11,FZ,1,2,"p-inputNumber",12),s.YNc(12,UZ,2,6,"p-dropdown",13),s.YNc(13,GZ,2,4,"div",14),s.qZA()}if(2&n){const e=s.oxw();s.Tol(e.styleClass),s.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),s.xp6(1),s.Q6J("ngIf",e.templateLeft),s.xp6(1),s.Q6J("ngIf",e.showCurrentPageReport),s.xp6(1),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",s.VKq(17,yI,e.isFirstPage()||e.empty())),s.xp6(2),s.Q6J("ngIf",e.showPageLinks),s.xp6(1),s.Q6J("ngIf",e.showJumpToPageDropdown),s.xp6(1),s.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",s.VKq(19,yI,e.isLastPage()||e.empty())),s.xp6(2),s.Q6J("ngIf",e.showFirstLastIcon),s.xp6(1),s.Q6J("ngIf",e.showJumpToPageInput),s.xp6(1),s.Q6J("ngIf",e.rowsPerPageOptions),s.xp6(1),s.Q6J("ngIf",e.templateRight)}}let $Z=(()=>{class n{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new s.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),i=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-i/2)),o=Math.min(e-1,r+i-1);return r=Math.max(0,r-(this.pageLinkSize-(o-r+1))),[r,o]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let o=e[0];o<=r;o++)this.pageLinks.push(o+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let o=0;o<this.getPageCount();o++)this.pageItems.push({label:String(o+1),value:o})}}changePage(e){var i=this.getPageCount();if(e>=0&&e<i){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:i};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,i){this.changePage(i),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[s.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,i){1&e&&s.YNc(0,jZ,14,21,"div",0),2&e&&s.Q6J("ngIf",!!i.alwaysShow||i.pageLinks&&i.pageLinks.length>1)},dependencies:[pt,Ln,pn,wn,Tn,oC,ne,mI,hu,sl,ys],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),KF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,gI,_I,Ww,_e,vs,gI,_I,Ww,_e]}),n})();function ZZ(n,t){if(1&n&&s._UZ(0,"span",8),2&n){const e=s.oxw(2).$implicit;s.Tol(e.icon),s.Q6J("ngClass","p-button-icon p-button-icon-left")}}function qZ(n,t){if(1&n&&(s.ynx(0),s.YNc(1,ZZ,1,3,"span",6),s.TgZ(2,"span",7),s._uU(3),s.qZA(),s.BQk()),2&n){const e=s.oxw().$implicit,i=s.oxw();s.xp6(1),s.Q6J("ngIf",e.icon),s.xp6(2),s.Oqu(i.getOptionLabel(e))}}function WZ(n,t){1&n&&s.GkF(0)}const KZ=function(n,t){return{$implicit:n,index:t}};function YZ(n,t){if(1&n&&s.YNc(0,WZ,1,0,"ng-container",9),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw();s.Q6J("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",s.WLB(2,KZ,i,r))}}const QZ=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-button-icon-only":e}};function JZ(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2,3),s.NdJ("click",function(r){const o=s.CHM(e),l=o.$implicit,d=o.index,f=s.oxw();return s.KtG(f.onItemClick(r,l,d))})("keydown.enter",function(r){const o=s.CHM(e),l=o.$implicit,d=o.index,f=s.oxw();return s.KtG(f.onItemClick(r,l,d))})("blur",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onBlur())}),s.YNc(2,qZ,4,2,"ng-container",4),s.YNc(3,YZ,1,5,"ng-template",null,5,s.W1O),s.qZA()}if(2&n){const e=t.$implicit,i=s.MAs(4),r=s.oxw();s.Tol(e.styleClass),s.Q6J("ngClass",s.kEZ(10,QZ,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),s.uIk("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),s.xp6(2),s.Q6J("ngIf",!r.itemTemplate)("ngIfElse",i)}}const XZ={provide:Sr,useExisting:(0,s.Gpc)(()=>eq),multi:!0};let eq=(()=>{class n{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new s.vpe,this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Ge.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ge.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ge.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,i,r){if(!this.disabled&&!this.isOptionDisabled(i)){if(this.multiple)this.isSelected(i)?this.removeOption(i):this.value=[...this.value||[],this.getOptionValue(i)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let o=this.getOptionValue(i);this.value!==o&&(this.value=this.getOptionValue(i),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:i,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(i=>!Ge.equals(i,this.getOptionValue(e),this.dataKey))}isSelected(e){let i=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value&&this.value instanceof Array)for(let o of this.value)if(Ge.equals(o,r,this.dataKey)){i=!0;break}}else i=Ge.equals(this.getOptionValue(e),this.value,this.dataKey);return i}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-selectButton"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,s.Rgc,5),2&e){let o;s.iGM(o=s.CRH())&&(i.itemTemplate=o.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[s._Bn([XZ])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.YNc(1,JZ,5,14,"div",1),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),s.xp6(1),s.Q6J("ngForOf",i.options))},dependencies:[pt,Ln,pn,wn,Tn,ys],styles:['.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n'],encapsulation:2,changeDetection:0}),n})(),YF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,vs]}),n})();const tq=function(n,t,e){return{"p-checkbox-label-active":n,"p-disabled":t,"p-checkbox-label-focus":e}};function nq(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"label",7),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(),l=s.MAs(3);return s.KtG(o.onClick(r,l))}),s._uU(1),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("ngClass",s.kEZ(3,tq,null!=e.value,e.disabled,e.focused)),s.uIk("for",e.inputId),s.xp6(1),s.Oqu(e.label)}}const iq=function(n,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":n,"p-checkbox-focused":t}},rq=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-focus":e}},sq={provide:Sr,useExisting:(0,s.Gpc)(()=>QF),multi:!0};let QF=(()=>{class n{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,i){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,i.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[s._Bn([sq])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,i){if(1&e){const r=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),s.NdJ("keyup",function(l){return i.onKeyup(l)})("keydown",function(l){return i.onKeydown(l)})("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),s.qZA()(),s.TgZ(4,"div",4),s.NdJ("click",function(l){s.CHM(r);const d=s.MAs(3);return s.KtG(i.onClick(l,d))}),s._UZ(5,"span",5),s.qZA()(),s.YNc(6,nq,2,7,"label",6)}2&e&&(s.Tol(i.styleClass),s.Q6J("ngStyle",i.style)("ngClass",s.WLB(14,iq,i.disabled,i.focused)),s.xp6(2),s.Q6J("name",i.name)("readonly",i.readonly)("disabled",i.disabled),s.uIk("id",i.inputId)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),s.xp6(2),s.Q6J("ngClass",s.kEZ(17,rq,null!=i.value,i.disabled,i.focused)),s.uIk("aria-checked",!0===i.value),s.xp6(1),s.Q6J("ngClass",!0===i.value?i.checkboxTrueIcon:!1===i.value?i.checkboxFalseIcon:""),s.xp6(1),s.Q6J("ngIf",i.label))},dependencies:[pt,pn,Tn],encapsulation:2,changeDetection:0}),n})(),oq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();const aq=["container"],lq=["resizeHelper"],cq=["reorderIndicatorUp"],uq=["reorderIndicatorDown"],dq=["wrapper"],hq=["table"],pq=["thead"],fq=["tfoot"],gq=["scroller"];function mq(n,t){if(1&n&&(s.TgZ(0,"div",15),s._UZ(1,"i"),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function _q(n,t){1&n&&s.GkF(0)}function yq(n,t){if(1&n&&(s.TgZ(0,"div",16),s.YNc(1,_q,1,0,"ng-container",17),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.captionTemplate)}}function vq(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-paginator",18),s.NdJ("onPageChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onPageChange(r))}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function bq(n,t){1&n&&s.GkF(0)}const JF=function(n,t){return{$implicit:n,options:t}};function wq(n,t){if(1&n&&s.YNc(0,bq,1,0,"ng-container",22),2&n){const e=t.$implicit,i=t.options;s.oxw(2);const r=s.MAs(10);s.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",s.WLB(2,JF,e,i))}}const Cq=function(n){return{height:n}};function Tq(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-scroller",19,20),s.NdJ("onLazyLoad",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onLazyItemLoad(r))}),s.YNc(2,wq,1,5,"ng-template",21),s.qZA()}if(2&n){const e=s.oxw();s.Akn(s.VKq(15,Cq,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),s.Q6J("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("step",e.rows)("delay",e.lazy?e.virtualScrollDelay:0)("inline",!0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)("autoSize",!0)}}function Eq(n,t){1&n&&s.GkF(0)}const Sq=function(n){return{columns:n}};function Iq(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Eq,1,0,"ng-container",22),s.BQk()),2&n){const e=s.oxw(),i=s.MAs(10);s.xp6(1),s.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",s.WLB(4,JF,e.processedData,s.VKq(2,Sq,e.columns)))}}function Dq(n,t){1&n&&s.GkF(0)}function xq(n,t){1&n&&s.GkF(0)}function kq(n,t){if(1&n&&s._UZ(0,"tbody",31),2&n){const e=s.oxw().options,i=s.oxw();s.Q6J("value",i.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",i.frozenBodyTemplate)("frozen",!0)}}function Aq(n,t){if(1&n&&s._UZ(0,"tbody",32),2&n){const e=s.oxw().options;s.Akn("height: calc("+e.spacerStyle.height+" - "+e.rows.length*e.itemSize+"px);")}}function Mq(n,t){1&n&&s.GkF(0)}const aC=function(n){return{$implicit:n}};function Rq(n,t){if(1&n&&(s.TgZ(0,"tfoot",33,34),s.YNc(2,Mq,1,0,"ng-container",22),s.qZA()),2&n){const e=s.oxw().options,i=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",i.footerGroupedTemplate||i.footerTemplate)("ngTemplateOutletContext",s.VKq(2,aC,e.columns))}}const Oq=function(n,t,e){return{"p-datatable-table":!0,"p-datatable-scrollable-table":n,"p-datatable-resizable-table":t,"p-datatable-resizable-table-fit":e}};function Pq(n,t){if(1&n&&(s.TgZ(0,"table",23,24),s.YNc(2,Dq,1,0,"ng-container",22),s.TgZ(3,"thead",25,26),s.YNc(5,xq,1,0,"ng-container",22),s.qZA(),s.YNc(6,kq,1,5,"tbody",27),s._UZ(7,"tbody",28),s.YNc(8,Aq,1,2,"tbody",29),s.YNc(9,Rq,3,4,"tfoot",30),s.qZA()),2&n){const e=t.options,i=s.oxw();s.Akn(i.tableStyle),s.Tol(i.tableStyleClass),s.Q6J("ngClass",s.kEZ(20,Oq,i.scrollable,i.resizableColumns,i.resizableColumns&&"fit"===i.columnResizeMode)),s.uIk("id",i.id+"-table"),s.xp6(2),s.Q6J("ngTemplateOutlet",i.colGroupTemplate)("ngTemplateOutletContext",s.VKq(24,aC,e.columns)),s.xp6(3),s.Q6J("ngTemplateOutlet",i.headerGroupedTemplate||i.headerTemplate)("ngTemplateOutletContext",s.VKq(26,aC,e.columns)),s.xp6(1),s.Q6J("ngIf",i.frozenValue||i.frozenBodyTemplate),s.xp6(1),s.Akn(e.contentStyle),s.Q6J("ngClass",e.contentStyleClass)("value",i.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",i.bodyTemplate)("scrollerOptions",e),s.xp6(1),s.Q6J("ngIf",e.spacerStyle),s.xp6(1),s.Q6J("ngIf",i.footerGroupedTemplate||i.footerTemplate)}}function Nq(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-paginator",35),s.NdJ("onPageChange",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onPageChange(r))}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Lq(n,t){1&n&&s.GkF(0)}function Fq(n,t){if(1&n&&(s.TgZ(0,"div",36),s.YNc(1,Lq,1,0,"ng-container",17),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function Vq(n,t){1&n&&s._UZ(0,"div",37,38)}function Bq(n,t){1&n&&s._UZ(0,"span",39,40)}function Hq(n,t){1&n&&s._UZ(0,"span",41,42)}const Uq=function(n,t,e){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":n,"p-datatable-scrollable":t,"p-datatable-flex-scrollable":e}},zq=function(n){return{maxHeight:n}},Gq=["pTableBody",""];function jq(n,t){1&n&&s.GkF(0)}const gM=function(n,t,e,i,r){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r}};function $q(n,t){if(1&n&&(s.ynx(0,3),s.YNc(1,jq,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.qbA(2,gM,i,o.getRowIndex(r),o.columns,"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}function Zq(n,t){1&n&&s.GkF(0)}function qq(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Zq,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",i?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.qbA(2,gM,i,o.getRowIndex(r),o.columns,"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}function Wq(n,t){1&n&&s.GkF(0)}const Kq=function(n,t,e,i,r,o,l){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r,rowgroup:o,rowspan:l}};function Yq(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Wq,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",i?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.Hh0(2,Kq,i,o.getRowIndex(r),o.columns,"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen,o.shouldRenderRowspan(o.value,i,r),o.calculateRowGroupSize(o.value,i,r)))}}function Qq(n,t){1&n&&s.GkF(0)}function Jq(n,t){if(1&n&&(s.ynx(0,3),s.YNc(1,Qq,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",s.qbA(2,gM,i,o.getRowIndex(r),o.columns,"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}function Xq(n,t){if(1&n&&(s.YNc(0,$q,2,8,"ng-container",2),s.YNc(1,qq,2,8,"ng-container",0),s.YNc(2,Yq,2,10,"ng-container",0),s.YNc(3,Jq,2,8,"ng-container",2)),2&n){const e=t.$implicit,i=t.index,r=s.oxw(2);s.Q6J("ngIf",r.dt.groupHeaderTemplate&&!r.dt.virtualScroll&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),s.xp6(1),s.Q6J("ngIf","rowspan"!==r.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf","rowspan"===r.dt.rowGroupMode),s.xp6(1),s.Q6J("ngIf",r.dt.groupFooterTemplate&&!r.dt.virtualScroll&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,i))}}function eW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,Xq,4,4,"ng-template",1),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function tW(n,t){1&n&&s.GkF(0)}const vI=function(n,t,e,i,r,o){return{$implicit:n,rowIndex:t,columns:e,expanded:i,editing:r,frozen:o}};function nW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,tW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.template)("ngTemplateOutletContext",s.HTZ(2,vI,i,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(i),"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}function iW(n,t){1&n&&s.GkF(0)}function rW(n,t){if(1&n&&(s.ynx(0,3),s.YNc(1,iW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",s.HTZ(2,vI,i,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(i),"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}function sW(n,t){1&n&&s.GkF(0)}function oW(n,t){1&n&&s.GkF(0)}function aW(n,t){if(1&n&&(s.ynx(0,3),s.YNc(1,oW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(2),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",s.HTZ(2,vI,i,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(i),"row"===o.dt.editMode&&o.dt.isRowEditing(i),o.frozen))}}const XF=function(n,t,e,i){return{$implicit:n,rowIndex:t,columns:e,frozen:i}};function lW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,sW,1,0,"ng-container",4),s.YNc(2,aW,2,9,"ng-container",2),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.expandedRowTemplate)("ngTemplateOutletContext",s.l5B(3,XF,i,o.getRowIndex(r),o.columns,o.frozen)),s.xp6(1),s.Q6J("ngIf",o.dt.groupFooterTemplate&&"subheader"===o.dt.rowGroupMode&&o.shouldRenderRowGroupFooter(o.value,i,o.getRowIndex(r)))}}function cW(n,t){if(1&n&&(s.YNc(0,nW,2,9,"ng-container",0),s.YNc(1,rW,2,9,"ng-container",2),s.YNc(2,lW,3,8,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=s.oxw(2);s.Q6J("ngIf",!r.dt.groupHeaderTemplate),s.xp6(1),s.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(i))),s.xp6(1),s.Q6J("ngIf",r.dt.isRowExpanded(e))}}function uW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,cW,3,3,"ng-template",1),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function dW(n,t){1&n&&s.GkF(0)}function hW(n,t){1&n&&s.GkF(0)}function pW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,hW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw(),i=e.$implicit,r=e.index,o=s.oxw(2);s.xp6(1),s.Q6J("ngTemplateOutlet",o.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",s.l5B(2,XF,i,o.getRowIndex(r),o.columns,o.frozen))}}function fW(n,t){if(1&n&&(s.YNc(0,dW,1,0,"ng-container",4),s.YNc(1,pW,2,7,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=s.oxw(2);s.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",s.HTZ(3,vI,e,r.getRowIndex(i),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),s.xp6(1),s.Q6J("ngIf",r.dt.isRowExpanded(e))}}function gW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,fW,2,10,"ng-template",1),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function mW(n,t){1&n&&s.GkF(0)}const e2=function(n,t){return{$implicit:n,frozen:t}};function _W(n,t){if(1&n&&(s.ynx(0),s.YNc(1,mW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",s.WLB(2,e2,e.columns,e.frozen))}}function yW(n,t){1&n&&s.GkF(0)}function vW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,yW,1,0,"ng-container",4),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",s.WLB(2,e2,e.columns,e.frozen))}}function bW(n,t){if(1&n&&(s.TgZ(0,"span",2),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.getBadgeValue())}}const wW=function(n,t,e){return{"pi-sort-amount-up-alt":n,"pi-sort-amount-down":t,"pi-sort-alt":e}},EW=["icon"];function SW(n,t){if(1&n&&s._UZ(0,"p-columnFilterFormElement",5),2&n){const e=s.oxw();s.Q6J("type",e.type)("field",e.field)("filterConstraint",e.dt.filters[e.field])("filterTemplate",e.filterTemplate)("placeholder",e.placeholder)("minFractionDigits",e.minFractionDigits)("maxFractionDigits",e.maxFractionDigits)("prefix",e.prefix)("suffix",e.suffix)("locale",e.locale)("localeMatcher",e.localeMatcher)("currency",e.currency)("currencyDisplay",e.currencyDisplay)("useGrouping",e.useGrouping)("showButtons",e.showButtons)}}const IW=function(n,t){return{"p-column-filter-menu-button-open":n,"p-column-filter-menu-button-active":t}};function DW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",6,7),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.toggleMenu())})("keydown",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onToggleButtonKeyDown(r))}),s._UZ(2,"span",8),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("ngClass",s.WLB(2,IW,e.overlayVisible,e.hasFilter())),s.uIk("aria-expanded",e.overlayVisible)}}const xW=function(n){return{"p-hidden-space":n}};function kW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",9,7),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.clearFilter())}),s._UZ(2,"span",10),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("ngClass",s.VKq(1,xW,!e.hasRowFilter()))}}function AW(n,t){1&n&&s.GkF(0)}const MW=function(n){return{"p-highlight":n}};function RW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"li",19),s.NdJ("click",function(){const o=s.CHM(e).$implicit,l=s.oxw(3);return s.KtG(l.onRowMatchModeChange(o.value))})("keydown",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onRowMatchModeKeyDown(r))})("keydown.enter",function(){const o=s.CHM(e).$implicit,l=s.oxw(3);return s.KtG(l.onRowMatchModeChange(o.value))}),s._uU(1),s.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=s.oxw(3);s.Q6J("ngClass",s.VKq(3,MW,r.isRowMatchModeSelected(e.value))),s.uIk("tabindex",0===i?"0":null),s.xp6(1),s.hij(" ",e.label," ")}}function OW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"ul",15),s.YNc(1,RW,2,5,"li",16),s._UZ(2,"li",17),s.TgZ(3,"li",18),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onRowClearItemClick())})("keydown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onRowMatchModeKeyDown(r))})("keydown.enter",function(){s.CHM(e);const r=s.oxw(2);return s.KtG(r.onRowClearItemClick())}),s._uU(4),s.qZA()()}if(2&n){const e=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",e.matchModes),s.xp6(3),s.Oqu(e.noFilterLabel)}}function PW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",27)(1,"p-dropdown",28),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(3);return s.KtG(o.onOperatorChange(r))}),s.qZA()()}if(2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("options",e.operatorOptions)("ngModel",e.operator)}}function NW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-dropdown",33),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw().$implicit,l=s.oxw(3);return s.KtG(l.onMenuMatchModeChange(r,o))}),s.qZA()}if(2&n){const e=s.oxw().$implicit,i=s.oxw(3);s.Q6J("options",i.matchModes)("ngModel",e.matchMode)}}function LW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",34),s.NdJ("click",function(){s.CHM(e);const r=s.oxw().$implicit,o=s.oxw(3);return s.KtG(o.removeConstraint(r))}),s.qZA()}if(2&n){const e=s.oxw(4);s.Q6J("label",e.removeRuleButtonLabel)}}function FW(n,t){if(1&n&&(s.TgZ(0,"div",29),s.YNc(1,NW,1,2,"p-dropdown",30),s._UZ(2,"p-columnFilterFormElement",31),s.TgZ(3,"div"),s.YNc(4,LW,1,1,"button",32),s.qZA()()),2&n){const e=t.$implicit,i=s.oxw(3);s.xp6(1),s.Q6J("ngIf",i.showMatchModes&&i.matchModes),s.xp6(1),s.Q6J("type",i.type)("field",i.field)("filterConstraint",e)("filterTemplate",i.filterTemplate)("placeholder",i.placeholder)("minFractionDigits",i.minFractionDigits)("maxFractionDigits",i.maxFractionDigits)("prefix",i.prefix)("suffix",i.suffix)("locale",i.locale)("localeMatcher",i.localeMatcher)("currency",i.currency)("currencyDisplay",i.currencyDisplay)("useGrouping",i.useGrouping),s.xp6(2),s.Q6J("ngIf",i.showRemoveIcon)}}function VW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",35)(1,"button",36),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.addConstraint())}),s.qZA()()}if(2&n){const e=s.oxw(3);s.xp6(1),s.Q6J("label",e.addRuleButtonLabel)}}function BW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",37),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.clearFilter())}),s.qZA()}if(2&n){const e=s.oxw(3);s.Q6J("label",e.clearButtonLabel)}}function HW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",38),s.NdJ("click",function(){s.CHM(e);const r=s.oxw(3);return s.KtG(r.applyFilter())}),s.qZA()}if(2&n){const e=s.oxw(3);s.Q6J("label",e.applyButtonLabel)}}function UW(n,t){if(1&n&&(s.YNc(0,PW,2,2,"div",20),s.TgZ(1,"div",21),s.YNc(2,FW,5,16,"div",22),s.qZA(),s.YNc(3,VW,2,1,"div",23),s.TgZ(4,"div",24),s.YNc(5,BW,1,1,"button",25),s.YNc(6,HW,1,1,"button",26),s.qZA()),2&n){const e=s.oxw(2);s.Q6J("ngIf",e.isShowOperator),s.xp6(2),s.Q6J("ngForOf",e.fieldConstraints),s.xp6(1),s.Q6J("ngIf",e.isShowAddConstraint),s.xp6(2),s.Q6J("ngIf",e.showClearButton),s.xp6(1),s.Q6J("ngIf",e.showApplyButton)}}function zW(n,t){1&n&&s.GkF(0)}const GW=function(n){return{"p-column-filter-overlay p-component p-fluid":!0,"p-column-filter-overlay-menu":n}};function jW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",11),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onContentClick())})("@overlayAnimation.start",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onOverlayAnimationEnd(r))})("keydown.escape",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onEscape())}),s.YNc(1,AW,1,0,"ng-container",12),s.YNc(2,OW,5,2,"ul",13),s.YNc(3,UW,7,5,"ng-template",null,14,s.W1O),s.YNc(5,zW,1,0,"ng-container",12),s.qZA()}if(2&n){const e=s.MAs(4),i=s.oxw();s.Q6J("ngClass",s.VKq(8,GW,"menu"===i.display))("@overlayAnimation","visible"),s.xp6(1),s.Q6J("ngTemplateOutlet",i.headerTemplate)("ngTemplateOutletContext",s.VKq(10,aC,i.field)),s.xp6(1),s.Q6J("ngIf","row"===i.display)("ngIfElse",e),s.xp6(3),s.Q6J("ngTemplateOutlet",i.footerTemplate)("ngTemplateOutletContext",s.VKq(12,aC,i.field))}}const $W=function(n,t){return{"p-column-filter-row":n,"p-column-filter-menu":t}};function ZW(n,t){1&n&&s.GkF(0)}const qW=function(n,t,e,i,r,o,l,d,f,y,w,E,M,N,B,j){return{$implicit:n,filterCallback:t,type:e,field:i,filterConstraint:r,placeholder:o,minFractionDigits:l,maxFractionDigits:d,prefix:f,suffix:y,locale:w,localeMatcher:E,currency:M,currencyDisplay:N,useGrouping:B,showButtons:j}};function WW(n,t){if(1&n&&(s.ynx(0),s.YNc(1,ZW,1,0,"ng-container",2),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",s.rFY(2,qW,[e.filterConstraint.value,e.filterCallback,e.type,e.field,e.filterConstraint,e.placeholder,e.minFractionDigits,e.maxFractionDigits,e.prefix,e.suffix,e.locale,e.localeMatcher,e.currency,e.currencyDisplay,e.useGrouping,e.showButtons]))}}function KW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"input",8),s.NdJ("input",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onModelChange(r.target.value))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onTextInputEnterKeyDown(r))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("value",null==e.filterConstraint?null:e.filterConstraint.value),s.uIk("placeholder",e.placeholder)}}function YW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-inputNumber",9),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onModelChange(r))})("onKeyDown",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onNumericInputKeyDown(r))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngModel",null==e.filterConstraint?null:e.filterConstraint.value)("showButtons",e.showButtons)("minFractionDigits",e.minFractionDigits)("maxFractionDigits",e.maxFractionDigits)("prefix",e.prefix)("suffix",e.suffix)("placeholder",e.placeholder)("mode",e.currency?"currency":"decimal")("locale",e.locale)("localeMatcher",e.localeMatcher)("currency",e.currency)("currencyDisplay",e.currencyDisplay)("useGrouping",e.useGrouping)}}function QW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-triStateCheckbox",10),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onModelChange(r))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngModel",null==e.filterConstraint?null:e.filterConstraint.value)}}function JW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-calendar",11),s.NdJ("ngModelChange",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.onModelChange(r))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("placeholder",e.placeholder)("ngModel",null==e.filterConstraint?null:e.filterConstraint.value)}}function XW(n,t){if(1&n&&(s.ynx(0,3),s.YNc(1,KW,1,2,"input",4),s.YNc(2,YW,1,13,"p-inputNumber",5),s.YNc(3,QW,1,1,"p-triStateCheckbox",6),s.YNc(4,JW,1,2,"p-calendar",7),s.BQk()),2&n){const e=s.oxw();s.Q6J("ngSwitch",e.type),s.xp6(1),s.Q6J("ngSwitchCase","text"),s.xp6(1),s.Q6J("ngSwitchCase","numeric"),s.xp6(1),s.Q6J("ngSwitchCase","boolean"),s.xp6(1),s.Q6J("ngSwitchCase","date")}}let bI=(()=>{class n{constructor(){this.sortSource=new Nt.x,this.selectionSource=new Nt.x,this.contextMenuSource=new Nt.x,this.valueSource=new Nt.x,this.totalRecordsSource=new Nt.x,this.columnsSource=new Nt.x,this.resetSource=new Nt.x,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),pu=(()=>{class n{constructor(e,i,r,o,l,d){this.el=e,this.zone=i,this.tableService=r,this.cd=o,this.filterService=l,this.overlayService=d,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new s.vpe,this.selectionChange=new s.vpe,this.contextMenuSelectionChange=new s.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(f,y)=>y,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="scroll",this.breakpoint="960px",this.onRowSelect=new s.vpe,this.onRowUnselect=new s.vpe,this.onPage=new s.vpe,this.onSort=new s.vpe,this.onFilter=new s.vpe,this.onLazyLoad=new s.vpe,this.onRowExpand=new s.vpe,this.onRowCollapse=new s.vpe,this.onContextMenuSelect=new s.vpe,this.onColResize=new s.vpe,this.onColReorder=new s.vpe,this.onRowReorder=new s.vpe,this.onEditInit=new s.vpe,this.onEditComplete=new s.vpe,this.onEditCancel=new s.vpe,this.onHeaderCheckboxToggle=new s.vpe,this.sortFunction=new s.vpe,this.firstChange=new s.vpe,this.rowsChange=new s.vpe,this.onStateSave=new s.vpe,this.onStateRestore=new s.vpe,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=Ol()}get responsive(){return this._responsive}set responsive(e){this._responsive=e,console.warn("responsive propery is deprecated as table is always responsive with scrollable behavior.")}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const i=e||this.processedData;if(i&&this.paginator){const r=this.lazy?0:this.first;return i.slice(r,r+this.rows)}return i}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ge.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Ge.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let i=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=i.metaKey||i.ctrlKey,o=this.getSortMeta(e.field);o?r?o.order=-1*o.order:(this._multiSortMeta=[{field:e.field,order:-1*o.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,i=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&i){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:i}):(this.value.sort((o,l)=>{let d=Ge.resolveFieldData(o,e),f=Ge.resolveFieldData(l,e),y=null;return y=null==d&&null!=f?-1:null!=d&&null==f?1:null==d&&null==f?0:"string"==typeof d&&"string"==typeof f?d.localeCompare(f):d<f?-1:d>f?1:0,i*y}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:i};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,i)=>this.multisortField(e,i,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,i,r,o){const l=Ge.resolveFieldData(e,r[o].field),d=Ge.resolveFieldData(i,r[o].field);return 0===Ge.compare(l,d,this.filterLocale)?r.length-1>o?this.multisortField(e,i,r,o+1):0:this.compareValuesOnSort(l,d,r[o].order)}compareValuesOnSort(e,i,r){return Ge.sort(e,i,r,this.filterLocale,this.sortOrder)}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field===e)return this.multiSortMeta[i];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let i=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){i=!0;break}return i}}handleRowClick(e){let i=e.originalEvent.target,r=i.nodeName,o=i.parentElement&&i.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=o&&"BUTTON"!=o&&"A"!=o&&!ee.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let l=e.rowData,d=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)ee.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=d,this.selectRange(e.originalEvent,d);else{let f=this.isSelected(l);if(!f&&!this.isRowSelectable(l,d))return;let y=!this.rowTouched&&this.metaKeySelection,w=this.dataKey?String(Ge.resolveFieldData(l,this.dataKey)):null;if(this.anchorRowIndex=d,this.rangeRowIndex=d,y){let E=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(f&&E){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let M=this.findIndexInSelection(l);this._selection=this.selection.filter((N,B)=>B!=M),this.selectionChange.emit(this.selection),w&&delete this.selectionKeys[w]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:l,type:"row"})}else this.isSingleSelectionMode()?(this._selection=l,this.selectionChange.emit(l),w&&(this.selectionKeys={},this.selectionKeys[w]=1)):this.isMultipleSelectionMode()&&(E?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,l],this.selectionChange.emit(this.selection),w&&(this.selectionKeys[w]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:l,type:"row",index:d})}else if("single"===this.selectionMode)f?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:l,type:"row",index:d})):(this._selection=l,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:l,type:"row",index:d}),w&&(this.selectionKeys={},this.selectionKeys[w]=1));else if("multiple"===this.selectionMode)if(f){let E=this.findIndexInSelection(l);this._selection=this.selection.filter((M,N)=>N!=E),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:l,type:"row",index:d}),w&&delete this.selectionKeys[w]}else this._selection=this.selection?[...this.selection,l]:[l],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:l,type:"row",index:d}),w&&(this.selectionKeys[w]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const i=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=i,this.contextMenuSelectionChange.emit(i),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:i,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(i);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let o=this.isSelected(i),l=this.dataKey?String(Ge.resolveFieldData(i,this.dataKey)):null;if(!o){if(!this.isRowSelectable(i,r))return;this.isSingleSelectionMode()?(this.selection=i,this.selectionChange.emit(i),l&&(this.selectionKeys={},this.selectionKeys[l]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),l&&(this.selectionKeys[l]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:i,index:e.rowIndex})}}}selectRange(e,i){let r,o;this.anchorRowIndex>i?(r=i,o=this.anchorRowIndex):this.anchorRowIndex<i?(r=this.anchorRowIndex,o=i):(r=i,o=i),this.lazy&&this.paginator&&(r-=this.first,o-=this.first);let l=[];for(let d=r;d<=o;d++){let f=this.filteredValue?this.filteredValue[d]:this.value[d];if(!this.isSelected(f)){if(!this.isRowSelectable(f,i))continue;l.push(f),this._selection=[...this.selection,f];let y=this.dataKey?String(Ge.resolveFieldData(f,this.dataKey)):null;y&&(this.selectionKeys[y]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:l,type:"row"})}clearSelectionRange(e){let i,r;this.rangeRowIndex>this.anchorRowIndex?(i=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(i=this.rangeRowIndex,r=this.anchorRowIndex):(i=this.rangeRowIndex,r=this.rangeRowIndex);for(let o=i;o<=r;o++){let l=this.value[o],d=this.findIndexInSelection(l);this._selection=this.selection.filter((y,w)=>w!=d);let f=this.dataKey?String(Ge.resolveFieldData(l,this.dataKey)):null;f&&delete this.selectionKeys[f],this.onRowUnselect.emit({originalEvent:e,data:l,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ge.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let i=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){i=r;break}return i}isRowSelectable(e,i){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:i}))}toggleRowWithRadio(e,i){if(this.preventSelectionSetterPropagation=!0,this.selection!=i){if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=i,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Ge.resolveFieldData(i,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,i){this.selection=this.selection||[];let r=this.isSelected(i),o=this.dataKey?String(Ge.resolveFieldData(i,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let l=this.findIndexInSelection(i);this._selection=this.selection.filter((d,f)=>f!=l),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),o&&delete this.selectionKeys[o]}else{if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),o&&(this.selectionKeys[o]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,i){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:i});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let o=this.selectionPageOnly&&this._selection?this._selection.filter(l=>!r.some(d=>this.equals(l,d))):[];i&&(o=this.frozenValue?[...o,...this.frozenValue,...r]:[...o,...r],o=this.rowSelectable?o.filter((l,d)=>this.rowSelectable({data:l,index:d})):o),this._selection=o,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:i}),this.isStateful()&&this.saveState()}}equals(e,i){return"equals"===this.compareSelectionBy?e===i:Ge.equals(e,i,this.dataKey)}filter(e,i,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[i]&&delete this.filters[i]:this.filters[i]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,i){this.filter(e,"global",i)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let i=0;i<this.value.length;i++){let d,r=!0,o=!1,l=!1;for(let f in this.filters)if(this.filters.hasOwnProperty(f)&&"global"!==f){l=!0;let y=f,w=this.filters[y];if(Array.isArray(w)){for(let E of w)if(r=this.executeLocalFilter(y,this.value[i],E),E.operator===Ls.OR&&r||E.operator===Ls.AND&&!r)break}else r=this.executeLocalFilter(y,this.value[i],w);if(!r)break}if(this.filters.global&&!o&&e)for(let f=0;f<e.length&&(o=this.filterService.filters[this.filters.global.matchMode](Ge.resolveFieldData(this.value[i],e[f].field||e[f]),this.filters.global.value,this.filterLocale),!o);f++);d=this.filters.global?l?l&&r&&o:o:l&&r,d&&this.filteredValue.push(this.value[i])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,i,r){let o=r.value,l=r.matchMode||Pn.STARTS_WITH,d=Ge.resolveFieldData(i,e);return(0,this.filterService.filters[l])(d,o,this.filterLocale)}hasFilter(){let e=!0;for(let i in this.filters)if(this.filters.hasOwnProperty(i)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let i,r="",o=this.columns;e&&e.selectionOnly?i=this.selection||[]:e&&e.allValues?i=this.value||[]:(i=this.filteredValue||this.value,this.frozenValue&&(i=i?[...this.frozenValue,...i]:this.frozenValue));for(let f=0;f<o.length;f++){let y=o[f];!1!==y.exportable&&y.field&&(r+='"'+this.getExportHeader(y)+'"',f<o.length-1&&(r+=this.csvSeparator))}i.forEach((f,y)=>{r+="\n";for(let w=0;w<o.length;w++){let E=o[w];if(!1!==E.exportable&&E.field){let M=Ge.resolveFieldData(f,E.field);M=null!=M?this.exportFunction?this.exportFunction({data:M,field:E.field}):String(M).replace(/"/g,'""'):"",r+='"'+M+'"',w<o.length-1&&(r+=this.csvSeparator)}}});let l=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.style.display="none",document.body.appendChild(d),void 0!==d.download?(d.setAttribute("href",URL.createObjectURL(l)),d.setAttribute("download",this.exportFilename+".csv"),d.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(d)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,i,r,o){this.editingCell=e,this.editingCellData=i,this.editingCellField=r,this.editingCellRowIndex=o,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===ee.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(ee.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let i=String(Ge.resolveFieldData(e,this.dataKey));this.editingRowKeys[i]=!0}saveRowEdit(e,i){if(0===ee.find(i,".ng-invalid.ng-dirty").length){let r=String(Ge.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let i=String(Ge.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[i]}toggleRow(e,i){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(Ge.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:i,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:i,data:e})),i&&i.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Ge.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Ge.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let i=ee.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let i=ee.getOffset(this.containerViewChild.nativeElement).left;ee.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,"")||15)){if("fit"===this.columnResizeMode){let d=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&d>15&&this.resizeTableCells(r,d)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",ee.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,i){let r=ee.index(this.resizeColumnElement),o=[];const l=ee.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");ee.find(l,"tr > th").forEach(y=>o.push(ee.getOuterWidth(y))),this.destroyStyleElement(),this.createStyleElement();let f="";o.forEach((y,w)=>{let E=w===r?e:i&&w===r+1?i:y;f+=`\n                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${w+1}),\n                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${w+1}),\n                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${w+1}) {\n                    width: ${E}px !important; max-width: ${E}px !important;\n                }\n            `}),this.styleElement.innerHTML=f}onColumnDragStart(e,i){this.reorderIconWidth=ee.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=ee.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=i,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,i){if(this.reorderableColumns&&this.draggedColumn&&i){e.preventDefault();let r=ee.getOffset(this.containerViewChild.nativeElement),o=ee.getOffset(i);if(this.draggedColumn!=i){ee.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),ee.indexWithinGroup(i,"preorderablecolumn");let f=o.left-r.left,w=o.left+i.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=o.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=o.top-r.top+i.offsetHeight+"px",e.pageX>w?(this.reorderIndicatorUpViewChild.nativeElement.style.left=f+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=f+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=f-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=f-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&e.preventDefault()}onColumnDrop(e,i){if(e.preventDefault(),this.draggedColumn){let r=ee.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),o=ee.indexWithinGroup(i,"preorderablecolumn"),l=r!=o;l&&(o-r==1&&-1===this.dropPosition||r-o==1&&1===this.dropPosition)&&(l=!1),l&&o<r&&1===this.dropPosition&&(o+=1),l&&o>r&&-1===this.dropPosition&&(o-=1),l&&(Ge.reorderArray(this.columns,r,o),this.onColReorder.emit({dragIndex:r,dropIndex:o,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,i){this.rowDragging=!0,this.draggedRowIndex=i,e.dataTransfer.setData("text","b")}onRowDragOver(e,i,r){if(this.rowDragging&&this.draggedRowIndex!==i){let o=ee.getOffset(r).top+ee.getWindowScrollTop(),l=e.pageY,d=o+ee.getOuterHeight(r)/2,f=r.previousElementSibling;l<d?(ee.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=i,f?ee.addClass(f,"p-datatable-dragpoint-bottom"):ee.addClass(r,"p-datatable-dragpoint-top")):(f?ee.removeClass(f,"p-datatable-dragpoint-bottom"):ee.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=i+1,ee.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,i){let r=i.previousElementSibling;r&&ee.removeClass(r,"p-datatable-dragpoint-bottom"),ee.removeClass(i,"p-datatable-dragpoint-bottom"),ee.removeClass(i,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,i){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Ge.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,i),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let i={};this.paginator&&(i.first=this.first,i.rows=this.rows),this.sortField&&(i.sortField=this.sortField,i.sortOrder=this.sortOrder),this.multiSortMeta&&(i.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(i.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(i),this.reorderableColumns&&this.saveColumnOrder(i),this.selection&&(i.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(i.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(i)),this.onStateSave.emit(i)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const i=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(i){let l=JSON.parse(i,function(l,d){return"string"==typeof d&&r.test(d)?new Date(d):d});this.paginator&&(void 0!==this.first&&(this.first=l.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=l.rows,this.rowsChange.emit(this.rows))),l.sortField&&(this.restoringSort=!0,this._sortField=l.sortField,this._sortOrder=l.sortOrder),l.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=l.multiSortMeta),l.filters&&(this.restoringFilter=!0,this.filters=l.filters),this.resizableColumns&&(this.columnWidthsState=l.columnWidths,this.tableWidthState=l.tableWidth),l.expandedRowKeys&&(this.expandedRowKeys=l.expandedRowKeys),l.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(l.selection)),this.stateRestored=!0,this.onStateRestore.emit(l)}}saveColumnWidths(e){let i=[];ee.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(o=>i.push(ee.getOuterWidth(o))),e.columnWidths=i.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=ee.getOuterWidth(this.tableViewChild.nativeElement))}setResizeTableWidth(e){this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),Ge.isNotEmpty(e)){this.createStyleElement();let i="";e.forEach((r,o)=>{i+=`\n                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${o+1}),\n                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${o+1}),\n                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${o+1}) {\n                            width: ${r}px !important; max-width: ${r}px !important\n                        }\n                    `}),this.styleElement.innerHTML=i}}}saveColumnOrder(e){if(this.columns){let i=[];this.columns.map(r=>{i.push(r.field||r.key)}),e.columnOrder=i}}restoreColumnOrder(){const i=this.getStorage().getItem(this.stateKey);if(i){let o=JSON.parse(i).columnOrder;if(o){let l=[];o.map(d=>{let f=this.findColumnByKey(d);f&&l.push(f)}),this.columnOrderStateRestored=!0,this.columns=l}}}findColumnByKey(e){if(!this.columns)return null;for(let i of this.columns)if(i.key===e||i.field===e)return i}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id}-table > .p-datatable-thead > tr > th,\n    #${this.id}-table > .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(bI),s.Y36(s.sBO),s.Y36(Pl),s.Y36(I))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-table"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&(s.Gf(aq,5),s.Gf(lq,5),s.Gf(cq,5),s.Gf(uq,5),s.Gf(dq,5),s.Gf(hq,5),s.Gf(pq,5),s.Gf(fq,5),s.Gf(gq,5)),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first),s.iGM(r=s.CRH())&&(i.resizeHelperViewChild=r.first),s.iGM(r=s.CRH())&&(i.reorderIndicatorUpViewChild=r.first),s.iGM(r=s.CRH())&&(i.reorderIndicatorDownViewChild=r.first),s.iGM(r=s.CRH())&&(i.wrapperViewChild=r.first),s.iGM(r=s.CRH())&&(i.tableViewChild=r.first),s.iGM(r=s.CRH())&&(i.tableHeaderViewChild=r.first),s.iGM(r=s.CRH())&&(i.tableFooterViewChild=r.first),s.iGM(r=s.CRH())&&(i.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[s._Bn([bI]),s.TTD],decls:16,vars:22,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display: none;",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display: none;",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","autoSize","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass"],["table",""],[1,"p-datatable-thead"],["thead",""],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-scroller-spacer",3,"style",4,"ngIf"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-scroller-spacer"],[1,"p-datatable-tfoot"],["tfoot",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,i){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,mq,2,2,"div",2),s.YNc(3,yq,2,1,"div",3),s.YNc(4,vq,1,17,"p-paginator",4),s.TgZ(5,"div",5,6),s.YNc(7,Tq,3,17,"p-scroller",7),s.YNc(8,Iq,2,7,"ng-container",8),s.YNc(9,Pq,10,28,"ng-template",null,9,s.W1O),s.qZA(),s.YNc(11,Nq,1,17,"p-paginator",10),s.YNc(12,Fq,2,1,"div",11),s.YNc(13,Vq,2,0,"div",12),s.YNc(14,Bq,2,0,"span",13),s.YNc(15,Hq,2,0,"span",14),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngStyle",i.style)("ngClass",s.kEZ(16,Uq,i.rowHover||i.selectionMode,i.scrollable,i.scrollable&&"flex"===i.scrollHeight)),s.uIk("id",i.id),s.xp6(2),s.Q6J("ngIf",i.loading&&i.showLoader),s.xp6(1),s.Q6J("ngIf",i.captionTemplate),s.xp6(1),s.Q6J("ngIf",i.paginator&&("top"===i.paginatorPosition||"both"==i.paginatorPosition)),s.xp6(1),s.Q6J("ngStyle",s.VKq(20,zq,i.virtualScroll?"":i.scrollHeight)),s.xp6(2),s.Q6J("ngIf",i.virtualScroll),s.xp6(1),s.Q6J("ngIf",!i.virtualScroll),s.xp6(3),s.Q6J("ngIf",i.paginator&&("bottom"===i.paginatorPosition||"both"==i.paginatorPosition)),s.xp6(1),s.Q6J("ngIf",i.summaryTemplate),s.xp6(1),s.Q6J("ngIf",i.resizableColumns),s.xp6(1),s.Q6J("ngIf",i.reorderableColumns),s.xp6(1),s.Q6J("ngIf",i.reorderableColumns))},dependencies:function(){return[pt,pn,wn,Tn,$Z,ne,dM,eK]},styles:[".p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:1}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),n})(),eK=(()=>{class n{constructor(e,i,r,o){this.dt=e,this.tableService=i,this.cd=r,this.el=o,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,i,r){let o=Ge.resolveFieldData(i,this.dt.groupRowsBy),l=e[r-1];return!l||o!==Ge.resolveFieldData(l,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,i,r){let o=Ge.resolveFieldData(i,this.dt.groupRowsBy),l=e[r+1];return!l||o!==Ge.resolveFieldData(l,this.dt.groupRowsBy)}shouldRenderRowspan(e,i,r){let o=Ge.resolveFieldData(i,this.dt.groupRowsBy),l=e[r-1];return!l||o!==Ge.resolveFieldData(l,this.dt.groupRowsBy)}calculateRowGroupSize(e,i,r){let o=Ge.resolveFieldData(i,this.dt.groupRowsBy),l=o,d=0;for(;o===l;){d++;let f=e[++r];if(!f)break;l=Ge.resolveFieldData(f,this.dt.groupRowsBy)}return 1===d?null:d}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=ee.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=ee.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}getScrollerOption(e,i){return this.dt.virtualScroll&&(i=i||this.scrollerOptions)?i[e]:null}getRowIndex(e){const i=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(i).index:i}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu),s.Y36(bI),s.Y36(s.sBO),s.Y36(s.SBq))},n.\u0275cmp=s.Xpm({type:n,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},attrs:Gq,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(s.YNc(0,eW,2,2,"ng-container",0),s.YNc(1,uW,2,2,"ng-container",0),s.YNc(2,gW,2,2,"ng-container",0),s.YNc(3,_W,2,5,"ng-container",0),s.YNc(4,vW,2,5,"ng-container",0)),2&e&&(s.Q6J("ngIf",!i.dt.expandedRowTemplate),s.xp6(1),s.Q6J("ngIf",i.dt.expandedRowTemplate&&!(i.frozen&&i.dt.frozenExpandedRowTemplate)),s.xp6(1),s.Q6J("ngIf",i.dt.frozenExpandedRowTemplate&&i.frozen),s.xp6(1),s.Q6J("ngIf",i.dt.loading),s.xp6(1),s.Q6J("ngIf",i.dt.isEmpty()&&!i.dt.loading))},dependencies:[Ln,pn,wn],encapsulation:2}),n})(),tK=(()=>{class n{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(i=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),ee.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return ee.hasClass(e,"pi-filter-icon")||ee.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu))},n.\u0275dir=s.lG2({type:n,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,i){1&e&&s.NdJ("click",function(o){return i.onClick(o)})("keydown.enter",function(o){return i.onEnterKey(o)}),2&e&&(s.uIk("tabindex",i.isEnabled()?"0":null)("role","columnheader")("aria-sort",i.sortOrder),s.ekj("p-sortable-column",i.isEnabled())("p-highlight",i.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),n})(),nK=(()=>{class n{constructor(e,i){this.dt=e,this.cd=i,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,i=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let o=e[r];if(o.field===this.field||o.field===this.field){i=r;break}}return i}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,i){1&e&&(s._UZ(0,"i",0),s.YNc(1,bW,2,1,"span",1)),2&e&&(s.Q6J("ngClass",s.kEZ(2,wW,1===i.sortOrder,-1===i.sortOrder,0===i.sortOrder)),s.xp6(1),s.Q6J("ngIf",i.isMultiSorted()))},dependencies:[pt,pn],encapsulation:2,changeDetection:0}),n})(),iK=(()=>{class n{constructor(e,i){this.dt=e,this.tableService=i,this.isEnabled()&&(this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.selected=this.dt.isSelected(this.data)}))}ngOnInit(){this.isEnabled()&&(this.selected=this.dt.isSelected(this.data))}onClick(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onTouchEnd(e){this.isEnabled()&&this.dt.handleRowTouchEnd(e)}onArrowDownKeyDown(e){if(!this.isEnabled())return;const r=this.findNextSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onArrowUpKeyDown(e){if(!this.isEnabled())return;const r=this.findPrevSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onEnterKeyDown(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onPageDownKeyDown(){this.dt.virtualScroll&&this.dt.scroller.elementViewChild.nativeElement.focus()}onSpaceKeydown(){this.dt.virtualScroll&&!this.dt.editingCell&&this.dt.scroller.elementViewChild.nativeElement.focus()}findNextSelectableRow(e){let i=e.nextElementSibling;return i?ee.hasClass(i,"p-selectable-row")?i:this.findNextSelectableRow(i):null}findPrevSelectableRow(e){let i=e.previousElementSibling;return i?ee.hasClass(i,"p-selectable-row")?i:this.findPrevSelectableRow(i):null}isEnabled(){return!0!==this.pSelectableRowDisabled}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu),s.Y36(bI))},n.\u0275dir=s.lG2({type:n,selectors:[["","pSelectableRow",""]],hostAttrs:[1,"p-element"],hostVars:5,hostBindings:function(e,i){1&e&&s.NdJ("click",function(o){return i.onClick(o)})("touchend",function(o){return i.onTouchEnd(o)})("keydown.arrowdown",function(o){return i.onArrowDownKeyDown(o)})("keydown.arrowup",function(o){return i.onArrowUpKeyDown(o)})("keydown.enter",function(o){return i.onEnterKeyDown(o)})("keydown.shift.enter",function(o){return i.onEnterKeyDown(o)})("keydown.meta.enter",function(o){return i.onEnterKeyDown(o)})("keydown.pagedown",function(){return i.onPageDownKeyDown()})("keydown.pageup",function(){return i.onPageDownKeyDown()})("keydown.home",function(){return i.onPageDownKeyDown()})("keydown.end",function(){return i.onPageDownKeyDown()})("keydown.space",function(){return i.onSpaceKeydown()}),2&e&&(s.uIk("tabindex",i.isEnabled()?0:void 0),s.ekj("p-selectable-row",i.isEnabled())("p-highlight",i.selected))},inputs:{data:["pSelectableRow","data"],index:["pSelectableRowIndex","index"],pSelectableRowDisabled:"pSelectableRowDisabled"}}),n})(),rK=(()=>{class n{constructor(e){this.dt=e}onClick(e){this.isEnabled()&&(this.dt.toggleRow(this.data,e),e.preventDefault())}isEnabled(){return!0!==this.pRowTogglerDisabled}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu))},n.\u0275dir=s.lG2({type:n,selectors:[["","pRowToggler",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,i){1&e&&s.NdJ("click",function(o){return i.onClick(o)})},inputs:{data:["pRowToggler","data"],pRowTogglerDisabled:"pRowTogglerDisabled"}}),n})(),t2=(()=>{class n{constructor(e,i,r,o,l){this.el=e,this.dt=i,this.renderer=r,this.config=o,this.overlayService=l,this.type="text",this.display="row",this.showMenu=!0,this.operator=Ls.AND,this.showOperator=!0,this.showClearButton=!0,this.showApplyButton=!0,this.showMatchModes=!0,this.showAddButton=!0,this.hideOnClear=!1,this.maxConstraints=2,this.useGrouping=!0,this.showButtons=!0}ngOnInit(){this.dt.filters[this.field]||this.initFieldFilterConstraint(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.generateMatchModeOptions(),this.generateOperatorOptions()}),this.resetSubscription=this.dt.tableService.resetSource$.subscribe(()=>{this.initFieldFilterConstraint()}),this.generateMatchModeOptions(),this.generateOperatorOptions()}generateMatchModeOptions(){this.matchModes=this.matchModeOptions||this.config.filterMatchModeOptions[this.type]?.map(e=>({label:this.config.getTranslation(e),value:e}))}generateOperatorOptions(){this.operatorOptions=[{label:this.config.getTranslation(Ye.MATCH_ALL),value:Ls.AND},{label:this.config.getTranslation(Ye.MATCH_ANY),value:Ls.OR}]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"filter":default:this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}initFieldFilterConstraint(){let e=this.getDefaultMatchMode();this.dt.filters[this.field]="row"==this.display?{value:null,matchMode:e}:[{value:null,matchMode:e,operator:this.operator}]}onMenuMatchModeChange(e,i){i.matchMode=e,this.showApplyButton||this.dt._filter()}onRowMatchModeChange(e){this.dt.filters[this.field].matchMode=e,this.dt._filter(),this.hide()}onRowMatchModeKeyDown(e){let i=e.target;switch(e.key){case"ArrowDown":var r=this.findNextItem(i);r&&(i.removeAttribute("tabindex"),r.tabIndex="0",r.focus()),e.preventDefault();break;case"ArrowUp":var o=this.findPrevItem(i);o&&(i.removeAttribute("tabindex"),o.tabIndex="0",o.focus()),e.preventDefault()}}onRowClearItemClick(){this.clearFilter(),this.hide()}isRowMatchModeSelected(e){return this.dt.filters[this.field].matchMode===e}addConstraint(){this.dt.filters[this.field].push({value:null,matchMode:this.getDefaultMatchMode(),operator:this.getDefaultOperator()})}removeConstraint(e){this.dt.filters[this.field]=this.dt.filters[this.field].filter(i=>i!==e),this.dt._filter()}onOperatorChange(e){this.dt.filters[this.field].forEach(i=>{i.operator=e,this.operator=e}),this.showApplyButton||this.dt._filter()}toggleMenu(){this.overlayVisible=!this.overlayVisible}onToggleButtonKeyDown(e){switch(e.key){case"Escape":case"Tab":this.overlayVisible=!1;break;case"ArrowDown":if(this.overlayVisible){let i=ee.getFocusableElements(this.overlay);i&&i[0].focus(),e.preventDefault()}else e.altKey&&(this.overlayVisible=!0,e.preventDefault())}}onEscape(){this.overlayVisible=!1,this.icon.nativeElement.focus()}findNextItem(e){let i=e.nextElementSibling;return i?ee.hasClass(i,"p-column-filter-separator")?this.findNextItem(i):i:e.parentElement.firstElementChild}findPrevItem(e){let i=e.previousElementSibling;return i?ee.hasClass(i,"p-column-filter-separator")?this.findPrevItem(i):i:e.parentElement.lastElementChild}onContentClick(){this.selfClick=!0}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,document.body.appendChild(this.overlay),xn.set("overlay",this.overlay,this.config.zIndex.overlay),ee.absolutePosition(this.overlay,this.icon.nativeElement),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.overlayEventListener=i=>{this.overlay&&this.overlay.contains(i.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener);break;case"void":this.onOverlayHide(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}}onOverlayAnimationEnd(e){"void"===e.toState&&xn.clear(e.element)}getDefaultMatchMode(){return this.matchMode?this.matchMode:"text"===this.type?Pn.STARTS_WITH:"numeric"===this.type?Pn.EQUALS:"date"===this.type?Pn.DATE_IS:Pn.CONTAINS}getDefaultOperator(){return this.dt.filters?this.dt.filters[this.field][0].operator:this.operator}hasRowFilter(){return this.dt.filters[this.field]&&!this.dt.isFilterBlank(this.dt.filters[this.field].value)}get fieldConstraints(){return this.dt.filters?this.dt.filters[this.field]:null}get showRemoveIcon(){return!!this.fieldConstraints&&this.fieldConstraints.length>1}get showMenuButton(){return this.showMenu&&("row"!==this.display||"boolean"!==this.type)}get isShowOperator(){return this.showOperator&&"boolean"!==this.type}get isShowAddConstraint(){return this.showAddButton&&"boolean"!==this.type&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints}get applyButtonLabel(){return this.config.getTranslation(Ye.APPLY)}get clearButtonLabel(){return this.config.getTranslation(Ye.CLEAR)}get addRuleButtonLabel(){return this.config.getTranslation(Ye.ADD_RULE)}get removeRuleButtonLabel(){return this.config.getTranslation(Ye.REMOVE_RULE)}get noFilterLabel(){return this.config.getTranslation(Ye.NO_FILTER)}hasFilter(){let e=this.dt.filters[this.field];return!!e&&(Array.isArray(e)?!this.dt.isFilterBlank(e[0].value):!this.dt.isFilterBlank(e.value))}isOutsideClicked(e){return!(this.overlay.isSameNode(e.target)||this.overlay.contains(e.target)||this.icon.nativeElement.isSameNode(e.target)||this.icon.nativeElement.contains(e.target)||ee.hasClass(e.target,"p-column-filter-add-button")||ee.hasClass(e.target.parentElement,"p-column-filter-add-button")||ee.hasClass(e.target,"p-column-filter-remove-button")||ee.hasClass(e.target.parentElement,"p-column-filter-remove-button"))}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{this.overlayVisible&&!this.selfClick&&this.isOutsideClicked(i)&&this.hide(),this.selfClick=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}bindDocumentResizeListener(){this.documentResizeListener=()=>{this.overlayVisible&&!ee.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Gv(this.icon.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}hide(){this.overlayVisible=!1}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}clearFilter(){this.initFieldFilterConstraint(),this.dt._filter(),this.hideOnClear&&this.hide()}applyFilter(){this.dt._filter(),this.hide()}ngOnDestroy(){this.overlay&&(this.el.nativeElement.appendChild(this.overlay),xn.clear(this.overlay),this.onOverlayHide()),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.resetSubscription&&this.resetSubscription.unsubscribe(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(pu),s.Y36(s.Qsj),s.Y36(R),s.Y36(I))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-columnFilter"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&s.Gf(EW,5),2&e){let r;s.iGM(r=s.CRH())&&(i.icon=r.first)}},hostAttrs:[1,"p-element"],inputs:{field:"field",type:"type",display:"display",showMenu:"showMenu",matchMode:"matchMode",operator:"operator",showOperator:"showOperator",showClearButton:"showClearButton",showApplyButton:"showApplyButton",showMatchModes:"showMatchModes",showAddButton:"showAddButton",hideOnClear:"hideOnClear",placeholder:"placeholder",matchModeOptions:"matchModeOptions",maxConstraints:"maxConstraints",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",locale:"locale",localeMatcher:"localeMatcher",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",showButtons:"showButtons"},decls:5,vars:8,consts:[[1,"p-column-filter",3,"ngClass"],["class","p-fluid",3,"type","field","filterConstraint","filterTemplate","placeholder","minFractionDigits","maxFractionDigits","prefix","suffix","locale","localeMatcher","currency","currencyDisplay","useGrouping","showButtons",4,"ngIf"],["type","button","class","p-column-filter-menu-button p-link","aria-haspopup","true",3,"ngClass","click","keydown",4,"ngIf"],["type","button","class","p-column-filter-clear-button p-link",3,"ngClass","click",4,"ngIf"],[3,"ngClass","click","keydown.escape",4,"ngIf"],[1,"p-fluid",3,"type","field","filterConstraint","filterTemplate","placeholder","minFractionDigits","maxFractionDigits","prefix","suffix","locale","localeMatcher","currency","currencyDisplay","useGrouping","showButtons"],["type","button","aria-haspopup","true",1,"p-column-filter-menu-button","p-link",3,"ngClass","click","keydown"],["icon",""],[1,"pi","pi-filter-icon","pi-filter"],["type","button",1,"p-column-filter-clear-button","p-link",3,"ngClass","click"],[1,"pi","pi-filter-slash"],[3,"ngClass","click","keydown.escape"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-column-filter-row-items",4,"ngIf","ngIfElse"],["menu",""],[1,"p-column-filter-row-items"],["class","p-column-filter-row-item",3,"ngClass","click","keydown","keydown.enter",4,"ngFor","ngForOf"],[1,"p-column-filter-separator"],[1,"p-column-filter-row-item",3,"click","keydown","keydown.enter"],[1,"p-column-filter-row-item",3,"ngClass","click","keydown","keydown.enter"],["class","p-column-filter-operator",4,"ngIf"],[1,"p-column-filter-constraints"],["class","p-column-filter-constraint",4,"ngFor","ngForOf"],["class","p-column-filter-add-rule",4,"ngIf"],[1,"p-column-filter-buttonbar"],["type","button","pButton","","class","p-button-outlined p-button-sm","pRipple","",3,"label","click",4,"ngIf"],["type","button","pButton","","class","p-button-sm","pRipple","",3,"label","click",4,"ngIf"],[1,"p-column-filter-operator"],["styleClass","p-column-filter-operator-dropdown",3,"options","ngModel","ngModelChange"],[1,"p-column-filter-constraint"],["styleClass","p-column-filter-matchmode-dropdown",3,"options","ngModel","ngModelChange",4,"ngIf"],[3,"type","field","filterConstraint","filterTemplate","placeholder","minFractionDigits","maxFractionDigits","prefix","suffix","locale","localeMatcher","currency","currencyDisplay","useGrouping"],["type","button","pButton","","icon","pi pi-trash","class","p-column-filter-remove-button p-button-text p-button-danger p-button-sm","pRipple","",3,"label","click",4,"ngIf"],["styleClass","p-column-filter-matchmode-dropdown",3,"options","ngModel","ngModelChange"],["type","button","pButton","","icon","pi pi-trash","pRipple","",1,"p-column-filter-remove-button","p-button-text","p-button-danger","p-button-sm",3,"label","click"],[1,"p-column-filter-add-rule"],["type","button","pButton","","icon","pi pi-plus","pRipple","",1,"p-column-filter-add-button","p-button-text","p-button-sm",3,"label","click"],["type","button","pButton","","pRipple","",1,"p-button-outlined","p-button-sm",3,"label","click"],["type","button","pButton","","pRipple","",1,"p-button-sm",3,"label","click"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.YNc(1,SW,1,15,"p-columnFilterFormElement",1),s.YNc(2,DW,3,5,"button",2),s.YNc(3,kW,3,3,"button",3),s.YNc(4,jW,6,14,"div",4),s.qZA()),2&e&&(s.Q6J("ngClass",s.WLB(5,$W,"row"===i.display,"menu"===i.display)),s.xp6(1),s.Q6J("ngIf","row"===i.display),s.xp6(1),s.Q6J("ngIf",i.showMenuButton),s.xp6(1),s.Q6J("ngIf",i.showClearButton&&"row"===i.display),s.xp6(1),s.Q6J("ngIf",i.showMenu&&i.overlayVisible))},dependencies:function(){return[pt,Ln,pn,wn,oC,hu,sl,_d,sK]},encapsulation:2,data:{animation:[eC("overlayAnimation",[oc(":enter",[ns({opacity:0,transform:"scaleY(0.8)"}),ol(".12s cubic-bezier(0, 0, 0.2, 1)")]),oc(":leave",[ol(".1s linear",ns({opacity:0}))])])]}}),n})(),sK=(()=>{class n{constructor(e,i){this.dt=e,this.colFilter=i,this.useGrouping=!0}get showButtons(){return this.colFilter.showButtons}ngOnInit(){this.filterCallback=e=>{this.filterConstraint.value=e,this.dt._filter()}}onModelChange(e){this.filterConstraint.value=e,("boolean"===this.type||""===e)&&this.dt._filter()}onTextInputEnterKeyDown(e){this.dt._filter(),e.preventDefault()}onNumericInputKeyDown(e){"Enter"===e.key&&(this.dt._filter(),e.preventDefault())}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(pu),s.Y36(t2))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-columnFilterFormElement"]],hostAttrs:[1,"p-element"],inputs:{field:"field",type:"type",filterConstraint:"filterConstraint",filterTemplate:"filterTemplate",placeholder:"placeholder",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",locale:"locale",localeMatcher:"localeMatcher",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["builtInElement",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["type","text","pInputText","",3,"value","input","keydown.enter",4,"ngSwitchCase"],[3,"ngModel","showButtons","minFractionDigits","maxFractionDigits","prefix","suffix","placeholder","mode","locale","localeMatcher","currency","currencyDisplay","useGrouping","ngModelChange","onKeyDown",4,"ngSwitchCase"],[3,"ngModel","ngModelChange",4,"ngSwitchCase"],[3,"placeholder","ngModel","ngModelChange",4,"ngSwitchCase"],["type","text","pInputText","",3,"value","input","keydown.enter"],[3,"ngModel","showButtons","minFractionDigits","maxFractionDigits","prefix","suffix","placeholder","mode","locale","localeMatcher","currency","currencyDisplay","useGrouping","ngModelChange","onKeyDown"],[3,"ngModel","ngModelChange"],[3,"placeholder","ngModel","ngModelChange"]],template:function(e,i){if(1&e&&(s.YNc(0,WW,2,19,"ng-container",0),s.YNc(1,XW,5,5,"ng-template",null,1,s.W1O)),2&e){const r=s.MAs(2);s.Q6J("ngIf",i.filterTemplate)("ngIfElse",r)}},dependencies:[pn,wn,cc,Ar,mI,hu,sl,Jw,pI,QF],encapsulation:2}),n})(),oK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,KF,Xw,gI,Ww,yd,YF,VF,_I,oq,hp,_e,hp]}),n})();function aK(n,t){1&n&&(s.TgZ(0,"tr"),s._UZ(1,"th",21),s.TgZ(2,"th",22),s._uU(3,"Oracle # "),s._UZ(4,"p-sortIcon",23),s.qZA(),s.TgZ(5,"th",24),s._uU(6,"Amount"),s._UZ(7,"p-sortIcon",25),s.qZA(),s.TgZ(8,"th",26),s._uU(9,"CBM "),s._UZ(10,"p-sortIcon",27),s.qZA()())}function lK(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._UZ(2,"button",28),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA()()),2&n){const e=t.$implicit,i=t.expanded;s.xp6(2),s.Q6J("pRowToggler",e)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),s.xp6(2),s.Oqu(e.oracleNo),s.xp6(2),s.Oqu(e.amount),s.xp6(2),s.Oqu(e.cbm)}}function cK(n,t){1&n&&(s.TgZ(0,"tr")(1,"th",33),s._uU(2,"Packing List #"),s._UZ(3,"p-sortIcon",25),s.qZA(),s.TgZ(4,"th",34),s._uU(5,"Qty "),s._UZ(6,"p-sortIcon",35),s.qZA(),s.TgZ(7,"th",36),s._uU(8,"Weight "),s._UZ(9,"p-sortIcon",37),s.qZA(),s._UZ(10,"th",38),s.qZA())}function uK(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._UZ(8,"p-button",39),s.qZA()()),2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e.plNo),s.xp6(2),s.Oqu(e.qty),s.xp6(2),s.Oqu(e.weight)}}function dK(n,t){1&n&&(s.TgZ(0,"tr")(1,"td",40),s._uU(2,"There are no order for this product yet."),s.qZA()())}function hK(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td",29)(2,"div",30)(3,"p-table",31),s.YNc(4,cK,11,0,"ng-template",18),s.YNc(5,uK,9,3,"ng-template",19),s.YNc(6,dK,3,0,"ng-template",32),s.qZA()()()()),2&n){const e=t.$implicit;s.xp6(3),s.Q6J("value",e.packingLists)}}const pK=function(){return{"min-width":"60rem"}};class lC{constructor(t,e){this.packingService=t,this.oracleService=e,this.oracle=new GF,this.packingLists=[],this.selectedPacking=[],this.oracleList=[],this.selectedOracle=new GF,this.totalQty=0,this.itemTypes=[{type:"Merchandise"},{type:"Non-Merchandise"}],this.selectedItemType="",this.readPackingLists(),this.readOracleLists()}readPackingLists(){this.packingService.getAll().subscribe(t=>{this.packingLists=t})}readOracleLists(){this.oracleService.getAll().snapshotChanges().pipe((0,gt.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()})))).subscribe(t=>{this.oracleList=t})}readSelectedOracleList(t){this.oracleList=t.data}createOracle(t){this.oracleService.create(t.value)}}lC.\u0275fac=function(t){return new(t||lC)(s.Y36(kg),s.Y36(xg))},lC.\u0275cmp=s.Xpm({type:lC,selectors:[["app-oracle"]],decls:47,vars:12,consts:[[1,"p-card","p-3",2,"margin","50px",3,"ngSubmit"],["myForm","ngForm"],[1,"flex","justify-content-center","mb-3"],[1,"p-fluid","grid","formgrid"],[1,"field","col-12"],[1,"p-float-label"],["type","text","pInputText","","name","oracleNo",3,"ngModel","ngModelChange"],["for","inputtext"],[1,"field","col-12","md:col-6","lg:col-4"],["name","packingLists","optionLabel","plNo",3,"options","ngModel","ngModelChange"],["type","text","pInputText","","name","amount",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","vWeight",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","cbm",3,"ngModel","ngModelChange"],["type","text","pInputText","","name","disc",3,"ngModel","ngModelChange"],["optionLabel","type","name","itemType","optionValue","type",3,"options","ngModel","ngModelChange"],[1,"flex","gap-3","justify-content-end","pb-5"],["pButton","","pRipple","","type","submit","label","Create","icon","pi pi-pencil",1,"w-1","p-button-raised","p-button-text"],["dataKey","oracleNo","styleClass","p-datatable-sm",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[2,"width","5rem"],["pSortableColumn","name"],["field","name"],["pSortableColumn","price"],["field","price"],["pSortableColumn","category"],["field","category"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],["colspan","7"],[1,"p-3"],["dataKey","key",3,"value"],["pTemplate","emptymessage"],["pSortableColumn","id"],["pSortableColumn","qty"],["field","customer"],["pSortableColumn","weight"],["field","date"],[2,"width","4rem"],["type","button","icon","pi pi-search"],["colspan","6"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"form",0,1),s.NdJ("ngSubmit",function(){s.CHM(i);const o=s.MAs(1);return s.KtG(e.createOracle(o))}),s.TgZ(2,"div",2)(3,"h4"),s._uU(4,"Oracle List"),s.qZA()(),s.TgZ(5,"div",3)(6,"div",4)(7,"span",5)(8,"input",6),s.NdJ("ngModelChange",function(o){return e.oracle.oracleNo=o}),s.qZA(),s.TgZ(9,"label",7),s._uU(10,"Oracle #"),s.qZA()()(),s.TgZ(11,"div",8)(12,"span",5)(13,"p-multiSelect",9),s.NdJ("ngModelChange",function(o){return e.selectedPacking=o}),s.qZA(),s.TgZ(14,"label",7),s._uU(15,"Packing List"),s.qZA()()(),s.TgZ(16,"div",8)(17,"span",5)(18,"input",10),s.NdJ("ngModelChange",function(o){return e.oracle.amount=o}),s.qZA(),s.TgZ(19,"label",7),s._uU(20,"Amount"),s.qZA()()(),s.TgZ(21,"div",8)(22,"span",5)(23,"input",11),s.NdJ("ngModelChange",function(o){return e.oracle.vWeight=o}),s.qZA(),s.TgZ(24,"label",7),s._uU(25,"Volumetric Weight"),s.qZA()()(),s.TgZ(26,"div",8)(27,"span",5)(28,"input",12),s.NdJ("ngModelChange",function(o){return e.oracle.cbm=o}),s.qZA(),s.TgZ(29,"label",7),s._uU(30,"CBM (Cubic Meter)"),s.qZA()()(),s.TgZ(31,"div",8)(32,"span",5)(33,"input",13),s.NdJ("ngModelChange",function(o){return e.oracle.disc=o}),s.qZA(),s.TgZ(34,"label",7),s._uU(35,"Item Description"),s.qZA()()(),s.TgZ(36,"div",8)(37,"span",5)(38,"p-dropdown",14),s.NdJ("ngModelChange",function(o){return e.selectedItemType=o}),s.qZA(),s.TgZ(39,"label",7),s._uU(40,"Item Type"),s.qZA()()()(),s.TgZ(41,"div",15),s._UZ(42,"button",16),s.qZA(),s.TgZ(43,"p-table",17),s.YNc(44,aK,11,0,"ng-template",18),s.YNc(45,lK,9,5,"ng-template",19),s.YNc(46,hK,7,1,"ng-template",20),s.qZA()()}2&t&&(s.xp6(8),s.Q6J("ngModel",e.oracle.oracleNo),s.xp6(5),s.Q6J("options",e.packingLists)("ngModel",e.selectedPacking),s.xp6(5),s.Q6J("ngModel",e.oracle.amount),s.xp6(5),s.Q6J("ngModel",e.oracle.vWeight),s.xp6(5),s.Q6J("ngModel",e.oracle.cbm),s.xp6(5),s.Q6J("ngModel",e.oracle.disc),s.xp6(5),s.Q6J("options",e.itemTypes)("ngModel",e.selectedItemType),s.xp6(5),s.Q6J("value",e.oracleList)("tableStyle",s.DdM(11,pK)))},dependencies:[ys,Cy,Ud,hu,vy,sl,dp,_d,d1,ne,Jw,oC,hM,pu,tK,rK,nK]});class fK{}class Ag{constructor(t){this.db=t,this.dbPath="/addresses",this.addresses=t.list(this.dbPath)}getById(t){return this.db.object(this.dbPath+"/"+t)}getAll(){return this.addresses.snapshotChanges().pipe((0,gt.U)(t=>t.map(e=>({key:e.payload.key,...e.payload.val()}))))}create(t){return this.addresses.push(t)}update(t,e){return this.addresses.update(t,e)}delete(t){return this.addresses.remove(t)}deleteAll(){return this.addresses.remove()}}function gK(n,t){1&n&&s.GkF(0)}function mK(n,t){if(1&n&&(s.TgZ(0,"div",8),s.Hsn(1,1),s.YNc(2,gK,1,0,"ng-container",6),s.qZA()),2&n){const e=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",e.headerTemplate)}}function _K(n,t){1&n&&s.GkF(0)}function yK(n,t){if(1&n&&(s.TgZ(0,"div",9),s._uU(1),s.YNc(2,_K,1,0,"ng-container",6),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.hij(" ",e.header," "),s.xp6(1),s.Q6J("ngTemplateOutlet",e.titleTemplate)}}function vK(n,t){1&n&&s.GkF(0)}function bK(n,t){if(1&n&&(s.TgZ(0,"div",10),s._uU(1),s.YNc(2,vK,1,0,"ng-container",6),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.hij(" ",e.subheader," "),s.xp6(1),s.Q6J("ngTemplateOutlet",e.subtitleTemplate)}}function wK(n,t){1&n&&s.GkF(0)}function CK(n,t){1&n&&s.GkF(0)}function TK(n,t){if(1&n&&(s.TgZ(0,"div",11),s.Hsn(1,2),s.YNc(2,CK,1,0,"ng-container",6),s.qZA()),2&n){const e=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",e.footerTemplate)}}Ag.\u0275fac=function(t){return new(t||Ag)(s.LFG(yy))},Ag.\u0275prov=s.Yz7({token:Ag,factory:Ag.\u0275fac,providedIn:"root"});const EK=["*",[["p-header"]],[["p-footer"]]],SK=["*","p-header","p-footer"];let IK=(()=>{class n{constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-card"]],contentQueries:function(e,i,r){if(1&e&&(s.Suo(r,U,5),s.Suo(r,te,5),s.Suo(r,ne,4)),2&e){let o;s.iGM(o=s.CRH())&&(i.headerFacet=o.first),s.iGM(o=s.CRH())&&(i.footerFacet=o.first),s.iGM(o=s.CRH())&&(i.templates=o)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:SK,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(e,i){1&e&&(s.F$t(EK),s.TgZ(0,"div",0),s.YNc(1,mK,3,1,"div",1),s.TgZ(2,"div",2),s.YNc(3,yK,3,2,"div",3),s.YNc(4,bK,3,2,"div",4),s.TgZ(5,"div",5),s.Hsn(6),s.YNc(7,wK,1,0,"ng-container",6),s.qZA(),s.YNc(8,TK,3,1,"div",7),s.qZA()()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass","p-card p-component")("ngStyle",i.style),s.xp6(1),s.Q6J("ngIf",i.headerFacet||i.headerTemplate),s.xp6(2),s.Q6J("ngIf",i.header||i.titleTemplate),s.xp6(1),s.Q6J("ngIf",i.subheader||i.subtitleTemplate),s.xp6(3),s.Q6J("ngTemplateOutlet",i.contentTemplate),s.xp6(1),s.Q6J("ngIf",i.footerFacet||i.footerTemplate))},dependencies:[pt,pn,wn,Tn],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),DK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,_e]}),n})();const xK=["inputtext"];function kK(n,t){1&n&&s.GkF(0)}function AK(n,t){if(1&n&&(s.TgZ(0,"span",12),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,i=s.oxw();s.xp6(1),s.Oqu(i.field?i.resolveFieldData(e,i.field):e)}}function MK(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",13),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw().index,l=s.oxw();return s.KtG(l.removeItem(r,o))}),s.qZA()}}const RK=function(n){return{$implicit:n}};function OK(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"li",7,8),s.NdJ("click",function(r){const l=s.CHM(e).$implicit,d=s.oxw();return s.KtG(d.onItemClick(r,l))}),s.YNc(2,kK,1,0,"ng-container",9),s.YNc(3,AK,2,1,"span",10),s.YNc(4,MK,1,0,"span",11),s.qZA()}if(2&n){const e=t.$implicit,i=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",i.itemTemplate)("ngTemplateOutletContext",s.VKq(4,RK,e)),s.xp6(1),s.Q6J("ngIf",!i.itemTemplate),s.xp6(1),s.Q6J("ngIf",!i.disabled)}}function PK(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"li")(1,"i",14),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.clear())}),s.qZA()()}}const NK=function(n,t){return{"p-inputtext p-chips-multiple-container":!0,"p-focus":n,"p-disabled":t}},LK=function(n){return{"p-chips-clearable":n}},FK={provide:Sr,useExisting:(0,s.Gpc)(()=>n2),multi:!0};let n2=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.allowDuplicate=!0,this.showClear=!1,this.onAdd=new s.vpe,this.onRemove=new s.vpe,this.onFocus=new s.vpe,this.onBlur=new s.vpe,this.onChipClick=new s.vpe,this.onClear=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template}),this.updateFilledState()}onClick(){this.inputViewChild.nativeElement.focus()}onInput(){this.updateFilledState()}onPaste(e){this.disabled||(this.separator&&((e.clipboardData||window.clipboardData).getData("Text").split(this.separator).forEach(r=>{this.addItem(e,r,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){this.filled=!(!this.value||0===this.value.length)||this.inputViewChild&&this.inputViewChild.nativeElement&&""!=this.inputViewChild.nativeElement.value}onItemClick(e,i){this.onChipClick.emit({originalEvent:e,value:i})}writeValue(e){this.value=e,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}resolveFieldData(e,i){if(e&&i){if(-1==i.indexOf("."))return e[i];{let l=i.split("."),d=e;for(var r=0,o=l.length;r<o;++r)d=d[l[r]];return d}}return null}onInputFocus(e){this.focus=!0,this.onFocus.emit(e)}onInputBlur(e){this.focus=!1,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(e,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(e)}removeItem(e,i){if(this.disabled)return;let r=this.value[i];this.value=this.value.filter((o,l)=>l!=i),this.onModelChange(this.value),this.onRemove.emit({originalEvent:e,value:r}),this.updateFilledState(),this.updateMaxedOut()}addItem(e,i,r){this.value=this.value||[],i&&i.trim().length&&(this.allowDuplicate||-1===this.value.indexOf(i))&&(this.value=[...this.value,i],this.onModelChange(this.value),this.onAdd.emit({originalEvent:e,value:i})),this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",r&&e.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.onClear.emit()}onKeydown(e){switch(e.which){case 8:if(0===this.inputViewChild.nativeElement.value.length&&this.value&&this.value.length>0){this.value=[...this.value];let i=this.value.pop();this.onModelChange(this.value),this.onRemove.emit({originalEvent:e,value:i}),this.updateFilledState()}break;case 13:this.addItem(e,this.inputViewChild.nativeElement.value,!0);break;case 9:this.addOnTab&&""!==this.inputViewChild.nativeElement.value&&this.addItem(e,this.inputViewChild.nativeElement.value,!0);break;default:this.max&&this.value&&this.max===this.value.length?e.preventDefault():this.separator&&(this.separator===e.key||e.key.match(this.separator))&&this.addItem(e,this.inputViewChild.nativeElement.value,!0)}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.max&&this.value&&this.max===this.value.length?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-chips"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&s.Gf(xK,5),2&e){let r;s.iGM(r=s.CRH())&&(i.inputViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&s.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-chips-clearable",i.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:"disabled",field:"field",placeholder:"placeholder",max:"max",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",allowDuplicate:"allowDuplicate",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:"addOnTab",addOnBlur:"addOnBlur",separator:"separator",showClear:"showClear"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onClear:"onClear"},features:[s._Bn([FK])],decls:7,vars:21,consts:[[3,"ngClass","ngStyle","click"],[3,"ngClass"],["class","p-chips-token",3,"click",4,"ngFor","ngForOf"],[1,"p-chips-input-token",3,"ngClass"],["type","text",3,"disabled","ngStyle","keydown","input","paste","focus","blur"],["inputtext",""],[4,"ngIf"],[1,"p-chips-token",3,"click"],["token",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],["class","p-chips-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-chips-token-label"],[1,"p-chips-token-icon","pi","pi-times-circle",3,"click"],[1,"p-chips-clear-icon","pi","pi-times",3,"click"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return i.onClick()}),s.TgZ(1,"ul",1),s.YNc(2,OK,5,6,"li",2),s.TgZ(3,"li",3)(4,"input",4,5),s.NdJ("keydown",function(o){return i.onKeydown(o)})("input",function(){return i.onInput()})("paste",function(o){return i.onPaste(o)})("focus",function(o){return i.onInputFocus(o)})("blur",function(o){return i.onInputBlur(o)}),s.qZA()(),s.YNc(6,PK,2,0,"li",6),s.qZA()()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass","p-chips p-component")("ngStyle",i.style),s.xp6(1),s.Q6J("ngClass",s.WLB(16,NK,i.focus,i.disabled)),s.xp6(1),s.Q6J("ngForOf",i.value),s.xp6(1),s.Q6J("ngClass",s.VKq(19,LK,i.showClear&&!i.disabled)),s.xp6(1),s.Tol(i.inputStyleClass),s.Q6J("disabled",i.disabled)("ngStyle",i.inputStyle),s.uIk("id",i.inputId)("placeholder",i.value&&i.value.length?null:i.placeholder)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),s.xp6(2),s.Q6J("ngIf",null!=i.value&&i.filled&&!i.disabled&&i.showClear))},dependencies:[pt,Ln,pn,wn,Tn],styles:[".p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),VK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,Xw,_e,Xw,_e]}),n})();const r2=["container"],BK=function(n,t,e,i){return{"pi-info-circle":n,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":i}};function HK(n,t){if(1&n&&(s.ynx(0),s._UZ(1,"span",6),s.TgZ(2,"div",7)(3,"div",8),s._uU(4),s.qZA(),s.TgZ(5,"div",9),s._uU(6),s.qZA()(),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Tol("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),s.Q6J("ngClass",s.l5B(5,BK,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),s.xp6(3),s.Oqu(e.message.summary),s.xp6(2),s.Oqu(e.message.detail)}}function UK(n,t){1&n&&s.GkF(0)}function zK(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",10),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onCloseIconClick(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onCloseIconClick(r))}),s._UZ(1,"span",11),s.qZA()}}const GK=function(n){return[n,"p-toast-message"]},jK=function(n,t,e,i){return{showTransformParams:n,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:i}},$K=function(n){return{value:"visible",params:n}},ZK=function(n){return{$implicit:n}};function qK(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"p-toastItem",3),s.NdJ("onClose",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onMessageClose(r))})("@toastAnimation.start",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onAnimationStart(r))})("@toastAnimation.done",function(r){s.CHM(e);const o=s.oxw();return s.KtG(o.onAnimationEnd(r))}),s.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=s.oxw();s.Q6J("message",e)("index",i)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let WK=(()=>{class n{constructor(e){this.zone=e,this.onClose=new s.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-toastItem"]],viewQuery:function(e,i){if(1&e&&s.Gf(r2,5),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0,1),s.NdJ("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),s.TgZ(2,"div",2),s.YNc(3,HK,7,10,"ng-container",3),s.YNc(4,UK,1,0,"ng-container",4),s.YNc(5,zK,2,0,"button",5),s.qZA()()),2&e&&(s.Tol(i.message.styleClass),s.Q6J("ngClass",s.VKq(10,GK,"p-toast-message-"+i.message.severity))("@messageState",s.VKq(17,$K,s.l5B(12,jK,i.showTransformOptions,i.hideTransformOptions,i.showTransitionOptions,i.hideTransitionOptions))),s.uIk("id",i.message.id),s.xp6(2),s.Q6J("ngClass",i.message.contentStyleClass),s.xp6(1),s.Q6J("ngIf",!i.template),s.xp6(1),s.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",s.VKq(19,ZK,i.message)),s.xp6(1),s.Q6J("ngIf",!1!==i.message.closable))},dependencies:[pt,pn,wn,ys],encapsulation:2,data:{animation:[eC("messageState",[AF("visible",ns({transform:"translateY(0)",opacity:1})),oc("void => *",[ns({transform:"{{showTransformParams}}",opacity:0}),ol("{{showTransitionParams}}")]),oc("* => void",[ol("{{hideTransitionParams}}",ns({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),n})(),KK=(()=>{class n{constructor(e,i,r){this.messageService=e,this.cd=i,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new s.vpe,this.id=Ol()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const i=e.filter(r=>this.canAdd(r));this.add(i)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let i=this.key===e.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,e)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,e)),i}containsMessage(e,i){return!!e&&null!=e.find(r=>r.summary===i.summary&&r.detail==i.detail&&r.severity===i.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&xn.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&Ge.isEmpty(this.messages)&&xn.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let i in this.breakpoints){let r="";for(let o in this.breakpoints[i])r+=o+":"+this.breakpoints[i][o]+" !important;";e+=`\n                    @media screen and (max-width: ${i}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&xn.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Ha),s.Y36(s.sBO),s.Y36(R))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-toast"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},viewQuery:function(e,i){if(1&e&&s.Gf(r2,5),2&e){let r;s.iGM(r=s.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,i){1&e&&(s.TgZ(0,"div",0,1),s.YNc(2,qK,1,8,"p-toastItem",2),s.qZA()),2&e&&(s.Tol(i.styleClass),s.Q6J("ngClass","p-toast p-component p-toast-"+i.position)("ngStyle",i.style),s.xp6(2),s.Q6J("ngForOf",i.messages))},dependencies:[pt,Ln,Tn,WK],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[eC("toastAnimation",[oc(":enter, :leave",[DG("@*",IG())])])]},changeDetection:0}),n})(),YK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,vs,_e]}),n})();function QK(n,t){1&n&&(s.TgZ(0,"tr")(1,"th"),s._uU(2,"Packing List #"),s.qZA(),s.TgZ(3,"th"),s._uU(4,"Brands"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Ship To"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Country"),s.qZA(),s.TgZ(9,"th"),s._uU(10,"Cartons"),s.qZA()(),s.TgZ(11,"tr")(12,"th"),s._UZ(13,"p-columnFilter",42),s.qZA(),s.TgZ(14,"th"),s._UZ(15,"p-columnFilter",43),s.qZA(),s.TgZ(16,"th"),s._UZ(17,"p-columnFilter",44),s.qZA(),s.TgZ(18,"th"),s._UZ(19,"p-columnFilter",45),s.qZA(),s.TgZ(20,"th"),s._UZ(21,"p-columnFilter",46),s.qZA()())}function JK(n,t){if(1&n&&(s.TgZ(0,"tr",47)(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.qZA()()),2&n){const e=t.$implicit;s.Q6J("pSelectableRow",e),s.xp6(2),s.Oqu(e.plNo),s.xp6(2),s.Oqu(e.brandNames),s.xp6(2),s.Oqu(null==e.shipTo?null:e.shipTo.name),s.xp6(2),s.Oqu(null==e.shipTo?null:e.shipTo.location),s.xp6(2),s.Oqu(e.ctns)}}function XK(n,t){1&n&&(s.TgZ(0,"tr")(1,"td",48),s._uU(2,"No packing list found."),s.qZA()())}function e5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",49)(1,"div",50),s._UZ(2,"i",51),s.TgZ(3,"h4"),s._uU(4),s.qZA(),s.TgZ(5,"p"),s._uU(6),s.qZA()(),s.TgZ(7,"div",0)(8,"div",52)(9,"button",53),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onConfirm())}),s.qZA()(),s.TgZ(10,"div",52)(11,"button",54),s.NdJ("click",function(){s.CHM(e);const r=s.oxw();return s.KtG(r.onReject())}),s.qZA()()()()}if(2&n){const e=t.$implicit;s.xp6(4),s.Oqu(e.summary),s.xp6(2),s.Oqu(e.detail)}}class cC{constructor(t,e,i){this.database=t,this.messageService=e,this.ship=i,this.packingList=new fK,this.packingLists=[],this.shipFrom=[],this.shipTo=[],i.getAll().subscribe(r=>{this.shipTo=r,this.shipFrom=r}),this.readPackingLists()}readPackingLists(){console.log(JSON.parse(localStorage.getItem("packing"))),this.database.getAll().subscribe(t=>{this.packingLists=t})}createPackingList(t){this.packingList=t.value,this.packingList.docDate=t.value.docDate.toString(),this.packingList.isOracleGenerate=!1,this.database.create(this.packingList),this.messageService.add({severity:"success",summary:"Created",detail:"Packing List Created..."}),this.packingLists.push(t.value),localStorage.setItem("packing",JSON.stringify(this.packingLists)),this.clearForm()}deletePackingList(){this.database.delete(this.packingList.key),this.clearForm()}updatePackingList(){this.database.update(this.packingList.key,this.packingList),this.messageService.add({severity:"info",summary:"Updated",detail:"Packing List Updated..."}),this.clearForm()}clearForm(t){this.packingList={},t?.clear()}onRowSelect(t){this.packingList.docDate=DF.anyToDate(t.data.docDate)}onConfirm(){this.database.delete(this.packingList.key),this.messageService.clear("c"),this.messageService.add({severity:"error",summary:"Deleted",detail:"Packing List Deleted..."}),this.clearForm()}onReject(){this.messageService.clear("c")}showConfirm(){this.messageService.clear(),this.messageService.add({key:"c",sticky:!0,severity:"error",summary:"Are you sure?",detail:"Confirm to delete packing list"})}}cC.\u0275fac=function(t){return new(t||cC)(s.Y36(kg),s.Y36(Ha),s.Y36(Ag))},cC.\u0275cmp=s.Xpm({type:cC,selectors:[["app-packing"]],decls:87,vars:37,consts:[[1,"grid","p-fluid"],[1,"col-12","md:col-12","lg:col-5","xl:col-4"],[1,"px-3","pt-3",3,"ngSubmit"],["packingListForm","ngForm"],[1,"flex","justify-content-center"],[1,"formgrid","grid"],[1,"field","col"],["for","firstname2"],["name","docDate","dateFormat","dd-mm-yy",3,"ngModel","showIcon","showButtonBar","ngModelChange"],["for","lastname2"],["type","text","pInputText","","name","plNo","required","",3,"ngModel","ngModelChange"],[1,"field"],["for","firstname1"],["separator",",","name","brandNames",3,"ngModel","showClear","ngModelChange"],["name","shipTo","optionLabel","name",3,"options","ngModel","autoDisplayFirst","showClear","ngModelChange"],["name","shipFrom","optionLabel","name",3,"options","ngModel","autoDisplayFirst","showClear","ngModelChange"],[1,"p-inputgroup"],["name","packQty","mode","decimal",3,"ngModel","min","useGrouping","ngModelChange"],[1,"p-inputgroup-addon"],[1,"bi","bi-tags"],["name","qty","mode","decimal",3,"ngModel","min","useGrouping","ngModelChange"],[1,"bi","bi-cart3"],["name","ctns","mode","decimal",3,"ngModel","min","useGrouping","ngModelChange"],[1,"bi","bi-box-seam"],["name","plts","mode","decimal",3,"ngModel","min","useGrouping","ngModelChange"],[1,"bi","bi-bounding-box"],["name","weight","inputId","minmaxfraction","mode","decimal",3,"ngModel","minFractionDigits","maxFractionDigits","min","useGrouping","ngModelChange"],[1,"bi","bi-circle"],[1,"formgroup","field","flex","flex-row","gap-3"],["pButton","","pRipple","","type","submit","label","Create","icon","pi pi-check",1,"p-button-raised","p-button-success","p-button-text"],["pButton","","pRipple","","type","button","label","Update","icon","pi pi-pencil",1,"p-button-raised","p-button-text","p-button-plain",3,"click"],["pButton","","pRipple","","type","button","label","Delete","icon","pi pi-times",1,"p-button-raised","p-button-danger","p-button-text",3,"click"],["pButton","","pRipple","","type","button","label","Clear","icon","pi pi-refresh",1,"p-button-raised","p-button-text",3,"click"],[1,"col-12","md:col-12","lg:col-7","xl:col-8"],[1,"col-12"],["dataKey","key","selectionMode","single",3,"value","rows","showCurrentPageReport","paginator","selection","onRowSelect","selectionChange"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["position","top-center","key","c",3,"baseZIndex","onClose"],["pTemplate","message"],["type","text","field","plNo"],["type","text","field","brandNames"],["type","text","field","shipTo.name"],["type","text","field","shipTo.location"],["type","text","field","ctns"],[3,"pSelectableRow"],["colspan","5"],[1,"flex","flex-column",2,"flex","1"],[1,"text-center"],[1,"bi","bi-x-octagon",2,"font-size","3rem"],[1,"col-6"],["type","button","pButton","","label","Yes",1,"p-button-success",3,"click"],["type","button","pButton","","label","No",1,"p-button-secondary",3,"click"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),s.NdJ("ngSubmit",function(){s.CHM(i);const o=s.MAs(3);return s.KtG(e.createPackingList(o))}),s.TgZ(4,"p-card")(5,"h3",4),s._uU(6,"Add Packing List"),s.qZA(),s.TgZ(7,"div",5)(8,"div",6)(9,"label",7),s._uU(10,"Doc. Date"),s.qZA(),s.TgZ(11,"p-calendar",8),s.NdJ("ngModelChange",function(o){return e.packingList.docDate=o}),s.qZA()(),s.TgZ(12,"div",6)(13,"label",9),s._uU(14,"Packing List #"),s.qZA(),s.TgZ(15,"input",10),s.NdJ("ngModelChange",function(o){return e.packingList.plNo=o}),s.qZA()()(),s.TgZ(16,"div",11)(17,"label",12),s._uU(18,"Brands"),s.qZA(),s.TgZ(19,"p-chips",13),s.NdJ("ngModelChange",function(o){return e.packingList.brandNames=o}),s.qZA()(),s.TgZ(20,"div",11)(21,"label",12),s._uU(22,"Ship To"),s.qZA(),s.TgZ(23,"p-dropdown",14),s.NdJ("ngModelChange",function(o){return e.packingList.shipTo=o}),s.qZA()(),s.TgZ(24,"div",11)(25,"label",12),s._uU(26,"Ship From"),s.qZA(),s.TgZ(27,"p-dropdown",15),s.NdJ("ngModelChange",function(o){return e.packingList.shipFrom=o}),s.qZA()(),s.TgZ(28,"div",5)(29,"div",6)(30,"label",7),s._uU(31,"Pack Qty"),s.qZA(),s.TgZ(32,"div",16)(33,"p-inputNumber",17),s.NdJ("ngModelChange",function(o){return e.packingList.packQty=o}),s.qZA(),s.TgZ(34,"span",18),s._UZ(35,"i",19),s.qZA()()(),s.TgZ(36,"div",6)(37,"label",9),s._uU(38,"Qty"),s.qZA(),s.TgZ(39,"div",16)(40,"p-inputNumber",20),s.NdJ("ngModelChange",function(o){return e.packingList.qty=o}),s.qZA(),s.TgZ(41,"span",18),s._UZ(42,"i",21),s.qZA()()()(),s.TgZ(43,"div",5)(44,"div",6)(45,"label",7),s._uU(46,"Cartons"),s.qZA(),s.TgZ(47,"div",16)(48,"p-inputNumber",22),s.NdJ("ngModelChange",function(o){return e.packingList.ctns=o}),s.qZA(),s.TgZ(49,"span",18),s._UZ(50,"i",23),s.qZA()()(),s.TgZ(51,"div",6)(52,"label",9),s._uU(53,"Pallets"),s.qZA(),s.TgZ(54,"div",16)(55,"p-inputNumber",24),s.NdJ("ngModelChange",function(o){return e.packingList.plts=o}),s.qZA(),s.TgZ(56,"span",18),s._UZ(57,"i",25),s.qZA()()()(),s.TgZ(58,"div",11)(59,"label",12),s._uU(60,"Weight"),s.qZA(),s.TgZ(61,"div",16)(62,"p-inputNumber",26),s.NdJ("ngModelChange",function(o){return e.packingList.weight=o}),s.qZA(),s.TgZ(63,"span",18),s._UZ(64,"i",27),s.qZA()()(),s.TgZ(65,"div",28)(66,"div",11),s._UZ(67,"button",29),s.qZA(),s.TgZ(68,"div",11)(69,"button",30),s.NdJ("click",function(){return e.updatePackingList()}),s.qZA()(),s.TgZ(70,"div",11)(71,"button",31),s.NdJ("click",function(){return e.showConfirm()}),s.qZA()(),s.TgZ(72,"div",11)(73,"button",32),s.NdJ("click",function(){s.CHM(i);const o=s.MAs(80);return s.KtG(e.clearForm(o))}),s.qZA()()()()()(),s.TgZ(74,"div",33)(75,"p-card")(76,"h3",4),s._uU(77,"Packing List"),s.qZA(),s.TgZ(78,"div",34)(79,"p-table",35,36),s.NdJ("onRowSelect",function(o){return e.onRowSelect(o)})("selectionChange",function(o){return e.packingList=o}),s.YNc(81,QK,22,0,"ng-template",37),s.YNc(82,JK,11,6,"ng-template",38),s.YNc(83,XK,3,0,"ng-template",39),s.qZA()()()()(),s._UZ(84,"p-toast"),s.TgZ(85,"p-toast",40),s.NdJ("onClose",function(){return e.onReject()}),s.YNc(86,e5,12,2,"ng-template",41),s.qZA()}2&t&&(s.xp6(11),s.Q6J("ngModel",e.packingList.docDate)("showIcon",!0)("showButtonBar",!0),s.xp6(4),s.Q6J("ngModel",e.packingList.plNo),s.xp6(4),s.Q6J("ngModel",e.packingList.brandNames)("showClear",!0),s.xp6(4),s.Q6J("options",e.shipTo)("ngModel",e.packingList.shipTo)("autoDisplayFirst",!1)("showClear",!0),s.xp6(4),s.Q6J("options",e.shipFrom)("ngModel",e.packingList.shipFrom)("autoDisplayFirst",!1)("showClear",!0),s.xp6(6),s.Q6J("ngModel",e.packingList.packQty)("min",1)("useGrouping",!1),s.xp6(7),s.Q6J("ngModel",e.packingList.qty)("min",1)("useGrouping",!1),s.xp6(8),s.Q6J("ngModel",e.packingList.ctns)("min",1)("useGrouping",!1),s.xp6(7),s.Q6J("ngModel",e.packingList.plts)("min",1)("useGrouping",!1),s.xp6(7),s.Q6J("ngModel",e.packingList.weight)("minFractionDigits",3)("maxFractionDigits",3)("min",1)("useGrouping",!1),s.xp6(17),s.Q6J("value",e.packingLists)("rows",10)("showCurrentPageReport",!0)("paginator",!0)("selection",e.packingList),s.xp6(6),s.Q6J("baseZIndex",5e3))},dependencies:[ys,Cy,Ud,hu,vy,qw,sl,dp,_d,IK,ne,Jw,pI,n2,oC,mI,pu,iK,t2,KK]});class uC{}uC.\u0275fac=function(t){return new(t||uC)},uC.\u0275cmp=s.Xpm({type:uC,selectors:[["app-shipment"]],decls:2,vars:0,template:function(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1,"shipment works!"),s.qZA())}});class t5{}class dC{constructor(t){this.service=t,this.shipper=new t5,t.getAll().subscribe()}create(t){this.service.create(t.value)}}function mM(){return(0,En.e)((n,t)=>{let e,i=!1;n.subscribe((0,kn.x)(t,r=>{const o=e;e=r,i&&t.next([o,r]),i=!0}))})}dC.\u0275fac=function(t){return new(t||dC)(s.Y36(Ag))},dC.\u0275cmp=s.Xpm({type:dC,selectors:[["app-addresses"]],decls:13,vars:11,consts:[[3,"ngSubmit"],["form","ngForm"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","text","name","addressLine1",3,"ngModel","ngModelChange"],["type","text","name","addressLine2",3,"ngModel","ngModelChange"],["type","text","name","location",3,"ngModel","ngModelChange"],["type","text","name","countryName",3,"ngModel","ngModelChange"],["type","text","name","vatNo",3,"ngModel","ngModelChange"],["type","text","name","contactPerson",3,"ngModel","ngModelChange"],["type","text","name","contactNo",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,e){if(1&t){const i=s.EpF();s.TgZ(0,"form",0,1),s.NdJ("ngSubmit",function(){s.CHM(i);const o=s.MAs(1);return s.KtG(e.create(o))}),s.TgZ(2,"input",2),s.NdJ("ngModelChange",function(o){return e.shipper.name=o}),s.qZA(),s.TgZ(3,"input",3),s.NdJ("ngModelChange",function(o){return e.shipper.addressLine1=o}),s.qZA(),s.TgZ(4,"input",4),s.NdJ("ngModelChange",function(o){return e.shipper.addressLine2=o}),s.qZA(),s.TgZ(5,"input",5),s.NdJ("ngModelChange",function(o){return e.shipper.location=o}),s.qZA(),s.TgZ(6,"input",6),s.NdJ("ngModelChange",function(o){return e.shipper.countryName=o}),s.qZA(),s.TgZ(7,"input",7),s.NdJ("ngModelChange",function(o){return e.shipper.vatNo=o}),s.qZA(),s.TgZ(8,"input",8),s.NdJ("ngModelChange",function(o){return e.shipper.contactPerson=o}),s.qZA(),s.TgZ(9,"input",9),s.NdJ("ngModelChange",function(o){return e.shipper.contactNo=o}),s.qZA(),s._UZ(10,"input",10),s.qZA(),s._uU(11),s.ALo(12,"json")}if(2&t){const i=s.MAs(1);s.xp6(2),s.Q6J("ngModel",e.shipper.name),s.xp6(1),s.Q6J("ngModel",e.shipper.addressLine1),s.xp6(1),s.Q6J("ngModel",e.shipper.addressLine2),s.xp6(1),s.Q6J("ngModel",e.shipper.location),s.xp6(1),s.Q6J("ngModel",e.shipper.countryName),s.xp6(1),s.Q6J("ngModel",e.shipper.vatNo),s.xp6(1),s.Q6J("ngModel",e.shipper.contactPerson),s.xp6(1),s.Q6J("ngModel",e.shipper.contactNo),s.xp6(2),s.hij(" ",s.lcZ(12,9,i.value),"")}},dependencies:[Cy,Ud,hu,vy,sl,dp,qr]});var xt,n5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gd={},_M=_M||{},Xt=n5||self;function wI(){}function CI(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function hC(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var yM="closure_uid_"+(1e9*Math.random()>>>0),s5=0;function o5(n,t,e){return n.call.apply(n.bind,arguments)}function a5(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function Is(n,t,e){return(Is=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o5:a5).apply(null,arguments)}function TI(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function is(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Wb=function(i,r,o){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return t.prototype[r].apply(i,l)}}function pp(){this.s=this.s,this.o=this.o}pp.prototype.s=!1,pp.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function r5(n){Object.prototype.hasOwnProperty.call(n,yM)&&n[yM]||(n[yM]=++s5)}(this)},pp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const s2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function vM(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function o2(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(CI(i)){const r=n.length||0,o=i.length||0;n.length=r+o;for(let l=0;l<o;l++)n[r+l]=i[l]}else n.push(i)}}function Ds(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Ds.prototype.h=function(){this.defaultPrevented=!0};var c5=function(){if(!Xt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Xt.addEventListener("test",wI,t),Xt.removeEventListener("test",wI,t)}catch{}return n}();function EI(n){return/^[\s\xa0]*$/.test(n)}var a2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bM(n,t){return n<t?-1:n>t?1:0}function SI(){var n=Xt.navigator;return n&&(n=n.userAgent)?n:""}function fu(n){return-1!=SI().indexOf(n)}function wM(n){return wM[" "](n),n}wM[" "]=wI;var II,n,d5=fu("Opera"),Ey=fu("Trident")||fu("MSIE"),l2=fu("Edge"),CM=l2||Ey,c2=fu("Gecko")&&!(-1!=SI().toLowerCase().indexOf("webkit")&&!fu("Edge"))&&!(fu("Trident")||fu("MSIE"))&&!fu("Edge"),h5=-1!=SI().toLowerCase().indexOf("webkit")&&!fu("Edge");function u2(){var n=Xt.document;return n?n.documentMode:void 0}e:{var TM="",EM=(n=SI(),c2?/rv:([^\);]+)(\)|;)/.exec(n):l2?/Edge\/([\d\.]+)/.exec(n):Ey?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):h5?/WebKit\/(\S+)/.exec(n):d5?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(EM&&(TM=EM?EM[1]:""),Ey){var SM=u2();if(null!=SM&&SM>parseFloat(TM)){II=String(SM);break e}}II=TM}var p5={};var g5=Xt.document&&Ey&&(u2()||parseInt(II,10))||void 0;function pC(n,t){if(Ds.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(c2){e:{try{wM(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:m5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&pC.X.h.call(this)}}is(pC,Ds);var m5={2:"touch",3:"pen",4:"mouse"};pC.prototype.h=function(){pC.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fC="closure_listenable_"+(1e6*Math.random()|0),_5=0;function y5(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++_5,this.ba=this.ea=!1}function DI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function DM(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function h2(n){const t={};for(const e in n)t[e]=n[e];return t}const p2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let o=0;o<p2.length;o++)e=p2[o],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function xI(n){this.src=n,this.g={},this.h=0}function xM(n,t){var e=t.type;if(e in n.g){var o,i=n.g[e],r=s2(i,t);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(DI(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function kM(n,t,e,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ba&&o.listener==t&&o.capture==!!e&&o.ha==i)return r}return-1}xI.prototype.add=function(n,t,e,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=kM(n,t,i,r);return-1<l?(t=n[l],e||(t.ea=!1)):((t=new y5(t,this.src,o,!!i,r)).ea=e,n.push(t)),t};var AM="closure_lm_"+(1e6*Math.random()|0),MM={};function g2(n,t,e,i,r){if(i&&i.once)return _2(n,t,e,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)g2(n,t[o],e,i,r);return null}return e=NM(e),n&&n[fC]?n.N(t,e,hC(i)?!!i.capture:!!i,r):m2(n,t,e,!1,i,r)}function m2(n,t,e,i,r,o){if(!t)throw Error("Invalid event type");var l=hC(r)?!!r.capture:!!r,d=OM(n);if(d||(n[AM]=d=new xI(n)),(e=d.add(t,e,i,l,o)).proxy)return e;if(i=function v5(){const t=b5;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)c5||(r=l),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(v2(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function _2(n,t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)_2(n,t[o],e,i,r);return null}return e=NM(e),n&&n[fC]?n.O(t,e,hC(i)?!!i.capture:!!i,r):m2(n,t,e,!0,i,r)}function y2(n,t,e,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)y2(n,t[o],e,i,r);else i=hC(i)?!!i.capture:!!i,e=NM(e),n&&n[fC]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=kM(o=n.g[t],e,i,r))&&(DI(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=OM(n))&&(t=n.g[t.toString()],n=-1,t&&(n=kM(t,e,i,r)),(e=-1<n?t[n]:null)&&RM(e))}function RM(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[fC])xM(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(v2(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=OM(t))?(xM(e,n),0==e.h&&(e.src=null,t[AM]=null)):DI(n)}}}function v2(n){return n in MM?MM[n]:MM[n]="on"+n}function b5(n,t){if(n.ba)n=!0;else{t=new pC(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&RM(n),n=e.call(i,t)}return n}function OM(n){return(n=n[AM])instanceof xI?n:null}var PM="__closure_events_fn_"+(1e9*Math.random()>>>0);function NM(n){return"function"==typeof n?n:(n[PM]||(n[PM]=function(t){return n.handleEvent(t)}),n[PM])}function Vr(){pp.call(this),this.i=new xI(this),this.P=this,this.I=null}function rs(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Ds(t,n);else if(t instanceof Ds)t.target=t.target||n;else{var r=t;f2(t=new Ds(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var l=t.g=e[o];r=kI(l,i,!0,t)&&r}if(r=kI(l=t.g=n,i,!0,t)&&r,r=kI(l,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=kI(l=t.g=e[o],i,!1,t)&&r}function kI(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var l=t[o];if(l&&!l.ba&&l.capture==e){var d=l.listener,f=l.ha||l.src;l.ea&&xM(n.i,l),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}is(Vr,pp),Vr.prototype[fC]=!0,Vr.prototype.removeEventListener=function(n,t,e,i){y2(this,n,t,e,i)},Vr.prototype.M=function(){if(Vr.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)DI(e[i]);delete n.g[t],n.h--}}this.I=null},Vr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Vr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var LM=Xt.JSON.stringify;function w5(){var n=C2;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var FM,b2=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new T5,n=>n.reset());class T5{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function E5(n){Xt.setTimeout(()=>{throw n},0)}function w2(n,t){FM||function S5(){var n=Xt.Promise.resolve(void 0);FM=function(){n.then(I5)}}(),VM||(FM(),VM=!0),C2.add(n,t)}var VM=!1,C2=new class C5{constructor(){this.h=this.g=null}add(t,e){const i=b2.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function I5(){for(var n;n=w5();){try{n.h.call(n.g)}catch(e){E5(e)}var t=b2;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}VM=!1}function AI(n,t){Vr.call(this),this.h=n||1,this.g=t||Xt,this.j=Is(this.lb,this),this.l=Date.now()}function BM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function HM(n,t,e){if("function"==typeof n)e&&(n=Is(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Is(n.handleEvent,n)}return 2147483647<Number(t)?-1:Xt.setTimeout(n,t||0)}function T2(n){n.g=HM(()=>{n.g=null,n.i&&(n.i=!1,T2(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}is(AI,Vr),(xt=AI.prototype).ca=!1,xt.R=null,xt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),rs(this,"tick"),this.ca&&(BM(this),this.start()))}},xt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xt.M=function(){AI.X.M.call(this),BM(this),delete this.g};class D5 extends pp{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:T2(this)}M(){super.M(),this.g&&(Xt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gC(n){pp.call(this),this.h=n,this.g={}}is(gC,pp);var E2=[];function S2(n,t,e,i){Array.isArray(e)||(e&&(E2[0]=e.toString()),e=E2);for(var r=0;r<e.length;r++){var o=g2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function I2(n){DM(n.g,function(t,e){this.g.hasOwnProperty(e)&&RM(t)},n),n.g={}}function MI(){this.g=!0}function Sy(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function M5(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<r.length;l++)r[l]=""}}}return LM(e)}catch{return t}}(n,e)+(i?" "+i:"")})}gC.prototype.M=function(){gC.X.M.call(this),I2(this)},gC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},MI.prototype.Aa=function(){this.g=!1},MI.prototype.info=function(){};var Mg={},D2=null;function RI(){return D2=D2||new Vr}function x2(n){Ds.call(this,Mg.Pa,n)}function mC(n){const t=RI();rs(t,new x2(t))}function k2(n,t){Ds.call(this,Mg.STAT_EVENT,n),this.stat=t}function Qs(n){const t=RI();rs(t,new k2(t,n))}function A2(n,t){Ds.call(this,Mg.Qa,n),this.size=t}function _C(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Xt.setTimeout(function(){n()},t)}Mg.Pa="serverreachability",is(x2,Ds),Mg.STAT_EVENT="statevent",is(k2,Ds),Mg.Qa="timingevent",is(A2,Ds);var OI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},M2={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function UM(){}function O2(){}UM.prototype.h=null;var jM,yC={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zM(){Ds.call(this,"d")}function GM(){Ds.call(this,"c")}function PI(){}function vC(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new gC(this),this.O=R5,this.T=new AI(n=CM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new P2}function P2(){this.i=null,this.g="",this.h=!1}is(zM,Ds),is(GM,Ds),is(PI,UM),PI.prototype.g=function(){return new XMLHttpRequest},PI.prototype.i=function(){return{}},jM=new PI;var R5=45e3,$M={},NI={};function ZM(n,t,e){n.K=1,n.v=BI(jd(t)),n.s=e,n.P=!0,N2(n,null)}function N2(n,t){n.F=Date.now(),bC(n),n.A=jd(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),$2(e.i,"t",i),n.C=0,e=n.l.H,n.h=new P2,n.g=gV(n.l,e?t:null,!n.s),0<n.N&&(n.L=new D5(Is(n.La,n,n.g),n.N)),S2(n.S,n.g,"readystatechange",n.ib),t=n.H?h2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),mC(),function x5(n,t,e,i,r,o){n.info(function(){if(n.g)if(o)for(var l="",d=o.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var E=w.split("_");l=2<=E.length&&"type"==E[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function L2(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function F2(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=O5(n,e),r==NI){4==t&&(n.o=4,Qs(14),i=!1),Sy(n.j,n.m,null,"[Incomplete Response]");break}if(r==$M){n.o=4,Qs(15),Sy(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Sy(n.j,n.m,r,null),qM(n,r)}L2(n)&&r!=NI&&r!=$M&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Qs(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),tR(t),t.K=!0,Qs(11))):(Sy(n.j,n.m,e,"[Invalid Chunked Response]"),Rg(n),wC(n))}function O5(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?NI:(e=Number(t.substring(e,i)),isNaN(e)?$M:(i+=1)+e>t.length?NI:(t=t.substr(i,e),n.C=i+e,t))}function bC(n){n.V=Date.now()+n.O,V2(n,n.O)}function V2(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_C(Is(n.gb,n),t)}function LI(n){n.B&&(Xt.clearTimeout(n.B),n.B=null)}function wC(n){0==n.l.G||n.I||dV(n.l,n)}function Rg(n){LI(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,BM(n.T),I2(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function qM(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||WM(e.h,n)))if(!n.J&&WM(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;$I(e),GI(e)}eR(e),Qs(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=_C(Is(e.cb,e),6e3));if(1>=W2(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Pg(e,11)}else if((n.J||e.g==n)&&$I(e),!EI(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.T=y[0],y=y[1],2==e.G)if("c"==y[0]){e.I=y[1],e.ka=y[2];const w=y[3];null!=w&&(e.ma=w,e.j.info("VER="+e.ma));const E=y[4];null!=E&&(e.Ca=E,e.j.info("SVER="+e.Ca));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(e.J=i=1.5*M,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const N=n.g;if(N){const B=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=i.h;o.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(KM(o,o.h),o.h=null))}if(i.D){const j=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;j&&(i.za=j,xi(i.F,i.D,j))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var l=n;if((i=e).sa=fV(i,i.H?i.ka:null,i.V),l.J){K2(i.h,l);var d=l,f=i.J;f&&d.setTimeout(f),d.B&&(LI(d),bC(d)),i.g=l}else cV(i);0<e.i.length&&jI(e)}else"stop"!=y[0]&&"close"!=y[0]||Pg(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Pg(e,7):XM(e):"noop"!=y[0]&&e.l&&e.l.wa(y),e.A=0)}mC()}catch{}}function B2(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(CI(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function N5(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(CI(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function P5(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(CI(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],e&&e[o],n)}(xt=vC.prototype).setTimeout=function(n){this.O=n},xt.ib=function(n){n=n.target;const t=this.L;t&&3==$d(n)?t.l():this.La(n)},xt.La=function(n){try{if(n==this.g)e:{const w=$d(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||CM||this.g&&(this.h.h||this.g.fa()||iV(this.g)))){this.I||4!=w||7==t||mC(),LI(this);var e=this.g.aa();this.Y=e;t:if(L2(this)){var i=iV(this.g);n="";var r=i.length,o=4==$d(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rg(this),wC(this);var l="";break t}this.h.i=new Xt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==e,function k5(n,t,e,i,r,o,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.U,w,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!EI(d)){var y=d;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Qs(12),Rg(this),wC(this);break e}Sy(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qM(this,e)}this.P?(F2(this,w,l),CM&&this.i&&3==w&&(S2(this.S,this.T,"tick",this.hb),this.T.start())):(Sy(this.j,this.m,l,null),qM(this,l)),4==w&&Rg(this),this.i&&!this.I&&(4==w?dV(this.l,this):(this.i=!1,bC(this)))}else 400==e&&0<l.indexOf("Unknown SID")?(this.o=3,Qs(12)):(this.o=0,Qs(13)),Rg(this),wC(this)}}}catch{}},xt.hb=function(){if(this.g){var n=$d(this.g),t=this.g.fa();this.C<t.length&&(LI(this),F2(this,n,t),this.i&&4!=n&&bC(this))}},xt.cancel=function(){this.I=!0,Rg(this)},xt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function A5(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(mC(),Qs(17)),Rg(this),this.o=2,wC(this)):V2(this,this.V-n)};var H2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Og(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Og){this.h=void 0!==t?t:n.h,FI(this,n.j),this.s=n.s,this.g=n.g,VI(this,n.m),this.l=n.l,t=n.i;var e=new EC;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),U2(this,e),this.o=n.o}else n&&(e=String(n).match(H2))?(this.h=!!t,FI(this,e[1]||"",!0),this.s=CC(e[2]||""),this.g=CC(e[3]||"",!0),VI(this,e[4]),this.l=CC(e[5]||"",!0),U2(this,e[6]||"",!0),this.o=CC(e[7]||"")):(this.h=!!t,this.i=new EC(null,this.h))}function jd(n){return new Og(n)}function FI(n,t,e){n.j=e?CC(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function VI(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function U2(n,t,e){t instanceof EC?(n.i=t,function z5(n,t){t&&!n.j&&(fp(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(G2(this,i),$2(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=TC(t,H5)),n.i=new EC(t,n.h))}function xi(n,t,e){n.i.set(t,e)}function BI(n){return xi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function CC(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function TC(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,F5),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function F5(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Og.prototype.toString=function(){var n=[],t=this.j;t&&n.push(TC(t,z2,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(TC(t,z2,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(TC(e,"/"==e.charAt(0)?B5:V5,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",TC(e,U5)),n.join("")};var z2=/[#\/\?@]/g,V5=/[#\?:]/g,B5=/[#\?]/g,H5=/[#\?@]/g,U5=/#/g;function EC(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function fp(n){n.g||(n.g=new Map,n.h=0,n.i&&function L5(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var o=n[e].substring(0,i);r=n[e].substring(i+1)}else o=n[e];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function G2(n,t){fp(n),t=Iy(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function j2(n,t){return fp(n),t=Iy(n,t),n.g.has(t)}function $2(n,t,e){G2(n,t),0<e.length&&(n.i=null,n.g.set(Iy(n,t),vM(e)),n.h+=e.length)}function Iy(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Z2(n){this.l=n||j5,n=Xt.PerformanceNavigationTiming?0<(n=Xt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Xt.g&&Xt.g.Ga&&Xt.g.Ga()&&Xt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(xt=EC.prototype).add=function(n,t){fp(this),this.i=null,n=Iy(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},xt.forEach=function(n,t){fp(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},xt.oa=function(){fp(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let o=0;o<r.length;o++)e.push(t[i])}return e},xt.W=function(n){fp(this);let t=[];if("string"==typeof n)j2(this,n)&&(t=t.concat(this.g.get(Iy(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},xt.set=function(n,t){return fp(this),this.i=null,j2(this,n=Iy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},xt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},xt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const o=encodeURIComponent(String(i)),l=this.W(i);for(i=0;i<l.length;i++){var r=o;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var j5=10;function q2(n){return!!n.h||!!n.g&&n.g.size>=n.j}function W2(n){return n.h?1:n.g?n.g.size:0}function WM(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function KM(n,t){n.g?n.g.add(t):n.h=t}function K2(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function Y2(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return vM(n.i)}function YM(){}function $5(){this.g=new YM}function Z5(n,t,e){const i=e||"";try{B2(n,function(r,o){let l=r;hC(r)&&(l=LM(r)),t.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function HI(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function SC(n){this.l=n.ac||null,this.j=n.jb||!1}function UI(n,t){Vr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=QM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Z2.prototype.cancel=function(){if(this.i=Y2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},YM.prototype.stringify=function(n){return Xt.JSON.stringify(n,void 0)},YM.prototype.parse=function(n){return Xt.JSON.parse(n,void 0)},is(SC,UM),SC.prototype.g=function(){return new UI(this.l,this.j)},SC.prototype.i=function(n){return function(){return n}}({}),is(UI,Vr);var QM=0;function Q2(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function IC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,DC(n)}function DC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(xt=UI.prototype).open=function(n,t){if(this.readyState!=QM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,DC(this)},xt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Xt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},xt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,IC(this)),this.readyState=QM},xt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,DC(this)),this.g&&(this.readyState=3,DC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Xt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Q2(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},xt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?IC(this):DC(this),3==this.readyState&&Q2(this)}},xt.Va=function(n){this.g&&(this.response=this.responseText=n,IC(this))},xt.Ua=function(n){this.g&&(this.response=n,IC(this))},xt.ga=function(){this.g&&IC(this)},xt.setRequestHeader=function(n,t){this.v.append(n,t)},xt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},xt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(UI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var W5=Xt.JSON.parse;function Hi(n){Vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=J2,this.K=this.L=!1}is(Hi,Vr);var J2="",K5=/^https?$/i,Y5=["POST","PUT"];function X2(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,eV(n),zI(n)}function eV(n){n.D||(n.D=!0,rs(n,"complete"),rs(n,"error"))}function tV(n){if(n.h&&typeof _M<"u"&&(!n.C[1]||4!=$d(n)||2!=n.aa()))if(n.v&&4==$d(n))HM(n.Ha,0,n);else if(rs(n,"readystatechange"),4==$d(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(H2)[1]||null;if(!r&&Xt.self&&Xt.self.location){var o=Xt.self.location.protocol;r=o.substr(0,o.length-1)}i=!K5.test(r?r.toLowerCase():"")}e=i}if(e)rs(n,"complete"),rs(n,"success");else{n.m=6;try{var l=2<$d(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",eV(n)}}finally{zI(n)}}}function zI(n,t){if(n.g){nV(n);const e=n.g,i=n.C[0]?wI:null;n.g=null,n.C=null,t||rs(n,"ready");try{e.onreadystatechange=i}catch{}}}function nV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Xt.clearTimeout(n.A),n.A=null)}function $d(n){return n.g?n.g.readyState:0}function iV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case J2:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function rV(n){let t="";return DM(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function JM(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=rV(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):xi(n,t,e))}function xC(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function sV(n){this.Ca=0,this.i=[],this.j=new MI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=xC("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=xC("baseRetryDelayMs",5e3,n),this.bb=xC("retryDelaySeedMs",1e4,n),this.$a=xC("forwardChannelMaxRetries",2,n),this.ta=xC("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Z2(n&&n.concurrentRequestLimit),this.Fa=new $5,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function XM(n){if(oV(n),3==n.G){var t=n.U++,e=jd(n.F);xi(e,"SID",n.I),xi(e,"RID",t),xi(e,"TYPE","terminate"),kC(n,e),(t=new vC(n,n.j,t,void 0)).K=2,t.v=BI(jd(e)),e=!1,Xt.navigator&&Xt.navigator.sendBeacon&&(e=Xt.navigator.sendBeacon(t.v.toString(),"")),!e&&Xt.Image&&((new Image).src=t.v,e=!0),e||(t.g=gV(t.l,null),t.g.da(t.v)),t.F=Date.now(),bC(t)}pV(n)}function GI(n){n.g&&(tR(n),n.g.cancel(),n.g=null)}function oV(n){GI(n),n.u&&(Xt.clearTimeout(n.u),n.u=null),$I(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Xt.clearTimeout(n.m),n.m=null)}function jI(n){q2(n.h)||n.m||(n.m=!0,w2(n.Ja,n),n.C=0)}function aV(n,t){var e;e=t?t.m:n.U++;const i=jd(n.F);xi(i,"SID",n.I),xi(i,"RID",e),xi(i,"AID",n.T),kC(n,i),n.o&&n.s&&JM(i,n.o,n.s),e=new vC(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=lV(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),KM(n.h,e),ZM(e,i,t)}function kC(n,t){n.ia&&DM(n.ia,function(e,i){xi(t,i,e)}),n.l&&B2({},function(e,i){xi(t,i,e)})}function lV(n,t,e){e=Math.min(n.i.length,e);var i=n.l?Is(n.l.Ra,n.l,n):null;e:{var r=n.i;let o=-1;for(;;){const l=["count="+e];-1==o?0<e?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let d=!0;for(let f=0;f<e;f++){let y=r[f].h;const w=r[f].g;if(y-=o,0>y)o=Math.max(0,r[f].h-100),d=!1;else try{Z5(w,l,"req"+y+"_")}catch{i&&i(w)}}if(d){i=l.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function cV(n){n.g||n.u||(n.Z=1,w2(n.Ia,n),n.A=0)}function eR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=_C(Is(n.Ia,n),hV(n,n.A)),n.A++,0))}function tR(n){null!=n.B&&(Xt.clearTimeout(n.B),n.B=null)}function uV(n){n.g=new vC(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=jd(n.sa);xi(t,"RID","rpc"),xi(t,"SID",n.I),xi(t,"CI",n.L?"0":"1"),xi(t,"AID",n.T),xi(t,"TYPE","xmlhttp"),kC(n,t),n.o&&n.s&&JM(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=BI(jd(t)),e.s=null,e.P=!0,N2(e,n)}function $I(n){null!=n.v&&(Xt.clearTimeout(n.v),n.v=null)}function dV(n,t){var e=null;if(n.g==t){$I(n),tR(n),n.g=null;var i=2}else{if(!WM(n.h,t))return;e=t.D,K2(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;rs(i=RI(),new A2(i,e)),jI(n)}else cV(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function J5(n,t){return!(W2(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=_C(Is(n.Ja,n,t),hV(n,n.C)),n.C++,0)))}(n,t)||2==i&&eR(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:Pg(n,5);break;case 4:Pg(n,10);break;case 3:Pg(n,6);break;default:Pg(n,2)}}function hV(n,t){let e=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(e*=2),e*t}function Pg(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=Is(n.kb,n);e||(e=new Og("//www.google.com/images/cleardot.gif"),Xt.location&&"http"==Xt.location.protocol||FI(e,"https"),BI(e)),function q5(n,t){const e=new MI;if(Xt.Image){const i=new Image;i.onload=TI(HI,e,i,"TestLoadImage: loaded",!0,t),i.onerror=TI(HI,e,i,"TestLoadImage: error",!1,t),i.onabort=TI(HI,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=TI(HI,e,i,"TestLoadImage: timeout",!1,t),Xt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Qs(2);n.G=0,n.l&&n.l.va(t),pV(n),oV(n)}function pV(n){if(n.G=0,n.la=[],n.l){const t=Y2(n.h);(0!=t.length||0!=n.i.length)&&(o2(n.la,t),o2(n.la,n.i),n.h.i.length=0,vM(n.i),n.i.length=0),n.l.ua()}}function fV(n,t,e){var i=e instanceof Og?jd(e):new Og(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),VI(i,i.m);else{var r=Xt.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Og(null,void 0);i&&FI(o,i),t&&(o.g=t),r&&VI(o,r),e&&(o.l=e),i=o}return t=n.za,(e=n.D)&&t&&xi(i,e,t),xi(i,"VER",n.ma),kC(n,i),i}function gV(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Hi(e&&n.Da&&!n.ra?new SC({jb:!0}):n.ra)).Ka(n.H),t}function mV(){}function ZI(){if(Ey&&!(10<=Number(g5)))throw Error("Environmental error: no available transport.")}function ua(n,t){Vr.call(this),this.g=new sV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Yb)&&!EI(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!EI(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Dy(this)}function _V(n){zM.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function yV(){GM.call(this),this.status=1}function Dy(n){this.g=n}(xt=Hi.prototype).Ka=function(n){this.L=n},xt.da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jM.g(),this.C=function R2(n){return n.h||(n.h=n.i())}(this.u?this.u:jM),this.g.onreadystatechange=Is(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void X2(this,o)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const o of i.keys())e.set(o,i.get(o))}i=Array.from(e.keys()).find(o=>"content-type"==o.toLowerCase()),r=Xt.FormData&&n instanceof Xt.FormData,!(0<=s2(Y5,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of e)this.g.setRequestHeader(o,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nV(this),0<this.B&&((this.K=function Q5(n){return Ey&&function f5(){return function u5(n){var t=p5;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=a2(String(II)).split("."),e=a2("9").split("."),i=Math.max(t.length,e.length);for(let l=0;0==n&&l<i;l++){var r=t[l]||"",o=e[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=bM(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||bM(0==r[2].length,0==o[2].length)||bM(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Is(this.qa,this)):this.A=HM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){X2(this,o)}},xt.qa=function(){typeof _M<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rs(this,"timeout"),this.abort(8))},xt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,rs(this,"complete"),rs(this,"abort"),zI(this))},xt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zI(this,!0)),Hi.X.M.call(this)},xt.Ha=function(){this.s||(this.F||this.v||this.l?tV(this):this.fb())},xt.fb=function(){tV(this)},xt.aa=function(){try{return 2<$d(this)?this.g.status:-1}catch{return-1}},xt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},xt.Sa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),W5(t)}},xt.Ea=function(){return this.m},xt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(xt=sV.prototype).ma=8,xt.G=1,xt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new vC(this,this.j,n,void 0);let o=this.s;if(this.S&&(o?(o=h2(o),f2(o,this.S)):o=this.S),null!==this.o||this.N||(r.H=o,o=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=lV(this,r,t),xi(e=jd(this.F),"RID",n),xi(e,"CVER",22),this.D&&xi(e,"X-HTTP-Session-Id",this.D),kC(this,e),o&&(this.N?t="headers="+encodeURIComponent(String(rV(o)))+"&"+t:this.o&&JM(e,this.o,o)),KM(this.h,r),this.Ya&&xi(e,"TYPE","init"),this.O?(xi(e,"$req",t),xi(e,"SID","null"),r.Z=!0,ZM(r,e,null)):ZM(r,e,t),this.G=2}}else 3==this.G&&(n?aV(this,n):0==this.i.length||q2(this.h)||aV(this))},xt.Ia=function(){if(this.u=null,uV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=_C(Is(this.eb,this),n)}},xt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qs(10),GI(this),uV(this))},xt.cb=function(){null!=this.v&&(this.v=null,GI(this),eR(this),Qs(19))},xt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Qs(2)):(this.j.info("Failed to ping google.com"),Qs(1))},(xt=mV.prototype).xa=function(){},xt.wa=function(){},xt.va=function(){},xt.ua=function(){},xt.Ra=function(){},ZI.prototype.g=function(n,t){return new ua(n,t)},is(ua,Vr),ua.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;Qs(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=fV(n,null,n.V),jI(n)},ua.prototype.close=function(){XM(this.g)},ua.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=LM(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.ab++,n)),3==t.G&&jI(t)},ua.prototype.M=function(){this.g.l=null,delete this.j,XM(this.g),delete this.g,ua.X.M.call(this)},is(_V,zM),is(yV,GM),is(Dy,mV),Dy.prototype.xa=function(){rs(this.g,"a")},Dy.prototype.wa=function(n){rs(this.g,new _V(n))},Dy.prototype.va=function(n){rs(this.g,new yV)},Dy.prototype.ua=function(){rs(this.g,"b")},ZI.prototype.createWebChannel=ZI.prototype.g,ua.prototype.send=ua.prototype.u,ua.prototype.open=ua.prototype.m,ua.prototype.close=ua.prototype.close,OI.NO_ERROR=0,OI.TIMEOUT=8,OI.HTTP_ERROR=6,M2.COMPLETE="complete",O2.EventType=yC,yC.OPEN="a",yC.CLOSE="b",yC.ERROR="c",yC.MESSAGE="d",Vr.prototype.listen=Vr.prototype.N,Hi.prototype.listenOnce=Hi.prototype.O,Hi.prototype.getLastError=Hi.prototype.Oa,Hi.prototype.getLastErrorCode=Hi.prototype.Ea,Hi.prototype.getStatus=Hi.prototype.aa,Hi.prototype.getResponseJson=Hi.prototype.Sa,Hi.prototype.getResponseText=Hi.prototype.fa,Hi.prototype.send=Hi.prototype.da,Hi.prototype.setWithCredentials=Hi.prototype.Ka;var X5=Gd.createWebChannelTransport=function(){return new ZI},eY=Gd.getStatEventTarget=function(){return RI()},nR=Gd.ErrorCode=OI,tY=Gd.EventType=M2,nY=Gd.Event=Mg,vV=Gd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},iY=Gd.FetchXmlHttpFactory=SC,qI=Gd.WebChannel=O2,rY=Gd.XhrIo=Hi;const bV="@firebase/firestore";class Br{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Br.UNAUTHENTICATED=new Br(null),Br.GOOGLE_CREDENTIALS=new Br("google-credentials-uid"),Br.FIRST_PARTY=new Br("first-party-uid"),Br.MOCK_USER=new Br("mock-user");let xy="9.17.1";const gp=new Xo.Yd("@firebase/firestore");function iR(){return gp.logLevel}function He(n,...t){if(gp.logLevel<=Xo.in.DEBUG){const e=t.map(rR);gp.debug(`Firestore (${xy}): ${n}`,...e)}}function Xi(n,...t){if(gp.logLevel<=Xo.in.ERROR){const e=t.map(rR);gp.error(`Firestore (${xy}): ${n}`,...e)}}function Ng(n,...t){if(gp.logLevel<=Xo.in.WARN){const e=t.map(rR);gp.warn(`Firestore (${xy}): ${n}`,...e)}}function rR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const t=`FIRESTORE (${xy}) INTERNAL ASSERTION FAILED: `+n;throw Xi(t),new Error(t)}function St(n,t){n||mt()}function lt(n,t){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class wV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class aY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Br.UNAUTHENTICATED))}shutdown(){}}class lY{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class cY{constructor(t){this.t=t,this.currentUser=Br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const o=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let l=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ir,t.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=l;t.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield o(i.currentUser)}))},f=y=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ir)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St("string"==typeof i.accessToken),new wV(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return St(null===t||"string"==typeof t),new Br(t)}}class uY{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=Br.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dY{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new uY(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hY{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=o=>{null!=o.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.A;return this.A=o.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.T.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.T.getImmediate({optional:!0});o?r(o):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(St("string"==typeof e.token),this.A=e.token,new CV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pY(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class TV{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=pY(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}}function en(n,t){return n<t?-1:n>t?1:0}function ky(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function EV(n){return n+"\0"}class ki{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Le(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Le(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Le(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Le(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ki.fromMillis(Date.now())}static fromDate(t){return ki.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new ki(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?en(this.nanoseconds,t.nanoseconds):en(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new ki(0,0))}static max(){return new Rt(new ki(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class AC{constructor(t,e,i){void 0===e?e=0:e>t.length&&mt(),void 0===i?i=t.length-e:i>t.length-e&&mt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===AC.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof AC?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=t.get(r),l=e.get(r);if(o<l)return-1;if(o>l)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class In extends AC{construct(t,e,i){return new In(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Le(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new In(e)}static emptyPath(){return new In([])}}const fY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends AC{construct(t,e,i){return new Ui(t,e,i)}static isValidIdentifier(t){return fY.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ui(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Le(de.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Le(de.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Le(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(o(),r++)}if(o(),l)throw new Le(de.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ui(e)}static emptyPath(){return new Ui([])}}class st{constructor(t){this.path=t}static fromPath(t){return new st(In.fromString(t))}static fromName(t){return new st(In.fromString(t).popFirst(5))}static empty(){return new st(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===In.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return In.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new st(new In(t.slice()))}}class WI{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function sR(n){return n.fields.find(t=>2===t.kind)}function Lg(n){return n.fields.filter(t=>2!==t.kind)}WI.UNKNOWN_ID=-1;class KI{constructor(t,e){this.fieldPath=t,this.kind=e}}class MC{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new MC(0,da.min())}}function SV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Rt.fromTimestamp(1e9===i?new ki(e+1,0):new ki(e,i));return new da(r,st.empty(),t)}function IV(n){return new da(n.readTime,n.key,-1)}class da{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new da(Rt.min(),st.empty(),-1)}static max(){return new da(Rt.max(),st.empty(),-1)}}function oR(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=st.comparator(n.documentKey,t.documentKey),0!==e?e:en(n.largestBatchId,t.largestBatchId))}const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function mp(n){return aR.apply(this,arguments)}function aR(){return aR=(0,we.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==DV)throw n;He("LocalStore","Unexpectedly lost primary lease")}),aR.apply(this,arguments)}class ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ce((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ce?e:ce.resolve(e)}catch(e){return ce.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.reject(e)}static resolve(t){return new ce((e,i)=>{e(t)})}static reject(t){return new ce((e,i)=>{i(t)})}static waitFor(t){return new ce((e,i)=>{let r=0,o=0,l=!1;t.forEach(d=>{++r,d.next(()=>{++o,l&&o===r&&e()},f=>i(f))}),l=!0,o===r&&e()})}static or(t){let e=ce.resolve(!1);for(const i of t)e=e.next(r=>r?ce.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new ce((i,r)=>{const o=t.length,l=new Array(o);let d=0;for(let f=0;f<o;f++){const y=f;e(t[y]).next(w=>{l[y]=w,++d,d===o&&i(l)},w=>r(w))}})}static doWhile(t,e){return new ce((i,r)=>{const o=()=>{!0===t()?e().next(()=>{o()},r):i()};o()})}}class YI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new Ir,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new RC(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=lR(i.target.error);this.P.reject(new RC(t,r))}}static open(t,e,i,r){try{return new YI(e,t.transaction(r,i))}catch(o){throw new RC(e,o)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(He("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new yY(e)}}class ac{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===ac.D((0,L.z$)())&&Xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return He("SimpleDb","Removing database:",t),Fg(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(ac.N())return!0;const t=(0,L.z$)(),e=ac.D(t),i=0<e&&e<10,r=ac.k(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,we.Z)(function*(){return e.db||(He("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=l=>{i(l.target.result)},o.onblocked=()=>{r(new RC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new Le(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Le(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new RC(t,d))},o.onupgradeneeded=l=>{He("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',l.oldVersion),e.S.$(l.target.result,o.transaction,l.oldVersion,e.version).next(()=>{He("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var o=this;return(0,we.Z)(function*(){const l="readonly"===e;let d=0;for(;;){++d;try{o.db=yield o.F(t);const f=YI.open(o.db,t,l?"readonly":"readwrite",i),y=r(f).next(w=>(f.V(),w)).catch(w=>(f.abort(w),ce.reject(w))).toPromise();return y.catch(()=>{}),yield f.v,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(He("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),o.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _Y{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return Fg(this.q.delete())}}class RC extends Le{constructor(t,e){super(de.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function _p(n){return"IndexedDbTransactionError"===n.name}class yY{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(He("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Fg(i)}add(t){return He("SimpleDb","ADD",this.store.name,t,t),Fg(this.store.add(t))}get(t){return Fg(this.store.get(t)).next(e=>(void 0===e&&(e=null),He("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return He("SimpleDb","DELETE",this.store.name,t),Fg(this.store.delete(t))}count(){return He("SimpleDb","COUNT",this.store.name),Fg(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.H(r,(l,d)=>{o.push(d)}).next(()=>o)}{const r=this.store.getAll(i.range);return new ce((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new ce((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}Y(t,e){He("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(o,l,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new ce((i,r)=>{e.onerror=o=>{const l=lR(o.target.error);r(l)},e.onsuccess=o=>{const l=o.target.result;l?t(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}H(t,e){const i=[];return new ce((r,o)=>{t.onerror=l=>{o(l.target.error)},t.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const f=new _Y(d),y=e(d.primaryKey,d.value,f);if(y instanceof ce){const w=y.catch(E=>(f.done(),ce.reject(E)));i.push(w)}f.isDone?r():null===f.G?d.continue():d.continue(f.G)}}).next(()=>ce.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Fg(n){return new ce((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=lR(i.target.error);e(r)}})}let kV=!1;function lR(n){const t=ac.D((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kV||(kV=!0,setTimeout(()=>{throw i},0)),i}}return n}class vY{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;He("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,we.Z)(function*(){e.task=null;try{He("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){_p(i)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield mp(i)}yield e.nt(6e4)}))}}class bY{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,we.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,o=!0;return ce.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(l=>{if(null!==l&&!i.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.rt(t,l,r).next(d=>{r-=d,i.add(l)});o=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(t,l).next(()=>this.ot(r,o)).next(d=>(He("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>l.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,o)=>{const l=IV(o);oR(l,i)>0&&(i=l)}),new da(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let ha=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>i.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}return n.at=-1,n})();class wY{constructor(t,e,i,r,o,l,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class yp{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new yp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof yp&&t.projectId===this.projectId&&t.database===this.database}}function AV(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Vg(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function MV(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function OC(n){return null==n}function PC(n){return 0===n&&1/n==-1/0}function RV(n){return"number"==typeof n&&Number.isInteger(n)&&!PC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Dr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Dr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Dr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return en(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const TY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vp(n){if(St(!!n),"string"==typeof n){let t=0;const e=TY.exec(n);if(St(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zi(n.seconds),nanos:zi(n.nanos)}}function zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bg(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function cR(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function OV(n){const t=n.mapValue.fields.__previous_value__;return cR(t)?OV(t):t}function NC(n){const t=vp(n.mapValue.fields.__local_write_time__.timestampValue);return new ki(t.seconds,t.nanos)}const bp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},QI={nullValue:"NULL_VALUE"};function Hg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cR(n)?4:FV(n)?9007199254740991:10:mt()}function gu(n,t){if(n===t)return!0;const e=Hg(n);if(e!==Hg(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return NC(n).isEqual(NC(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=vp(i.timestampValue),l=vp(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Bg(n.bytesValue).isEqual(Bg(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return zi(i.geoPointValue.latitude)===zi(r.geoPointValue.latitude)&&zi(i.geoPointValue.longitude)===zi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return zi(i.integerValue)===zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=zi(i.doubleValue),l=zi(r.doubleValue);return o===l?PC(o)===PC(l):isNaN(o)&&isNaN(l)}return!1}(n,t);case 9:return ky(n.arrayValue.values||[],t.arrayValue.values||[],gu);case 10:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(AV(o)!==AV(l))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===l[d]||!gu(o[d],l[d])))return!1;return!0}(n,t);default:return mt()}var r}function LC(n,t){return void 0!==(n.values||[]).find(e=>gu(e,t))}function wp(n,t){if(n===t)return 0;const e=Hg(n),i=Hg(t);if(e!==i)return en(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return en(n.booleanValue,t.booleanValue);case 2:return function(r,o){const l=zi(r.integerValue||r.doubleValue),d=zi(o.integerValue||o.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,t);case 3:return PV(n.timestampValue,t.timestampValue);case 4:return PV(NC(n),NC(t));case 5:return en(n.stringValue,t.stringValue);case 6:return function(r,o){const l=Bg(r),d=Bg(o);return l.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,o){const l=r.split("/"),d=o.split("/");for(let f=0;f<l.length&&f<d.length;f++){const y=en(l[f],d[f]);if(0!==y)return y}return en(l.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,o){const l=en(zi(r.latitude),zi(o.latitude));return 0!==l?l:en(zi(r.longitude),zi(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,o){const l=r.values||[],d=o.values||[];for(let f=0;f<l.length&&f<d.length;++f){const y=wp(l[f],d[f]);if(y)return y}return en(l.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===bp.mapValue&&o===bp.mapValue)return 0;if(r===bp.mapValue)return 1;if(o===bp.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),f=o.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const E=en(d[w],y[w]);if(0!==E)return E;const M=wp(l[d[w]],f[y[w]]);if(0!==M)return M}return en(d.length,y.length)}(n.mapValue,t.mapValue);default:throw mt()}}function PV(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return en(n,t);const e=vp(n),i=vp(t),r=en(e.seconds,i.seconds);return 0!==r?r:en(e.nanos,i.nanos)}function Ay(n){return uR(n)}function uR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=vp(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bg(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const l of i.values||[])o?o=!1:r+=",",r+=uR(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",l=!0;for(const d of r)l?l=!1:o+=",",o+=`${d}:${uR(i.fields[d])}`;return o+"}"}(n.mapValue):mt();var t}function Ug(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function dR(n){return!!n&&"integerValue"in n}function FC(n){return!!n&&"arrayValue"in n}function NV(n){return!!n&&"nullValue"in n}function LV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function JI(n){return!!n&&"mapValue"in n}function VC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Vg(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=VC(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=VC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function FV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EY(n){return"nullValue"in n?QI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ug(yp.empty(),st.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function SY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ug(yp.empty(),st.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bp:mt()}function VV(n,t){const e=wp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function BV(n,t){const e=wp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Cp{constructor(t,e){this.position=t,this.inclusive=e}}function HV(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],l=n.position[r];if(i=o.field.isKeyField()?st.comparator(st.fromName(l.referenceValue),e.key):wp(l,e.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function UV(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!gu(n.position[e],t.position[e]))return!1;return!0}class zV{}class yn extends zV{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new IY(t,e,i):"array-contains"===e?new kY(t,i):"in"===e?new WV(t,i):"not-in"===e?new AY(t,i):"array-contains-any"===e?new MY(t,i):new yn(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new DY(t,i):new xY(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(wp(e,this.value)):null!==e&&Hg(this.value)===Hg(e)&&this.matchesComparison(wp(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Zn extends zV{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new Zn(t,e)}matches(t){return My(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(e=>e.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function My(n){return"and"===n.op}function hR(n){return"or"===n.op}function pR(n){return GV(n)&&My(n)}function GV(n){for(const t of n.filters)if(t instanceof Zn)return!1;return!0}function fR(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+Ay(n.value);if(pR(n))return n.filters.map(t=>fR(t)).join(",");{const t=n.filters.map(e=>fR(e)).join(",");return`${n.op}(${t})`}}function jV(n,t){return n instanceof yn?(e=n,(i=t)instanceof yn&&e.op===i.op&&e.field.isEqual(i.field)&&gu(e.value,i.value)):n instanceof Zn?function(e,i){return i instanceof Zn&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((r,o,l)=>r&&jV(o,i.filters[l]),!0)}(n,t):void mt();var e,i}function $V(n,t){const e=n.filters.concat(t);return Zn.create(e,n.op)}function ZV(n){return n instanceof yn?`${(t=n).field.canonicalString()} ${t.op} ${Ay(t.value)}`:n instanceof Zn?function(t){return t.op.toString()+" {"+t.getFilters().map(ZV).join(" ,")+"}"}(n):"Filter";var t}class IY extends yn{constructor(t,e,i){super(t,e,i),this.key=st.fromName(i.referenceValue)}matches(t){const e=st.comparator(t.key,this.key);return this.matchesComparison(e)}}class DY extends yn{constructor(t,e){super(t,"in",e),this.keys=qV(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class xY extends yn{constructor(t,e){super(t,"not-in",e),this.keys=qV(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function qV(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>st.fromName(i.referenceValue))}class kY extends yn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return FC(e)&&LC(e.arrayValue,this.value)}}class WV extends yn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&LC(this.value.arrayValue,e)}}class AY extends yn{constructor(t,e){super(t,"not-in",e)}matches(t){if(LC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!LC(this.value.arrayValue,e)}}class MY extends yn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!FC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>LC(this.value.arrayValue,i))}}class Ry{constructor(t,e="asc"){this.field=t,this.dir=e}}function RY(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class Gi{constructor(t,e){this.comparator=t,this.root=e||ss.EMPTY}insert(t,e){return new Gi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(t){return new Gi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ss.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new XI(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new XI(this.root,t,this.comparator,!1)}getReverseIterator(){return new XI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new XI(this.root,t,this.comparator,!0)}}class XI{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ss{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??ss.RED,this.left=r??ss.EMPTY,this.right=o??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new ss(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===o?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ss.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ss(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ni{constructor(t){this.comparator=t,this.data=new Gi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new KV(this.data.getIterator())}getIteratorFrom(t){return new KV(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ni)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ni(this.comparator);return e.data=t,e}}class KV{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oy(n){return n.hasNext()?n.getNext():void 0}class Co{constructor(t){this.fields=t,t.sort(Ui.comparator)}static empty(){return new Co([])}unionWith(t){let e=new ni(Ui.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Co(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ky(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class os{constructor(t){this.value=t}static empty(){return new os({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!JI(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=VC(e)}setAll(t){let e=Ui.emptyPath(),i={},r=[];t.forEach((l,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=d.popLast()}l?i[d.lastSegment()]=VC(l):r.push(d.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());JI(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];JI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Vg(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new os(VC(this.value))}}function YV(n){const t=[];return Vg(n.fields,(e,i)=>{const r=new Ui([e]);if(JI(i)){const o=YV(i.mapValue).fields;if(0===o.length)t.push(r);else for(const l of o)t.push(r.child(l))}else t.push(r)}),new Co(t)}class gi{constructor(t,e,i,r,o,l,d){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(t){return new gi(t,0,Rt.min(),Rt.min(),Rt.min(),os.empty(),0)}static newFoundDocument(t,e,i,r){return new gi(t,1,e,Rt.min(),i,r,0)}static newNoDocument(t,e){return new gi(t,2,e,Rt.min(),Rt.min(),os.empty(),0)}static newUnknownDocument(t,e){return new gi(t,3,e,Rt.min(),Rt.min(),os.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof gi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class OY{constructor(t,e=null,i=[],r=[],o=null,l=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=d,this.ft=null}}function gR(n,t=null,e=[],i=[],r=null,o=null,l=null){return new OY(n,t,e,i,r,o,l)}function zg(n){const t=lt(n);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>fR(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),OC(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ay(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ay(i)).join(",")),t.ft=e}return t.ft}function BC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!RY(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!jV(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!UV(n.startAt,t.startAt)&&UV(n.endAt,t.endAt)}function eD(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tD(n,t){return n.filters.filter(e=>e instanceof yn&&e.field.isEqual(t))}function QV(n,t,e){let i=QI,r=!0;for(const o of tD(n,t)){let l=QI,d=!0;switch(o.op){case"<":case"<=":l=EY(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,d=!1;break;case"!=":case"not-in":l=QI}VV({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const l=e.position[o];VV({value:i,inclusive:r},{value:l,inclusive:e.inclusive})<0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}function JV(n,t,e){let i=bp,r=!0;for(const o of tD(n,t)){let l=bp,d=!0;switch(o.op){case">=":case">":l=SY(o.value),d=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,d=!1;break;case"!=":case"not-in":l=bp}BV({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const l=e.position[o];BV({value:i,inclusive:r},{value:l,inclusive:e.inclusive})>0&&(i=l,r=e.inclusive);break}return{value:i,inclusive:r}}class Zd{constructor(t,e=null,i=[],r=[],o=null,l="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=f,this.dt=null,this._t=null}}function XV(n,t,e,i,r,o,l,d){return new Zd(n,t,e,i,r,o,l,d)}function Py(n){return new Zd(n)}function eB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nD(n){for(const t of n.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function _R(n){return null!==n.collectionGroup}function Gg(n){const t=lt(n);if(null===t.dt){t.dt=[];const e=nD(t),i=mR(t);if(null!==e&&null===i)e.isKeyField()||t.dt.push(new Ry(e)),t.dt.push(new Ry(Ui.keyField(),"asc"));else{let r=!1;for(const o of t.explicitOrderBy)t.dt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Ry(Ui.keyField(),o))}}}return t.dt}function Js(n){const t=lt(n);if(!t._t)if("F"===t.limitType)t._t=gR(t.path,t.collectionGroup,Gg(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of Gg(t))e.push(new Ry(o.field,"desc"===o.dir?"asc":"desc"));const i=t.endAt?new Cp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cp(t.startAt.position,t.startAt.inclusive):null;t._t=gR(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t._t}function yR(n,t){t.getFirstInequalityField(),nD(n);const e=n.filters.concat([t]);return new Zd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function iD(n,t,e){return new Zd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function HC(n,t){return BC(Js(n),Js(t))&&n.limitType===t.limitType}function tB(n){return`${zg(Js(n))}|lt:${n.limitType}`}function vR(n){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>ZV(i)).join(", ")}]`),OC(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ay(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ay(i)).join(",")),`Target(${e})`}(Js(n))}; limitType=${n.limitType})`}function UC(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):st.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of Gg(e))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,o,l){const d=HV(r,o,l);return r.inclusive?d<=0:d<0}(e.startAt,Gg(e),i)||e.endAt&&!function(r,o,l){const d=HV(r,o,l);return r.inclusive?d>=0:d>0}(e.endAt,Gg(e),i)));var e,i}function nB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iB(n){return(t,e)=>{let i=!1;for(const r of Gg(n)){const o=PY(r,t,e);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function PY(n,t,e){const i=n.field.isKeyField()?st.comparator(t.key,e.key):function(r,o,l){const d=o.data.field(r),f=l.data.field(r);return null!==d&&null!==f?wp(d,f):mt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}function rB(n,t){if(n.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:PC(t)?"-0":t}}function sB(n){return{integerValue:""+n}}function oB(n,t){return RV(t)?sB(t):rB(n,t)}class rD{constructor(){this._=void 0}}function NY(n,t,e){return n instanceof Ny?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(e,t):n instanceof jg?lB(n,t):n instanceof $g?cB(n,t):function(i,r){const o=aB(i,r),l=uB(o)+uB(i.gt);return dR(o)&&dR(i.gt)?sB(l):rB(i.yt,l)}(n,t)}function LY(n,t,e){return n instanceof jg?lB(n,t):n instanceof $g?cB(n,t):e}function aB(n,t){return n instanceof Ly?dR(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Ny extends rD{}class jg extends rD{constructor(t){super(),this.elements=t}}function lB(n,t){const e=dB(t);for(const i of n.elements)e.some(r=>gu(r,i))||e.push(i);return{arrayValue:{values:e}}}class $g extends rD{constructor(t){super(),this.elements=t}}function cB(n,t){let e=dB(t);for(const i of n.elements)e=e.filter(r=>!gu(r,i));return{arrayValue:{values:e}}}class Ly extends rD{constructor(t,e){super(),this.yt=t,this.gt=e}}function uB(n){return zi(n.integerValue||n.doubleValue)}function dB(n){return FC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zC{constructor(t,e){this.field=t,this.transform=e}}class VY{constructor(t,e){this.version=t,this.transformResults=e}}class Ai{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ai}static exists(t){return new Ai(void 0,t)}static updateTime(t){return new Ai(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sD(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class oD{}function hB(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new Vy(n.key,Ai.none()):new Fy(n.key,n.data,Ai.none());{const e=n.data,i=os.empty();let r=new ni(Ui.comparator);for(let o of t.fields)if(!r.has(o)){let l=e.field(o);null===l&&o.length>1&&(o=o.popLast(),l=e.field(o)),null===l?i.delete(o):i.set(o,l),r=r.add(o)}return new qd(n.key,i,new Co(r.toArray()),Ai.none())}}function BY(n,t,e){n instanceof Fy?function(i,r,o){const l=i.value.clone(),d=gB(i.fieldTransforms,r,o.transformResults);l.setAll(d),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):n instanceof qd?function(i,r,o){if(!sD(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=gB(i.fieldTransforms,r,o.transformResults),d=r.data;d.setAll(fB(i)),d.setAll(l),r.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function GC(n,t,e,i){return n instanceof Fy?function(r,o,l,d){if(!sD(r.precondition,o))return l;const f=r.value.clone(),y=mB(r.fieldTransforms,d,o);return f.setAll(y),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,t,e,i):n instanceof qd?function(r,o,l,d){if(!sD(r.precondition,o))return l;const f=mB(r.fieldTransforms,d,o),y=o.data;return y.setAll(fB(r)),y.setAll(f),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,t,e,i):(l=e,sD(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function HY(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=aB(i.transform,r||null);null!=o&&(null===e&&(e=os.empty()),e.set(i.field,o))}return e||null}function pB(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&ky(e,i,(r,o)=>function FY(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof jg&&i instanceof jg||e instanceof $g&&i instanceof $g?ky(e.elements,i.elements,gu):e instanceof Ly&&i instanceof Ly?gu(e.gt,i.gt):e instanceof Ny&&i instanceof Ny);var e,i}(r,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class Fy extends oD{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qd extends oD{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fB(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function gB(n,t,e){const i=new Map;St(n.length===e.length);for(let r=0;r<e.length;r++){const o=n[r],l=o.transform,d=t.data.field(o.field);i.set(o.field,LY(l,d,e[r]))}return i}function mB(n,t,e){const i=new Map;for(const r of n){const o=r.transform,l=e.data.field(r.field);i.set(r.field,NY(o,l,t))}return i}class Vy extends oD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bR extends oD{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UY{constructor(t){this.count=t}}var dr,Dn;function _B(n){switch(n){default:return mt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function yB(n){if(void 0===n)return Xi("GRPC error has no .code"),de.UNKNOWN;switch(n){case dr.OK:return de.OK;case dr.CANCELLED:return de.CANCELLED;case dr.UNKNOWN:return de.UNKNOWN;case dr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case dr.INTERNAL:return de.INTERNAL;case dr.UNAVAILABLE:return de.UNAVAILABLE;case dr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case dr.NOT_FOUND:return de.NOT_FOUND;case dr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case dr.ABORTED:return de.ABORTED;case dr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case dr.DATA_LOSS:return de.DATA_LOSS;default:return mt()}}(Dn=dr||(dr={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class Tp{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Vg(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return MV(this.inner)}size(){return this.innerSize}}const zY=new Gi(st.comparator);function To(){return zY}const vB=new Gi(st.comparator);function jC(...n){let t=vB;for(const e of n)t=t.insert(e.key,e);return t}function bB(n){let t=vB;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function mu(){return $C()}function wB(){return $C()}function $C(){return new Tp(n=>n.toString(),(n,t)=>n.isEqual(t))}const GY=new Gi(st.comparator),jY=new ni(st.comparator);function sn(...n){let t=jY;for(const e of n)t=t.add(e);return t}const $Y=new ni(en);function aD(){return $Y}class ZC{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,qC.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new ZC(Rt.min(),r,aD(),To(),sn())}}class qC{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new qC(i,e,sn(),sn(),sn())}}class lD{constructor(t,e,i,r){this.It=t,this.removedTargetIds=e,this.key=i,this.Tt=r}}class CB{constructor(t,e){this.targetId=t,this.Et=e}}class TB{constructor(t,e,i=Dr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class EB{constructor(){this.At=0,this.Rt=IB(),this.bt=Dr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=sn(),e=sn(),i=sn();return this.Rt.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new qC(this.bt,this.Pt,t,e,i)}xt(){this.vt=!1,this.Rt=IB()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ZY{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=To(),this.qt=SB(),this.Ut=new ni(en)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,e=>{const i=this.Wt(e);switch(t.state){case 0:this.zt(e)&&i.Dt(t.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(t.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(i.Ft(),i.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),i.Dt(t.resumeToken));break;default:mt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((i,r)=>{this.zt(r)&&e(r)})}Jt(t){const e=t.targetId,i=t.Et.count,r=this.Yt(e);if(r){const o=r.target;if(eD(o))if(0===i){const l=new st(o.path);this.Qt(e,l,gi.newNoDocument(l,Rt.min()))}else St(1===i);else this.Xt(e)!==i&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach((o,l)=>{const d=this.Yt(l);if(d){if(o.current&&eD(d.target)){const f=new st(d.target.path);null!==this.Lt.get(f)||this.te(l,f)||this.Qt(l,f,gi.newNoDocument(f,t))}o.St&&(e.set(l,o.Ct()),o.xt())}});let i=sn();this.qt.forEach((o,l)=>{let d=!0;l.forEachWhile(f=>{const y=this.Yt(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(o))}),this.Lt.forEach((o,l)=>l.setReadTime(t));const r=new ZC(t,e,this.Ut,this.Lt,i);return this.Lt=To(),this.qt=SB(),this.Ut=new ni(en),r}Gt(t,e){if(!this.zt(t))return;const i=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,i),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,i){if(!this.zt(t))return;const r=this.Wt(t);this.te(t,e)?r.Nt(e,1):r.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),i&&(this.Lt=this.Lt.insert(e,i))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new EB,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new ni(en),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||He("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new EB),this.$t.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function SB(){return new Gi(st.comparator)}function IB(){return new Gi(st.comparator)}const qY={asc:"ASCENDING",desc:"DESCENDING"},WY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KY={and:"AND",or:"OR"};class YY{constructor(t,e){this.databaseId=t,this.wt=e}}function By(n,t){return n.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DB(n,t){return n.wt?t.toBase64():t.toUint8Array()}function QY(n,t){return By(n,t.toTimestamp())}function er(n){return St(!!n),Rt.fromTimestamp(function(t){const e=vp(t);return new ki(e.seconds,e.nanos)}(n))}function wR(n,t){return(e=n,new In(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function xB(n){const t=In.fromString(n);return St(FB(t)),t}function WC(n,t){return wR(n.databaseId,t.path)}function _u(n,t){const e=xB(t);if(e.get(1)!==n.databaseId.projectId)throw new Le(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Le(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new st(AB(e))}function CR(n,t){return wR(n.databaseId,t)}function kB(n){const t=xB(n);return 4===t.length?In.emptyPath():AB(t)}function KC(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AB(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function MB(n,t,e){return{name:WC(n,t),fields:e.value.mapValue.fields}}function RB(n,t,e){const i=_u(n,t.name),r=er(t.updateTime),o=t.createTime?er(t.createTime):Rt.min(),l=new os({mapValue:{fields:t.fields}}),d=gi.newFoundDocument(i,r,o,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function YC(n,t){let e;if(t instanceof Fy)e={update:MB(n,t.key,t.value)};else if(t instanceof Vy)e={delete:WC(n,t.key)};else if(t instanceof qd)e={update:MB(n,t.key,t.data),updateMask:sQ(t.fieldMask)};else{if(!(t instanceof bR))return mt();e={verify:WC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const l=o.transform;if(l instanceof Ny)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof jg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $g)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ly)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw mt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:QY(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),e;var r}function TR(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Ai.updateTime(er(r.updateTime)):void 0!==r.exists?Ai.exists(r.exists):Ai.none():Ai.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(o,l){let d=null;"setToServerValue"in l?(St("REQUEST_TIME"===l.setToServerValue),d=new Ny):"appendMissingElements"in l?d=new jg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new $g(l.removeAllFromArray.values||[]):"increment"in l?d=new Ly(o,l.increment):mt();const f=Ui.fromServerFormat(l.fieldPath);return new zC(f,d)}(n,r)):[];var r;if(t.update){const r=_u(n,t.update.name),o=new os({mapValue:{fields:t.update.fields}});if(t.updateMask){const l=new Co((t.updateMask.fieldPaths||[]).map(y=>Ui.fromServerFormat(y)));return new qd(r,o,l,e,i)}return new Fy(r,o,e,i)}if(t.delete){const r=_u(n,t.delete);return new Vy(r,e)}if(t.verify){const r=_u(n,t.verify);return new bR(r,e)}return mt()}function OB(n,t){return{documents:[CR(n,t.path)]}}function ER(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=CR(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=CR(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0!==f.length)return LB(Zn.create(f,"and"))}(t.filters);r&&(e.structuredQuery.where=r);const o=function(f){if(0!==f.length)return f.map(y=>{return{field:Hy((w=y).field),direction:nQ(w.dir)};var w})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=(y=t.limit,n.wt||OC(y)?y:{value:y});var y,d,f;return null!==l&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function PB(n){let t=kB(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){St(1===i);const w=e.from[0];w.allDescendants?r=w.collectionId:t=t.child(w.collectionId)}let o=[];e.where&&(o=function(w){const E=NB(w);return E instanceof Zn&&pR(E)?E.getFilters():[E]}(e.where));let l=[];e.orderBy&&(l=e.orderBy.map(w=>{return new Ry(Uy((E=w).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(w){let E;return E="object"==typeof w?w.value:w,OC(E)?null:E}(e.limit));let f=null;var w;e.startAt&&(f=new Cp((w=e.startAt).values||[],!!w.before));let y=null;return e.endAt&&(y=function(w){return new Cp(w.values||[],!w.before)}(e.endAt)),XV(t,r,l,o,d,"F",f,y)}function NB(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Uy(t.unaryFilter.field);return yn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=Uy(t.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uy(t.unaryFilter.field);return yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uy(t.unaryFilter.field);return yn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(n):void 0!==n.fieldFilter?yn.create(Uy((t=n).fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Zn.create(t.compositeFilter.filters.map(e=>NB(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return mt()}}(t.compositeFilter.op))}(n):mt();var t}function nQ(n){return qY[n]}function iQ(n){return WY[n]}function rQ(n){return KY[n]}function Hy(n){return{fieldPath:n.canonicalString()}}function Uy(n){return Ui.fromServerFormat(n.fieldPath)}function LB(n){return n instanceof yn?function(t){if("=="===t.op){if(LV(t.value))return{unaryFilter:{field:Hy(t.field),op:"IS_NAN"}};if(NV(t.value))return{unaryFilter:{field:Hy(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(LV(t.value))return{unaryFilter:{field:Hy(t.field),op:"IS_NOT_NAN"}};if(NV(t.value))return{unaryFilter:{field:Hy(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hy(t.field),op:iQ(t.op),value:t.value}}}(n):n instanceof Zn?function(t){const e=t.getFilters().map(i=>LB(i));return 1===e.length?e[0]:{compositeFilter:{op:rQ(t.op),filters:e}}}(n):mt()}function sQ(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function FB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=VB(t)),t=oQ(n.get(e),t);return VB(t)}function oQ(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function VB(n){return n+"\x01\x01"}function yu(n){const t=n.length;if(St(t>=2),2===t)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const e=t-2,i=[];let r="";for(let o=0;o<t;){const l=n.indexOf("\x01",o);switch((l<0||l>e)&&mt(),n.charAt(l+1)){case"\x01":const d=n.substring(o,l);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(o,l),r+="\0";break;case"\x11":r+=n.substring(o,l+1);break;default:mt()}o=l+2}return new In(i)}const BB=["userId","batchId"];function cD(n,t){return[n,Xs(t)]}function HB(n,t,e){return[n,Xs(t),e]}const aQ={},lQ=["prefixPath","collectionGroup","readTime","documentId"],cQ=["prefixPath","collectionGroup","documentId"],uQ=["collectionGroup","readTime","prefixPath","documentId"],dQ=["canonicalId","targetId"],hQ=["targetId","path"],pQ=["path","targetId"],fQ=["collectionId","parent"],gQ=["indexId","uid"],mQ=["uid","sequenceNumber"],_Q=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yQ=["indexId","uid","orderedDocumentKey"],vQ=["userId","collectionPath","documentId"],bQ=["userId","collectionPath","largestBatchId"],wQ=["userId","collectionGroup","largestBatchId"],UB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CQ=[...UB,"documentOverlays"],zB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GB=zB,TQ=[...GB,"indexConfiguration","indexState","indexEntries"];class SR extends xV{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function Hr(n,t){const e=lt(n);return ac.M(e.se,t)}class IR{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&BY(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=GC(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=GC(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=wB();return this.mutations.forEach(r=>{const o=t.get(r.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=e.has(r.key)?null:d;const f=hB(l,d);null!==f&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Rt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),sn())}isEqual(t){return this.batchId===t.batchId&&ky(this.mutations,t.mutations,(e,i)=>pB(e,i))&&ky(this.baseMutations,t.baseMutations,(e,i)=>pB(e,i))}}class DR{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){St(t.mutations.length===i.length);let r=GY;const o=t.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new DR(t,e,i,r)}}class xR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ep{constructor(t,e,i,r,o=Rt.min(),l=Rt.min(),d=Dr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(t){return new Ep(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ep(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class jB{constructor(t){this.ie=t}}function $B(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:uD(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:WC(r=n.ie,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:By(r,o.version.toTimestamp()),createTime:By(r,o.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Zg(t.version)};else{if(!t.isUnknownDocument())return mt();i.unknownDocument={path:e.path.toArray(),version:Zg(t.version)}}var r,o;return i}function uD(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Zg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qg(n){const t=new ki(n.seconds,n.nanoseconds);return Rt.fromTimestamp(t)}function Wg(n,t){const e=(t.baseMutations||[]).map(o=>TR(n.ie,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const i=t.mutations.map(o=>TR(n.ie,o)),r=ki.fromMillis(t.localWriteTimeMs);return new IR(t.batchId,r,e,i)}function QC(n){const t=qg(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?qg(n.lastLimboFreeSnapshotVersion):Rt.min();let i;var r;return void 0!==n.query.documents?(St(1===(r=n.query).documents.length),i=Js(Py(kB(r.documents[0])))):i=Js(PB(n.query)),new Ep(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Dr.fromBase64String(n.resumeToken))}function ZB(n,t){const e=Zg(t.snapshotVersion),i=Zg(t.lastLimboFreeSnapshotVersion);let r;r=eD(t.target)?OB(n.ie,t.target):ER(n.ie,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zg(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kR(n){const t=PB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iD(t,t.limit,"L"):t}function AR(n,t){return new xR(t.largestBatchId,TR(n.ie,t.overlayMutation))}function qB(n,t){const e=t.path.lastSegment();return[n,Xs(t.path.popLast()),e]}function WB(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Zg(i.readTime),documentKey:Xs(i.documentKey.path),largestBatchId:i.largestBatchId}}class SQ{getBundleMetadata(t,e){return KB(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:qg(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return KB(t).put({bundleId:(i=e).id,createTime:Zg(er(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return YB(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:kR(r.bundledQuery),readTime:qg(r.readTime)};var r})}saveNamedQuery(t,e){return YB(t).put({name:(i=e).name,readTime:Zg(er(i.readTime)),bundledQuery:i.bundledQuery});var i}}function KB(n){return Hr(n,"bundles")}function YB(n){return Hr(n,"namedQueries")}class dD{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){return new dD(t,e.uid||"")}getOverlay(t,e){return JC(t).get(qB(this.userId,e)).next(i=>i?AR(this.yt,i):null)}getOverlays(t,e){const i=mu();return ce.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((o,l)=>{const d=new xR(e,l);r.push(this.oe(t,d))}),ce.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(l=>r.add(Xs(l.getCollectionPath())));const o=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(JC(t).Y("collectionPathOverlayIndex",d))}),ce.waitFor(o)}getOverlaysForCollection(t,e,i){const r=mu(),o=Xs(e),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return JC(t).W("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const y=AR(this.yt,f);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const o=mu();let l;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return JC(t).Z({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const E=AR(this.yt,y);o.size()<r||E.largestBatchId===l?(o.set(E.getKey(),E),l=E.largestBatchId):w.done()}).next(()=>o)}oe(t,e){return JC(t).put(function(i,r,o){const[l,d,f]=qB(r,o.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:YC(i.ie,o.mutation)}}(this.yt,this.userId,e))}}function JC(n){return Hr(n,"documentOverlays")}class Kg{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(zi(t.integerValue));else if("doubleValue"in t){const i=zi(t.doubleValue);isNaN(i)?this.he(e,13):(this.he(e,15),PC(i)?e.le(0):e.le(i))}else if("timestampValue"in t){const i=t.timestampValue;this.he(e,20),"string"==typeof i?e.fe(i):(e.fe(`${i.seconds||""}`),e.le(i.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(Bg(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.he(e,45),e.le(i.latitude||0),e.le(i.longitude||0)}else"mapValue"in t?FV(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):mt()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const i=t.fields||{};this.he(e,55);for(const r of Object.keys(i))this.de(r,e),this.ce(i[r],e)}ye(t,e){const i=t.values||[];this.he(e,50);for(const r of i)this.ce(r,e)}me(t,e){this.he(e,37),st.fromName(t).path.forEach(i=>{this.he(e,60),this.pe(i,e)})}he(t,e){t.le(e)}_e(t){t.le(2)}}function IQ(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function QB(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const o=IQ(255&e[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(t/8)}Kg.Ie=new Kg;class DQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ee(i.value),i=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.be(i.value),i=e.next();this.Pe()}ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const r=e.codePointAt(0);this.Ee(240|r>>>18),this.Ee(128|63&r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r)}}this.Ae()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const r=e.codePointAt(0);this.be(240|r>>>18),this.be(128|63&r>>>12),this.be(128|63&r>>>6),this.be(128|63&r)}}this.Pe()}Se(t){const e=this.De(t),i=QB(e);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}xe(t){const e=this.De(t),i=QB(e);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class xQ{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class kQ{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class XC{constructor(){this.$e=new DQ,this.Be=new xQ(this.$e),this.Le=new kQ(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Yg{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Yg(this.indexId,this.documentKey,this.arrayValue,i)}}function Sp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=JB(n.arrayValue,t.arrayValue),0!==e?e:(e=JB(n.directionalValue,t.directionalValue),0!==e?e:st.comparator(n.documentKey,t.documentKey)))}function JB(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class AQ{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const i=e;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(t){St(t.collectionGroup===this.collectionId);const e=sR(t);if(void 0!==e&&!this.We(e))return!1;const i=Lg(t);let r=0,o=0;for(;r<i.length&&this.We(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Qe){const l=i[r];if(!this.ze(this.Qe,l)||!this.He(this.Ke[o++],l))return!1;++r}for(;r<i.length;++r)if(o>=this.Ke.length||!this.He(this.Ke[o++],i[r]))return!1;return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function XB(n){var t,e;if(St(n instanceof yn||n instanceof Zn),n instanceof yn){if(n instanceof WV){const r=(null===(e=null===(t=n.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(o=>yn.create(n.field,"==",o)))||[];return Zn.create(r,"or")}return n}const i=n.filters.map(r=>XB(r));return Zn.create(i,n.op)}function MQ(n){if(0===n.getFilters().length)return[];const t=OR(XB(n));return St(eH(t)),MR(t)||RR(t)?[t]:t.getFilters()}function MR(n){return n instanceof yn}function RR(n){return n instanceof Zn&&pR(n)}function eH(n){return MR(n)||RR(n)||function(t){if(t instanceof Zn&&hR(t)){for(const e of t.getFilters())if(!MR(e)&&!RR(e))return!1;return!0}return!1}(n)}function OR(n){if(St(n instanceof yn||n instanceof Zn),n instanceof yn)return n;if(1===n.filters.length)return OR(n.filters[0]);const t=n.filters.map(i=>OR(i));let e=Zn.create(t,n.op);return e=hD(e),eH(e)?e:(St(e instanceof Zn),St(My(e)),St(e.filters.length>1),e.filters.reduce((i,r)=>PR(i,r)))}function PR(n,t){let e;return St(n instanceof yn||n instanceof Zn),St(t instanceof yn||t instanceof Zn),e=n instanceof yn?t instanceof yn?Zn.create([n,t],"and"):tH(n,t):t instanceof yn?tH(t,n):function(i,r){if(St(i.filters.length>0&&r.filters.length>0),My(i)&&My(r))return $V(i,r.getFilters());const o=hR(i)?i:r,l=hR(i)?r:i,d=o.filters.map(f=>PR(f,l));return Zn.create(d,"or")}(n,t),hD(e)}function tH(n,t){if(My(t))return $V(t,n.getFilters());{const e=t.filters.map(i=>PR(n,i));return Zn.create(e,"or")}}function hD(n){if(St(n instanceof yn||n instanceof Zn),n instanceof yn)return n;const t=n.getFilters();if(1===t.length)return hD(t[0]);if(GV(n))return n;const e=t.map(r=>hD(r)),i=[];return e.forEach(r=>{r instanceof yn?i.push(r):r instanceof Zn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Zn.create(i,n.op)}class RQ{constructor(){this.Je=new NR}addToCollectionParentIndex(t,e){return this.Je.add(e),ce.resolve()}getCollectionParents(t,e){return ce.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return ce.resolve()}deleteFieldIndex(t,e){return ce.resolve()}getDocumentsMatchingTarget(t,e){return ce.resolve(null)}getIndexType(t,e){return ce.resolve(0)}getFieldIndexes(t,e){return ce.resolve([])}getNextCollectionGroupToUpdate(t){return ce.resolve(null)}getMinOffset(t,e){return ce.resolve(da.min())}getMinOffsetFromCollectionGroup(t,e){return ce.resolve(da.min())}updateCollectionGroup(t,e,i){return ce.resolve()}updateIndexEntries(t,e){return ce.resolve()}}class NR{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ni(In.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ni(In.comparator)).toArray()}}const pD=new Uint8Array(0);class OQ{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new NR,this.Xe=new Tp(i=>zg(i),(i,r)=>BC(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ye.add(e)});const o={collectionId:i,parent:Xs(r)};return nH(t).put(o)}return ce.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[EV(e),""],!1,!0);return nH(t).W(r).next(o=>{for(const l of o){if(l.collectionId!==e)break;i.push(yu(l.parent))}return i})}addFieldIndex(t,e){const i=fD(t),r={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const o=i.add(r);if(e.indexState){const l=t0(t);return o.next(d=>{l.put(WB(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const i=fD(t),r=t0(t),o=e0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=e0(t);let r=!0;const o=new Map;return ce.forEach(this.Ze(e),l=>this.tn(t,l).next(d=>{r&&(r=!!d),o.set(l,d)})).next(()=>{if(r){let l=sn();const d=[];return ce.forEach(o,(f,y)=>{var w;He("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Ze=>`${Ze.fieldPath}:${Ze.kind}`).join(",")}`} to execute ${zg(e)}`);const E=function(Ze,et){const vt=sR(et);if(void 0===vt)return null;for(const Ct of tD(Ze,vt.fieldPath))switch(Ct.op){case"array-contains-any":return Ct.value.arrayValue.values||[];case"array-contains":return[Ct.value]}return null}(y,f),M=function(Ze,et){const vt=new Map;for(const Ct of Lg(et))for(const ln of tD(Ze,Ct.fieldPath))switch(ln.op){case"==":case"in":vt.set(Ct.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return vt.set(Ct.fieldPath.canonicalString(),ln.value),Array.from(vt.values())}return null}(y,f),N=function(Ze,et){const vt=[];let Ct=!0;for(const ln of Lg(et)){const yi=0===ln.kind?QV(Ze,ln.fieldPath,Ze.startAt):JV(Ze,ln.fieldPath,Ze.startAt);vt.push(yi.value),Ct&&(Ct=yi.inclusive)}return new Cp(vt,Ct)}(y,f),B=function(Ze,et){const vt=[];let Ct=!0;for(const ln of Lg(et)){const yi=0===ln.kind?JV(Ze,ln.fieldPath,Ze.endAt):QV(Ze,ln.fieldPath,Ze.endAt);vt.push(yi.value),Ct&&(Ct=yi.inclusive)}return new Cp(vt,Ct)}(y,f),j=this.en(f,y,N),Q=this.en(f,y,B),Ne=this.nn(f,y,M),$e=this.sn(f.indexId,E,j,N.inclusive,Q,B.inclusive,Ne);return ce.forEach($e,Ze=>i.J(Ze,e.limit).next(et=>{et.forEach(vt=>{const Ct=st.fromSegments(vt.documentKey);l.has(Ct)||(l=l.add(Ct),d.push(Ct))})}))}).next(()=>d)}return ce.resolve(null)})}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:MQ(Zn.create(t.filters,"and")).map(i=>gR(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Xe.set(t,e),e)}sn(t,e,i,r,o,l,d){const f=(null!=e?e.length:1)*Math.max(i.length,o.length),y=f/(null!=e?e.length:1),w=[];for(let E=0;E<f;++E){const M=e?this.rn(e[E/y]):pD,N=this.on(t,M,i[E%y],r),B=this.un(t,M,o[E%y],l),j=d.map(Q=>this.on(t,M,Q,!0));w.push(...this.createRange(N,B,j))}return w}on(t,e,i,r){const o=new Yg(t,st.empty(),e,i);return r?o:o.Ue()}un(t,e,i,r){const o=new Yg(t,st.empty(),e,i);return r?o.Ue():o}tn(t,e){const i=new AQ(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let l=null;for(const d of o)i.je(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(t,e){let i=2;const r=this.Ze(e);return ce.forEach(r,o=>this.tn(t,o).next(l=>{l?0!==i&&l.fields.length<function(d){let f=new ni(Ui.comparator),y=!1;for(const w of d.filters)for(const E of w.getFlattenedFilters())E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?y=!0:f=f.add(E.field));for(const w of d.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(y?1:0)}(o)&&(i=1):i=0})).next(()=>null!==e.limit&&r.length>1&&2===i?1:i)}cn(t,e){const i=new XC;for(const r of Lg(t)){const o=e.data.field(r.fieldPath);if(null==o)return null;const l=i.qe(r.kind);Kg.Ie.ue(o,l)}return i.Fe()}rn(t){const e=new XC;return Kg.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const i=new XC;return Kg.Ie.ue(Ug(this.databaseId,e),i.qe(function(r){const o=Lg(r);return 0===o.length?0:o[o.length-1].kind}(t))),i.Fe()}nn(t,e,i){if(null===i)return[];let r=[];r.push(new XC);let o=0;for(const l of Lg(t)){const d=i[o++];for(const f of r)if(this.hn(e,l.fieldPath)&&FC(d))r=this.ln(r,l,d);else{const y=f.qe(l.kind);Kg.Ie.ue(d,y)}}return this.fn(r)}en(t,e,i){return this.nn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Fe();return e}ln(t,e,i){const r=[...t],o=[];for(const l of i.arrayValue.values||[])for(const d of r){const f=new XC;f.seed(d.Fe()),Kg.Ie.ue(l,f.qe(e.kind)),o.push(f)}return o}hn(t,e){return!!t.filters.find(i=>i instanceof yn&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=fD(t),r=t0(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(o=>{const l=[];return ce.forEach(o,d=>r.get([d.indexId,this.uid]).next(f=>{l.push(function(y,w){const E=w?new MC(w.sequenceNumber,new da(qg(w.readTime),new st(yu(w.documentKey)),w.largestBatchId)):MC.empty(),M=y.fields.map(([N,B])=>new KI(Ui.fromServerFormat(N),B));return new WI(y.indexId,y.collectionGroup,M,E)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:en(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=fD(t),o=t0(t);return this.dn(t).next(l=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>ce.forEach(d,f=>o.put(WB(f.indexId,this.user,l,i)))))}updateIndexEntries(t,e){const i=new Map;return ce.forEach(e,(r,o)=>{const l=i.get(r.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ce.forEach(d,f=>this._n(t,r,f).next(y=>{const w=this.wn(o,f);return y.isEqual(w)?ce.resolve():this.mn(t,o,f,y,w)}))))})}gn(t,e,i,r){return e0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(i,e.key),documentKey:e.key.path.toArray()})}yn(t,e,i,r){return e0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(i,e.key),e.key.path.toArray()])}_n(t,e,i){const r=e0(t);let o=new ni(Sp);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,e)])},(l,d)=>{o=o.add(new Yg(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>o)}wn(t,e){let i=new ni(Sp);const r=this.cn(e,t);if(null==r)return i;const o=sR(e);if(null!=o){const l=t.data.field(o.fieldPath);if(FC(l))for(const d of l.arrayValue.values||[])i=i.add(new Yg(e.indexId,t.key,this.rn(d),r))}else i=i.add(new Yg(e.indexId,t.key,pD,r));return i}mn(t,e,i,r,o){He("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const l=[];return function(d,f,y,w,E){const M=d.getIterator(),N=f.getIterator();let B=Oy(M),j=Oy(N);for(;B||j;){let Q=!1,Ne=!1;if(B&&j){const $e=y(B,j);$e<0?Ne=!0:$e>0&&(Q=!0)}else null!=B?Ne=!0:Q=!0;Q?(w(j),j=Oy(N)):Ne?(E(B),B=Oy(M)):(B=Oy(M),j=Oy(N))}}(r,o,Sp,d=>{l.push(this.gn(t,e,i,d))},d=>{l.push(this.yn(t,e,i,d))}),ce.waitFor(l)}dn(t){let e=1;return t0(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((l,d)=>Sp(l,d)).filter((l,d,f)=>!d||0!==Sp(l,f[d-1]));const r=[];r.push(t);for(const l of i){const d=Sp(l,t),f=Sp(l,e);if(0===d)r[0]=t.Ue();else if(d>0&&f<0)r.push(l),r.push(l.Ue());else if(f>0)break}r.push(e);const o=[];for(let l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];o.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,pD,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,pD,[]]))}return o}pn(t,e){return Sp(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(iH)}getMinOffset(t,e){return ce.mapArray(this.Ze(e),i=>this.tn(t,i).next(r=>r||mt())).next(iH)}}function nH(n){return Hr(n,"collectionParents")}function e0(n){return Hr(n,"indexEntries")}function fD(n){return Hr(n,"indexConfiguration")}function t0(n){return Hr(n,"indexState")}function iH(n){St(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;oR(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new da(t.readTime,t.documentKey,e)}const rH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Eo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Eo(t,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sH(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],l=IDBKeyRange.only(e.batchId);let d=0;const f=i.Z({range:l},(w,E,M)=>(d++,M.delete()));o.push(f.next(()=>{St(1===d)}));const y=[];for(const w of e.mutations){const E=HB(t,w.key.path,e.batchId);o.push(r.delete(E)),y.push(w.key)}return ce.waitFor(o).next(()=>y)}function gD(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw mt();t=n.noDocument}return JSON.stringify(t).length}Eo.DEFAULT_COLLECTION_PERCENTILE=10,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Eo.DEFAULT=new Eo(41943040,Eo.DEFAULT_COLLECTION_PERCENTILE,Eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Eo.DISABLED=new Eo(-1,0,0);class mD{constructor(t,e,i,r){this.userId=t,this.yt=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static re(t,e,i,r){St(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new mD(o,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ip(t).Z({index:"userMutationsIndex",range:i},(r,o,l)=>{e=!1,l.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const o=zy(t),l=Ip(t);return l.add({}).next(d=>{St("number"==typeof d);const f=new IR(d,e,i,r),y=function(M,N,B){const j=B.baseMutations.map(Ne=>YC(M.ie,Ne)),Q=B.mutations.map(Ne=>YC(M.ie,Ne));return{userId:N,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:j,mutations:Q}}(this.yt,this.userId,f),w=[];let E=new ni((M,N)=>en(M.canonicalString(),N.canonicalString()));for(const M of r){const N=HB(this.userId,M.key.path,d);E=E.add(M.key.path.popLast()),w.push(l.put(y)),w.push(o.put(N,aQ))}return E.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.In[d]=f.keys()}),ce.waitFor(w).next(()=>f)})}lookupMutationBatch(t,e){return Ip(t).get(e).next(i=>i?(St(i.userId===this.userId),Wg(this.yt,i)):null)}Tn(t,e){return this.In[e]?ce.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Ip(t).Z({index:"userMutationsIndex",range:r},(l,d,f)=>{d.userId===this.userId&&(St(d.batchId>=i),o=Wg(this.yt,d)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ip(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,o,l)=>{i=o.batchId,l.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ip(t).W("userMutationsIndex",e).next(i=>i.map(r=>Wg(this.yt,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=cD(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return zy(t).Z({range:r},(l,d,f)=>{const[y,w,E]=l,M=yu(w);if(y===this.userId&&e.path.isEqual(M))return Ip(t).get(E).next(N=>{if(!N)throw mt();St(N.userId===this.userId),o.push(Wg(this.yt,N))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ni(en);const r=[];return e.forEach(o=>{const l=cD(this.userId,o.path),d=IDBKeyRange.lowerBound(l),f=zy(t).Z({range:d},(y,w,E)=>{const[M,N,B]=y,j=yu(N);M===this.userId&&o.path.isEqual(j)?i=i.add(B):E.done()});r.push(f)}),ce.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,o=cD(this.userId,i),l=IDBKeyRange.lowerBound(o);let d=new ni(en);return zy(t).Z({range:l},(f,y,w)=>{const[E,M,N]=f,B=yu(M);E===this.userId&&i.isPrefixOf(B)?B.length===r&&(d=d.add(N)):w.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(o=>{r.push(Ip(t).get(o).next(l=>{if(null===l)throw mt();St(l.userId===this.userId),i.push(Wg(this.yt,l))}))}),ce.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return sH(t.se,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),ce.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ce.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return zy(t).Z({range:i},(o,l,d)=>{if(o[0]===this.userId){const f=yu(o[1]);r.push(f)}else d.done()}).next(()=>{St(0===r.length)})})}containsKey(t,e){return oH(t,this.userId,e)}Rn(t){return aH(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oH(n,t,e){const i=cD(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return zy(n).Z({range:o,X:!0},(d,f,y)=>{const[w,E,M]=d;w===t&&E===r&&(l=!0),y.done()}).next(()=>l)}function Ip(n){return Hr(n,"mutations")}function zy(n){return Hr(n,"documentMutations")}function aH(n){return Hr(n,"mutationQueues")}class Qg{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new Qg(0)}static vn(){return new Qg(-1)}}class PQ{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new Qg(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Rt.fromTimestamp(new ki(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Gy(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(St(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const o=[];return Gy(t).Z((l,d)=>{const f=QC(d);f.sequenceNumber<=e&&null===i.get(f.targetId)&&(r++,o.push(this.removeTargetData(t,f)))}).next(()=>ce.waitFor(o)).next(()=>r)}forEachTarget(t,e){return Gy(t).Z((i,r)=>{const o=QC(r);e(o)})}Vn(t){return lH(t).get("targetGlobalKey").next(e=>(St(null!==e),e))}Sn(t,e){return lH(t).put("targetGlobalKey",e)}Dn(t,e){return Gy(t).put(ZB(this.yt,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=zg(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Gy(t).Z({range:r,index:"queryTargetsIndex"},(l,d,f)=>{const y=QC(d);BC(e,y.target)&&(o=y,f.done())}).next(()=>o)}addMatchingKeys(t,e,i){const r=[],o=Dp(t);return e.forEach(l=>{const d=Xs(l.path);r.push(o.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,l))}),ce.waitFor(r)}removeMatchingKeys(t,e,i){const r=Dp(t);return ce.forEach(e,o=>{const l=Xs(o.path);return ce.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){const i=Dp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dp(t);let o=sn();return r.Z({range:i,X:!0},(l,d,f)=>{const y=yu(l[1]),w=new st(y);o=o.add(w)}).next(()=>o)}containsKey(t,e){const i=Xs(e.path),r=IDBKeyRange.bound([i],[EV(i)],!1,!0);let o=0;return Dp(t).Z({index:"documentTargetsIndex",X:!0,range:r},([l,d],f,y)=>{0!==l&&(o++,y.done())}).next(()=>o>0)}ne(t,e){return Gy(t).get(e).next(i=>i?QC(i):null)}}function Gy(n){return Hr(n,"targets")}function lH(n){return Hr(n,"targetGlobal")}function Dp(n){return Hr(n,"targetDocuments")}function cH([n,t],[e,i]){const r=en(n,e);return 0===r?en(t,i):r}class NQ{constructor(t){this.xn=t,this.buffer=new ni(cH),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();cH(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class LQ{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;He("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,we.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){_p(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield mp(i)}yield e.Fn(3e5)}))}}class FQ{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return ce.resolve(ha.at);const i=new NQ(e);return this.$n.forEachTarget(t,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(rH)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rH):this.qn(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let i,r,o,l,d,f,y;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,l=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(o=E,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(y=Date.now(),iR()<=Xo.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${o} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:E})))}}class VQ{constructor(t,e){this.db=t,this.garbageCollector=new FQ(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Un(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return _D(t,i)}removeReference(t,e,i){return _D(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return _D(t,e)}Gn(t,e){return function(i,r){let o=!1;return aH(i).tt(l=>oH(i,l,r).next(d=>(d&&(o=!0),ce.resolve(!d)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Kn(t,(l,d)=>{if(d<=e){const f=this.Gn(t,l).next(y=>{if(!y)return o++,i.getEntry(t,l).next(()=>(i.removeEntry(l,Rt.min()),Dp(t).delete([0,Xs(l.path)])))});r.push(f)}}).next(()=>ce.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return _D(t,e)}Kn(t,e){const i=Dp(t);let r,o=ha.at;return i.Z({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:y})=>{0===l?(o!==ha.at&&e(new st(yu(r)),o),o=y,r=f):o=ha.at}).next(()=>{o!==ha.at&&e(new st(yu(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function _D(n,t){return Dp(n).put((i=n.currentSequenceNumber,{targetId:0,path:Xs(t.path),sequenceNumber:i}));var i}class uH{constructor(){this.changes=new Tp(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gi.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?ce.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class BQ{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Jg(t).put(i)}removeEntry(t,e,i){return Jg(t).delete(function(r,o){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],uD(o),l[l.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=gi.newInvalidDocument(e);return Jg(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(n0(e))},(r,o)=>{i=this.jn(e,o)}).next(()=>i)}Wn(t,e){let i={size:0,document:gi.newInvalidDocument(e)};return Jg(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(n0(e))},(r,o)=>{i={document:this.jn(e,o),size:gD(o)}}).next(()=>i)}getEntries(t,e){let i=To();return this.zn(t,e,(r,o)=>{const l=this.jn(r,o);i=i.insert(r,l)}).next(()=>i)}Hn(t,e){let i=To(),r=new Gi(st.comparator);return this.zn(t,e,(o,l)=>{const d=this.jn(o,l);i=i.insert(o,d),r=r.insert(o,gD(l))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return ce.resolve();let r=new ni(fH);e.forEach(f=>r=r.add(f));const o=IDBKeyRange.bound(n0(r.first()),n0(r.last())),l=r.getIterator();let d=l.getNext();return Jg(t).Z({index:"documentKeyIndex",range:o},(f,y,w)=>{const E=st.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&fH(d,E)<0;)i(d,null),d=l.getNext();d&&d.isEqual(E)&&(i(d,y),d=l.hasNext()?l.getNext():null),d?w.j(n0(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(t,e,i,r){const o=e.path,l=[o.popLast().toArray(),o.lastSegment(),uD(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jg(t).W(IDBKeyRange.bound(l,d,!0)).next(f=>{let y=To();for(const w of f){const E=this.jn(st.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);E.isFoundDocument()&&(UC(e,E)||r.has(E.key))&&(y=y.insert(E.key,E))}return y})}getAllFromCollectionGroup(t,e,i,r){let o=To();const l=pH(e,i),d=pH(e,da.max());return Jg(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,y,w)=>{const E=this.jn(st.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(E.key,E),o.size===r&&w.done()}).next(()=>o)}newChangeBuffer(t){return new HQ(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return hH(t).get("remoteDocumentGlobalKey").next(e=>(St(!!e),e))}Qn(t,e){return hH(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function EQ(n,t){let e;if(t.document)e=RB(n.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=st.fromSegments(t.noDocument.path),r=qg(t.noDocument.readTime);e=gi.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return mt();{const i=st.fromSegments(t.unknownDocument.path),r=qg(t.unknownDocument.version);e=gi.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new ki(i[0],i[1]);return Rt.fromTimestamp(r)}(t.readTime)),e}(this.yt,e);if(!i.isNoDocument()||!i.version.isEqual(Rt.min()))return i}return gi.newInvalidDocument(t)}}function dH(n){return new BQ(n)}class HQ extends uH{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Tp(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new ni((o,l)=>en(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const d=this.Xn.get(o);if(e.push(this.Yn.removeEntry(t,o,d.readTime)),l.isValidDocument()){const f=$B(this.Yn.yt,l);r=r.add(o.path.popLast());const y=gD(f);i+=y-d.size,e.push(this.Yn.addEntry(t,o,f))}else if(i-=d.size,this.trackRemovals){const f=$B(this.Yn.yt,l.convertToNoDocument(Rt.min()));e.push(this.Yn.addEntry(t,o,f))}}),r.forEach(o=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Yn.updateMetadata(t,i)),ce.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((o,l)=>{this.Xn.set(o,{size:l,readTime:i.get(o).readTime})}),i))}}function hH(n){return Hr(n,"remoteDocumentGlobal")}function Jg(n){return Hr(n,"remoteDocumentsV14")}function n0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pH(n,t){const e=t.documentKey.path.toArray();return[n,uD(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function fH(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=en(e[o],i[o]),r)return r;return r=en(e.length,i.length),r||(r=en(e[e.length-2],i[i.length-2]),r||en(e[e.length-1],i[i.length-1]))}class UQ{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class gH{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(null!==i&&GC(i.mutation,r,Co.empty(),ki.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,sn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=sn()){const r=mu();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let l=jC();return o.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,e){const i=mu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,sn()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((l,d)=>{e.set(l,d)})})}computeViews(t,e,i,r){let o=To();const l=$C(),d=$C();return e.forEach((f,y)=>{const w=i.get(y.key);r.has(y.key)&&(void 0===w||w.mutation instanceof qd)?o=o.insert(y.key,y):void 0!==w?(l.set(y.key,w.mutation.getFieldMask()),GC(w.mutation,y,w.mutation.getFieldMask(),ki.now())):l.set(y.key,Co.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((y,w)=>l.set(y,w)),e.forEach((y,w)=>{var E;return d.set(y,new UQ(w,null!==(E=l.get(y))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=$C();let r=new Gi((l,d)=>l-d),o=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(l=>{for(const d of l)d.keys().forEach(f=>{const y=e.get(f);if(null===y)return;let w=i.get(f)||Co.empty();w=d.applyToLocalView(y,w),i.set(f,w);const E=(r.get(d.batchId)||sn()).add(f);r=r.insert(d.batchId,E)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,E=wB();w.forEach(M=>{if(!o.has(M)){const N=hB(e.get(M),i.get(M));null!==N&&E.set(M,N),o=o.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(t,y,E))}return ce.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return st.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):_R(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):ce.resolve(mu());let d=-1,f=o;return l.next(y=>ce.forEach(y,(w,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(w)?ce.resolve():this.remoteDocumentCache.getEntry(t,w).next(M=>{f=f.insert(w,M)}))).next(()=>this.populateOverlays(t,y,o)).next(()=>this.computeViews(t,f,y,sn())).next(w=>({batchId:d,changes:bB(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new st(e)).next(i=>{let r=jC();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let o=jC();return this.indexManager.getCollectionParents(t,r).next(l=>ce.forEach(l,d=>{const f=(y=e,w=d.child(r),new Zd(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(t,f,i).next(y=>{y.forEach((w,E)=>{o=o.insert(w,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,r))).next(o=>{r.forEach((d,f)=>{const y=f.getKey();null===o.get(y)&&(o=o.insert(y,gi.newInvalidDocument(y)))});let l=jC();return o.forEach((d,f)=>{const y=r.get(d);void 0!==y&&GC(y.mutation,f,Co.empty(),ki.now()),UC(e,f)&&(l=l.insert(d,f))}),l})}}class zQ{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return ce.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:er(i.createTime)}),ce.resolve()}getNamedQuery(t,e){return ce.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:kR(i.bundledQuery),readTime:er(i.readTime)}),ce.resolve();var i}}class GQ{constructor(){this.overlays=new Gi(st.comparator),this.es=new Map}getOverlay(t,e){return ce.resolve(this.overlays.get(e))}getOverlays(t,e){const i=mu();return ce.forEach(e,r=>this.getOverlay(t,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.oe(t,e,o)}),ce.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.es.delete(i)),ce.resolve()}getOverlaysForCollection(t,e,i){const r=mu(),o=e.length+1,l=new st(e.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ce.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new Gi((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let w=o.get(y.largestBatchId);null===w&&(w=mu(),o=o.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=mu(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=r)););return ce.resolve(d)}oe(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new xR(e,i));let o=this.es.get(e);void 0===o&&(o=sn(),this.es.set(e,o)),this.es.set(e,o.add(i.key))}}class LR{constructor(){this.ns=new ni(Ur.ss),this.rs=new ni(Ur.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Ur(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Ur(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new st(new In([])),i=new Ur(e,t),r=new Ur(e,t+1),o=[];return this.rs.forEachInRange([i,r],l=>{this.cs(l),o.push(l.key)}),o}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new st(new In([])),i=new Ur(e,t),r=new Ur(e,t+1);let o=sn();return this.rs.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(t){const e=new Ur(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Ur{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return st.comparator(t.key,e.key)||en(t._s,e._s)}static os(t,e){return en(t._s,e._s)||st.comparator(t.key,e.key)}}class jQ{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new ni(Ur.ss)}checkEmpty(t){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const o=this.ws;this.ws++;const l=new IR(o,e,i,r);this.mutationQueue.push(l);for(const d of r)this.gs=this.gs.add(new Ur(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(t,e){return ce.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),o=r<0?0:r;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Ur(e,0),r=new Ur(e,Number.POSITIVE_INFINITY),o=[];return this.gs.forEachInRange([i,r],l=>{const d=this.ys(l._s);o.push(d)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ni(en);return e.forEach(r=>{const o=new Ur(r,0),l=new Ur(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([o,l],d=>{i=i.add(d._s)})}),ce.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;st.isDocumentKey(o)||(o=o.child(""));const l=new Ur(new st(o),0);let d=new ni(en);return this.gs.forEachWhile(f=>{const y=f.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(f._s)),!0)},l),ce.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){St(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return ce.forEach(e.mutations,r=>{const o=new Ur(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Ur(e,0),r=this.gs.firstAfterOrEqual(i);return ce.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return ce.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class $Q{constructor(t){this.Es=t,this.docs=new Gi(st.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,l=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return ce.resolve(i?i.document.mutableCopy():gi.newInvalidDocument(e))}getEntries(t,e){let i=To();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():gi.newInvalidDocument(r))}),ce.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=To();const l=e.path,d=new st(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:y,value:{document:w}}=f.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||oR(IV(w),i)<=0||(r.has(w.key)||UC(e,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(t,e,i,r){mt()}As(t,e){return ce.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new ZQ(this)}getSize(t){return ce.resolve(this.size)}}class ZQ extends uH{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),ce.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class qQ{constructor(t){this.persistence=t,this.Rs=new Tp(e=>zg(e),BC),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new LR,this.targetCount=0,this.vs=Qg.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),ce.resolve()}getLastRemoteSnapshotVersion(t){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ce.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),ce.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new Qg(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,ce.resolve()}updateTargetData(t,e){return this.Dn(e),ce.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,ce.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(l),o.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),ce.waitFor(o).next(()=>r)}getTargetCount(t){return ce.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return ce.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),ce.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(l=>{o.push(r.markPotentiallyOrphaned(t,l))}),ce.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),ce.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return ce.resolve(i)}containsKey(t,e){return ce.resolve(this.Ps.containsKey(e))}}class mH{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new ha(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new qQ(this),this.indexManager=new RQ,this.remoteDocumentCache=new $Q(i=>this.referenceDelegate.xs(i)),this.yt=new jB(e),this.Ns=new zQ(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new GQ,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new jQ(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){He("MemoryPersistence","Starting transaction:",t);const r=new WQ(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(o=>this.referenceDelegate.Os(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ms(t,e){return ce.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class WQ extends xV{constructor(t){super(),this.currentSequenceNumber=t}}class yD{constructor(t){this.persistence=t,this.Fs=new LR,this.$s=null}static Bs(t){return new yD(t)}get Ls(){if(this.$s)return this.$s;throw mt()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),ce.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),ce.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Ls.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ls,i=>{const r=st.fromPath(i);return this.qs(t,r).next(o=>{o||e.removeEntry(r,Rt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.qs(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}qs(t,e){return ce.or([()=>ce.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class KQ{constructor(t){this.yt=t}$(t,e,i,r){const o=new YI("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BB,{unique:!0}),d.createObjectStore("documentMutations"),_H(t),function(d){d.createObjectStore("remoteDocuments")}(t));let l=ce.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),_H(t)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(o))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,f){return f.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BB,{unique:!0});const w=f.store("mutations"),E=y.map(M=>w.put(M));return ce.waitFor(E)})}(t,o))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(l=l.next(()=>this.Us(o))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(o)))),i<7&&r>=7&&(l=l.next(()=>this.Gs(o))),i<8&&r>=8&&(l=l.next(()=>this.Qs(t,o))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(l=l.next(()=>this.js(o))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:vQ});f.createIndex("collectionPathOverlayIndex",bQ,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",wQ,{unique:!1})}(t)})),i<13&&r>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:lQ});f.createIndex("documentKeyIndex",cQ),f.createIndex("collectionGroupIndex",uQ)}(t)).next(()=>this.Ws(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.zs(t,o))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:gQ}).createIndex("sequenceNumberIndex",mQ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:_Q}).createIndex("documentKeyIndex",yQ,{unique:!1})}(t))),l}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=gD(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>ce.forEach(r,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",l).next(d=>ce.forEach(d,f=>{St(f.userId===o.userId);const y=Wg(this.yt,f);return sH(t,o.userId,y).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.Z((l,d)=>{const f=new In(l),y=[0,Xs(f)];o.push(e.get(y).next(w=>w?ce.resolve():e.put({targetId:0,path:Xs(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ce.waitFor(o))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:fQ});const i=e.store("collectionParents"),r=new NR,o=l=>{if(r.add(l)){const d=l.lastSegment(),f=l.popLast();return i.put({collectionId:d,parent:Xs(f)})}};return e.store("remoteDocuments").Z({X:!0},(l,d)=>{const f=new In(l);return o(f.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([l,d,f],y)=>{const w=yu(d);return o(w.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const o=QC(r),l=ZB(this.yt,o);return e.put(l)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((o,l)=>{const d=e.store("remoteDocumentsV14"),f=(y=l,y.document?new st(In.fromString(y.document.name).popFirst(5)):y.noDocument?st.fromSegments(y.noDocument.path):y.unknownDocument?st.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(w))}).next(()=>ce.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=dH(this.yt),o=new mH(yD.Bs,this.yt.ie);return i.W().next(l=>{const d=new Map;return l.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:sn();Wg(this.yt,f).keys().forEach(E=>w=w.add(E)),d.set(f.userId,w)}),ce.forEach(d,(f,y)=>{const w=new Br(y),E=dD.re(this.yt,w),M=o.getIndexManager(w),N=mD.re(w,this.yt,M,o.referenceDelegate);return new gH(r,N,E,M).recalculateAndSaveOverlaysForDocumentKeys(new SR(e,ha.at),f).next()})})}}function _H(n){n.createObjectStore("targetDocuments",{keyPath:hQ}).createIndex("documentTargetsIndex",pQ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dQ,{unique:!0}),n.createObjectStore("targetGlobal")}const FR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VR{constructor(t,e,i,r,o,l,d,f,y,w,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=o,this.window=l,this.document=d,this.Js=y,this.Ys=w,this.Xs=E,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!VR.C())throw new Le(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VQ(this,r),this.ii=e+"main",this.yt=new jB(f),this.ri=new ac(this.ii,this.Xs,new KQ(this.yt)),this.Cs=new PQ(this.referenceDelegate,this.yt),this.remoteDocumentCache=dH(this.yt),this.Ns=new SQ,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&Xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(de.FAILED_PRECONDITION,FR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new ha(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,we.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,we.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,we.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>vD(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(_p(t))return He("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return r0(t).get("owner").next(e=>ce.resolve(this.mi(e)))}gi(t){return vD(t).delete(this.clientId)}yi(){var t=this;return(0,we.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Hr(i,"clientMetadata");return r.W().next(o=>{const l=t.Ii(o,18e5),d=o.filter(f=>-1===l.indexOf(f));return ce.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?ce.resolve(!0):r0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Le(de.FAILED_PRECONDITION,FR);return!1}}return!(!this.networkEnabled||!this.inForeground)||vD(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(e=>(this.isPrimary!==e&&He("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,we.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new SR(e,ha.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>vD(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return mD.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new OQ(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return dD.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){He("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",o=15===(l=this.Xs)?TQ:14===l?GB:13===l?zB:12===l?CQ:11===l?UB:void mt();var l;let d;return this.ri.runTransaction(t,r,o,f=>(d=new SR(f,this.Ss?this.Ss.next():ha.at),"readwrite-primary"===e?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw Xi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Le(de.FAILED_PRECONDITION,DV);return i(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Vi(t){return r0(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Le(de.FAILED_PRECONDITION,FR)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return r0(t).put("owner",e)}static C(){return ac.C()}_i(t){const e=r0(t);return e.get("owner").next(i=>this.mi(i)?(He("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ce.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Xi(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return He("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Xi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Xi("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function r0(n){return Hr(n,"owner")}function vD(n){return Hr(n,"clientMetadata")}function BR(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class HR{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=sn(),r=sn();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new HR(t,e.fromCache,i,r)}}class yH{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(o=>o||this.Oi(t,e,r,i)).next(o=>o||this.Mi(t,e))}ki(t,e){if(eB(e))return ce.resolve(null);let i=Js(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=iD(e,null,"F"),i=Js(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const l=sn(...o);return this.Ni.getDocuments(t,l).next(d=>this.indexManager.getMinOffset(t,i).next(f=>{const y=this.Fi(e,d);return this.$i(e,y,l,f.readTime)?this.ki(t,iD(e,null,"F")):this.Bi(t,y,e,f)}))})))}Oi(t,e,i,r){return eB(e)||r.isEqual(Rt.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(o=>{const l=this.Fi(e,o);return this.$i(e,l,i,r)?this.Mi(t,e):(iR()<=Xo.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vR(e)),this.Bi(t,l,e,SV(r,-1)))})}Fi(t,e){let i=new ni(iB(t));return e.forEach((r,o)=>{UC(t,o)&&(i=i.add(o))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Mi(t,e){return iR()<=Xo.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",vR(e)),this.Ni.getDocumentsMatchingQuery(t,e,da.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(l=>{o=o.insert(l.key,l)}),o))}}class YQ{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.yt=r,this.qi=new Gi(en),this.Ui=new Tp(o=>zg(o),BC),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new gH(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qi))}}function vH(n,t,e,i){return new YQ(n,t,e,i)}function bH(n,t){return UR.apply(this,arguments)}function UR(){return UR=(0,we.Z)(function*(n,t){const e=lt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],d=[];let f=sn();for(const y of r){l.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of o){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return e.localDocuments.getDocuments(i,f).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:d}))})})}),UR.apply(this,arguments)}function QQ(n,t){const e=lt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,f,y){const w=f.batch,E=w.keys();let M=ce.resolve();return E.forEach(N=>{M=M.next(()=>y.getEntry(d,N)).next(B=>{const j=f.docVersions.get(N);St(null!==j),B.version.compareTo(j)<0&&(w.applyToRemoteDocument(B,f),B.isValidDocument()&&(B.setReadTime(f.commitVersion),y.addEntry(B)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(d,w))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=sn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function wH(n){const t=lt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function JQ(n,t){const e=lt(n),i=t.snapshotVersion;let r=e.qi;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.qi;const d=[];t.targetChanges.forEach((w,E)=>{const M=r.get(E);if(!M)return;d.push(e.Cs.removeMatchingKeys(o,w.removedDocuments,E).next(()=>e.Cs.addMatchingKeys(o,w.addedDocuments,E)));let N=M.withSequenceNumber(o.currentSequenceNumber);var B,j,Q;t.targetMismatches.has(E)?N=N.withResumeToken(Dr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,i)),r=r.insert(E,N),j=N,Q=w,(0===(B=M).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(o,N))});let f=To(),y=sn();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(o,w))}),d.push(CH(o,l,t.documentUpdates).next(w=>{f=w.Wi,y=w.zi})),!i.isEqual(Rt.min())){const w=e.Cs.getLastRemoteSnapshotVersion(o).next(E=>e.Cs.setTargetsMetadata(o,o.currentSequenceNumber,i));d.push(w)}return ce.waitFor(d).next(()=>l.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,f,y)).next(()=>f)}).then(o=>(e.qi=r,o))}function CH(n,t,e){let i=sn(),r=sn();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let l=To();return e.forEach((d,f)=>{const y=o.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Rt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Wi:l,zi:r}})}function XQ(n,t){const e=lt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jy(n,t){const e=lt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(o=>o?(r=o,ce.resolve(r)):e.Cs.allocateTargetId(i).next(l=>(r=new Ep(t,l,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.qi.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.qi=e.qi.insert(i.targetId,i),e.Ui.set(t,i.targetId)),i})}function $y(n,t,e){return zR.apply(this,arguments)}function zR(){return zR=(0,we.Z)(function*(n,t,e){const i=lt(n),r=i.qi.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!_p(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.qi=i.qi.remove(t),i.Ui.delete(r.target)}),zR.apply(this,arguments)}function bD(n,t,e){const i=lt(n);let r=Rt.min(),o=sn();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,f,y){const w=lt(d),E=w.Ui.get(y);return void 0!==E?ce.resolve(w.qi.get(E)):w.Cs.getTargetData(f,y)}(i,l,Js(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(l,d.targetId).next(f=>{o=f})}).next(()=>i.Li.getDocumentsMatchingQuery(l,t,e?r:Rt.min(),e?o:sn())).next(d=>(SH(i,nB(t),d),{documents:d,Hi:o})))}function TH(n,t){const e=lt(n),i=lt(e.Cs),r=e.qi.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i.ne(o,t).next(l=>l?l.target:null))}function EH(n,t){const e=lt(n),i=e.Ki.get(t)||Rt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,SV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(SH(e,t,r),r))}function SH(n,t,e){let i=n.Ki.get(t)||Rt.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ki.set(t,i)}function GR(){return GR=(0,we.Z)(function*(n,t,e,i){const r=lt(n);let o=sn(),l=To();for(const y of e){const w=t.Ji(y.metadata.name);y.document&&(o=o.add(w));const E=t.Yi(y);E.setReadTime(t.Xi(y.metadata.readTime)),l=l.insert(w,E)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),f=yield jy(r,(y=i,Js(Py(In.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>CH(y,d,l).next(w=>(d.apply(y),w)).next(w=>r.Cs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>r.Cs.addMatchingKeys(y,o,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,w.Wi,w.zi)).next(()=>w.Wi)))}),GR.apply(this,arguments)}function t8(n,t){return jR.apply(this,arguments)}function jR(){return jR=(0,we.Z)(function*(n,t,e=sn()){const i=yield jy(n,Js(kR(t.bundledQuery))),r=lt(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const l=er(t.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ns.saveNamedQuery(o,t);const d=i.withResumeToken(Dr.EMPTY_BYTE_STRING,l);return r.qi=r.qi.insert(d.targetId,d),r.Cs.updateTargetData(o,d).next(()=>r.Cs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Cs.addMatchingKeys(o,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(o,t))})}),jR.apply(this,arguments)}function IH(n,t){return`firestore_clients_${n}_${t}`}function DH(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function $R(n,t){return`firestore_targets_${n}_${t}`}class wD{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let o,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Le(r.error.code,r.error.message))),l?new wD(t,e,r.state,o):(Xi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class s0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Le(i.error.code,i.error.message))),o?new s0(t,i.state,r):(Xi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class CD{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=aD();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=RV(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return r?new CD(t,o):(Xi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class ZR{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ZR(e.clientId,e.onlineState):(Xi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class qR{constructor(){this.activeTargetIds=aD()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class WR{constructor(t,e,i,r,o){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gi(en),this.started=!1,this.cr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ar=IH(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new qR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,we.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const o=t.getItem(IH(t.persistenceKey,r));if(o){const l=CD.Zi(r,o);l&&(t.ur=t.ur.insert(l.clientId,l))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem($R(this.persistenceKey,t));if(i){const r=s0.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($R(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return He("SharedClientState","READ",t,e),e}setItem(t,e){He("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){He("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(He("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(o){let l=ha.at;if(null!=o)try{const d=JSON.parse(o);St("number"==typeof d),l=d}catch(d){Xi("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==ha.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Or(i.newValue);yield Promise.all(r.map(o=>e.syncEngine.Mr(o)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new wD(this.currentUser,t,e,i),o=DH(this.persistenceKey,this.currentUser,t);this.setItem(o,r.tr())}Er(t){const e=DH(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=$R(this.persistenceKey,t),o=new s0(t,e,i);this.setItem(r,o.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return CD.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return wD.Zi(new Br(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return s0.Zi(r,e)}yr(t){return ZR.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,we.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);He("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),o=this.Ir(i),l=[],d=[];return o.forEach(f=>{r.has(f)||l.push(f)}),r.forEach(f=>{o.has(f)||d.push(f)}),this.syncEngine.Br(l,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=aD();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class xH{constructor(){this.Lr=new qR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new qR,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class n8{Ur(t){}shutdown(){}}class kH{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const i8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r8{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class s8 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,r,o){const l=this.ho(t,e);He("RestConnection","Sending: ",l,i);const d={};return this.lo(d,r,o),this.fo(t,l,d,i).then(f=>(He("RestConnection","Received: ",f),f),f=>{throw Ng("RestConnection",`${t} failed with error: `,f,"url: ",l,"request:",i),f})}_o(t,e,i,r,o,l){return this.ao(t,e,i,r,o)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+xy,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}ho(t,e){return`${this.oo}/v1/${e}:${i8[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((o,l)=>{const d=new rY;d.setWithCredentials(!0),d.listenOnce(tY.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case nR.NO_ERROR:const y=d.getResponseJson();He("Connection","XHR received:",JSON.stringify(y)),o(y);break;case nR.TIMEOUT:He("Connection",'RPC "'+t+'" timed out'),l(new Le(de.DEADLINE_EXCEEDED,"Request time out"));break;case nR.HTTP_ERROR:const w=d.getStatus();if(He("Connection",'RPC "'+t+'" failed with status:',w,"response text:",d.getResponseText()),w>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const M=E?.error;if(M&&M.status&&M.message){const N=function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(j)>=0?j:de.UNKNOWN}(M.status);l(new Le(N,M.message))}else l(new Le(de.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Le(de.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{He("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(r);d.send(e,"POST",f,i,15)})}wo(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=X5(),l=eY(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new iY({})),this.lo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const f=r.join("");He("Connection","Creating WebChannel: "+f,d);const y=o.createWebChannel(f,d);let w=!1,E=!1;const M=new r8({Hr:B=>{E?He("Connection","Not sending because WebChannel is closed:",B):(w||(He("Connection","Opening WebChannel transport."),y.open(),w=!0),He("Connection","WebChannel sending:",B),y.send(B))},Jr:()=>y.close()}),N=(B,j,Q)=>{B.listen(j,Ne=>{try{Q(Ne)}catch($e){setTimeout(()=>{throw $e},0)}})};return N(y,qI.EventType.OPEN,()=>{E||He("Connection","WebChannel transport opened.")}),N(y,qI.EventType.CLOSE,()=>{E||(E=!0,He("Connection","WebChannel transport closed"),M.io())}),N(y,qI.EventType.ERROR,B=>{E||(E=!0,Ng("Connection","WebChannel transport errored:",B),M.io(new Le(de.UNAVAILABLE,"The operation could not be completed")))}),N(y,qI.EventType.MESSAGE,B=>{var j;if(!E){const Q=B.data[0];St(!!Q);const $e=Q.error||(null===(j=Q[0])||void 0===j?void 0:j.error);if($e){He("Connection","WebChannel received error:",$e);const Ze=$e.status;let et=function(Ct){const ln=dr[Ct];if(void 0!==ln)return yB(ln)}(Ze),vt=$e.message;void 0===et&&(et=de.INTERNAL,vt="Unknown error status: "+Ze+" with message "+$e.message),E=!0,M.io(new Le(et,vt)),y.close()}else He("Connection","WebChannel received:",Q),M.ro(Q)}}),N(l,nY.STAT_EVENT,B=>{B.stat===vV.PROXY?He("Connection","Detected buffering proxy"):B.stat===vV.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function AH(){return typeof window<"u"?window:null}function TD(){return typeof document<"u"?document:null}function o0(n){return new YY(n,!0)}class KR{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=r,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class MH{constructor(t,e,i,r,o,l,d,f){this.Hs=t,this.vo=i,this.Vo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new KR(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,we.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,we.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,we.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===de.RESOURCE_EXHAUSTED?(Xi(e.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===de.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new Le(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,we.Z)(function*(){t.state=0,t.start()}))}Qo(t){return He("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o8 extends MH{constructor(t,e,i,r,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.yt=o}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function XY(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:mt(),r=t.targetChange.targetIds||[],o=function(f,y){return f.wt?(St(void 0===y||"string"==typeof y),Dr.fromBase64String(y||"")):(St(void 0===y||y instanceof Uint8Array),Dr.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),l=t.targetChange.cause,d=l&&function(f){const y=void 0===f.code?de.UNKNOWN:yB(f.code);return new Le(y,f.message||"")}(l);e=new TB(i,r,o,d||null)}else if("documentChange"in t){const i=t.documentChange,r=_u(n,i.document.name),o=er(i.document.updateTime),l=i.document.createTime?er(i.document.createTime):Rt.min(),d=new os({mapValue:{fields:i.document.fields}}),f=gi.newFoundDocument(r,o,l,d);e=new lD(i.targetIds||[],i.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const i=t.documentDelete,r=_u(n,i.document),o=i.readTime?er(i.readTime):Rt.min(),l=gi.newNoDocument(r,o);e=new lD([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){const i=t.documentRemove,r=_u(n,i.document);e=new lD([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return mt();{const i=t.filter,o=new UY(i.count||0);e=new CB(i.targetId,o)}}var f;return e}(this.yt,t),i=function(r){if(!("targetChange"in r))return Rt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Rt.min():o.readTime?er(o.readTime):Rt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=KC(this.yt),e.addTarget=function(r,o){let l;const d=o.target;return l=eD(d)?{documents:OB(r,d)}:{query:ER(r,d)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=DB(r,o.resumeToken):o.snapshotVersion.compareTo(Rt.min())>0&&(l.readTime=By(r,o.snapshotVersion.toTimestamp())),l}(this.yt,t);const i=function tQ(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=KC(this.yt),e.removeTarget=t,this.Bo(e)}}class a8 extends MH{constructor(t,e,i,r,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.yt=o,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(St(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function eQ(n,t){return n&&n.length>0?(St(void 0!==t),n.map(e=>function(i,r){let o=er(i.updateTime?i.updateTime:r);return o.isEqual(Rt.min())&&(o=er(r)),new VY(o,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=er(t.commitTime);return this.listener.Zo(i,e)}return St(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=KC(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>YC(this.yt,i))};this.Bo(e)}}class l8 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.yt=r,this.nu=!1}su(){if(this.nu)throw new Le(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.ao(t,e,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Le(de.UNKNOWN,r.toString())})}_o(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection._o(t,e,i,o,l,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Le(de.UNKNOWN,o.toString())})}terminate(){this.nu=!0}}class u8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Xi(e),this.ou=!1):He("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class d8{constructor(t,e,i,r,o){var l=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur(d=>{i.enqueueAndForget((0,we.Z)(function*(){var f;Wd(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,we.Z)(function*(y){const w=lt(y);w._u.add(4),yield Zy(w),w.gu.set("Unknown"),w._u.delete(4),yield a0(w)}),function(y){return f.apply(this,arguments)})(l))}))}),this.gu=new u8(i,r)}}function a0(n){return QR.apply(this,arguments)}function QR(){return QR=(0,we.Z)(function*(n){if(Wd(n))for(const t of n.wu)yield t(!0)}),QR.apply(this,arguments)}function Zy(n){return JR.apply(this,arguments)}function JR(){return JR=(0,we.Z)(function*(n){for(const t of n.wu)yield t(!1)}),JR.apply(this,arguments)}function ED(n,t){const e=lt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),tO(e)?eO(e):Wy(e).ko()&&XR(e,t))}function l0(n,t){const e=lt(n),i=Wy(e);e.du.delete(t),i.ko()&&RH(e,t),0===e.du.size&&(i.ko()?i.Fo():Wd(e)&&e.gu.set("Unknown"))}function XR(n,t){n.yu.Ot(t.targetId),Wy(n).zo(t)}function RH(n,t){n.yu.Ot(t),Wy(n).Ho(t)}function eO(n){n.yu=new ZY({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>n.du.get(t)||null}),Wy(n).start(),n.gu.uu()}function tO(n){return Wd(n)&&!Wy(n).No()&&n.du.size>0}function Wd(n){return 0===lt(n)._u.size}function OH(n){n.yu=void 0}function h8(n){return nO.apply(this,arguments)}function nO(){return nO=(0,we.Z)(function*(n){n.du.forEach((t,e)=>{XR(n,t)})}),nO.apply(this,arguments)}function p8(n,t){return iO.apply(this,arguments)}function iO(){return iO=(0,we.Z)(function*(n,t){OH(n),tO(n)?(n.gu.hu(t),eO(n)):n.gu.set("Unknown")}),iO.apply(this,arguments)}function f8(n,t,e){return rO.apply(this,arguments)}function rO(){return rO=(0,we.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof TB&&2===t.state&&t.cause)try{yield(i=(0,we.Z)(function*(r,o){const l=o.cause;for(const d of o.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.du.delete(d),r.yu.removeTarget(d))}),function(r,o){return i.apply(this,arguments)})(n,t)}catch(i){He("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield SD(n,i)}else if(t instanceof lD?n.yu.Kt(t):t instanceof CB?n.yu.Jt(t):n.yu.jt(t),!e.isEqual(Rt.min()))try{const i=yield wH(n.localStore);e.compareTo(i)>=0&&(yield function(r,o){const l=r.yu.Zt(o);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=r.du.get(f);y&&r.du.set(f,y.withResumeToken(d.resumeToken,o))}}),l.targetMismatches.forEach(d=>{const f=r.du.get(d);if(!f)return;r.du.set(d,f.withResumeToken(Dr.EMPTY_BYTE_STRING,f.snapshotVersion)),RH(r,d);const y=new Ep(f.target,d,1,f.sequenceNumber);XR(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,e))}catch(i){He("RemoteStore","Failed to raise snapshot:",i),yield SD(n,i)}var i}),rO.apply(this,arguments)}function SD(n,t,e){return sO.apply(this,arguments)}function sO(){return sO=(0,we.Z)(function*(n,t,e){if(!_p(t))throw t;n._u.add(1),yield Zy(n),n.gu.set("Offline"),e||(e=()=>wH(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield a0(n)}))}),sO.apply(this,arguments)}function PH(n,t){return t().catch(e=>SD(n,e,t))}function qy(n){return oO.apply(this,arguments)}function oO(){return oO=(0,we.Z)(function*(n){const t=lt(n),e=xp(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;g8(t);)try{const r=yield XQ(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,m8(t,r)}catch(r){yield SD(t,r)}NH(t)&&LH(t)}),oO.apply(this,arguments)}function g8(n){return Wd(n)&&n.fu.length<10}function m8(n,t){n.fu.push(t);const e=xp(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function NH(n){return Wd(n)&&!xp(n).No()&&n.fu.length>0}function LH(n){xp(n).start()}function _8(n){return aO.apply(this,arguments)}function aO(){return aO=(0,we.Z)(function*(n){xp(n).eu()}),aO.apply(this,arguments)}function y8(n){return lO.apply(this,arguments)}function lO(){return lO=(0,we.Z)(function*(n){const t=xp(n);for(const e of n.fu)t.Xo(e.mutations)}),lO.apply(this,arguments)}function v8(n,t,e){return cO.apply(this,arguments)}function cO(){return cO=(0,we.Z)(function*(n,t,e){const i=n.fu.shift(),r=DR.from(i,t,e);yield PH(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield qy(n)}),cO.apply(this,arguments)}function b8(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,we.Z)(function*(n,t){var e;t&&xp(n).Yo&&(yield(e=(0,we.Z)(function*(i,r){if(_B(o=r.code)&&o!==de.ABORTED){const l=i.fu.shift();xp(i).Mo(),yield PH(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield qy(i)}var o}),function(i,r){return e.apply(this,arguments)})(n,t)),NH(n)&&LH(n)}),uO.apply(this,arguments)}function FH(n,t){return dO.apply(this,arguments)}function dO(){return dO=(0,we.Z)(function*(n,t){const e=lt(n);e.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const i=Wd(e);e._u.add(3),yield Zy(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield a0(e)}),dO.apply(this,arguments)}function hO(n,t){return pO.apply(this,arguments)}function pO(){return pO=(0,we.Z)(function*(n,t){const e=lt(n);t?(e._u.delete(2),yield a0(e)):t||(e._u.add(2),yield Zy(e),e.gu.set("Unknown"))}),pO.apply(this,arguments)}function Wy(n){return n.pu||(n.pu=function(t,e,i){const r=lt(t);return r.su(),new o8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:h8.bind(null,n),Zr:p8.bind(null,n),Wo:f8.bind(null,n)}),n.wu.push(function(){var t=(0,we.Z)(function*(e){e?(n.pu.Mo(),tO(n)?eO(n):n.gu.set("Unknown")):(yield n.pu.stop(),OH(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function xp(n){return n.Iu||(n.Iu=function(t,e,i){const r=lt(t);return r.su(),new a8(e,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,i)}(n.datastore,n.asyncQueue,{Yr:_8.bind(null,n),Zr:b8.bind(null,n),tu:y8.bind(null,n),Zo:v8.bind(null,n)}),n.wu.push(function(){var t=(0,we.Z)(function*(e){e?(n.Iu.Mo(),yield qy(n)):(yield n.Iu.stop(),n.fu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class fO{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(t,e,i,r,o){const l=Date.now()+i,d=new fO(t,e,l,r,o);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(de.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(n,t){if(Xi("AsyncQueue",`${t}: ${n}`),_p(n))return new Le(de.UNAVAILABLE,`${t}: ${n}`);throw n}class Yy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||st.comparator(e.key,i.key):(e,i)=>st.comparator(e.key,i.key),this.keyedMap=jC(),this.sortedSet=new Gi(this.comparator)}static emptySet(t){return new Yy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Yy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Yy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class VH{constructor(){this.Tu=new Gi(st.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):mt():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Qy{constructor(t,e,i,r,o,l,d,f,y){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(t,e,i,r,o){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new Qy(t,e,Yy.emptySet(e),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&HC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class w8{constructor(){this.Au=void 0,this.listeners=[]}}class C8{constructor(){this.queries=new Tp(t=>tB(t),HC),this.onlineState="Unknown",this.Ru=new Set}}function gO(n,t){return mO.apply(this,arguments)}function mO(){return mO=(0,we.Z)(function*(n,t){const e=lt(n),i=t.query;let r=!1,o=e.queries.get(i);if(o||(r=!0,o=new w8),r)try{o.Au=yield e.onListen(i)}catch(l){const d=Ky(l,`Initialization of query '${vR(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,o),o.listeners.push(t),t.bu(e.onlineState),o.Au&&t.Pu(o.Au)&&vO(e)}),mO.apply(this,arguments)}function _O(n,t){return yO.apply(this,arguments)}function yO(){return yO=(0,we.Z)(function*(n,t){const e=lt(n),i=t.query;let r=!1;const o=e.queries.get(i);if(o){const l=o.listeners.indexOf(t);l>=0&&(o.listeners.splice(l,1),r=0===o.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),yO.apply(this,arguments)}function T8(n,t){const e=lt(n);let i=!1;for(const r of t){const l=e.queries.get(r.query);if(l){for(const d of l.listeners)d.Pu(r)&&(i=!0);l.Au=r}}i&&vO(e)}function E8(n,t,e){const i=lt(n),r=i.queries.get(t);if(r)for(const o of r.listeners)o.onError(e);i.queries.delete(t)}function vO(n){n.Ru.forEach(t=>{t.next()})}class bO{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Qy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=Qy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class S8{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class BH{constructor(t){this.yt=t}Ji(t){return _u(this.yt,t)}Yi(t){return t.metadata.exists?RB(this.yt,t.document,!1):gi.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return er(t)}}class I8{constructor(t,e,i){this.Mu=t,this.localStore=e,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HH(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=In.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new BH(this.yt);for(const r of t)if(r.metadata.queries){const o=i.Ji(r.metadata.name);for(const l of r.metadata.queries){const d=(e.get(l)||sn()).add(o);e.set(l,d)}}return e}complete(){var t=this;return(0,we.Z)(function*(){const e=yield function e8(n,t,e,i){return GR.apply(this,arguments)}(t.localStore,new BH(t.yt),t.documents,t.Mu.id),i=t.$u(t.documents);for(const r of t.queries)yield t8(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function HH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class UH{constructor(t){this.key=t}}class zH{constructor(t){this.key=t}}class GH{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=sn(),this.mutatedKeys=sn(),this.Gu=iB(t),this.Qu=new Yy(this.Gu)}get ju(){return this.qu}Wu(t,e){const i=e?e.zu:new VH,r=e?e.Qu:this.Qu;let o=e?e.mutatedKeys:this.mutatedKeys,l=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((w,E)=>{const M=r.get(w),N=UC(this.query,E)?E:null,B=!!M&&this.mutatedKeys.has(M.key),j=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let Q=!1;M&&N?M.data.isEqual(N.data)?B!==j&&(i.track({type:3,doc:N}),Q=!0):this.Hu(M,N)||(i.track({type:2,doc:N}),Q=!0,(f&&this.Gu(N,f)>0||y&&this.Gu(N,y)<0)&&(d=!0)):!M&&N?(i.track({type:0,doc:N}),Q=!0):M&&!N&&(i.track({type:1,doc:M}),Q=!0,(f||y)&&(d=!0)),Q&&(N?(l=l.add(N),o=j?o.add(w):o.delete(w)):(l=l.delete(w),o=o.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),o=o.delete(w.key),i.track({type:1,doc:w})}return{Qu:l,zu:i,$i:d,mutatedKeys:o}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const o=t.zu.Eu();o.sort((y,w)=>function(E,M){const N=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return N(E)-N(M)}(y.type,w.type)||this.Gu(y.doc,w.doc)),this.Ju(i);const l=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,f=d!==this.Uu;return this.Uu=d,0!==o.length||f?{snapshot:new Qy(this.query,t.Qu,r,o,t.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new VH,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.qu=this.qu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.qu=this.qu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=sn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new zH(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new UH(i))}),e}tc(t){this.qu=t.Hi,this.Ku=sn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return Qy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class D8{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class x8{constructor(t){this.key=t,this.nc=!1}}class k8{constructor(t,e,i,r,o,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Tp(d=>tB(d),HC),this.rc=new Map,this.oc=new Set,this.uc=new Gi(st.comparator),this.cc=new Map,this.ac=new LR,this.hc={},this.lc=new Map,this.fc=Qg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function A8(n,t){return wO.apply(this,arguments)}function wO(){return wO=(0,we.Z)(function*(n,t){const e=jO(n);let i,r;const o=e.ic.get(t);if(o)i=o.targetId,e.sharedClientState.addLocalQueryTarget(i),r=o.view.ec();else{const l=yield jy(e.localStore,Js(t));e.isPrimaryClient&&ED(e.remoteStore,l);const d=e.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield CO(e,t,i,"current"===d,l.resumeToken)}return r}),wO.apply(this,arguments)}function CO(n,t,e,i,r){return TO.apply(this,arguments)}function TO(){return TO=(0,we.Z)(function*(n,t,e,i,r){n._c=(E,M,N)=>{return(B=(0,we.Z)(function*(j,Q,Ne,$e){let Ze=Q.view.Wu(Ne);Ze.$i&&(Ze=yield bD(j.localStore,Q.query,!1).then(({documents:Ct})=>Q.view.Wu(Ct,Ze)));const et=$e&&$e.targetChanges.get(Q.targetId),vt=Q.view.applyChanges(Ze,j.isPrimaryClient,et);return OO(j,Q.targetId,vt.Xu),vt.snapshot}),function(j,Q,Ne,$e){return B.apply(this,arguments)})(n,E,M,N);var B};const o=yield bD(n.localStore,t,!0),l=new GH(t,o.Hi),d=l.Wu(o.documents),f=qC.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState,r),y=l.applyChanges(d,n.isPrimaryClient,f);OO(n,e,y.Xu);const w=new D8(t,e,l);return n.ic.set(t,w),n.rc.has(e)?n.rc.get(e).push(t):n.rc.set(e,[t]),y.snapshot}),TO.apply(this,arguments)}function M8(n,t){return EO.apply(this,arguments)}function EO(){return EO=(0,we.Z)(function*(n,t){const e=lt(n),i=e.ic.get(t),r=e.rc.get(i.targetId);if(r.length>1)return e.rc.set(i.targetId,r.filter(o=>!HC(o,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $y(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),l0(e.remoteStore,i.targetId),Jy(e,i.targetId)}).catch(mp))):(Jy(e,i.targetId),yield $y(e.localStore,i.targetId,!0))}),EO.apply(this,arguments)}function SO(){return SO=(0,we.Z)(function*(n,t,e){const i=$O(n);try{const r=yield function(o,l){const d=lt(o),f=ki.now(),y=l.reduce((M,N)=>M.add(N.key),sn());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",M=>{let N=To(),B=sn();return d.Gi.getEntries(M,y).next(j=>{N=j,N.forEach((Q,Ne)=>{Ne.isValidDocument()||(B=B.add(Q))})}).next(()=>d.localDocuments.getOverlayedDocuments(M,N)).next(j=>{w=j;const Q=[];for(const Ne of l){const $e=HY(Ne,w.get(Ne.key).overlayedDocument);null!=$e&&Q.push(new qd(Ne.key,$e,YV($e.value.mapValue),Ai.exists(!0)))}return d.mutationQueue.addMutationBatch(M,f,Q,l)}).next(j=>{E=j;const Q=j.applyToLocalDocumentSet(w,B);return d.documentOverlayCache.saveOverlays(M,j.batchId,Q)})}).then(()=>({batchId:E.batchId,changes:bB(w)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,d){let f=o.hc[o.currentUser.toKey()];f||(f=new Gi(en)),f=f.insert(l,d),o.hc[o.currentUser.toKey()]=f}(i,r.batchId,e),yield Kd(i,r.changes),yield qy(i.remoteStore)}catch(r){const o=Ky(r,"Failed to persist write");e.reject(o)}}),SO.apply(this,arguments)}function jH(n,t){return IO.apply(this,arguments)}function IO(){return IO=(0,we.Z)(function*(n,t){const e=lt(n);try{const i=yield JQ(e.localStore,t);t.targetChanges.forEach((r,o)=>{const l=e.cc.get(o);l&&(St(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.nc=!0:r.modifiedDocuments.size>0?St(l.nc):r.removedDocuments.size>0&&(St(l.nc),l.nc=!1))}),yield Kd(e,i,t)}catch(i){yield mp(i)}}),IO.apply(this,arguments)}function $H(n,t,e){const i=lt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ic.forEach((o,l)=>{const d=l.view.bu(t);d.snapshot&&r.push(d.snapshot)}),function(o,l){const d=lt(o);d.onlineState=l;let f=!1;d.queries.forEach((y,w)=>{for(const E of w.listeners)E.bu(l)&&(f=!0)}),f&&vO(d)}(i.eventManager,t),r.length&&i.sc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function O8(n,t,e){return DO.apply(this,arguments)}function DO(){return DO=(0,we.Z)(function*(n,t,e){const i=lt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.cc.get(t),o=r&&r.key;if(o){let l=new Gi(st.comparator);l=l.insert(o,gi.newNoDocument(o,Rt.min()));const d=sn().add(o),f=new ZC(Rt.min(),new Map,new ni(en),l,d);yield jH(i,f),i.uc=i.uc.remove(o),i.cc.delete(t),PO(i)}else yield $y(i.localStore,t,!1).then(()=>Jy(i,t,e)).catch(mp)}),DO.apply(this,arguments)}function P8(n,t){return xO.apply(this,arguments)}function xO(){return xO=(0,we.Z)(function*(n,t){const e=lt(n),i=t.batch.batchId;try{const r=yield QQ(e.localStore,t);RO(e,i,null),MO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Kd(e,r)}catch(r){yield mp(r)}}),xO.apply(this,arguments)}function N8(n,t,e){return kO.apply(this,arguments)}function kO(){return kO=(0,we.Z)(function*(n,t,e){const i=lt(n);try{const r=yield function(o,l){const d=lt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,l).next(w=>(St(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(i.localStore,t);RO(i,t,e),MO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Kd(i,r)}catch(r){yield mp(r)}}),kO.apply(this,arguments)}function AO(){return AO=(0,we.Z)(function*(n,t){const e=lt(n);Wd(e.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const l=lt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.lc.get(i)||[];r.push(t),e.lc.set(i,r)}catch(i){const r=Ky(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),AO.apply(this,arguments)}function MO(n,t){(n.lc.get(t)||[]).forEach(e=>{e.resolve()}),n.lc.delete(t)}function RO(n,t,e){const i=lt(n);let r=i.hc[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.hc[i.currentUser.toKey()]=r}}function Jy(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.rc.get(t))n.ic.delete(i),e&&n.sc.wc(i,e);n.rc.delete(t),n.isPrimaryClient&&n.ac.ls(t).forEach(i=>{n.ac.containsKey(i)||ZH(n,i)})}function ZH(n,t){n.oc.delete(t.path.canonicalString());const e=n.uc.get(t);null!==e&&(l0(n.remoteStore,e),n.uc=n.uc.remove(t),n.cc.delete(e),PO(n))}function OO(n,t,e){for(const i of e)i instanceof UH?(n.ac.addReference(i.key,t),F8(n,i)):i instanceof zH?(He("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,t),n.ac.containsKey(i.key)||ZH(n,i.key)):mt()}function F8(n,t){const e=t.key,i=e.path.canonicalString();n.uc.get(e)||n.oc.has(i)||(He("SyncEngine","New document in limbo: "+e),n.oc.add(i),PO(n))}function PO(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const t=n.oc.values().next().value;n.oc.delete(t);const e=new st(In.fromString(t)),i=n.fc.next();n.cc.set(i,new x8(e)),n.uc=n.uc.insert(e,i),ED(n.remoteStore,new Ep(Js(Py(e.path)),i,2,ha.at))}}function Kd(n,t,e){return NO.apply(this,arguments)}function NO(){return NO=(0,we.Z)(function*(n,t,e){const i=lt(n),r=[],o=[],l=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,f)=>{l.push(i._c(f,t,e).then(y=>{if((y||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const w=HR.Ci(f.targetId,y);o.push(w)}}))}),yield Promise.all(l),i.sc.Wo(r),yield(d=(0,we.Z)(function*(f,y){const w=lt(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ce.forEach(y,M=>ce.forEach(M.Si,N=>w.persistence.referenceDelegate.addReference(E,M.targetId,N)).next(()=>ce.forEach(M.Di,N=>w.persistence.referenceDelegate.removeReference(E,M.targetId,N)))))}catch(E){if(!_p(E))throw E;He("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const M=E.targetId;if(!E.fromCache){const N=w.qi.get(M),j=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);w.qi=w.qi.insert(M,j)}}}),function(f,y){return d.apply(this,arguments)})(i.localStore,o))}),NO.apply(this,arguments)}function V8(n,t){return LO.apply(this,arguments)}function LO(){return LO=(0,we.Z)(function*(n,t){const e=lt(n);if(!e.currentUser.isEqual(t)){He("SyncEngine","User change. New user:",t.toKey());const i=yield bH(e.localStore,t);e.currentUser=t,(r=e).lc.forEach(l=>{l.forEach(d=>{d.reject(new Le(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Kd(e,i.ji)}var r}),LO.apply(this,arguments)}function B8(n,t){const e=lt(n),i=e.cc.get(t);if(i&&i.nc)return sn().add(i.key);{let r=sn();const o=e.rc.get(t);if(!o)return r;for(const l of o){const d=e.ic.get(l);r=r.unionWith(d.view.ju)}return r}}function H8(n,t){return FO.apply(this,arguments)}function FO(){return FO=(0,we.Z)(function*(n,t){const e=lt(n),i=yield bD(e.localStore,t.query,!0),r=t.view.tc(i);return e.isPrimaryClient&&OO(e,t.targetId,r.Xu),r}),FO.apply(this,arguments)}function U8(n,t){return VO.apply(this,arguments)}function VO(){return VO=(0,we.Z)(function*(n,t){const e=lt(n);return EH(e.localStore,t).then(i=>Kd(e,i))}),VO.apply(this,arguments)}function z8(n,t,e,i){return BO.apply(this,arguments)}function BO(){return BO=(0,we.Z)(function*(n,t,e,i){const r=lt(n),o=yield function(l,d){const f=lt(l),y=lt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.Tn(w,d).next(E=>E?f.localDocuments.getDocuments(w,E):ce.resolve(null)))}(r.localStore,t);var d;null!==o?("pending"===e?yield qy(r.remoteStore):"acknowledged"===e||"rejected"===e?(RO(r,t,i||null),MO(r,t),d=t,lt(lt(r.localStore).mutationQueue).An(d)):mt(),yield Kd(r,o)):He("SyncEngine","Cannot apply mutation batch with id: "+t)}),BO.apply(this,arguments)}function HO(){return HO=(0,we.Z)(function*(n,t){const e=lt(n);if(jO(e),$O(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield qH(e,i.toArray());e.dc=!0,yield hO(e.remoteStore,!0);for(const o of r)ED(e.remoteStore,o)}else if(!1===t&&!1!==e.dc){const i=[];let r=Promise.resolve();e.rc.forEach((o,l)=>{e.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Jy(e,l),$y(e.localStore,l,!0))),l0(e.remoteStore,l)}),yield r,yield qH(e,i),function(o){const l=lt(o);l.cc.forEach((d,f)=>{l0(l.remoteStore,f)}),l.ac.fs(),l.cc=new Map,l.uc=new Gi(st.comparator)}(e),e.dc=!1,yield hO(e.remoteStore,!1)}}),HO.apply(this,arguments)}function qH(n,t,e){return UO.apply(this,arguments)}function UO(){return UO=(0,we.Z)(function*(n,t,e){const i=lt(n),r=[],o=[];for(const l of t){let d;const f=i.rc.get(l);if(f&&0!==f.length){d=yield jy(i.localStore,Js(f[0]));for(const y of f){const w=i.ic.get(y),E=yield H8(i,w);E.snapshot&&o.push(E.snapshot)}}else{const y=yield TH(i.localStore,l);d=yield jy(i.localStore,y),yield CO(i,WH(y),l,!1,d.resumeToken)}r.push(d)}return i.sc.Wo(o),r}),UO.apply(this,arguments)}function WH(n){return XV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j8(n){const t=lt(n);return lt(lt(t.localStore).persistence).vi()}function $8(n,t,e,i){return zO.apply(this,arguments)}function zO(){return zO=(0,we.Z)(function*(n,t,e,i){const r=lt(n);if(r.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const o=r.rc.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const l=yield EH(r.localStore,nB(o[0])),d=ZC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Dr.EMPTY_BYTE_STRING);yield Kd(r,l,d);break}case"rejected":yield $y(r.localStore,t,!0),Jy(r,t,i);break;default:mt()}}),zO.apply(this,arguments)}function Z8(n,t,e){return GO.apply(this,arguments)}function GO(){return GO=(0,we.Z)(function*(n,t,e){const i=jO(n);if(i.dc){for(const r of t){if(i.rc.has(r)){He("SyncEngine","Adding an already active target "+r);continue}const o=yield TH(i.localStore,r),l=yield jy(i.localStore,o);yield CO(i,WH(o),l.targetId,!1,l.resumeToken),ED(i.remoteStore,l)}for(const r of e)i.rc.has(r)&&(yield $y(i.localStore,r,!1).then(()=>{l0(i.remoteStore,r),Jy(i,r)}).catch(mp))}}),GO.apply(this,arguments)}function jO(n){const t=lt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=jH.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O8.bind(null,t),t.sc.Wo=T8.bind(null,t.eventManager),t.sc.wc=E8.bind(null,t.eventManager),t}function $O(n){const t=lt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=P8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=N8.bind(null,t),t}class KH{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,we.Z)(function*(){e.yt=o0(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return vH(this.persistence,new yH,t.initialUser,this.yt)}yc(t){return new mH(yD.Bs,this.yt)}gc(t){return new xH}terminate(){var t=this;return(0,we.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class YH extends KH{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield $O(i.Ac.syncEngine),yield qy(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return vH(this.persistence,new yH,t.initialUser,this.yt)}Tc(t,e){return new LQ(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new bY(e,this.persistence);return new vY(t.asyncQueue,i)}yc(t){const e=BR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Eo.withCacheSize(this.cacheSizeBytes):Eo.DEFAULT;return new VR(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,AH(),TD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new xH}}class W8 extends YH{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,we.Z)(function*(){yield e().call(i,t);const r=i.Ac.syncEngine;i.sharedClientState instanceof WR&&(i.sharedClientState.syncEngine={Fr:z8.bind(null,r),$r:$8.bind(null,r),Br:Z8.bind(null,r),vi:j8.bind(null,r),Mr:U8.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var o=(0,we.Z)(function*(l){yield function G8(n,t){return HO.apply(this,arguments)}(i.Ac.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}gc(t){const e=AH();if(!WR.C(e))throw new Le(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=BR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new WR(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class ZO{initialize(t,e){var i=this;return(0,we.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>$H(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=V8.bind(null,i.syncEngine),yield hO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new C8}createDatastore(t){const e=o0(t.databaseInfo.databaseId),i=new s8(t.databaseInfo);return new l8(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,o=d=>$H(this.syncEngine,d,0),l=kH.C()?new kH:new n8,new d8(e,i,r,o,l);var e,i,r,o,l}createSyncEngine(t,e){return function(i,r,o,l,d,f,y){const w=new k8(i,r,o,l,d,f);return y&&(w.dc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,we.Z)(function*(e){const i=lt(e);He("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Zy(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function qO(n,t,e){if(!e)throw new Le(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function QH(n,t,e,i){if(!0===t&&!0===i)throw new Le(de.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function JH(n){if(!st.isDocumentKey(n))throw new Le(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XH(n){if(st.isDocumentKey(n))throw new Le(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ID(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":mt()}function vn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Le(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=ID(n);throw new Le(de.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function eU(n,t){if(t<=0)throw new Le(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}const tU=new Map;class nU{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Le(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Le(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,QH("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class c0{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Le(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nU(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new aY;switch(e.type){case"gapi":return new dY(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Le(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=tU.get(t);e&&(He("ComponentProvider","Removing Datastore"),tU.delete(t),e.terminate())}(this),Promise.resolve()}}class mi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new mi(this.firestore,t,this._key)}}class as{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new as(this.firestore,t,this._query)}}class vu extends as{constructor(t,e,i){super(t,e,Py(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new mi(this.firestore,null,new st(t))}withConverter(t){return new vu(this.firestore,t,this._path)}}function rU(n,t,...e){if(n=(0,L.m9)(n),qO("collection","path",t),n instanceof c0){const i=In.fromString(t,...e);return XH(i),new vu(n,null,i)}{if(!(n instanceof mi||n instanceof vu))throw new Le(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(In.fromString(t,...e));return XH(i),new vu(n.firestore,null,i)}}function DD(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=TV.R()),qO("doc","path",t),n instanceof c0){const i=In.fromString(t,...e);return JH(i),new mi(n,null,new st(i))}{if(!(n instanceof mi||n instanceof vu))throw new Le(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(In.fromString(t,...e));return JH(i),new mi(n.firestore,n instanceof vu?n.converter:null,new st(i))}}function sU(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof mi||n instanceof vu)&&(t instanceof mi||t instanceof vu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function WO(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof as&&t instanceof as&&n.firestore===t.firestore&&HC(n._query,t._query)&&n.converter===t.converter}function oU(n,t=10240){let e=0;return{read:()=>(0,we.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xD{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Xi("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Y8{constructor(t,e){this.Pc=t,this.yt=e,this.metadata=new Ir,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,we.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,we.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,we.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),r=Number(i);isNaN(r)&&t.Dc(`length string (${i}) is not valid number`);const o=yield t.Cc(r);return new S8(JSON.parse(o),e.length+r)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,we.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,we.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,we.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class X8{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Le(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,we.Z)(function*(o,l){const d=lt(o),f=KC(d.yt)+"/documents",y={documents:l.map(N=>WC(d.yt,N))},w=yield d._o("BatchGetDocuments",f,y,l.length),E=new Map;w.forEach(N=>{const B=function JY(n,t){return"found"in t?function(e,i){St(!!i.found);const r=_u(e,i.found.name),o=er(i.found.updateTime),l=i.found.createTime?er(i.found.createTime):Rt.min(),d=new os({mapValue:{fields:i.found.fields}});return gi.newFoundDocument(r,o,l,d)}(n,t):"missing"in t?function(e,i){St(!!i.missing),St(!!i.readTime);const r=_u(e,i.missing),o=er(i.readTime);return gi.newNoDocument(r,o)}(n,t):mt()}(d.yt,N);E.set(B.key.toString(),B)});const M=[];return l.forEach(N=>{const B=E.get(N.toString());St(!!B),M.push(B)}),M}),function(o,l){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Vy(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const o=st.fromPath(r);t.mutations.push(new bR(o,t.precondition(o)))}),yield(i=(0,we.Z)(function*(r,o){const l=lt(r),d=KC(l.yt)+"/documents",f={writes:o.map(y=>YC(l.yt,y))};yield l.ao("Commit",d,f)}),function(r,o){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw mt();e=Rt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Le(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Rt.min())?Ai.exists(!1):Ai.updateTime(e):Ai.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Rt.min()))throw new Le(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ai.updateTime(e)}return Ai.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class e7{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.kc=i.maxAttempts,this.xo=new KR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,we.Z)(function*(){const e=new X8(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(o=>{t.Fc(o)}))}).catch(r=>{t.Fc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!OC(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!_B(e)}return!1}}class t7{constructor(t,e,i,r){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Br.UNAUTHENTICATED,this.clientId=TV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,we.Z)(function*(d){He("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var t=this;return(0,we.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Ky(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function aU(n,t){return KO.apply(this,arguments)}function KO(){return KO=(0,we.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,we.Z)(function*(o){i.isEqual(o)||(yield bH(t.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),KO.apply(this,arguments)}function lU(n,t){return YO.apply(this,arguments)}function YO(){return YO=(0,we.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield QO(n);He("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>FH(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>FH(t.remoteStore,o)),n.onlineComponents=t}),YO.apply(this,arguments)}function QO(n){return JO.apply(this,arguments)}function JO(){return JO=(0,we.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield aU(n,new KH)),n.offlineComponents}),JO.apply(this,arguments)}function kD(n){return XO.apply(this,arguments)}function XO(){return XO=(0,we.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield lU(n,new ZO)),n.onlineComponents}),XO.apply(this,arguments)}function cU(n){return QO(n).then(t=>t.persistence)}function AD(n){return QO(n).then(t=>t.localStore)}function eP(n){return kD(n).then(t=>t.remoteStore)}function tP(n){return kD(n).then(t=>t.syncEngine)}function Xy(n){return nP.apply(this,arguments)}function nP(){return nP=(0,we.Z)(function*(n){const t=yield kD(n),e=t.eventManager;return e.onListen=A8.bind(null,t.syncEngine),e.onUnlisten=M8.bind(null,t.syncEngine),e}),nP.apply(this,arguments)}function dU(n,t,e={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,o,l,d,f){const y=new xD({next:E=>{o.enqueueAndForget(()=>_O(r,w));const M=E.docs.has(l);!M&&E.fromCache?f.reject(new Le(de.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&E.fromCache&&d&&"server"===d.source?f.reject(new Le(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new bO(Py(l.path),y,{includeMetadataChanges:!0,Nu:!0});return gO(r,w)}(yield Xy(n),n.asyncQueue,t,e,i)})),i.promise}function hU(n,t,e={}){const i=new Ir;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(r,o,l,d,f){const y=new xD({next:E=>{o.enqueueAndForget(()=>_O(r,w)),E.fromCache&&"server"===d.source?f.reject(new Le(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new bO(l,y,{includeMetadataChanges:!0,Nu:!0});return gO(r,w)}(yield Xy(n),n.asyncQueue,t,e,i)})),i.promise}class c7{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new KR(this,"async_queue_retry"),this.Wc=()=>{const e=TD();e&&He("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=TD();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=TD();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise(()=>{});const e=new Ir;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,we.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!_p(e))throw e;He("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Xi("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const r=fO.createAndSchedule(this,t,e,i,o=>this.Yc(o));return this.Uc.push(r),r}zc(){this.Kc&&mt()}verifyOperationInProgress(){}Xc(){var t=this;return(0,we.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function iP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class u7{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class _i extends c0{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new c7,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pU(this),this._firestoreClient.terminate()}}function tr(n){return n._firestoreClient||pU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pU(n){var t;const e=n._freezeSettings(),i=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new wY(n._databaseId,o,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new t7(n._authCredentials,n._appCheckCredentials,n._queue,i)}function fU(n,t,e){const i=new Ir;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield aU(n,e),yield lU(n,t),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(l=o).name?l.code===de.FAILED_PRECONDITION||l.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;Ng("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var l})).then(()=>i.promise)}function gU(n){if(n._initialized||n._terminated)throw new Le(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bu(Dr.fromBase64String(t))}catch(e){throw new Le(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new bu(Dr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Yd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Le(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Xg{constructor(t){this._methodName=t}}class MD{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Le(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Le(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return en(this._lat,t._lat)||en(this._long,t._long)}}const b7=/^__.*__$/;class w7{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new qd(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fy(t,this.data,e,this.fieldTransforms)}}class mU{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new qd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function _U(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class RD{constructor(t,e,i,r,o,l){this.settings=t,this.databaseId=e,this.yt=i,this.ignoreUndefinedProperties=r,void 0===o&&this.na(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new RD(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.ua(t),r}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ia({path:i,oa:!1});return r.na(),r}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return ND(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(_U(this.sa)&&b7.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class C7{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=i||o0(t)}da(t,e,i,r=!1){return new RD({sa:t,methodName:e,fa:i,path:Ui.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function em(n){const t=n._freezeSettings(),e=o0(n._databaseId);return new C7(n._databaseId,!!t.ignoreUndefinedProperties,e)}function OD(n,t,e,i,r,o={}){const l=n.da(o.merge||o.mergeFields?2:0,t,e,r);aP("Data must be an object, but it was:",l,i);const d=bU(i,l);let f,y;if(o.merge)f=new Co(l.fieldMask),y=l.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const M=lP(t,E,e);if(!l.contains(M))throw new Le(de.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);CU(w,M)||w.push(M)}f=new Co(w),y=l.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,y=l.fieldTransforms;return new w7(new os(d),f,y)}class u0 extends Xg{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof u0}}function yU(n,t,e){return new RD({sa:3,fa:t.settings.fa,methodName:n._methodName,oa:e},t.databaseId,t.yt,t.ignoreUndefinedProperties)}class rP extends Xg{_toFieldTransform(t){return new zC(t.path,new Ny)}isEqual(t){return t instanceof rP}}class T7 extends Xg{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=yU(this,t,!0),i=this._a.map(o=>tm(o,e)),r=new jg(i);return new zC(t.path,r)}isEqual(t){return this===t}}class E7 extends Xg{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=yU(this,t,!0),i=this._a.map(o=>tm(o,e)),r=new $g(i);return new zC(t.path,r)}isEqual(t){return this===t}}class S7 extends Xg{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new Ly(t.yt,oB(t.yt,this.wa));return new zC(t.path,e)}isEqual(t){return this===t}}function sP(n,t,e,i){const r=n.da(1,t,e);aP("Data must be an object, but it was:",r,i);const o=[],l=os.empty();Vg(i,(f,y)=>{const w=PD(t,f,e);y=(0,L.m9)(y);const E=r.ca(w);if(y instanceof u0)o.push(w);else{const M=tm(y,E);null!=M&&(o.push(w),l.set(w,M))}});const d=new Co(o);return new mU(l,d,r.fieldTransforms)}function oP(n,t,e,i,r,o){const l=n.da(1,t,e),d=[lP(t,i,e)],f=[r];if(o.length%2!=0)throw new Le(de.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)d.push(lP(t,o[M])),f.push(o[M+1]);const y=[],w=os.empty();for(let M=d.length-1;M>=0;--M)if(!CU(y,d[M])){const N=d[M];let B=f[M];B=(0,L.m9)(B);const j=l.ca(N);if(B instanceof u0)y.push(N);else{const Q=tm(B,j);null!=Q&&(y.push(N),w.set(N,Q))}}const E=new Co(y);return new mU(w,E,l.fieldTransforms)}function vU(n,t,e,i=!1){return tm(e,n.da(i?4:3,t))}function tm(n,t){if(wU(n=(0,L.m9)(n)))return aP("Unsupported field value:",t,n),bU(n,t);if(n instanceof Xg)return function(e,i){if(!_U(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const r=[];let o=0;for(const l of e){let d=tm(l,i.aa(o));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),o++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oB(i.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=ki.fromDate(e);return{timestampValue:By(i.yt,r)}}if(e instanceof ki){const r=new ki(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:By(i.yt,r)}}if(e instanceof MD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bu)return{bytesValue:DB(i.yt,e._byteString)};if(e instanceof mi){const r=i.databaseId,o=e.firestore._databaseId;if(!o.isEqual(r))throw i.ha(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:wR(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${ID(e)}`)}(n,t)}function bU(n,t){const e={};return MV(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vg(n,(i,r)=>{const o=tm(r,t.ra(i));null!=o&&(e[i]=o)}),{mapValue:{fields:e}}}function wU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ki||n instanceof MD||n instanceof bu||n instanceof mi||n instanceof Xg)}function aP(n,t,e){if(!wU(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=ID(e);throw t.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function lP(n,t,e){if((t=(0,L.m9)(t))instanceof Yd)return t._internalPath;if("string"==typeof t)return PD(n,t);throw ND("Field path arguments must be of type string or ",n,!1,void 0,e)}const I7=new RegExp("[~\\*/\\[\\]]");function PD(n,t,e){if(t.search(I7)>=0)throw ND(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Yd(...t.split("."))._internalPath}catch{throw ND(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ND(n,t,e,i,r){const o=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new Le(de.INVALID_ARGUMENT,d+n+f)}function CU(n,t){return n.some(e=>e.isEqual(t))}class d0{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new D7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(LD("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class D7 extends d0{data(){return super.data()}}function LD(n,t){return"string"==typeof t?PD(n,t):t instanceof Yd?t._internalPath:t._delegate._internalPath}function TU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cP{}class h0 extends cP{}function kp(n,t,...e){let i=[];t instanceof cP&&i.push(t),i=i.concat(e),function(r){const o=r.filter(d=>d instanceof ev).length,l=r.filter(d=>d instanceof p0).length;if(o>1||o>0&&l>0)throw new Le(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class p0 extends h0{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new p0(t,e,i)}_apply(t){const e=this._parse(t);return DU(t._query,e),new as(t.firestore,t.converter,yR(t._query,e))}_parse(t){const e=em(t.firestore);return function(r,o,l,d,f,y,w){let E;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Le(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){IU(w,y);const M=[];for(const N of w)M.push(SU(d,r,N));E={arrayValue:{values:M}}}else E=SU(d,r,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||IU(w,y),E=vU(l,"where",w,"in"===y||"not-in"===y);return yn.create(f,y,E)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class ev extends cP{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new ev(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Zn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const d of l)DU(o,d),o=yR(o,d)}(t._query,e),new as(t.firestore,t.converter,yR(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class uP extends h0{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new uP(t,e)}_apply(t){const e=function(i,r,o){if(null!==i.startAt)throw new Le(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Le(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ry(r,o);return function(d,f){if(null===mR(d)){const y=nD(d);null!==y&&xU(0,y,f.field)}}(i,l),l}(t._query,this._field,this._direction);return new as(t.firestore,t.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Zd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class FD extends h0{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new FD(t,e,i)}_apply(t){return new as(t.firestore,t.converter,iD(t._query,this._limit,this._limitType))}}class VD extends h0{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new VD(t,e,i)}_apply(t){const e=EU(t,this.type,this._docOrFields,this._inclusive);return new as(t.firestore,t.converter,(r=e,new Zd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class BD extends h0{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new BD(t,e,i)}_apply(t){const e=EU(t,this.type,this._docOrFields,this._inclusive);return new as(t.firestore,t.converter,(r=e,new Zd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function EU(n,t,e,i){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof d0)return function(r,o,l,d,f){if(!d)throw new Le(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of Gg(r))if(w.field.isKeyField())y.push(Ug(o,d.key));else{const E=d.data.field(w.field);if(cR(E))throw new Le(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const M=w.field.canonicalString();throw new Le(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(E)}return new Cp(y,f)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=em(n.firestore);return function(o,l,d,f,y,w){const E=o.explicitOrderBy;if(y.length>E.length)throw new Le(de.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let N=0;N<y.length;N++){const B=y[N];if(E[N].field.isKeyField()){if("string"!=typeof B)throw new Le(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof B}`);if(!_R(o)&&-1!==B.indexOf("/"))throw new Le(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${B}' contains a slash.`);const j=o.path.child(In.fromString(B));if(!st.isDocumentKey(j))throw new Le(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const Q=new st(j);M.push(Ug(l,Q))}else{const j=vU(d,f,B);M.push(j)}}return new Cp(M,w)}(n._query,n.firestore._databaseId,r,t,e,i)}}function SU(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Le(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_R(t)&&-1!==e.indexOf("/"))throw new Le(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(In.fromString(e));if(!st.isDocumentKey(i))throw new Le(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ug(n,new st(i))}if(e instanceof mi)return Ug(n,e._key);throw new Le(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ID(e)}.`)}function IU(n,t){if(!Array.isArray(n)||0===n.length)throw new Le(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Le(de.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function DU(n,t){if(t.isInequality()){const i=nD(n),r=t.field;if(null!==i&&!i.isEqual(r))throw new Le(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=mR(n);null!==o&&xU(0,r,o)}const e=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new Le(de.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function xU(n,t,e){if(!e.isEqual(t))throw new Le(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class dP{convertValue(t,e="none"){switch(Hg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bg(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw mt()}}convertObject(t,e){const i={};return Vg(t.fields,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertGeoPoint(t){return new MD(zi(t.latitude),zi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=OV(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(NC(t));default:return null}}convertTimestamp(t){const e=vp(t);return new ki(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=In.fromString(t);St(FB(i));const r=new yp(i.get(1),i.get(3)),o=new st(i.popFirst(5));return r.isEqual(e)||Xi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function HD(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class L7 extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new bu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new mi(this.firestore,null,e)}}class nm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qd extends d0{constructor(t,e,i,r,o,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new f0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(LD("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class f0 extends Qd{data(t={}){return super.data(t)}}class Ap{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new nm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new f0(this._firestore,this._userDataWriter,i.key,i,new nm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Le(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new f0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new nm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new f0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new nm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,y=-1;return 0!==l.type&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),y=o.indexOf(l.doc.key)),{type:F7(l.type),doc:d,oldIndex:f,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function F7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function AU(n,t){return n instanceof Qd&&t instanceof Qd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Ap&&t instanceof Ap&&n._firestore===t._firestore&&WO(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}class Mp extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new bu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new mi(this.firestore,null,e)}}function MU(n,t,e){n=vn(n,mi);const i=vn(n.firestore,_i),r=HD(n.converter,t,e);return tv(i,[OD(em(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Ai.none())])}function RU(n,t,e,...i){n=vn(n,mi);const r=vn(n.firestore,_i),o=em(r);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Yd?oP(o,"updateDoc",n._key,t,e,i):sP(o,"updateDoc",n._key,t),tv(r,[l.toMutation(n._key,Ai.exists(!0))])}function OU(n,...t){var e,i,r;n=(0,L.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof t[l]||iP(t[l])||(o=t[l],l++);const d={includeMetadataChanges:o.includeMetadataChanges};if(iP(t[l])){const E=t[l];t[l]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[l+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),t[l+2]=null===(r=E.complete)||void 0===r?void 0:r.bind(E)}let f,y,w;if(n instanceof mi)y=vn(n.firestore,_i),w=Py(n._key.path),f={next:E=>{t[l]&&t[l](hP(y,n,E))},error:t[l+1],complete:t[l+2]};else{const E=vn(n,as);y=vn(E.firestore,_i),w=E._query;const M=new Mp(y);f={next:N=>{t[l]&&t[l](new Ap(y,M,E,N))},error:t[l+1],complete:t[l+2]},TU(n._query)}return function(E,M,N,B){const j=new xD(B),Q=new bO(M,j,N);return E.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return gO(yield Xy(E),Q)})),()=>{j.bc(),E.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return _O(yield Xy(E),Q)}))}}(tr(y),w,d,f)}function tv(n,t){return function(e,i){const r=new Ir;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function R8(n,t,e){return SO.apply(this,arguments)}(yield tP(e),i,r)})),r.promise}(tr(n),t)}function hP(n,t,e){const i=e.docs.get(t._key),r=new Mp(n);return new Qd(n,r,t._key,i,new nm(e.hasPendingWrites,e.fromCache),t.converter)}const q7={maxAttempts:5};class PU{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=em(t)}set(t,e,i){this._verifyNotCommitted();const r=Rp(t,this._firestore),o=HD(r.converter,e,i),l=OD(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Ai.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=Rp(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Yd?oP(this._dataReader,"WriteBatch.update",o._key,e,i,r):sP(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(l.toMutation(o._key,Ai.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Rp(t,this._firestore);return this._mutations=this._mutations.concat(new Vy(e._key,Ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rp(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Le(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class W7 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=em(t)}get(t){const e=Rp(t,this._firestore),i=new L7(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return mt();const o=r[0];if(o.isFoundDocument())return new d0(this._firestore,i,o.key,o,e.converter);if(o.isNoDocument())return new d0(this._firestore,i,e._key,null,e.converter);throw mt()})}set(t,e,i){const r=Rp(t,this._firestore),o=HD(r.converter,e,i),l=OD(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(t,e,i,...r){const o=Rp(t,this._firestore);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Yd?oP(this._dataReader,"Transaction.update",o._key,e,i,r):sP(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,l),this}delete(t){const e=Rp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Rp(t,this._firestore),i=new Mp(this._firestore);return super.get(t).then(r=>new Qd(this._firestore,i,e._key,r._document,new nm(!1,!1),e.converter))}}function pP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function LU(){if(typeof Uint8Array>"u")throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function FU(){if(!function CY(){return typeof atob<"u"}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){xy=ws.SDK_VERSION,(0,ws._registerComponent)(new Xr.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const o=e.getProvider("app").getImmediate(),l=new _i(new cY(e.getProvider("auth-internal")),new hY(e.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yp(d.options.projectId,f)}(o,i),o);return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,ws.registerVersion)(bV,"3.8.3",n),(0,ws.registerVersion)(bV,"3.8.3","esm2017")}();class g0{constructor(t){this._delegate=t}static fromBase64String(t){return FU(),new g0(bu.fromBase64String(t))}static fromUint8Array(t){return LU(),new g0(bu.fromUint8Array(t))}toBase64(){return FU(),this._delegate.toBase64()}toUint8Array(){return LU(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fP(n){return function iJ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class rJ{enableIndexedDbPersistence(t,e){return function h7(n,t){gU(n=vn(n,_i));const e=tr(n),i=n._freezeSettings(),r=new ZO;return fU(e,r,new YH(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function p7(n){gU(n=vn(n,_i));const t=tr(n),e=n._freezeSettings(),i=new ZO;return fU(t,i,new W8(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function f7(n){if(n._initialized&&!n._terminated)throw new Le(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(e=(0,we.Z)(function*(i){if(!ac.C())return Promise.resolve();const r=i+"main";yield ac.delete(r)}),function(i){return e.apply(this,arguments)})(BR(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class VU{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof yp||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ng("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function iU(n,t,e,i={}){var r;const o=(n=vn(n,c0))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Ng("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=Br.MOCK_USER;else{l=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new Le(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Br(f)}n._authCredentials=new lY(new wV(l,d))}}(this._delegate,t,e,i)}enableNetwork(){return function m7(n){return function n7(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const t=yield cU(n),e=yield eP(n);return t.setNetworkEnabled(!0),function(i){const r=lt(i);return r._u.delete(0),a0(r)}(e)}))}(tr(n=vn(n,_i)))}(this._delegate)}disableNetwork(){return function _7(n){return function i7(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const t=yield cU(n),e=yield eP(n);return t.setNetworkEnabled(!1),(i=(0,we.Z)(function*(r){const o=lt(r);o._u.add(0),yield Zy(o),o.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(tr(n=vn(n,_i)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,QH("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function g7(n){return function(t){const e=new Ir;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function L8(n,t){return AO.apply(this,arguments)}(yield tP(t),e)})),e.promise}(tr(n=vn(n,_i)))}(this._delegate)}onSnapshotsInSync(t){return function Z7(n,t){return function o7(n,t){const e=new xD(t);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield Xy(n),r=e,lt(i).Ru.add(r),void r.next();var i,r})),()=>{e.bc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return i=yield Xy(n),r=e,void lt(i).Ru.delete(r);var i,r}))}}(tr(n=vn(n,_i)),iP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new nv(this,rU(this._delegate,t))}catch(e){throw eo(e,"collection()","Firestore.collection()")}}doc(t){try{return new al(this,DD(this._delegate,t))}catch(e){throw eo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new to(this,function K8(n,t){if(n=vn(n,c0),qO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Le(de.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(e=t,new Zd(In.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw eo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function K7(n,t,e){n=vn(n,_i);const i=Object.assign(Object.assign({},q7),e);return function(r){if(r.maxAttempts<1)throw new Le(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,l){const d=new Ir;return r.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const f=yield function uU(n){return kD(n).then(t=>t.datastore)}(r);new e7(r.asyncQueue,f,l,o,d).run()})),d.promise}(tr(n),r=>t(new W7(n,r)),i)}(this._delegate,e=>t(new BU(this,e)))}batch(){return tr(this._delegate),new HU(new PU(this._delegate,t=>tv(this._delegate,t)))}loadBundle(t){return function y7(n,t){const e=tr(n=vn(n,_i)),i=new u7;return function a7(n,t,e,i){const r=function(o,l){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,f=function(f,y){if(f instanceof Uint8Array)return oU(f,y);if(f instanceof ArrayBuffer)return oU(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Y8(f,l);var f}(e,o0(t));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function q8(n,t,e){const i=lt(n);var r;(r=(0,we.Z)(function*(o,l,d){try{const f=yield l.getMetadata();if(yield function(M,N){const B=lt(M),j=er(N.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",Q=>B.Ns.getBundleMetadata(Q,N.id)).then(Q=>!!Q&&Q.createTime.compareTo(j)>=0)}(o.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=f).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(HH(f));const y=new I8(f,o.localStore,l.yt);let w=yield l.mc();for(;w;){const M=yield y.Fu(w);M&&d._updateProgress(M),w=yield l.mc()}const E=yield y.complete();return yield Kd(o,E.Lu,void 0),yield function(M,N){const B=lt(M);return B.persistence.runTransaction("Save bundle","readwrite",j=>B.Ns.saveBundleMetadata(j,N))}(o.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Bu)}catch(f){return Ng("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var M}),function(o,l,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield tP(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function v7(n,t){return function l7(n,t){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(e,i){const r=lt(e);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ns.getNamedQuery(o,i))}(yield AD(n),t)}))}(tr(n=vn(n,_i)),t).then(e=>e?new as(n,null,e.query):null)}(this._delegate,t).then(e=>e?new to(this,e):null)}}class UD extends dP{constructor(t){super(),this.firestore=t}convertBytes(t){return new g0(new bu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return al.forKey(e,this.firestore,null)}}class BU{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new UD(t)}get(t){const e=rm(t);return this._delegate.get(e).then(i=>new m0(this._firestore,new Qd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=rm(t);return i?(pP("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=rm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=rm(t);return this._delegate.delete(e),this}}class HU{constructor(t){this._delegate=t}set(t,e,i){const r=rm(t);return i?(pP("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const o=rm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){const e=rm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class im{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new f0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _0(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=im.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new im(t,new UD(t),e),r.set(e,o)),o}}im.INSTANCES=new WeakMap;class al{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new UD(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new al(e,new mi(e._delegate,i,new st(t)))}static forKey(t,e,i){return new al(e,new mi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new nv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new nv(this.firestore,rU(this._delegate,t))}catch(e){throw eo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof mi&&sU(this._delegate,t)}set(t,e){e=pP("DocumentReference.set",e);try{return e?MU(this._delegate,t,e):MU(this._delegate,t)}catch(i){throw eo(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?RU(this._delegate,t):RU(this._delegate,t,e,...i)}catch(r){throw eo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function j7(n){return tv(vn(n.firestore,_i),[new Vy(n._key,Ai.none())])}(this._delegate)}onSnapshot(...t){const e=UU(t),i=zU(t,r=>new m0(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return OU(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function B7(n){n=vn(n,mi);const t=vn(n.firestore,_i),e=tr(t),i=new Mp(t);return function r7(n,t){const e=new Ir;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,o,l){try{const d=yield function(f,y){const w=lt(f);return w.persistence.runTransaction("read document","readonly",E=>w.localDocuments.getDocument(E,y))}(r,o);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Le(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Ky(d,`Failed to get document '${o} from cache`);l.reject(f)}}),function(r,o,l){return i.apply(this,arguments)})(yield AD(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Qd(t,i,n._key,r,new nm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function H7(n){n=vn(n,mi);const t=vn(n.firestore,_i);return dU(tr(t),n._key,{source:"server"}).then(e=>hP(t,n,e))}(this._delegate):function V7(n){n=vn(n,mi);const t=vn(n.firestore,_i);return dU(tr(t),n._key).then(e=>hP(t,n,e))}(this._delegate),e.then(i=>new m0(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new al(this.firestore,this._delegate.withConverter(t?im.getInstance(this.firestore,t):null))}}function eo(n,t,e){return n.message=n.message.replace(t,e),n}function UU(n){for(const t of n)if("object"==typeof t&&!fP(t))return t;return{}}function zU(n,t){var e,i;let r;return r=fP(n[0])?n[0]:fP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class m0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new al(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return AU(this._delegate,t._delegate)}}class _0 extends m0{data(t){const e=this._delegate.data(t);return function oY(n,t){n||mt()}(void 0!==e),e}}class to{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new UD(t)}where(t,e,i){try{return new to(this.firestore,kp(this._delegate,function x7(n,t,e){const i=t,r=LD("where",n);return p0._create(r,i,e)}(t,e,i)))}catch(r){throw eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new to(this.firestore,kp(this._delegate,function k7(n,t="asc"){const e=t,i=LD("orderBy",n);return uP._create(i,e)}(t,e)))}catch(i){throw eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new to(this.firestore,kp(this._delegate,function A7(n){return eU("limit",n),FD._create("limit",n,"F")}(t)))}catch(e){throw eo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new to(this.firestore,kp(this._delegate,function M7(n){return eU("limitToLast",n),FD._create("limitToLast",n,"L")}(t)))}catch(e){throw eo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new to(this.firestore,kp(this._delegate,function R7(...n){return VD._create("startAt",n,!0)}(...t)))}catch(e){throw eo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new to(this.firestore,kp(this._delegate,function O7(...n){return VD._create("startAfter",n,!1)}(...t)))}catch(e){throw eo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new to(this.firestore,kp(this._delegate,function P7(...n){return BD._create("endBefore",n,!1)}(...t)))}catch(e){throw eo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new to(this.firestore,kp(this._delegate,function N7(...n){return BD._create("endAt",n,!0)}(...t)))}catch(e){throw eo(e,"endAt()","Query.endAt()")}}isEqual(t){return WO(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function z7(n){n=vn(n,as);const t=vn(n.firestore,_i),e=tr(t),i=new Mp(t);return function s7(n,t){const e=new Ir;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(i=(0,we.Z)(function*(r,o,l){try{const d=yield bD(r,o,!0),f=new GH(o,d.Hi),y=f.Wu(d.documents),w=f.applyChanges(y,!1);l.resolve(w.snapshot)}catch(d){const f=Ky(d,`Failed to execute query '${o} against cache`);l.reject(f)}}),function(r,o,l){return i.apply(this,arguments)})(yield AD(n),t,e);var i})),e.promise}(e,n._query).then(r=>new Ap(t,i,n,r))}(this._delegate):"server"===t?.source?function G7(n){n=vn(n,as);const t=vn(n.firestore,_i),e=tr(t),i=new Mp(t);return hU(e,n._query,{source:"server"}).then(r=>new Ap(t,i,n,r))}(this._delegate):function U7(n){n=vn(n,as);const t=vn(n.firestore,_i),e=tr(t),i=new Mp(t);return TU(n._query),hU(e,n._query).then(r=>new Ap(t,i,n,r))}(this._delegate),e.then(i=>new gP(this.firestore,new Ap(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=UU(t),i=zU(t,r=>new gP(this.firestore,new Ap(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return OU(this._delegate,e,i)}withConverter(t){return new to(this.firestore,this._delegate.withConverter(t?im.getInstance(this.firestore,t):null))}}class oJ{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new _0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new to(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new _0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new oJ(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new _0(this._firestore,i))})}isEqual(t){return AU(this._delegate,t._delegate)}}class nv extends to{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new al(this.firestore,t):null}doc(t){try{return new al(this.firestore,void 0===t?DD(this._delegate):DD(this._delegate,t))}catch(e){throw eo(e,"doc()","CollectionReference.doc()")}}add(t){return function $7(n,t){const e=vn(n.firestore,_i),i=DD(n),r=HD(n.converter,t);return tv(e,[OD(em(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ai.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new al(this.firestore,e))}isEqual(t){return sU(this._delegate,t._delegate)}withConverter(t){return new nv(this.firestore,this._delegate.withConverter(t?im.getInstance(this.firestore,t):null))}}function rm(n){return vn(n,mi)}class mP{constructor(...t){this._delegate=new Yd(...t)}static documentId(){return new mP(Ui.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof Yd&&this._delegate._internalPath.isEqual(t._internalPath)}}class sm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function Q7(){return new rP("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new sm(t)}static delete(){const t=function Y7(){return new u0("deleteField")}();return t._methodName="FieldValue.delete",new sm(t)}static arrayUnion(...t){const e=function J7(...n){return new T7("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new sm(e)}static arrayRemove(...t){const e=function X7(...n){return new E7("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new sm(e)}static increment(t){const e=function eJ(n){return new S7("increment",n)}(t);return e._methodName="FieldValue.increment",new sm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const aJ={Firestore:VU,GeoPoint:MD,Timestamp:ki,Blob:g0,Transaction:BU,WriteBatch:HU,DocumentReference:al,DocumentSnapshot:m0,Query:to,QueryDocumentSnapshot:_0,QuerySnapshot:gP,CollectionReference:nv,FieldPath:mP,FieldValue:sm,setLogLevel:function sJ(n){!function sY(n){gp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function GU(n,t){return function uJ(n,t=Nf.z){return new Oi.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function _P(n,t){return GU(n,t).pipe((0,gt.U)(e=>({payload:e,type:"query"})))}function zD(n,t){return _P(n,t).pipe(Vs(void 0),mM(),(0,gt.U)(([e,i])=>{const r=i.payload.docChanges(),o=r.map(l=>({type:l.type,payload:l}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const f=r.find(w=>w.doc.ref.isEqual(l.ref)),y=e?.payload.docs.find(w=>w.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),o}))}function jU(n,t,e){return zD(n,e).pipe(li((i,r)=>function hJ(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function pJ(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return yP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return yP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return yP(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),t),[]),KT(),(0,gt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function yP(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function $U(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function cJ(n){(function lJ(n,t){n.INTERNAL.registerComponent(new Xr.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},aJ)))})(n,(t,e)=>new VU(t,e,new rJ)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(Hf.Z);class ZU{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=zD(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,gt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Vs(void 0),mM(),Jr(([i,r])=>r.length>0||!i),(0,gt.U)(([i,r])=>r),ri.iC)}auditTrail(t){return this.stateChanges(t).pipe(li((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=$U(t);return jU(this.query,e,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(t={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),ri.iC)}get(t){return(0,Qe.D)(this.query.get(t)).pipe(ri.iC)}add(t){return this.ref.add(t)}doc(t){return new qU(this.ref.doc(t),this.afs)}}class qU{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:o}=YU(i,e);return new ZU(r,o,this.afs)}snapshotChanges(){return function dJ(n,t){return GU(n,t).pipe(Vs(void 0),mM(),(0,gt.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Qe.D)(this.ref.get(t)).pipe(ri.iC)}}class fJ{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zD(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Jr(e=>e.length>0),ri.iC):zD(this.query,this.afs.schedulers.outsideAngular).pipe(ri.iC)}auditTrail(t){return this.stateChanges(t).pipe(li((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=$U(t);return jU(this.query,e,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(t={}){return _P(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),ri.iC)}get(t){return(0,Qe.D)(this.query.get(t)).pipe(ri.iC)}}const WU=new s.OlP("angularfire2.enableFirestorePersistence"),KU=new s.OlP("angularfire2.firestore.persistenceSettings"),gJ=new s.OlP("angularfire2.firestore.settings"),mJ=new s.OlP("angularfire2.firestore.use-emulator");function YU(n,t=(e=>e)){return{query:t(n),ref:n}}let vP=(()=>{class n{constructor(e,i,r,o,l,d,f,y,w,E,M,N,B,j,Q,Ne,$e){this.schedulers=f;const Ze=(0,bs.on)(e,d,i),et=w;E&&UA(Ze,d,M,B,j,Q,N,Ne),[this.firestore,this.persistenceEnabled$]=(0,bs.cc)(`${Ze.name}.firestore`,"AngularFirestore",Ze.name,()=>{const vt=d.runOutsideAngular(()=>Ze.firestore());if(o&&vt.settings(o),et&&vt.useEmulator(...et),r&&!uc(l)){const Ct=()=>{try{return(0,Qe.D)(vt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),Pe(!1)}};return[vt,d.runOutsideAngular(Ct)]}return[vt,Pe(!1)]},[o,et,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:l}=YU(r,i),d=this.schedulers.ngZone.run(()=>o);return new ZU(d,l,this)}collectionGroup(e,i){const r=i||(l=>l),o=this.firestore.collectionGroup(e);return new fJ(r(o),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new qU(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(bs.Dh),s.LFG(bs.xv,8),s.LFG(WU,8),s.LFG(gJ,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(ri.HU),s.LFG(KU,8),s.LFG(mJ,8),s.LFG(zA,8),s.LFG(NA,8),s.LFG(LA,8),s.LFG(FA,8),s.LFG(VA,8),s.LFG(BA,8),s.LFG(HA,8),s.LFG(tI,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_J=(()=>{class n{constructor(){pL.Z.registerVersion("angularfire",ri.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:WU,useValue:!0},{provide:KU,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[vP]}),n})();class iv{constructor(t){this.firestore=t}getPackings(){var t=this;return(0,we.Z)(function*(){return(yield t.firestore.collection("packings").get().toPromise()).docs.map(i=>i.data())})()}getOracles(){var t=this;return(0,we.Z)(function*(){return(yield t.firestore.collection("oracle").get().toPromise()).docs.map(i=>i.data())})()}}function yJ(n,t){1&n&&(s.TgZ(0,"tr")(1,"th",4),s._uU(2,"#"),s.qZA(),s.TgZ(3,"th"),s._uU(4,"Oracle ID"),s.qZA(),s.TgZ(5,"th"),s._uU(6,"Packing List ID"),s.qZA(),s.TgZ(7,"th"),s._uU(8,"Packing List Disc."),s.qZA()())}function vJ(n,t){if(1&n&&(s.TgZ(0,"td")(1,"span",6),s._uU(2),s.qZA()()),2&n){const e=s.oxw(),r=e.$implicit;s.uIk("rowspan",e.rowspan),s.xp6(2),s.Oqu(r.oracleNo)}}function bJ(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.YNc(3,vJ,3,2,"td",5),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.TgZ(6,"td"),s._uU(7),s.qZA()()),2&n){const e=t.$implicit,i=t.rowIndex,r=t.rowgroup;s.xp6(2),s.Oqu(i+1),s.xp6(1),s.Q6J("ngIf",r),s.xp6(2),s.hij(" ",e.id," "),s.xp6(2),s.hij(" ",e.test," ")}}iv.\u0275fac=function(t){return new(t||iv)(s.LFG(vP))},iv.\u0275prov=s.Yz7({token:iv,factory:iv.\u0275fac,providedIn:"root"});const wJ=function(){return{"min-width":"75rem"}};class y0{constructor(t){this.firebaseService=t}ngOnInit(){var t=this;return(0,we.Z)(function*(){t.packings=yield t.firebaseService.getPackings(),t.oracles=yield t.firebaseService.getOracles(),t.oracles=t.getPackingLists(t.oracles,t.packings)})()}getPackingLists(t,e){return t.forEach(i=>{i.packings=[],i.pl.forEach(r=>{const o=e.find(l=>l.id===r);o.oracleNo=i.test,o&&i.packings.push(o)})}),t}}y0.\u0275fac=function(t){return new(t||y0)(s.Y36(iv))},y0.\u0275cmp=s.Xpm({type:y0,selectors:[["app-test"]],decls:4,vars:3,consts:[[1,"card"],["rowGroupMode","rowspan","groupRowsBy","oracleNo",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","3rem"],[4,"ngIf"],[1,"font-bold","ml-2"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0)(1,"p-table",1),s.YNc(2,yJ,9,0,"ng-template",2),s.YNc(3,bJ,8,4,"ng-template",3),s.qZA()()),2&t&&(s.xp6(1),s.Q6J("value",e.packings)("tableStyle",s.DdM(2,wJ)))},dependencies:[pn,ne,pu],styles:[".product-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;width:100%}.product-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;margin-right:1rem}.product-item[_ngcontent-%COMP%]   .product-list-detail[_ngcontent-%COMP%]{flex:1 1 0}.product-item[_ngcontent-%COMP%]   .product-list-action[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.product-item[_ngcontent-%COMP%]   .product-category-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:.5rem}.product-item[_ngcontent-%COMP%]   .product-category[_ngcontent-%COMP%]{vertical-align:middle;line-height:1}@media screen and (max-width: 576px){.product-item[_ngcontent-%COMP%]{flex-wrap:wrap}.product-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:100%;text-align:center}.product-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 0 1rem;width:100px}}"]});class rv{constructor(t){this.firestore=t}getPackings(){return this.firestore.collection("packings").snapshotChanges().pipe((0,gt.U)(e=>e.map(i=>i.payload.doc.data())))}getOracles(){return this.firestore.collection("oracle").snapshotChanges().pipe((0,gt.U)(e=>e.map(i=>i.payload.doc.data())))}}function CJ(n,t){if(1&n&&(s.TgZ(0,"li"),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.hij(" ",e.test," ")}}function TJ(n,t){if(1&n&&(s.TgZ(0,"div")(1,"h2"),s._uU(2),s.qZA(),s.TgZ(3,"ul"),s.YNc(4,CJ,2,1,"li",0),s.qZA()()),2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e.test),s.xp6(2),s.Q6J("ngForOf",e.packings)}}rv.\u0275fac=function(t){return new(t||rv)(s.LFG(vP))},rv.\u0275prov=s.Yz7({token:rv,factory:rv.\u0275fac,providedIn:"root"});class v0{constructor(t){this.firebaseService=t}ngOnInit(){wm([this.firebaseService.getPackings(),this.firebaseService.getOracles()]).pipe((0,gt.U)(([i,r])=>r.map(o=>{const l=i.filter(d=>o.pl.includes(d.id));return{...o,packings:l}}))).subscribe(i=>{this.oracles=i})}}v0.\u0275fac=function(t){return new(t||v0)(s.Y36(rv))},v0.\u0275cmp=s.Xpm({type:v0,selectors:[["app-test2"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&s.YNc(0,TJ,5,2,"div",0),2&t&&s.Q6J("ngForOf",e.oracles)},dependencies:[Ln]});class b0{}b0.\u0275fac=function(t){return new(t||b0)},b0.\u0275cmp=s.Xpm({type:b0,selectors:[["app-test3"]],decls:0,vars:0,template:function(t,e){}});const EJ=[{path:"",redirectTo:"/",pathMatch:"full"},{path:"packing",component:cC},{path:"oracle",component:lC},{path:"invoice",component:rC},{path:"shipment",component:uC},{path:"addresses",component:dC},{path:"t",component:Qw},{path:"add-t",component:Kw},{path:"test",component:y0},{path:"test2",component:v0},{path:"test3",component:b0}];class sv{}function QU(n){return new s.vHH(3e3,!1)}function s9(){return typeof window<"u"&&typeof window.document<"u"}function bP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Op(n){switch(n.length){case 0:return new tC;case 1:return n[0];default:return new OF(n)}}function JU(n,t,e,i,r=new Map,o=new Map){const l=[],d=[];let f=-1,y=null;if(i.forEach(w=>{const E=w.get("offset"),M=E==f,N=M&&y||new Map;w.forEach((B,j)=>{let Q=j,Ne=B;if("offset"!==j)switch(Q=t.normalizePropertyName(Q,l),Ne){case"!":Ne=r.get(j);break;case zd:Ne=o.get(j);break;default:Ne=t.normalizeStyleValue(j,Q,Ne,l)}N.set(Q,Ne)}),M||d.push(N),y=N,f=E}),l.length)throw function qJ(n){return new s.vHH(3502,!1)}();return d}function wP(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&CP(e,"start",n)));break;case"done":n.onDone(()=>i(e&&CP(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&CP(e,"destroy",n)))}}function CP(n,t,e){const o=TP(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),l=n._data;return null!=l&&(o._data=l),o}function TP(n,t,e,i,r="",o=0,l){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!l}}function pa(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function XU(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}sv.\u0275fac=function(t){return new(t||sv)},sv.\u0275mod=s.oAB({type:sv}),sv.\u0275inj=s.cJS({imports:[Of.forRoot(EJ),Of]});let EP=(n,t)=>!1,e3=(n,t,e)=>[],t3=null;function SP(n){const t=n.parentNode||n.host;return t===t3?null:t}(bP()||typeof Element<"u")&&(s9()?(t3=(()=>document.documentElement)(),EP=(n,t)=>{for(;t;){if(t===n)return!0;t=SP(t)}return!1}):EP=(n,t)=>n.contains(t),e3=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let om=null,n3=!1;const r3=EP,s3=e3;let o3=(()=>{class n{validateStyleProperty(e){return function a9(n){om||(om=function l9(){return typeof document<"u"?document.body:null}()||{},n3=!!om.style&&"WebkitAppearance"in om.style);let t=!0;return om.style&&!function o9(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in om.style,!t&&n3&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in om.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return r3(e,i)}getParentElement(e){return SP(e)}query(e,i,r){return s3(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,l,d=[],f){return new tC(r,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),IP=(()=>{class n{}return n.NOOP=new o3,n})();const DP="ng-enter",GD="ng-leave",jD="ng-trigger",$D=".ng-trigger",l3="ng-animating",xP=".ng-animating";function Jd(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:kP(parseFloat(t[1]),t[2])}function kP(n,t){return"s"===t?1e3*n:n}function ZD(n,t,e){return n.hasOwnProperty("duration")?n:function d9(n,t,e){let r,o=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(QU()),{duration:0,delay:0,easing:""};r=kP(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(o=kP(parseFloat(f),d[4]));const y=d[5];y&&(l=y)}else r=n;if(!e){let d=!1,f=t.length;r<0&&(t.push(function SJ(){return new s.vHH(3100,!1)}()),d=!0),o<0&&(t.push(function IJ(){return new s.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,QU())}return{duration:r,delay:o,easing:l}}(n,t,e)}function w0(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function c3(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Pp(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function d3(n,t,e){return e?t+":"+e+";":""}function h3(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=d3(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=d3(0,g9(e),n.style[e]));n.setAttribute("style",t)}function wu(n,t,e){n.style&&(t.forEach((i,r)=>{const o=MP(r);e&&!e.has(r)&&e.set(r,n.style[o]),n.style[o]=i}),bP()&&h3(n))}function am(n,t){n.style&&(t.forEach((e,i)=>{const r=MP(i);n.style[r]=""}),bP()&&h3(n))}function C0(n){return Array.isArray(n)?1==n.length?n[0]:kF(n):n}const AP=new RegExp("{{\\s*(.+?)\\s*}}","g");function p3(n){let t=[];if("string"==typeof n){let e;for(;e=AP.exec(n);)t.push(e[1]);AP.lastIndex=0}return t}function T0(n,t,e){const i=n.toString(),r=i.replace(AP,(o,l)=>{let d=t[l];return null==d&&(e.push(function xJ(n){return new s.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function qD(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const f9=/-+([a-z0-9])/g;function MP(n){return n.replace(f9,(...t)=>t[1].toUpperCase())}function g9(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function kJ(n){return new s.vHH(3004,!1)}()}}function f3(n,t){return window.getComputedStyle(n)[t]}function w9(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function C9(n,t,e){if(":"==n[0]){const f=function T9(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function GJ(n){return new s.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function zJ(n){return new s.vHH(3015,!1)}()),t;const r=i[1],o=i[2],l=i[3];t.push(g3(r,l));"<"==o[0]&&!("*"==r&&"*"==l)&&t.push(g3(l,r))}(i,e,t)):e.push(n),e}const QD=new Set(["true","1"]),JD=new Set(["false","0"]);function g3(n,t){const e=QD.has(n)||JD.has(n),i=QD.has(t)||JD.has(t);return(r,o)=>{let l="*"==n||n==r,d="*"==t||t==o;return!l&&e&&"boolean"==typeof r&&(l=r?QD.has(n):JD.has(n)),!d&&i&&"boolean"==typeof o&&(d=o?QD.has(t):JD.has(t)),l&&d}}const E9=new RegExp("s*:selfs*,?","g");function RP(n,t,e,i){return new S9(n).build(t,e,i)}class S9{constructor(t){this._driver=t}build(t,e,i){const r=new x9(e);return this._resetContextStyleTimingState(r),fa(this,C0(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],l=[];return"@"==t.name.charAt(0)&&e.errors.push(function MJ(){return new s.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(w=>{f.name=w,o.push(this.visitState(f,e))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,e);i+=f.queryCount,r+=f.depCount,l.push(f)}else e.errors.push(function RJ(){return new s.vHH(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:l,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const o=new Set,l=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{p3(f).forEach(y=>{l.hasOwnProperty(y)||o.add(y)})})}),o.size&&(qD(o.values()),e.errors.push(function OJ(n,t){return new s.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=fa(this,C0(t.animation),e);return{type:1,matchers:w9(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:lm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>fa(this,i,e)),options:lm(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const o=t.steps.map(l=>{e.currentTime=i;const d=fa(this,l,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:o,options:lm(t.options)}}visitAnimate(t,e){const i=function A9(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return OP(ZD(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=OP(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=ZD(e,t);return OP(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,o=t.styles?t.styles:ns({});if(5==o.type)r=this.visitKeyframes(o,e);else{let l=t.styles,d=!1;if(!l){d=!0;const y={};i.easing&&(y.easing=i.easing),l=ns(y)}e.currentTime+=i.duration+i.delay;const f=this.visitStyle(l,e);f.isEmptyStep=d,r=f}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===zd?i.push(d):e.errors.push(new s.vHH(3002,!1)):i.push(c3(d));let o=!1,l=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!o))for(let f of d.values())if(f.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:l,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,f)=>{const y=e.collectedStyles.get(e.currentQuerySelector),w=y.get(f);let E=!0;w&&(o!=r&&o>=w.startTime&&r<=w.endTime&&(e.errors.push(function NJ(n,t,e,i,r){return new s.vHH(3010,!1)}()),E=!1),o=w.startTime),E&&y.set(f,{startTime:o,endTime:r}),e.options&&function p9(n,t,e){const i=t.params||{},r=p3(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function DJ(n){return new s.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function LJ(){return new s.vHH(3011,!1)}()),i;let o=0;const l=[];let d=!1,f=!1,y=0;const w=t.steps.map(Ne=>{const $e=this._makeStyleAst(Ne,e);let Ze=null!=$e.offset?$e.offset:function k9(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}($e.styles),et=0;return null!=Ze&&(o++,et=$e.offset=Ze),f=f||et<0||et>1,d=d||et<y,y=et,l.push(et),$e});f&&e.errors.push(function FJ(){return new s.vHH(3012,!1)}()),d&&e.errors.push(function VJ(){return new s.vHH(3200,!1)}());const E=t.steps.length;let M=0;o>0&&o<E?e.errors.push(function BJ(){return new s.vHH(3202,!1)}()):0==o&&(M=1/(E-1));const N=E-1,B=e.currentTime,j=e.currentAnimateTimings,Q=j.duration;return w.forEach((Ne,$e)=>{const Ze=M>0?$e==N?1:M*$e:l[$e],et=Ze*Q;e.currentTime=B+j.delay+et,j.duration=et,this._validateStyleAst(Ne,e),Ne.offset=Ze,i.styles.push(Ne)}),i}visitReference(t,e){return{type:8,animation:fa(this,C0(t.animation),e),options:lm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:lm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:lm(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,l]=function I9(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(E9,"")),n=n.replace(/@\*/g,$D).replace(/@\w+/g,e=>$D+"-"+e.slice(1)).replace(/:animating/g,xP),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+o:o,pa(e.collectedStyles,e.currentQuerySelector,new Map);const d=fa(this,C0(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:t.selector,options:lm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function HJ(){return new s.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:ZD(t.timings,e.errors,!0);return{type:12,animation:fa(this,C0(t.animation),e),timings:i,options:null}}}class x9{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function lm(n){return n?(n=w0(n)).params&&(n.params=function D9(n){return n?w0(n):null}(n.params)):n={},n}function OP(n,t,e){return{duration:n,delay:t,easing:e}}function PP(n,t,e,i,r,o,l=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:l,subTimeline:d}}class XD{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const O9=new RegExp(":enter","g"),N9=new RegExp(":leave","g");function NP(n,t,e,i,r,o=new Map,l=new Map,d,f,y=[]){return(new L9).buildKeyframes(n,t,e,i,r,o,l,d,f,y)}class L9{buildKeyframes(t,e,i,r,o,l,d,f,y,w=[]){y=y||new XD;const E=new LP(t,e,y,r,o,w,[]);E.options=f;const M=f.delay?Jd(f.delay):0;E.currentTimeline.delayNextStep(M),E.currentTimeline.setStyles([l],null,E.errors,f),fa(this,i,E);const N=E.timelines.filter(B=>B.containsAnimation());if(N.length&&d.size){let B;for(let j=N.length-1;j>=0;j--){const Q=N[j];if(Q.element===e){B=Q;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([d],null,E.errors,f)}return N.length?N.map(B=>B.buildKeyframes()):[PP(e,[],[],[],0,M,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);o!=l&&e.transformIntoNewTimeline(l)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,i){for(const r of t){const o=r?.delay;if(o){const l="number"==typeof o?o:Jd(T0(o,r?.params??{},e.errors));i.delayNextStep(l)}}}_visitSubInstructions(t,e,i){let o=e.currentTimeline.currentTime;const l=null!=i.duration?Jd(i.duration):null,d=null!=i.delay?Jd(i.delay):null;return 0!==l&&t.forEach(f=>{const y=e.appendInstructionToTimeline(f,l,d);o=Math.max(o,y.duration+y.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),fa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ex);const l=Jd(o.delay);r.delayNextStep(l)}t.steps.length&&(t.steps.forEach(l=>fa(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Jd(t.options.delay):0;t.steps.forEach(l=>{const d=e.createSubContext(t.options);o&&d.delayNextStep(o),fa(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>e.currentTimeline.mergeTimelineCollectedStyles(l)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return ZD(e.params?T0(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(o):i.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*o),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Jd(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ex);let l=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((y,w)=>{e.currentQueryIndex=w;const E=e.createSubContext(t.options,y);o&&E.delayNextStep(o),y===e.element&&(f=E.currentTimeline),fa(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(l),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,o=t.timings,l=Math.abs(o.duration),d=l*(e.currentQueryTotal-1);let f=l*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const w=e.currentTimeline;f&&w.delayNextStep(f);const E=w.currentTime;fa(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}}const ex={};class LP{constructor(t,e,i,r,o,l,d,f){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ex,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new tx(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Jd(i.duration)),null!=i.delay&&(r.delay=Jd(i.delay));const o=i.params;if(o){let l=r.params;l||(l=this.options.params={}),Object.keys(o).forEach(d=>{(!e||!l.hasOwnProperty(d))&&(l[d]=T0(o[d],l,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,o=new LP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=ex,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},o=new F9(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,o,l){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(O9,"."+this._enterClassName)).replace(N9,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!o&&0==d.length&&l.push(function UJ(n){return new s.vHH(3014,!1)}()),d}}class tx{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new tx(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||zd),this._currentKeyframe.set(e,zd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},l=function V9(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let o of i)e.set(o,zd)}else Pp(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of l){const y=T0(f,o,i);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??zd),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const y=Pp(d,new Map,this._backFill);y.forEach((w,E)=>{"!"===w?t.add(E):w===zd&&e.add(E)}),i||y.set("offset",f/this.duration),r.push(y)});const o=t.size?qD(t.values()):[],l=e.size?qD(e.values()):[];if(i){const d=r[0],f=new Map(d);d.set("offset",0),f.set("offset",1),r=[d,f]}return PP(this.element,r,o,l,this.duration,this.startTime,this.easing,!1)}}class F9 extends tx{constructor(t,e,i,r,o,l,d=!1){super(t,e,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],l=i+e,d=e/l,f=Pp(t[0]);f.set("offset",0),o.push(f);const y=Pp(t[0]);y.set("offset",y3(d)),o.push(y);const w=t.length-1;for(let E=1;E<=w;E++){let M=Pp(t[E]);const N=M.get("offset");M.set("offset",y3((e+N*i)/l)),o.push(M)}i=l,e=0,r="",t=o}return PP(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function y3(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class FP{}const B9=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class H9 extends FP{normalizePropertyName(t,e){return MP(t)}normalizeStyleValue(t,e,i,r){let o="";const l=i.toString().trim();if(B9.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function AJ(n,t){return new s.vHH(3005,!1)}())}return l+o}}function v3(n,t,e,i,r,o,l,d,f,y,w,E,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:l,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:w,totalTime:E,errors:M}}const VP={};class b3{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function U9(n,t,e,i,r){return n.some(o=>o(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,o,l,d,f,y,w){const E=[],M=this.ast.options&&this.ast.options.params||VP,B=this.buildStyles(i,d&&d.params||VP,E),j=f&&f.params||VP,Q=this.buildStyles(r,j,E),Ne=new Set,$e=new Map,Ze=new Map,et="void"===r,vt={params:z9(j,M),delay:this.ast.options?.delay},Ct=w?[]:NP(t,e,this.ast.animation,o,l,B,Q,vt,y,E);let ln=0;if(Ct.forEach(nr=>{ln=Math.max(nr.duration+nr.delay,ln)}),E.length)return v3(e,this._triggerName,i,r,et,B,Q,[],[],$e,Ze,ln,E);Ct.forEach(nr=>{const no=nr.element,bz=pa($e,no,new Set);nr.preStyleProps.forEach(um=>bz.add(um));const M0=pa(Ze,no,new Set);nr.postStyleProps.forEach(um=>M0.add(um)),no!==e&&Ne.add(no)});const yi=qD(Ne.values());return v3(e,this._triggerName,i,r,et,B,Q,Ct,yi,$e,Ze,ln)}}function z9(n,t){const e=w0(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class G9{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=w0(this.defaultParams);return Object.keys(t).forEach(o=>{const l=t[o];null!==l&&(r[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,d)=>{l&&(l=T0(l,r,e));const f=this.normalizer.normalizePropertyName(d,e);l=this.normalizer.normalizeStyleValue(d,f,l,e),i.set(d,l)})}),i}}class $9{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new G9(r.style,r.options&&r.options.params||{},i))}),w3(this.states,"true","1"),w3(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new b3(t,r,this.states))}),this.fallbackTransition=function Z9(n,t,e){return new b3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(l=>l.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function w3(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const q9=new XD;class W9{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],o=RP(this._driver,e,i,[]);if(i.length)throw function WJ(n){return new s.vHH(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,i){const r=t.element,o=JU(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],o=this._animations.get(t);let l;const d=new Map;if(o?(l=NP(this._driver,e,o,DP,GD,new Map,new Map,i,q9,r),l.forEach(w=>{const E=pa(d,w.element,new Map);w.postStyleProps.forEach(M=>E.set(M,null))})):(r.push(function KJ(){return new s.vHH(3300,!1)}()),l=[]),r.length)throw function YJ(n){return new s.vHH(3504,!1)}();d.forEach((w,E)=>{w.forEach((M,N)=>{w.set(N,this._driver.computeStyle(E,N,zd))})});const y=Op(l.map(w=>{const E=d.get(w.element);return this._buildPlayer(w,new Map,E)}));return this._playersById.set(t,y),y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function QJ(n){return new s.vHH(3301,!1)}();return e}listen(t,e,i,r){const o=TP(e,"","","");return wP(this._getPlayer(t),i,o,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const C3="ng-animate-queued",BP="ng-animate-disabled",X9=[],T3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},eX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ll="__ng_removed";class HP{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function rX(n){return n??null}(i?t.value:t),i){const o=w0(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const E0="void",UP=new HP(E0);class tX{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,cl(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function JJ(n,t){return new s.vHH(3302,!1)}();if(null==i||0==i.length)throw function XJ(n){return new s.vHH(3303,!1)}();if(!function sX(n){return"start"==n||"done"==n}(i))throw function e9(n,t){return new s.vHH(3400,!1)}();const o=pa(this._elementListeners,t,[]),l={name:e,phase:i,callback:r};o.push(l);const d=pa(this._engine.statesByElement,t,new Map);return d.has(e)||(cl(t,jD),cl(t,jD+"-"+e),d.set(e,UP)),()=>{this._engine.afterFlush(()=>{const f=o.indexOf(l);f>=0&&o.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function t9(n){return new s.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const o=this._getTrigger(e),l=new zP(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(cl(t,jD),cl(t,jD+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const y=new HP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d.set(e,y),f||(f=UP),y.value!==E0&&f.value===y.value){if(!function lX(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(f.params,y.params)){const j=[],Q=o.matchStyles(f.value,f.params,j),Ne=o.matchStyles(y.value,y.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{am(t,Q),wu(t,Ne)})}return}const M=pa(this._engine.playersByElement,t,[]);M.forEach(j=>{j.namespaceId==this.id&&j.triggerName==e&&j.queued&&j.destroy()});let N=o.matchTransition(f.value,y.value,t,y.params),B=!1;if(!N){if(!r)return;N=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:f,toState:y,player:l,isFallbackTransition:B}),B||(cl(t,C3),l.onStart(()=>{ov(t,C3)})),l.onDone(()=>{let j=this.players.indexOf(l);j>=0&&this.players.splice(j,1);const Q=this._engine.playersByElement.get(t);if(Q){let Ne=Q.indexOf(l);Ne>=0&&Q.splice(Ne,1)}}),this.players.push(l),M.push(l),l}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,$D,!0);i.forEach(r=>{if(r[ll])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(l=>l.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const o=this._engine.statesByElement.get(t),l=new Map;if(o){const d=[];if(o.forEach((f,y)=>{if(l.set(y,f.value),this._triggers.has(y)){const w=this.trigger(t,y,E0,r);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,l),i&&Op(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(o=>{const l=o.name;if(r.has(l))return;r.add(l);const f=this._triggers.get(l).fallbackTransition,y=i.get(l)||UP,w=new HP(E0),E=new zP(this.id,l,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:l,transition:f,fromState:y,toState:w,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let l=t;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const o=t[ll];(!o||o===T3)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){cl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,l=this._elementListeners.get(o);l&&l.forEach(d=>{if(d.name==i.triggerName){const f=TP(o,i.triggerName,i.fromState.value,i.toState.value);f._data=t,wP(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class nX{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new tX(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,d=this.driver.getParentElement(e);for(;d;){const f=r.get(d);if(f){const y=i.indexOf(f);i.splice(y+1,0,t),l=!0;break}d=this.driver.getParentElement(d)}l||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(t,e,i,r){if(nx(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!nx(e))return;const o=e[ll];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(e);l>=0&&this.collectedLeaveElements.splice(l,1)}if(t){const l=this._fetchNamespace(t);l&&l.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),cl(t,BP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ov(t,BP))}removeNode(t,e,i,r){if(nx(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const l=this.namespacesByHostElement.get(e);l&&l.id!==t&&l.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,o){this.collectedLeaveElements.push(e),e[ll]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,i,r,o){return nx(e)?this._fetchNamespace(t).listen(e,i,r,o):()=>{}}_buildInstruction(t,e,i,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,$D,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,xP,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Op(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ll];if(e&&e.setForRemoval){if(t[ll]=T3,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(BP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)cl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Op(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function n9(n){return new s.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new XD,r=[],o=new Map,l=[],d=new Map,f=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(Et=>{w.add(Et);const Ht=this.driver.query(Et,".ng-animate-queued",!0);for(let $t=0;$t<Ht.length;$t++)w.add(Ht[$t])});const E=this.bodyNode,M=Array.from(this.statesByElement.keys()),N=I3(M,this.collectedEnterElements),B=new Map;let j=0;N.forEach((Et,Ht)=>{const $t=DP+j++;B.set(Ht,$t),Et.forEach(An=>cl(An,$t))});const Q=[],Ne=new Set,$e=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const Ht=this.collectedLeaveElements[Et],$t=Ht[ll];$t&&$t.setForRemoval&&(Q.push(Ht),Ne.add(Ht),$t.hasAnimation?this.driver.query(Ht,".ng-star-inserted",!0).forEach(An=>Ne.add(An)):$e.add(Ht))}const Ze=new Map,et=I3(M,Array.from(Ne));et.forEach((Et,Ht)=>{const $t=GD+j++;Ze.set(Ht,$t),Et.forEach(An=>cl(An,$t))}),t.push(()=>{N.forEach((Et,Ht)=>{const $t=B.get(Ht);Et.forEach(An=>ov(An,$t))}),et.forEach((Et,Ht)=>{const $t=Ze.get(Ht);Et.forEach(An=>ov(An,$t))}),Q.forEach(Et=>{this.processLeaveNode(Et)})});const vt=[],Ct=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(e).forEach($t=>{const An=$t.player,zr=$t.element;if(vt.push(An),this.collectedEnterElements.length){const xs=zr[ll];if(xs&&xs.setForMove){if(xs.previousTriggersValues&&xs.previousTriggersValues.has($t.triggerName)){const dm=xs.previousTriggersValues.get($t.triggerName),ul=this.statesByElement.get($t.element);if(ul&&ul.has($t.triggerName)){const fx=ul.get($t.triggerName);fx.value=dm,ul.set($t.triggerName,fx)}}return void An.destroy()}}const Cu=!E||!this.driver.containsElement(E,zr),ga=Ze.get(zr),Lp=B.get(zr),Ni=this._buildInstruction($t,i,Lp,ga,Cu);if(Ni.errors&&Ni.errors.length)return void Ct.push(Ni);if(Cu)return An.onStart(()=>am(zr,Ni.fromStyles)),An.onDestroy(()=>wu(zr,Ni.toStyles)),void r.push(An);if($t.isFallbackTransition)return An.onStart(()=>am(zr,Ni.fromStyles)),An.onDestroy(()=>wu(zr,Ni.toStyles)),void r.push(An);const Tz=[];Ni.timelines.forEach(xs=>{xs.stretchStartingKeyframe=!0,this.disabledNodes.has(xs.element)||Tz.push(xs)}),Ni.timelines=Tz,i.append(zr,Ni.timelines),l.push({instruction:Ni,player:An,element:zr}),Ni.queriedElements.forEach(xs=>pa(d,xs,[]).push(An)),Ni.preStyleProps.forEach((xs,dm)=>{if(xs.size){let ul=f.get(dm);ul||f.set(dm,ul=new Set),xs.forEach((fx,sN)=>ul.add(sN))}}),Ni.postStyleProps.forEach((xs,dm)=>{let ul=y.get(dm);ul||y.set(dm,ul=new Set),xs.forEach((fx,sN)=>ul.add(sN))})});if(Ct.length){const Et=[];Ct.forEach(Ht=>{Et.push(function i9(n,t){return new s.vHH(3505,!1)}())}),vt.forEach(Ht=>Ht.destroy()),this.reportError(Et)}const ln=new Map,yi=new Map;l.forEach(Et=>{const Ht=Et.element;i.has(Ht)&&(yi.set(Ht,Ht),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,ln))}),r.forEach(Et=>{const Ht=Et.element;this._getPreviousPlayers(Ht,!1,Et.namespaceId,Et.triggerName,null).forEach(An=>{pa(ln,Ht,[]).push(An),An.destroy()})});const nr=Q.filter(Et=>x3(Et,f,y)),no=new Map;S3(no,this.driver,$e,y,zd).forEach(Et=>{x3(Et,f,y)&&nr.push(Et)});const M0=new Map;N.forEach((Et,Ht)=>{S3(M0,this.driver,new Set(Et),f,"!")}),nr.forEach(Et=>{const Ht=no.get(Et),$t=M0.get(Et);no.set(Et,new Map([...Array.from(Ht?.entries()??[]),...Array.from($t?.entries()??[])]))});const um=[],wz=[],Cz={};l.forEach(Et=>{const{element:Ht,player:$t,instruction:An}=Et;if(i.has(Ht)){if(w.has(Ht))return $t.onDestroy(()=>wu(Ht,An.toStyles)),$t.disabled=!0,$t.overrideTotalTime(An.totalTime),void r.push($t);let zr=Cz;if(yi.size>1){let ga=Ht;const Lp=[];for(;ga=ga.parentNode;){const Ni=yi.get(ga);if(Ni){zr=Ni;break}Lp.push(ga)}Lp.forEach(Ni=>yi.set(Ni,zr))}const Cu=this._buildAnimation($t.namespaceId,An,ln,o,M0,no);if($t.setRealPlayer(Cu),zr===Cz)um.push($t);else{const ga=this.playersByElement.get(zr);ga&&ga.length&&($t.parentPlayer=Op(ga)),r.push($t)}}else am(Ht,An.fromStyles),$t.onDestroy(()=>wu(Ht,An.toStyles)),wz.push($t),w.has(Ht)&&r.push($t)}),wz.forEach(Et=>{const Ht=o.get(Et.element);if(Ht&&Ht.length){const $t=Op(Ht);Et.setRealPlayer($t)}}),r.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<Q.length;Et++){const Ht=Q[Et],$t=Ht[ll];if(ov(Ht,GD),$t&&$t.hasAnimation)continue;let An=[];if(d.size){let Cu=d.get(Ht);Cu&&Cu.length&&An.push(...Cu);let ga=this.driver.query(Ht,xP,!0);for(let Lp=0;Lp<ga.length;Lp++){let Ni=d.get(ga[Lp]);Ni&&Ni.length&&An.push(...Ni)}}const zr=An.filter(Cu=>!Cu.destroyed);zr.length?oX(this,Ht,zr):this.processLeaveNode(Ht)}return Q.length=0,um.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const Ht=this.players.indexOf(Et);this.players.splice(Ht,1)}),Et.play()}),um}elementContainsData(t,e){let i=!1;const r=e[ll];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,o){let l=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(l=d)}else{const d=this.playersByElement.get(t);if(d){const f=!o||o==E0;d.forEach(y=>{y.queued||!f&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(t,e,i){const o=e.element,l=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const y=f.element,w=y!==o,E=pa(i,y,[]);this._getPreviousPlayers(y,w,l,d,e.toState).forEach(N=>{const B=N.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),N.destroy(),E.push(N)})}am(o,e.fromStyles)}_buildAnimation(t,e,i,r,o,l){const d=e.triggerName,f=e.element,y=[],w=new Set,E=new Set,M=e.timelines.map(B=>{const j=B.element;w.add(j);const Q=j[ll];if(Q&&Q.removedBeforeQueried)return new tC(B.duration,B.delay);const Ne=j!==f,$e=function aX(n){const t=[];return D3(n,t),t}((i.get(j)||X9).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===j),Ze=o.get(j),et=l.get(j),vt=JU(0,this._normalizer,0,B.keyframes,Ze,et),Ct=this._buildPlayer(B,vt,$e);if(B.subTimeline&&r&&E.add(j),Ne){const ln=new zP(t,d,j);ln.setRealPlayer(Ct),y.push(ln)}return Ct});y.forEach(B=>{pa(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function iX(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,B.element,B))}),w.forEach(B=>cl(B,l3));const N=Op(M);return N.onDestroy(()=>{w.forEach(B=>ov(B,l3)),wu(f,e.toStyles)}),E.forEach(B=>{pa(r,B,[]).push(N)}),N}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new tC(t.duration,t.delay)}}class zP{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new tC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>wP(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){pa(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function nx(n){return n&&1===n.nodeType}function E3(n,t){const e=n.style.display;return n.style.display=t??"none",e}function S3(n,t,e,i,r){const o=[];e.forEach(f=>o.push(E3(f)));const l=[];i.forEach((f,y)=>{const w=new Map;f.forEach(E=>{const M=t.computeStyle(y,E,r);w.set(E,M),(!M||0==M.length)&&(y[ll]=eX,l.push(y))}),n.set(y,w)});let d=0;return e.forEach(f=>E3(f,o[d++])),l}function I3(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),o=new Map;function l(d){if(!d)return 1;let f=o.get(d);if(f)return f;const y=d.parentNode;return f=e.has(y)?y:r.has(y)?1:l(y),o.set(d,f),f}return t.forEach(d=>{const f=l(d);1!==f&&e.get(f).push(d)}),e}function cl(n,t){n.classList?.add(t)}function ov(n,t){n.classList?.remove(t)}function oX(n,t,e){Op(e).onDone(()=>n.processLeaveNode(t))}function D3(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof OF?D3(i.players,t):t.push(i)}}function x3(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(o=>r.add(o)):t.set(n,i),e.delete(n),!0}class ix{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new nX(t,e,i),this._timelineEngine=new W9(t,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,i,r,o){const l=t+"-"+r;let d=this._triggerCache[l];if(!d){const f=[],w=RP(this._driver,o,f,[]);if(f.length)throw function ZJ(n,t){return new s.vHH(3404,!1)}();d=function j9(n,t,e){return new $9(n,t,e)}(r,w,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[o,l]=XU(i);this._timelineEngine.command(o,e,l,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,o){if("@"==i.charAt(0)){const[l,d]=XU(i);return this._timelineEngine.listen(l,e,d,o)}return this._transitionEngine.listen(t,e,i,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let uX=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&wu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wu(this._element,this._initialStyles),this._endStyles&&(wu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(am(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(am(this._element,this._endStyles),this._endStyles=null),wu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function GP(n){let t=null;return n.forEach((e,i)=>{(function dX(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class k3{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:f3(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class hX{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return r3(t,e)}getParentElement(t){return SP(t)}query(t,e,i){return s3(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,o,l=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(f.easing=o);const y=new Map,w=l.filter(N=>N instanceof k3);(function m9(n,t){return 0===n||0===t})(i,r)&&w.forEach(N=>{N.currentSnapshot.forEach((B,j)=>y.set(j,B))});let E=function h9(n){return n.length?n[0]instanceof Map?n:n.map(t=>c3(t)):[]}(e).map(N=>Pp(N));E=function _9(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((o,l)=>{i.has(l)||r.push(l),i.set(l,o)}),r.length)for(let o=1;o<t.length;o++){let l=t[o];r.forEach(d=>l.set(d,f3(n,d)))}}return t}(t,E,y);const M=function cX(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=GP(t[0]),t.length>1&&(i=GP(t[t.length-1]))):t instanceof Map&&(e=GP(t)),e||i?new uX(n,e,i):null}(t,E);return new k3(t,E,f,M)}}let pX=(()=>{class n extends xF{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?kF(e):e;return A3(this._renderer,null,i,"register",[r]),new fX(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class fX extends SG{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new gX(this._id,t,e||{},this._renderer)}}class gX{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return A3(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function A3(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const M3="@.disabled";let mX=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,l)=>{const d=l?.parentNode(o);d&&l.removeChild(d,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(o);return w||(w=new R3("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,w)),w}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(l,d,e,w.name,w)};return i.data.animation.forEach(f),new _X(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,d]=o;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(ix),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class R3{constructor(t,e,i,r){this.namespaceId=t,this.delegate=e,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==M3?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class _X extends R3{constructor(t,e,i,r,o){super(e,i,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==M3?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function yX(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function vX(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let bX=(()=>{class n extends ix{constructor(e,i,r,o){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(IP),s.LFG(FP),s.LFG(s.z2F))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const O3=[{provide:xF,useClass:pX},{provide:FP,useFactory:function wX(){return new H9}},{provide:ix,useClass:bX},{provide:s.FYo,useFactory:function CX(n,t,e){return new mX(n,t,e)},deps:[uo,ix,s.R0b]}],jP=[{provide:IP,useFactory:()=>new hX},{provide:s.QbO,useValue:"BrowserAnimations"},...O3],P3=[{provide:IP,useClass:o3},{provide:s.QbO,useValue:"NoopAnimations"},...O3];let TX=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?P3:jP}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:jP,imports:[Qu]}),n})(),SX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})(),RX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,_e]}),n})(),LX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();class av{}function FX(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",5),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.clear(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.clear(r))}),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),s.uIk("tabindex",e.disabled||e.readonly?null:"0")}}function VX(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",6),s.NdJ("click",function(r){const l=s.CHM(e).index,d=s.oxw(2);return s.KtG(d.rate(r,l))})("keydown.enter",function(r){const l=s.CHM(e).index,d=s.oxw(2);return s.KtG(d.rate(r,l))}),s.qZA()}if(2&n){const e=t.index,i=s.oxw(2);s.Q6J("ngClass",!i.value||e>=i.value?i.iconOffClass:i.iconOnClass)("ngStyle",!i.value||e>=i.value?i.iconOffStyle:i.iconOnStyle),s.uIk("tabindex",i.disabled||i.readonly?null:"0")}}function BX(n,t){if(1&n&&(s.ynx(0),s.YNc(1,FX,1,3,"span",3),s.YNc(2,VX,1,3,"span",4),s.BQk()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.cancel),s.xp6(1),s.Q6J("ngForOf",e.starsArray)}}function HX(n,t){1&n&&s.GkF(0)}function UX(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",9),s.NdJ("click",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.clear(r))})("keydown.enter",function(r){s.CHM(e);const o=s.oxw(2);return s.KtG(o.clear(r))}),s.YNc(1,HX,1,0,"ng-container",10),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("ngStyle",e.iconCancelStyle),s.uIk("tabindex",e.disabled||e.readonly?null:"0"),s.xp6(1),s.Q6J("ngTemplateOutlet",e.cancelIconTemplate)}}function zX(n,t){1&n&&s.GkF(0)}function GX(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"span",11),s.NdJ("click",function(r){const l=s.CHM(e).index,d=s.oxw(2);return s.KtG(d.rate(r,l))})("keydown.enter",function(r){const l=s.CHM(e).index,d=s.oxw(2);return s.KtG(d.rate(r,l))}),s.YNc(1,zX,1,0,"ng-container",10),s.qZA()}if(2&n){const e=t.index,i=s.oxw(2);s.uIk("tabindex",i.disabled||i.readonly?null:"0"),s.xp6(1),s.Q6J("ngTemplateOutlet",i.getIconTemplate(e))}}function jX(n,t){if(1&n&&(s.YNc(0,UX,2,3,"span",7),s.YNc(1,GX,2,2,"span",8)),2&n){const e=s.oxw();s.Q6J("ngIf",e.cancel),s.xp6(1),s.Q6J("ngForOf",e.starsArray)}}av.\u0275fac=function(t){return new(t||av)},av.\u0275mod=s.oAB({type:av}),av.\u0275inj=s.cJS({imports:[fn,Ww,Of]});const $X=function(n,t){return{"p-readonly":n,"p-disabled":t}},ZX={provide:Sr,useExisting:(0,s.Gpc)(()=>qX),multi:!0};let qX=(()=>{class n{constructor(e){this.cd=e,this.isCustomCancelIcon=!0,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new s.vpe,this.onCancel=new s.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"onicon":this.onIconTemplate=e.template;break;case"officon":this.offIconTemplate=e.template;break;case"cancel":this.cancelIconTemplate=e.template}})}getIconTemplate(e){return!this.value||e>=this.value?this.offIconTemplate:this.onIconTemplate}rate(e,i){!this.readonly&&!this.disabled&&(this.value=i+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:i+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get isCustomIcon(){return this.templates&&this.templates.length>0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["p-rating"]],contentQueries:function(e,i,r){if(1&e&&s.Suo(r,ne,4),2&e){let o;s.iGM(o=s.CRH())&&(i.templates=o)}},hostAttrs:[1,"p-element"],inputs:{isCustomCancelIcon:"isCustomCancelIcon",index:"index",disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[s._Bn([ZX])],decls:4,vars:6,consts:[[1,"p-rating",3,"ngClass"],[4,"ngIf","ngIfElse"],["customTemplate",""],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"],["class","p-rating-icon p-rating-cancel",3,"ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngStyle","click","keydown.enter"],[4,"ngTemplateOutlet"],[1,"p-rating-icon",3,"click","keydown.enter"]],template:function(e,i){if(1&e&&(s.TgZ(0,"div",0),s.YNc(1,BX,3,2,"ng-container",1),s.YNc(2,jX,2,2,"ng-template",null,2,s.W1O),s.qZA()),2&e){const r=s.MAs(3);s.Q6J("ngClass",s.WLB(3,$X,i.readonly,i.disabled)),s.xp6(1),s.Q6J("ngIf",!i.isCustomIcon)("ngIfElse",r)}},dependencies:[pt,Ln,pn,wn,Tn],styles:[".p-rating-icon{cursor:pointer;display:inline-flex}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),n})(),WX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,_e]}),n})(),Eee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,KF,vs,hp,_e,hp]}),n})(),See=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn]}),n})();hI([ns({transform:"{{transform}}",opacity:0}),ol("{{transition}}")]),hI([ol("{{transition}}",ns({transform:"{{transform}}",opacity:0}))]);let Gee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,See,vs,_e]}),n})();function So(n){return n instanceof s.SBq?n.nativeElement:n}V(1144);var V3=V(4408);const S0={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=S0;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(o=>{e=void 0,n(o)});return new jo.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=S0;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=S0;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var B3=V(7565);const H3=new class ete extends B3.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Xee extends V3.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=S0.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(S0.cancelAnimationFrame(e),t._scheduled=void 0)}});let qP,tte=1;const sx={};function U3(n){return n in sx&&(delete sx[n],!0)}const nte={setImmediate(n){const t=tte++;return sx[t]=!0,qP||(qP=Promise.resolve()),qP.then(()=>U3(t)&&n()),t},clearImmediate(n){U3(n)}},{setImmediate:ite,clearImmediate:rte}=nte,ox={setImmediate(...n){const{delegate:t}=ox;return(t?.setImmediate||ite)(...n)},clearImmediate(n){const{delegate:t}=ox;return(t?.clearImmediate||rte)(n)},delegate:void 0};new class ote extends B3.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class ste extends V3.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=ox.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(ox.clearImmediate(e),t._scheduled=void 0)}});let WP;try{WP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{WP=!1}let I0,KP,G3=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function rh(n){return n===ku}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!WP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.Lbi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D0(n){return function cte(){if(null==I0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>I0=!0}))}finally{I0=I0||!1}return I0}()?n:!!n.capture}function $3(n){if(function ute(){if(null==KP){const n=typeof document<"u"?document.head:null;KP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return KP}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function lx(n){return n.composedPath?n.composedPath()[0]:n.target}let fte=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Nt.x,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(function z3(n,t=Nf.z){return function lte(n){return(0,En.e)((t,e)=>{let i=!1,r=null,o=null,l=!1;const d=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const y=r;r=null,e.next(y)}l&&e.complete()},f=()=>{o=null,l&&e.complete()};t.subscribe((0,kn.x)(e,y=>{i=!0,r=y,o||(0,za.Xf)(n(y)).subscribe(o=(0,kn.x)(e,d,f))},()=>{l=!0,(!i||!o||o.closed)&&e.complete()}))})}(()=>VT(n,t))}(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(G3),s.LFG(s.R0b),s.LFG(oe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();function YP(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function uv(n,t){const e=t?"":"none";YP(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Y3(n,t,e){YP(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function ux(n,t){return t&&"none"!=t?n+" "+t:n}function Q3(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function QP(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}function JP(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function XP(n,t,e){const{top:i,bottom:r,left:o,right:l}=n;return e>=i&&e<=r&&t>=o&&t<=l}function x0(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function J3(n,t,e,i){const{top:r,right:o,bottom:l,left:d,width:f,height:y}=n,w=f*t,E=y*t;return i>r-E&&i<l+E&&e>d-w&&e<o+w}class X3{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:JP(e)})})}handleScroll(t){const e=lx(t),i=this.positions.get(e);if(!i)return null;const r=i.scrollPosition;let o,l;if(e===this._document){const y=this.getViewportScrollPosition();o=y.top,l=y.left}else o=e.scrollTop,l=e.scrollLeft;const d=r.top-o,f=r.left-l;return this.positions.forEach((y,w)=>{y.clientRect&&e!==w&&e.contains(w)&&x0(y.clientRect,d,f)}),r.top=o,r.left=l,{top:d,left:f}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function ez(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===i?iz(n,t):("input"===i||"select"===i||"textarea"===i)&&nz(n,t),tz("canvas",n,t,iz),tz("input, textarea, select",n,t,nz),t}function tz(n,t,e,i){const r=t.querySelectorAll(n);if(r.length){const o=e.querySelectorAll(n);for(let l=0;l<r.length;l++)i(r[l],o[l])}}let Lte=0;function nz(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${Lte++}`)}function iz(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const rz=D0({passive:!0}),dx=D0({passive:!1}),eN=new Set(["position"]);class Vte{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=function Np(n){return null!=n&&"false"!=`${n}`}(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>uv(i,e)))}constructor(t,e,i,r,o,l){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Nt.x,this._pointerMoveSubscription=jo.w0.EMPTY,this._pointerUpSubscription=jo.w0.EMPTY,this._scrollSubscription=jo.w0.EMPTY,this._resizeSubscription=jo.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Nt.x,this.started=new Nt.x,this.released=new Nt.x,this.ended=new Nt.x,this.entered=new Nt.x,this.exited=new Nt.x,this.dropped=new Nt.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&this._initializeDragSequence(f,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const f=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(f.x-this._pickupPositionOnPage.x)+Math.abs(f.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const N=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),B=this._dropContainer;if(!N)return void this._endDragSequence(d);(!B||!B.isDragging()&&!B.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const y=this._getConstrainedPointerPosition(f);if(this._hasMoved=!0,this._lastKnownPointerPosition=f,this._updatePointerDirectionDelta(y),this._dropContainer)this._updateActiveDropContainer(y,f);else{const w=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,E=this._activeTransform;E.x=y.x-w.x+this._passiveTransform.x,E.y=y.y-w.y+this._passiveTransform.y,this._applyRootElementTransform(E.x,E.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:y,event:d,distance:this._getDragDistance(y),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const f=this._getTargetHandle(d);f&&!this._disabledHandles.has(f)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new X3(i),l.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>So(i)),this._handles.forEach(i=>uv(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=So(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,dx),e.addEventListener("touchstart",this._pointerDown,rz),e.addEventListener("dragstart",this._nativeDragStart,dx)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?So(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),uv(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),uv(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){k0(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,r=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();r.insertBefore(l,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Y3(i,!1,eN),this._document.body.appendChild(r.replaceChild(o,i)),this._getPreviewInsertionPoint(r,d).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),r=k0(e),o=!r&&0!==e.button,l=this._rootElement,d=lx(e),f=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),y=r?function kte(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(e):function xte(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e);if(d&&d.draggable&&"mousedown"===e.type&&e.preventDefault(),i||o||f||y)return;if(this._handles.length){const M=l.style;this._rootElementTapHighlight=M.webkitTapHighlightColor||"",M.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(M=>this._updateOnScroll(M)),this._boundaryElement&&(this._boundaryRect=JP(this._boundaryElement));const w=this._previewTemplate;this._pickupPositionInElement=w&&w.template&&!w.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const E=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:E.x,y:E.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Y3(this._rootElement,!0,eN),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),l=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:l,distance:o,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,l,o,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let r;if(i&&t){const o=t.matchSize?this._initialClientRect:null,l=t.viewContainer.createEmbeddedView(i,t.context);l.detectChanges(),r=oz(l,this._document),this._previewRef=l,t.matchSize?az(r,o):r.style.transform=hx(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=ez(this._rootElement),az(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return YP(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},eN),uv(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function Nte(n){const t=getComputedStyle(n),e=QP(t,"transition-property"),i=e.find(d=>"transform"===d||"all"===d);if(!i)return 0;const r=e.indexOf(i),o=QP(t,"transition-duration"),l=QP(t,"transition-delay");return Q3(o[r])+Q3(l[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=l=>{(!l||lx(l)===this._preview&&"transform"===l.propertyName)&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=oz(this._placeholderRef,this._document)):i=ez(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){const r=e===this._rootElement?null:e,o=r?r.getBoundingClientRect():t,l=k0(i)?i.targetTouches[0]:i,d=this._getViewportScrollPosition();return{x:o.left-t.left+(l.pageX-o.left-d.left),y:o.top-t.top+(l.pageY-o.top-d.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=k0(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,o=i.pageY-e.top;if(this._ownerSVGElement){const l=this._ownerSVGElement.getScreenCTM();if(l){const d=this._ownerSVGElement.createSVGPoint();return d.x=r,d.y=o,d.matrixTransform(l.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:l}=this._pickupPositionInElement,d=this._boundaryRect,{width:f,height:y}=this._getPreviewRect(),w=d.top+l,E=d.bottom-(y-l);i=sz(i,d.left+o,d.right-(f-o)),r=sz(r,w,E)}return{x:i,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,l=Math.abs(e-o.x),d=Math.abs(i-o.y);return l>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),d>this._config.pointerDirectionChangeThreshold&&(r.y=i>o.y?1:-1,o.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,uv(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,dx),t.removeEventListener("touchstart",this._pointerDown,rz),t.removeEventListener("dragstart",this._nativeDragStart,dx)}_applyRootElementTransform(t,e){const i=hx(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=ux(i,this._initialTransform)}_applyPreviewTransform(t,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,r=hx(t,e);this._preview.style.transform=ux(r,i)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const o=r.left-i.left,l=i.right-r.right,d=r.top-i.top,f=i.bottom-r.bottom;r.width>i.width?(o>0&&(t+=o),l>0&&(t-=l)):t=0,r.height>i.height?(d>0&&(e+=d),f>0&&(e-=f)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:k0(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=lx(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&x0(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=$3(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return So(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function hx(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function sz(n,t,e){return Math.max(t,Math.min(e,n))}function k0(n){return"t"===n.type[0]}function oz(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function az(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=hx(t.left,t.top)}function A0(n,t){return Math.max(0,Math.min(t,n))}class Hte{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){const o=this._itemPositions,l=this._getItemIndexFromPointerPosition(t,e,i,r);if(-1===l&&o.length>0)return null;const d="horizontal"===this.orientation,f=o.findIndex(Q=>Q.drag===t),y=o[l],E=y.clientRect,M=f>l?1:-1,N=this._getItemOffsetPx(o[f].clientRect,E,M),B=this._getSiblingOffsetPx(f,o,M),j=o.slice();return function Bte(n,t,e){const i=A0(t,n.length-1),r=A0(e,n.length-1);if(i===r)return;const o=n[i],l=r<i?-1:1;for(let d=i;d!==r;d+=l)n[d]=n[d+l];n[r]=o}(o,f,l),o.forEach((Q,Ne)=>{if(j[Ne]===Q)return;const $e=Q.drag===t,Ze=$e?N:B,et=$e?t.getPlaceholderElement():Q.drag.getRootElement();Q.offset+=Ze,d?(et.style.transform=ux(`translate3d(${Math.round(Q.offset)}px, 0, 0)`,Q.initialTransform),x0(Q.clientRect,0,Ze)):(et.style.transform=ux(`translate3d(0, ${Math.round(Q.offset)}px, 0)`,Q.initialTransform),x0(Q.clientRect,Ze,0))}),this._previousSwap.overlaps=XP(E,e,i),this._previousSwap.drag=y.drag,this._previousSwap.delta=d?r.x:r.y,{previousIndex:f,currentIndex:l}}enter(t,e,i,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,l=this._activeDraggables,d=l.indexOf(t),f=t.getPlaceholderElement();let y=l[o];if(y===t&&(y=l[o+1]),!y&&(null==o||-1===o||o<l.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(y=l[0]),d>-1&&l.splice(d,1),y&&!this._dragDropRegistry.isDragging(y)){const w=y.getRootElement();w.parentElement.insertBefore(f,w),l.splice(o,0,t)}else So(this._element).appendChild(f),l.push(t);f.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{x0(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:JP(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){const r="horizontal"===this.orientation;let o=r?e.left-t.left:e.top-t.top;return-1===i&&(o+=r?e.width-t.width:e.height-t.height),o}_getSiblingOffsetPx(t,e,i){const r="horizontal"===this.orientation,o=e[t].clientRect,l=e[t+-1*i];let d=o[r?"width":"height"]*i;if(l){const f=r?"left":"top",y=r?"right":"bottom";-1===i?d-=l.clientRect[f]-o[y]:d+=o[f]-l.clientRect[y]}return d}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const l=i[i.length-1].clientRect;return r?t>=l.right:e>=l.bottom}{const l=i[0].clientRect;return r?t<=l.left:e<=l.top}}_getItemIndexFromPointerPosition(t,e,i,r){const o="horizontal"===this.orientation,l=this._itemPositions.findIndex(({drag:d,clientRect:f})=>d!==t&&((!r||d!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?e>=Math.floor(f.left)&&e<Math.floor(f.right):i>=Math.floor(f.top)&&i<Math.floor(f.bottom))));return-1!==l&&this._sortPredicate(l,t)?l:-1}}class Ute{constructor(t,e,i,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Nt.x,this.entered=new Nt.x,this.exited=new Nt.x,this.dropped=new Nt.x,this.sorted=new Nt.x,this.receivingStarted=new Nt.x,this.receivingStopped=new Nt.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=jo.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Nt.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),BT(0,H3).pipe(function cx(n){return(0,En.e)((t,e)=>{(0,za.Xf)(n).subscribe((0,kn.x)(e,()=>e.complete(),Pf.Z)),!e.closed&&t.subscribe(e)})}(this._stopScrollTimers)).subscribe(()=>{const l=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?l.scrollBy(0,-d):2===this._verticalScrollDirection&&l.scrollBy(0,d),1===this._horizontalScrollDirection?l.scrollBy(-d,0):2===this._horizontalScrollDirection&&l.scrollBy(d,0)})},this.element=So(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new X3(i),this._sortStrategy=new Hte(this.element,e),this._sortStrategy.withSortPredicate((l,d)=>this.sortPredicate(l,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,o,l,d,f={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:o,distance:l,dropPoint:d,event:f})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=So(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._clientRect||!J3(this._clientRect,.05,e,i))return;const o=this._sortStrategy.sort(t,e,i,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=0,o=0;if(this._parentPositions.positions.forEach((l,d)=>{d===this._document||!l.clientRect||i||J3(l.clientRect,.05,t,e)&&([r,o]=function zte(n,t,e,i){const r=uz(t,i),o=dz(t,e);let l=0,d=0;if(r){const f=n.scrollTop;1===r?f>0&&(l=1):n.scrollHeight-f>n.clientHeight&&(l=2)}if(o){const f=n.scrollLeft;1===o?f>0&&(d=1):n.scrollWidth-f>n.clientWidth&&(d=2)}return[l,d]}(d,l.clientRect,t,e),(r||o)&&(i=d))}),!r&&!o){const{width:l,height:d}=this._viewportRuler.getViewportSize(),f={width:l,height:d,top:0,right:l,bottom:d,left:0};r=uz(f,e),o=dz(f,t),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=So(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=So(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=So(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&XP(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!XP(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,i);if(!r)return!1;const o=So(this.element);return r===o||o.contains(r)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=$3(So(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function uz(n,t){const{top:e,bottom:i,height:r}=n,o=.05*r;return t>=e-o&&t<=e+o?1:t>=i-o&&t<=i+o?2:0}function dz(n,t){const{left:e,right:i,width:r}=n,o=.05*r;return t>=e-o&&t<=e+o?1:t>=i-o&&t<=i+o?2:0}const px=D0({passive:!1,capture:!0});let Gte=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new Nt.x,this.pointerUp=new Nt.x,this.scroll=new Nt.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,px)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,px)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:px}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:px}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,l)=>{this._document.addEventListener(l,o.handler,o.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new Oi.y(r=>this._ngZone.runOutsideAngular(()=>{const l=d=>{this._activeDragInstances.length&&r.next(d)};return e.addEventListener("scroll",l,!0),()=>{e.removeEventListener("scroll",l,!0)}}))),(0,Hh.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.R0b),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jte={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let tN=(()=>{class n{constructor(e,i,r,o){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,i=jte){return new Vte(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Ute(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(s.R0b),s.LFG(fte),s.LFG(Gte))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[tN],imports:[gte]}),n})(),wne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,yd,_e,vs,mz,_e,mz]}),n})(),Ine=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[fn,vs,_e,_e]}),n})();class dv{}dv.\u0275fac=function(t){return new(t||dv)},dv.\u0275mod=s.oAB({type:dv,bootstrap:[Bf]}),dv.\u0275inj=s.cJS({providers:[Ha],imports:[sv,Qu,TX,vs,Ww,fG,SX,bs.hO.initializeApp({apiKey:"AIzaSyDxhiAr9Zc_6wydzJzeeQeKlvDPCquxge4",authDomain:"cjoshi-logistics.firebaseapp.com",databaseURL:"https://cjoshi-logistics-default-rtdb.firebaseio.com",projectId:"cjoshi-logistics",storageBucket:"cjoshi-logistics.appspot.com",messagingSenderId:"594260998551",appId:"1:594260998551:web:40a48d12965b82684becd2"}),f6,_J,yd,DK,x1,Xw,yd,RX,VF,VK,gI,_I,LX,y$,YF,av,oK,WX,Eee,YK,Gee,wne,Ine]}),Yr().bootstrapModule(dv).catch(n=>console.error(n))},9751:(bt,Ie,V)=>{V.d(Ie,{y:()=>pe});var s=V(930),ie=V(727),F=V(8822),ae=V(9635),le=V(2416),oe=V(576),ye=V(2806);let pe=(()=>{class X{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const tt=new X;return tt.source=this,tt.operator=ke,tt}subscribe(ke,tt,_t){const me=function W(X){return X&&X instanceof s.Lv||function q(X){return X&&(0,oe.m)(X.next)&&(0,oe.m)(X.error)&&(0,oe.m)(X.complete)}(X)&&(0,ie.Nn)(X)}(ke)?ke:new s.Hp(ke,tt,_t);return(0,ye.x)(()=>{const{operator:Me,source:Ae}=this;me.add(Me?Me.call(me,Ae):Ae?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(ke){try{return this._subscribe(ke)}catch(tt){ke.error(tt)}}forEach(ke,tt){return new(tt=he(tt))((_t,me)=>{const Me=new s.Hp({next:Ae=>{try{ke(Ae)}catch(Ue){me(Ue),Me.unsubscribe()}},error:me,complete:_t});this.subscribe(Me)})}_subscribe(ke){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(ke)}[F.L](){return this}pipe(...ke){return(0,ae.U)(ke)(this)}toPromise(ke){return new(ke=he(ke))((tt,_t)=>{let me;this.subscribe(Me=>me=Me,Me=>_t(Me),()=>tt(me))})}}return X.create=We=>new X(We),X})();function he(X){var We;return null!==(We=X??le.v.Promise)&&void 0!==We?We:Promise}},7579:(bt,Ie,V)=>{V.d(Ie,{x:()=>ye});var s=V(9751),ie=V(727);const ae=(0,V(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=V(8737),oe=V(2806);let ye=(()=>{class he extends s.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new pe(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new ae}next(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:We,observers:ke}=this;return X||We?ie.Lc:(this.currentObservers=null,ke.push(W),new ie.w0(()=>{this.currentObservers=null,(0,le.P)(ke,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:We,isStopped:ke}=this;X?W.error(We):ke&&W.complete()}asObservable(){const W=new s.y;return W.source=this,W}}return he.create=(q,W)=>new pe(q,W),he})();class pe extends ye{constructor(q,W){super(),this.destination=q,this.source=W}next(q){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,q)}error(q){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,q)}complete(){var q,W;null===(W=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===W||W.call(q)}_subscribe(q){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(q))&&void 0!==X?X:ie.Lc}}},930:(bt,Ie,V)=>{V.d(Ie,{Hp:()=>_t,Lv:()=>X});var s=V(576),ie=V(727),F=V(2416),ae=V(7849),le=V(5032);const oe=he("C",void 0,void 0);function he(xe,Se,Re){return{kind:xe,value:Se,error:Re}}var q=V(3410),W=V(2806);class X extends ie.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,ie.Nn)(Se)&&Se.add(this)):this.destination=Ue}static create(Se,Re,Be){return new _t(Se,Re,Be)}next(Se){this.isStopped?Ae(function pe(xe){return he("N",xe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Ae(function ye(xe){return he("E",void 0,xe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Ae(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function ke(xe,Se){return We.call(xe,Se)}class tt{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Re}=this;if(Re.next)try{Re.next(Se)}catch(Be){me(Be)}}error(Se){const{partialObserver:Re}=this;if(Re.error)try{Re.error(Se)}catch(Be){me(Be)}else me(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Re){me(Re)}}}class _t extends X{constructor(Se,Re,Be){let Ve;if(super(),(0,s.m)(Se)||!Se)Ve={next:Se??void 0,error:Re??void 0,complete:Be??void 0};else{let G;this&&F.v.useDeprecatedNextContext?(G=Object.create(Se),G.unsubscribe=()=>this.unsubscribe(),Ve={next:Se.next&&ke(Se.next,G),error:Se.error&&ke(Se.error,G),complete:Se.complete&&ke(Se.complete,G)}):Ve=Se}this.destination=new tt(Ve)}}function me(xe){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(xe):(0,ae.h)(xe)}function Ae(xe,Se){const{onStoppedNotification:Re}=F.v;Re&&q.z.setTimeout(()=>Re(xe,Se))}const Ue={closed:!0,next:le.Z,error:function Me(xe){throw xe},complete:le.Z}},727:(bt,Ie,V)=>{V.d(Ie,{Lc:()=>oe,w0:()=>le,Nn:()=>ye});var s=V(576);const F=(0,V(3888).d)(he=>function(W){he(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,We)=>`${We+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ae=V(8737);class le{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const ke of W)ke.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,s.m)(X))try{X()}catch(ke){q=ke instanceof F?ke.errors:[ke]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const ke of We)try{pe(ke)}catch(tt){q=q??[],tt instanceof F?q=[...q,...tt.errors]:q.push(tt)}}if(q)throw new F(q)}}add(q){var W;if(q&&q!==this)if(this.closed)pe(q);else{if(q instanceof le){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(q)}}_hasParent(q){const{_parentage:W}=this;return W===q||Array.isArray(W)&&W.includes(q)}_addParent(q){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(q),W):W?[W,q]:q}_removeParent(q){const{_parentage:W}=this;W===q?this._parentage=null:Array.isArray(W)&&(0,ae.P)(W,q)}remove(q){const{_finalizers:W}=this;W&&(0,ae.P)(W,q),q instanceof le&&q._removeParent(this)}}le.EMPTY=(()=>{const he=new le;return he.closed=!0,he})();const oe=le.EMPTY;function ye(he){return he instanceof le||he&&"closed"in he&&(0,s.m)(he.remove)&&(0,s.m)(he.add)&&(0,s.m)(he.unsubscribe)}function pe(he){(0,s.m)(he)?he():he.unsubscribe()}},2416:(bt,Ie,V)=>{V.d(Ie,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Ie,V)=>{V.d(Ie,{E:()=>ie});const ie=new(V(9751).y)(le=>le.complete())},8996:(bt,Ie,V)=>{V.d(Ie,{D:()=>Se});var s=V(8421),ie=V(5363),F=V(9468),oe=V(9751),pe=V(2202),he=V(576),q=V(9672);function X(Re,Be){if(!Re)throw new Error("Iterable cannot be null");return new oe.y(Ve=>{(0,q.f)(Ve,Be,()=>{const G=Re[Symbol.asyncIterator]();(0,q.f)(Ve,Be,()=>{G.next().then(Ee=>{Ee.done?Ve.complete():Ve.next(Ee.value)})},0,!0)})})}var We=V(3670),ke=V(8239),tt=V(1144),_t=V(6495),me=V(2206),Me=V(4532),Ae=V(3260);function Se(Re,Be){return Be?function xe(Re,Be){if(null!=Re){if((0,We.c)(Re))return function ae(Re,Be){return(0,s.Xf)(Re).pipe((0,F.R)(Be),(0,ie.Q)(Be))}(Re,Be);if((0,tt.z)(Re))return function ye(Re,Be){return new oe.y(Ve=>{let G=0;return Be.schedule(function(){G===Re.length?Ve.complete():(Ve.next(Re[G++]),Ve.closed||this.schedule())})})}(Re,Be);if((0,ke.t)(Re))return function le(Re,Be){return(0,s.Xf)(Re).pipe((0,F.R)(Be),(0,ie.Q)(Be))}(Re,Be);if((0,me.D)(Re))return X(Re,Be);if((0,_t.T)(Re))return function W(Re,Be){return new oe.y(Ve=>{let G;return(0,q.f)(Ve,Be,()=>{G=Re[pe.h](),(0,q.f)(Ve,Be,()=>{let Ee,qe;try{({value:Ee,done:qe}=G.next())}catch(it){return void Ve.error(it)}qe?Ve.complete():Ve.next(Ee)},0,!0)}),()=>(0,he.m)(G?.return)&&G.return()})}(Re,Be);if((0,Ae.L)(Re))return function Ue(Re,Be){return X((0,Ae.Q)(Re),Be)}(Re,Be)}throw(0,Me.z)(Re)}(Re,Be):(0,s.Xf)(Re)}},8421:(bt,Ie,V)=>{V.d(Ie,{Xf:()=>We});var s=V(655),ie=V(1144),F=V(8239),ae=V(9751),le=V(3670),oe=V(2206),ye=V(4532),pe=V(6495),he=V(3260),q=V(576),W=V(7849),X=V(8822);function We(xe){if(xe instanceof ae.y)return xe;if(null!=xe){if((0,le.c)(xe))return function ke(xe){return new ae.y(Se=>{const Re=xe[X.L]();if((0,q.m)(Re.subscribe))return Re.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ie.z)(xe))return function tt(xe){return new ae.y(Se=>{for(let Re=0;Re<xe.length&&!Se.closed;Re++)Se.next(xe[Re]);Se.complete()})}(xe);if((0,F.t)(xe))return function _t(xe){return new ae.y(Se=>{xe.then(Re=>{Se.closed||(Se.next(Re),Se.complete())},Re=>Se.error(Re)).then(null,W.h)})}(xe);if((0,oe.D)(xe))return Me(xe);if((0,pe.T)(xe))return function me(xe){return new ae.y(Se=>{for(const Re of xe)if(Se.next(Re),Se.closed)return;Se.complete()})}(xe);if((0,he.L)(xe))return function Ae(xe){return Me((0,he.Q)(xe))}(xe)}throw(0,ye.z)(xe)}function Me(xe){return new ae.y(Se=>{(function Ue(xe,Se){var Re,Be,Ve,G;return(0,s.mG)(this,void 0,void 0,function*(){try{for(Re=(0,s.KL)(xe);!(Be=yield Re.next()).done;)if(Se.next(Be.value),Se.closed)return}catch(Ee){Ve={error:Ee}}finally{try{Be&&!Be.done&&(G=Re.return)&&(yield G.call(Re))}finally{if(Ve)throw Ve.error}}Se.complete()})})(xe,Se).catch(Re=>Se.error(Re))})}},6451:(bt,Ie,V)=>{V.d(Ie,{T:()=>oe});var s=V(8189),ie=V(8421),F=V(515),ae=V(3269),le=V(8996);function oe(...ye){const pe=(0,ae.yG)(ye),he=(0,ae._6)(ye,1/0),q=ye;return q.length?1===q.length?(0,ie.Xf)(q[0]):(0,s.J)(he)((0,le.D)(q,pe)):F.E}},5403:(bt,Ie,V)=>{V.d(Ie,{x:()=>ie});var s=V(930);function ie(ae,le,oe,ye,pe){return new F(ae,le,oe,ye,pe)}class F extends s.Lv{constructor(le,oe,ye,pe,he,q){super(le),this.onFinalize=he,this.shouldUnsubscribe=q,this._next=oe?function(W){try{oe(W)}catch(X){le.error(X)}}:super._next,this._error=pe?function(W){try{pe(W)}catch(X){le.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(W){le.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(bt,Ie,V)=>{V.d(Ie,{U:()=>F});var s=V(4482),ie=V(5403);function F(ae,le){return(0,s.e)((oe,ye)=>{let pe=0;oe.subscribe((0,ie.x)(ye,he=>{ye.next(ae.call(le,he,pe++))}))})}},8189:(bt,Ie,V)=>{V.d(Ie,{J:()=>F});var s=V(5577),ie=V(4671);function F(ae=1/0){return(0,s.z)(ie.y,ae)}},5577:(bt,Ie,V)=>{V.d(Ie,{z:()=>pe});var s=V(4004),ie=V(8421),F=V(4482),ae=V(9672),le=V(5403),ye=V(576);function pe(he,q,W=1/0){return(0,ye.m)(q)?pe((X,We)=>(0,s.U)((ke,tt)=>q(X,ke,We,tt))((0,ie.Xf)(he(X,We))),W):("number"==typeof q&&(W=q),(0,F.e)((X,We)=>function oe(he,q,W,X,We,ke,tt,_t){const me=[];let Me=0,Ae=0,Ue=!1;const xe=()=>{Ue&&!me.length&&!Me&&q.complete()},Se=Be=>Me<X?Re(Be):me.push(Be),Re=Be=>{ke&&q.next(Be),Me++;let Ve=!1;(0,ie.Xf)(W(Be,Ae++)).subscribe((0,le.x)(q,G=>{We?.(G),ke?Se(G):q.next(G)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Me--;me.length&&Me<X;){const G=me.shift();tt?(0,ae.f)(q,tt,()=>Re(G)):Re(G)}xe()}catch(G){q.error(G)}}))};return he.subscribe((0,le.x)(q,Se,()=>{Ue=!0,xe()})),()=>{_t?.()}}(X,We,he,W)))}},5363:(bt,Ie,V)=>{V.d(Ie,{Q:()=>ae});var s=V(9672),ie=V(4482),F=V(5403);function ae(le,oe=0){return(0,ie.e)((ye,pe)=>{ye.subscribe((0,F.x)(pe,he=>(0,s.f)(pe,le,()=>pe.next(he),oe),()=>(0,s.f)(pe,le,()=>pe.complete(),oe),he=>(0,s.f)(pe,le,()=>pe.error(he),oe)))})}},3099:(bt,Ie,V)=>{V.d(Ie,{B:()=>le});var s=V(8421),ie=V(7579),F=V(930),ae=V(4482);function le(ye={}){const{connector:pe=(()=>new ie.x),resetOnError:he=!0,resetOnComplete:q=!0,resetOnRefCountZero:W=!0}=ye;return X=>{let We,ke,tt,_t=0,me=!1,Me=!1;const Ae=()=>{ke?.unsubscribe(),ke=void 0},Ue=()=>{Ae(),We=tt=void 0,me=Me=!1},xe=()=>{const Se=We;Ue(),Se?.unsubscribe()};return(0,ae.e)((Se,Re)=>{_t++,!Me&&!me&&Ae();const Be=tt=tt??pe();Re.add(()=>{_t--,0===_t&&!Me&&!me&&(ke=oe(xe,W))}),Be.subscribe(Re),!We&&_t>0&&(We=new F.Hp({next:Ve=>Be.next(Ve),error:Ve=>{Me=!0,Ae(),ke=oe(Ue,he,Ve),Be.error(Ve)},complete:()=>{me=!0,Ae(),ke=oe(Ue,q),Be.complete()}}),(0,s.Xf)(Se).subscribe(We))})(X)}}function oe(ye,pe,...he){if(!0===pe)return void ye();if(!1===pe)return;const q=new F.Hp({next:()=>{q.unsubscribe(),ye()}});return(0,s.Xf)(pe(...he)).subscribe(q)}},9468:(bt,Ie,V)=>{V.d(Ie,{R:()=>ie});var s=V(4482);function ie(F,ae=0){return(0,s.e)((le,oe)=>{oe.add(F.schedule(()=>le.subscribe(oe),ae))})}},8505:(bt,Ie,V)=>{V.d(Ie,{b:()=>le});var s=V(576),ie=V(4482),F=V(5403),ae=V(4671);function le(oe,ye,pe){const he=(0,s.m)(oe)||ye||pe?{next:oe,error:ye,complete:pe}:oe;return he?(0,ie.e)((q,W)=>{var X;null===(X=he.subscribe)||void 0===X||X.call(he);let We=!0;q.subscribe((0,F.x)(W,ke=>{var tt;null===(tt=he.next)||void 0===tt||tt.call(he,ke),W.next(ke)},()=>{var ke;We=!1,null===(ke=he.complete)||void 0===ke||ke.call(he),W.complete()},ke=>{var tt;We=!1,null===(tt=he.error)||void 0===tt||tt.call(he,ke),W.error(ke)},()=>{var ke,tt;We&&(null===(ke=he.unsubscribe)||void 0===ke||ke.call(he)),null===(tt=he.finalize)||void 0===tt||tt.call(he)}))}):ae.y}},4408:(bt,Ie,V)=>{V.d(Ie,{o:()=>le});var s=V(727);class ie extends s.w0{constructor(ye,pe){super()}schedule(ye,pe=0){return this}}const F={setInterval(oe,ye,...pe){const{delegate:he}=F;return he?.setInterval?he.setInterval(oe,ye,...pe):setInterval(oe,ye,...pe)},clearInterval(oe){const{delegate:ye}=F;return(ye?.clearInterval||clearInterval)(oe)},delegate:void 0};var ae=V(8737);class le extends ie{constructor(ye,pe){super(ye,pe),this.scheduler=ye,this.work=pe,this.pending=!1}schedule(ye,pe=0){var he;if(this.closed)return this;this.state=ye;const q=this.id,W=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(W,q,pe)),this.pending=!0,this.delay=pe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(W,this.id,pe),this}requestAsyncId(ye,pe,he=0){return F.setInterval(ye.flush.bind(ye,this),he)}recycleAsyncId(ye,pe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return pe;null!=pe&&F.clearInterval(pe)}execute(ye,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ye,pe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,pe){let q,he=!1;try{this.work(ye)}catch(W){he=!0,q=W||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ye,scheduler:pe}=this,{actions:he}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(he,this),null!=ye&&(this.id=this.recycleAsyncId(pe,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Ie,V)=>{V.d(Ie,{v:()=>F});var s=V(6063);class ie{constructor(le,oe=ie.now){this.schedulerActionCtor=le,this.now=oe}schedule(le,oe=0,ye){return new this.schedulerActionCtor(this,le).schedule(ye,oe)}}ie.now=s.l.now;class F extends ie{constructor(le,oe=ie.now){super(le,oe),this.actions=[],this._active=!1}flush(le){const{actions:oe}=this;if(this._active)return void oe.push(le);let ye;this._active=!0;do{if(ye=le.execute(le.state,le.delay))break}while(le=oe.shift());if(this._active=!1,ye){for(;le=oe.shift();)le.unsubscribe();throw ye}}}},4986:(bt,Ie,V)=>{V.d(Ie,{P:()=>ae,z:()=>F});var s=V(4408);const F=new(V(7565).v)(s.o),ae=F},6063:(bt,Ie,V)=>{V.d(Ie,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},3410:(bt,Ie,V)=>{V.d(Ie,{z:()=>s});const s={setTimeout(ie,F,...ae){const{delegate:le}=s;return le?.setTimeout?le.setTimeout(ie,F,...ae):setTimeout(ie,F,...ae)},clearTimeout(ie){const{delegate:F}=s;return(F?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},2202:(bt,Ie,V)=>{V.d(Ie,{h:()=>ie});const ie=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Ie,V)=>{V.d(Ie,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(bt,Ie,V)=>{V.d(Ie,{_6:()=>oe,jO:()=>ae,yG:()=>le});var s=V(576),ie=V(3532);function F(ye){return ye[ye.length-1]}function ae(ye){return(0,s.m)(F(ye))?ye.pop():void 0}function le(ye){return(0,ie.K)(F(ye))?ye.pop():void 0}function oe(ye,pe){return"number"==typeof F(ye)?ye.pop():pe}},8737:(bt,Ie,V)=>{function s(ie,F){if(ie){const ae=ie.indexOf(F);0<=ae&&ie.splice(ae,1)}}V.d(Ie,{P:()=>s})},3888:(bt,Ie,V)=>{function s(ie){const ae=ie(le=>{Error.call(le),le.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Ie,{d:()=>s})},2806:(bt,Ie,V)=>{V.d(Ie,{O:()=>ae,x:()=>F});var s=V(2416);let ie=null;function F(le){if(s.v.useDeprecatedSynchronousErrorHandling){const oe=!ie;if(oe&&(ie={errorThrown:!1,error:null}),le(),oe){const{errorThrown:ye,error:pe}=ie;if(ie=null,ye)throw pe}}else le()}function ae(le){s.v.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=le)}},9672:(bt,Ie,V)=>{function s(ie,F,ae,le=0,oe=!1){const ye=F.schedule(function(){ae(),oe?ie.add(this.schedule(null,le)):this.unsubscribe()},le);if(ie.add(ye),!oe)return ye}V.d(Ie,{f:()=>s})},4671:(bt,Ie,V)=>{function s(ie){return ie}V.d(Ie,{y:()=>s})},1144:(bt,Ie,V)=>{V.d(Ie,{z:()=>s});const s=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},2206:(bt,Ie,V)=>{V.d(Ie,{D:()=>ie});var s=V(576);function ie(F){return Symbol.asyncIterator&&(0,s.m)(F?.[Symbol.asyncIterator])}},576:(bt,Ie,V)=>{function s(ie){return"function"==typeof ie}V.d(Ie,{m:()=>s})},3670:(bt,Ie,V)=>{V.d(Ie,{c:()=>F});var s=V(8822),ie=V(576);function F(ae){return(0,ie.m)(ae[s.L])}},6495:(bt,Ie,V)=>{V.d(Ie,{T:()=>F});var s=V(2202),ie=V(576);function F(ae){return(0,ie.m)(ae?.[s.h])}},8239:(bt,Ie,V)=>{V.d(Ie,{t:()=>ie});var s=V(576);function ie(F){return(0,s.m)(F?.then)}},3260:(bt,Ie,V)=>{V.d(Ie,{L:()=>ae,Q:()=>F});var s=V(655),ie=V(576);function F(le){return(0,s.FC)(this,arguments,function*(){const ye=le.getReader();try{for(;;){const{value:pe,done:he}=yield(0,s.qq)(ye.read());if(he)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(pe)}}finally{ye.releaseLock()}})}function ae(le){return(0,ie.m)(le?.getReader)}},3532:(bt,Ie,V)=>{V.d(Ie,{K:()=>ie});var s=V(576);function ie(F){return F&&(0,s.m)(F.schedule)}},4482:(bt,Ie,V)=>{V.d(Ie,{A:()=>ie,e:()=>F});var s=V(576);function ie(ae){return(0,s.m)(ae?.lift)}function F(ae){return le=>{if(ie(le))return le.lift(function(oe){try{return ae(oe,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(bt,Ie,V)=>{function s(){}V.d(Ie,{Z:()=>s})},9635:(bt,Ie,V)=>{V.d(Ie,{U:()=>F,z:()=>ie});var s=V(4671);function ie(...ae){return F(ae)}function F(ae){return 0===ae.length?s.y:1===ae.length?ae[0]:function(oe){return ae.reduce((ye,pe)=>pe(ye),oe)}}},7849:(bt,Ie,V)=>{V.d(Ie,{h:()=>F});var s=V(2416),ie=V(3410);function F(ae){ie.z.setTimeout(()=>{const{onUnhandledError:le}=s.v;if(!le)throw ae;le(ae)})}},4532:(bt,Ie,V)=>{function s(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ie,{z:()=>s})},655:(bt,Ie,V)=>{function ae(ue,fe){var Te={};for(var Oe in ue)Object.prototype.hasOwnProperty.call(ue,Oe)&&fe.indexOf(Oe)<0&&(Te[Oe]=ue[Oe]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(Oe=Object.getOwnPropertySymbols(ue);ze<Oe.length;ze++)fe.indexOf(Oe[ze])<0&&Object.prototype.propertyIsEnumerable.call(ue,Oe[ze])&&(Te[Oe[ze]]=ue[Oe[ze]])}return Te}function X(ue,fe,Te,Oe){return new(Te||(Te=Promise))(function(Ke,ot){function nt(mn){try{Mt(Oe.next(mn))}catch(ut){ot(ut)}}function Cn(mn){try{Mt(Oe.throw(mn))}catch(ut){ot(ut)}}function Mt(mn){mn.done?Ke(mn.value):function ze(Ke){return Ke instanceof Te?Ke:new Te(function(ot){ot(Ke)})}(mn.value).then(nt,Cn)}Mt((Oe=Oe.apply(ue,fe||[])).next())})}function xe(ue){return this instanceof xe?(this.v=ue,this):new xe(ue)}function Se(ue,fe,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Oe=Te.apply(ue,fe||[]),Ke=[];return ze={},ot("next"),ot("throw"),ot("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function ot(jt){Oe[jt]&&(ze[jt]=function(Bn){return new Promise(function(qn,Hn){Ke.push([jt,Bn,qn,Hn])>1||nt(jt,Bn)})})}function nt(jt,Bn){try{!function Cn(jt){jt.value instanceof xe?Promise.resolve(jt.value.v).then(Mt,mn):ut(Ke[0][2],jt)}(Oe[jt](Bn))}catch(qn){ut(Ke[0][3],qn)}}function Mt(jt){nt("next",jt)}function mn(jt){nt("throw",jt)}function ut(jt,Bn){jt(Bn),Ke.shift(),Ke.length&&nt(Ke[0][0],Ke[0][1])}}function Be(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,fe=ue[Symbol.asyncIterator];return fe?fe.call(ue):(ue=function _t(ue){var fe="function"==typeof Symbol&&Symbol.iterator,Te=fe&&ue[fe],Oe=0;if(Te)return Te.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Oe>=ue.length&&(ue=void 0),{value:ue&&ue[Oe++],done:!ue}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),Te={},Oe("next"),Oe("throw"),Oe("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function Oe(Ke){Te[Ke]=ue[Ke]&&function(ot){return new Promise(function(nt,Cn){!function ze(Ke,ot,nt,Cn){Promise.resolve(Cn).then(function(Mt){Ke({value:Mt,done:nt})},ot)}(nt,Cn,(ot=ue[Ke](ot)).done,ot.value)})}}}V.d(Ie,{FC:()=>Se,KL:()=>Be,_T:()=>ae,mG:()=>X,qq:()=>xe})},4650:(bt,Ie,V)=>{V.d(Ie,{$8M:()=>Ju,$WT:()=>ci,$Z:()=>DT,AFp:()=>Tw,ALo:()=>Xh,AaK:()=>pe,Akn:()=>na,AsE:()=>Kf,BQk:()=>Wl,CHM:()=>Nu,CRH:()=>dw,CZH:()=>ay,CqO:()=>Gh,D6c:()=>wA,DdM:()=>XE,EJc:()=>Vd,EpF:()=>zh,F$t:()=>y_,F4k:()=>nE,FYo:()=>J0,FiY:()=>Ha,Gf:()=>uS,GfV:()=>X0,GkF:()=>tb,Gpc:()=>W,HTZ:()=>Ql,Hh0:()=>pg,Hsn:()=>lb,JOm:()=>En,KtG:()=>ah,LFG:()=>Je,LSH:()=>Dv,Lbi:()=>cy,Lck:()=>Gb,MAs:()=>Qi,MMx:()=>$b,NdJ:()=>jh,OlP:()=>cn,Oqu:()=>Tr,P3R:()=>kv,PXZ:()=>iA,Q6J:()=>g_,QGY:()=>nb,QbO:()=>wo,Qsj:()=>Ax,R0b:()=>Ks,RDi:()=>go,Rgc:()=>Xl,SBq:()=>Sf,Sil:()=>Zk,Suo:()=>yg,TTD:()=>dc,TgZ:()=>m_,Tol:()=>gb,Udp:()=>fb,VKq:()=>eS,W1O:()=>hS,WLB:()=>Jb,X6Q:()=>aA,XFs:()=>It,Xpm:()=>hl,Xts:()=>Tf,Y36:()=>Xc,YKP:()=>hg,YNc:()=>f_,Yjl:()=>fl,Yz7:()=>ut,Z0I:()=>Hn,ZZ4:()=>WS,_Bn:()=>jE,_UZ:()=>eb,_Vd:()=>Qa,_c5:()=>Bw,_uU:()=>rn,aQg:()=>KS,c2e:()=>Fd,cJS:()=>Bn,cg1:()=>Qf,dDg:()=>Xk,dqk:()=>Gt,eFA:()=>Mw,ekj:()=>S_,eoX:()=>NS,f3M:()=>dt,g9A:()=>ts,h0i:()=>Od,hGG:()=>YS,hij:()=>x_,iGM:()=>uw,ifc:()=>on,ip1:()=>Cw,jDz:()=>ZE,kEZ:()=>Yl,kL8:()=>il,l5B:()=>Xb,lG2:()=>pl,lcZ:()=>rS,lqb:()=>dd,lri:()=>OS,n5z:()=>Yu,oAB:()=>Qn,oJD:()=>B0,oxw:()=>ab,q4F:()=>Pv,qLn:()=>Jc,qOj:()=>Qv,qZA:()=>__,qbA:()=>ew,rFY:()=>tS,rWj:()=>PS,sBO:()=>lA,s_b:()=>Q_,soG:()=>Tg,tb:()=>ic,tp0:()=>D,uIk:()=>zf,vHH:()=>me,vpe:()=>aa,wAp:()=>Vt,xp6:()=>fT,ynx:()=>$f,z2F:()=>Nw,zSh:()=>Rv,zs3:()=>Ja});var s=V(7579),ie=V(727),F=V(9751),ae=V(6451),le=V(3099);function oe(a){for(let c in a)if(a[c]===oe)return c;throw Error("Could not find renamed property on target object.")}function ye(a,c){for(const u in c)c.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=c[u])}function pe(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(pe).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const c=a.toString();if(null==c)return""+c;const u=c.indexOf("\n");return-1===u?c:c.substring(0,u)}function he(a,c){return null==a||""===a?null===c?"":c:null==c||""===c?a:a+" "+c}const q=oe({__forward_ref__:oe});function W(a){return a.__forward_ref__=W,a.toString=function(){return pe(this())},a}function X(a){return We(a)?a():a}function We(a){return"function"==typeof a&&a.hasOwnProperty(q)&&a.__forward_ref__===W}function ke(a){return a&&!!a.\u0275providers}const _t="https://g.co/ng/security#xss";class me extends Error{constructor(c,u){super(function Me(a,c){return`NG0${Math.abs(a)}${c?": "+c.trim():""}`}(c,u)),this.code=c}}function Ae(a){return"string"==typeof a?a:null==a?"":String(a)}function Be(a,c){throw new me(-201,!1)}function ot(a,c){null==a&&function nt(a,c,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${c} <=Actual]`))}(c,a,null,"!=")}function ut(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Bn(a){return{providers:a.providers||[],imports:a.imports||[]}}function qn(a){return Un(a,ir)||Un(a,Rn)}function Hn(a){return null!==qn(a)}function Un(a,c){return a.hasOwnProperty(c)?a[c]:null}function xr(a){return a&&(a.hasOwnProperty(ro)||a.hasOwnProperty(pr))?a[ro]:null}const ir=oe({\u0275prov:oe}),ro=oe({\u0275inj:oe}),Rn=oe({ngInjectableDef:oe}),pr=oe({ngInjectorDef:oe});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let ks;function Wn(a){const c=ks;return ks=a,c}function ji(a,c,u){const h=qn(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&It.Optional?null:void 0!==c?c:void Be(pe(a))}const Gt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},zn="__NG_DI_FLAG__",jr="ngTempTokenPath",ma=/\n/gm,ls="__source";let dn;function $i(a){const c=dn;return dn=a,c}function cs(a,c=It.Default){if(void 0===dn)throw new me(-203,!1);return null===dn?ji(a,void 0,c):dn.get(a,c&It.Optional?null:void 0,c)}function Je(a,c=It.Default){return(function Gr(){return ks}()||cs)(X(a),c)}function dt(a,c=It.Default){return Je(a,Pt(c))}function Pt(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Ut(a){const c=[];for(let u=0;u<a.length;u++){const h=X(a[u]);if(Array.isArray(h)){if(0===h.length)throw new me(900,!1);let p,m=It.Default;for(let b=0;b<h.length;b++){const T=h[b],S=$(T);"number"==typeof S?-1===S?p=T.token:m|=S:p=T}c.push(Je(p,m))}else c.push(Je(h))}return c}function qt(a,c){return a[zn]=c,a.prototype[zn]=c,a}function $(a){return a[zn]}function ve(a){return{toString:a}.toString()}var se=(()=>((se=se||{})[se.OnPush=0]="OnPush",se[se.Default=1]="Default",se))(),on=(()=>{return(a=on||(on={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",on;var a})();const Yn={},At=[],Mi=oe({\u0275cmp:oe}),Jt=oe({\u0275dir:oe}),vi=oe({\u0275pipe:oe}),_a=oe({\u0275mod:oe}),Zi=oe({\u0275fac:oe}),dl=oe({__NG_ELEMENT_ID__:oe});let Fp=0;function hl(a){return ve(()=>{const u=!0===a.standalone,h={},p={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===se.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&a.dependencies||null,getStandaloneInjector:null,selectors:a.selectors||At,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||on.Emulated,id:"c"+Fp++,styles:a.styles||At,_:null,setInput:null,schemas:a.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},m=a.dependencies,b=a.features;return p.inputs=Eu(a.inputs,h),p.outputs=Eu(a.outputs),b&&b.forEach(T=>T(p)),p.directiveDefs=m?()=>("function"==typeof m?m():m).map(Tu).filter(Xd):null,p.pipeDefs=m?()=>("function"==typeof m?m():m).map(oi).filter(Xd):null,p})}function Tu(a){return hn(a)||bi(a)}function Xd(a){return null!==a}function Qn(a){return ve(()=>({type:a.type,bootstrap:a.bootstrap||At,declarations:a.declarations||At,imports:a.imports||At,exports:a.exports||At,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Eu(a,c){if(null==a)return Yn;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,c&&(c[p]=m)}return u}const pl=hl;function fl(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function hn(a){return a[Mi]||null}function bi(a){return a[Jt]||null}function oi(a){return a[vi]||null}function ci(a){const c=hn(a)||bi(a)||oi(a);return null!==c&&c.standalone}function qi(a,c){const u=a[_a]||null;if(!u&&!0===c)throw new Error(`Type ${pe(a)} does not have '\u0275mod' property.`);return u}function fr(a){return Array.isArray(a)&&"object"==typeof a[1]}function $r(a){return Array.isArray(a)&&!0===a[1]}function gl(a){return 0!=(4&a.flags)}function Zr(a){return a.componentOffset>-1}function Iu(a){return 1==(1&a.flags)}function gr(a){return null!==a.template}function ml(a){return 0!=(256&a[2])}function ko(a,c){return a.hasOwnProperty(Zi)?a[Zi]:null}class Ao{constructor(c,u,h){this.previousValue=c,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function dc(){return Ta}function Ta(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ea),hc}function hc(){const a=yl(this),c=a?.current;if(c){const u=a.previous;if(u===Yn)a.previous=c;else for(let h in c)u[h]=c[h];a.current=null,this.ngOnChanges(c)}}function Ea(a,c,u,h){const p=this.declaredInputs[u],m=yl(a)||function sh(a,c){return a[Mo]=c}(a,{previous:Yn,current:null}),b=m.current||(m.current={}),T=m.previous,S=T[p];b[p]=new Ao(S&&S.currentValue,c,T===Yn),a[h]=c}dc.ngInherit=!0;const Mo="__ngSimpleChanges__";function yl(a){return a[Mo]||null}function ai(a){for(;Array.isArray(a);)a=a[0];return a}function Ro(a,c){return ai(c[a])}function di(a,c){return ai(c[a.index])}function Da(a,c){return a.data[c]}function Oo(a,c){return a[c]}function Ri(a,c){const u=c[a];return fr(u)?u:u[0]}function xa(a){return 64==(64&a[2])}function Rs(a,c){return null==c?null:a[c]}function bl(a){a[18]=0}function wl(a,c){a[5]+=c;let u=a,h=a[3];for(;null!==h&&(1===c&&1===u[5]||-1===c&&0===u[5]);)h[5]+=c,u=h,h=h[3]}const zt={lFrame:hv(null),bindingsEnabled:!0};function yc(){return zt.bindingsEnabled}function be(){return zt.lFrame.lView}function gn(){return zt.lFrame.tView}function Nu(a){return zt.lFrame.contextLView=a,a[8]}function ah(a){return zt.lFrame.contextLView=null,a}function Fi(){let a=Cl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Cl(){return zt.lFrame.currentTNode}function _r(a,c){const u=zt.lFrame;u.currentTNode=a,u.isParent=c}function bc(){return zt.lFrame.isParent}function wc(){zt.lFrame.isParent=!1}function wi(){const a=zt.lFrame;let c=a.bindingRootIndex;return-1===c&&(c=a.bindingRootIndex=a.tView.bindingStartIndex),c}function Po(){return zt.lFrame.bindingIndex++}function hs(a){const c=zt.lFrame,u=c.bindingIndex;return c.bindingIndex=c.bindingIndex+a,u}function uh(a,c){const u=zt.lFrame;u.bindingIndex=u.bindingRootIndex=a,Vu(c)}function Vu(a){zt.lFrame.currentDirectiveIndex=a}function dh(){return zt.lFrame.currentQueryIndex}function Bu(a){zt.lFrame.currentQueryIndex=a}function hh(a){const c=a[1];return 2===c.type?c.declTNode:1===c.type?a[6]:null}function zp(a,c,u){if(u&It.SkipSelf){let p=c,m=a;for(;!(p=p.parent,null!==p||u&It.Host||(p=hh(m),null===p||(m=m[15],10&p.type))););if(null===p)return!1;c=p,a=m}const h=zt.lFrame=Gp();return h.currentTNode=c,h.lView=a,!0}function Tc(a){const c=Gp(),u=a[1];zt.lFrame=c,c.currentTNode=u.firstChild,c.lView=a,c.tView=u,c.contextLView=a,c.bindingIndex=u.bindingStartIndex,c.inI18n=!1}function Gp(){const a=zt.lFrame,c=null===a?null:a.child;return null===c?hv(a):c}function hv(a){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=c),c}function fm(){const a=zt.lFrame;return zt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Hu=fm;function gm(){const a=fm();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function ar(){return zt.lFrame.selectedIndex}function ka(a){zt.lFrame.selectedIndex=a}function Fn(){const a=zt.lFrame;return Da(a.tView,a.selectedIndex)}function El(a,c){for(let u=c.directiveStart,h=c.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:S,ngAfterViewChecked:x,ngOnDestroy:O}=m;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),T&&((a.contentHooks||(a.contentHooks=[])).push(u,T),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,T)),S&&(a.viewHooks||(a.viewHooks=[])).push(-u,S),x&&((a.viewHooks||(a.viewHooks=[])).push(u,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,x)),null!=O&&(a.destroyHooks||(a.destroyHooks=[])).push(u,O)}}function lo(a,c,u){zu(a,c,3,u)}function Ma(a,c,u,h){(3&a[2])===u&&zu(a,c,u,h)}function Or(a,c){let u=a[2];(3&u)===c&&(u&=2047,u+=1,a[2]=u)}function zu(a,c,u,h){const m=h??-1,b=c.length-1;let T=0;for(let S=void 0!==h?65535&a[18]:0;S<b;S++)if("number"==typeof c[S+1]){if(T=c[S],null!=h&&T>=h)break}else c[S]<0&&(a[18]+=65536),(T<m||-1==m)&&(Ec(a,u,c,S),a[18]=(4294901760&a[18])+S+2),S++}function Ec(a,c,u,h){const p=u[h]<0,m=u[h+1],T=a[p?-u[h]:u[h]];if(p){if(a[2]>>11<a[18]>>16&&(3&a[2])===c){a[2]+=2048;try{m.call(T)}finally{}}}else try{m.call(T)}finally{}}class Oa{constructor(c,u,h){this.factory=c,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function On(a,c,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],b=u[h++],T=u[h++];a.setAttribute(c,b,T,m)}else{const m=p,b=u[++h];Lo(m)?a.setProperty(c,m,b):a.setAttribute(c,m,b),h++}}return h}function Dl(a){return 3===a||4===a||6===a}function Lo(a){return 64===a.charCodeAt(0)}function Ps(a,c){if(null!==c&&0!==c.length)if(null===a||0===a.length)a=c.slice();else{let u=-1;for(let h=0;h<c.length;h++){const p=c[h];"number"==typeof p?u=p:0===u||xl(a,u,p,null,-1===u||2===u?c[++h]:null)}}return a}function xl(a,c,u,h,p){let m=0,b=a.length;if(-1===c)b=-1;else for(;m<a.length;){const T=a[m++];if("number"==typeof T){if(T===c){b=-1;break}if(T>c){b=m-1;break}}}for(;m<a.length;){const T=a[m];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==b&&(a.splice(b,0,c),m=b+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}function $u(a){return-1!==a}function Ic(a){return 32767&a}function xc(a,c){let u=function Dc(a){return a>>16}(a),h=c;for(;u>0;)h=h[15],u--;return h}let co=!0;function Fo(a){const c=co;return co=a,c}let Zu=0;const lr={};function Na(a,c){const u=Ac(a,c);if(-1!==u)return u;const h=c[1];h.firstCreatePass&&(a.injectorIndex=c.length,Bo(h.data,a),Bo(c,null),Bo(h.blueprint,null));const p=kl(a,c),m=a.injectorIndex;if($u(p)){const b=Ic(p),T=xc(p,c),S=T[1].data;for(let x=0;x<8;x++)c[m+x]=T[b+x]|S[b+x]}return c[m+8]=p,m}function Bo(a,c){a.push(0,0,0,0,0,0,0,0,c)}function Ac(a,c){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===c[a.injectorIndex+8]?-1:a.injectorIndex}function kl(a,c){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=c;for(;null!==p;){if(h=qp(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function qu(a,c,u){!function kc(a,c,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(dl)&&(h=u[dl]),null==h&&(h=u[dl]=Zu++);const p=255&h;c.data[a+(p>>5)]|=1<<p}(a,c,u)}function Ho(a,c,u){if(u&It.Optional||void 0!==a)return a;Be()}function La(a,c,u,h){if(u&It.Optional&&void 0===h&&(h=null),!(u&(It.Self|It.Host))){const p=a[9],m=Wn(void 0);try{return p?p.get(c,h,u&It.Optional):ji(c,h,u&It.Optional)}finally{Wn(m)}}return Ho(h,0,u)}function $p(a,c,u,h=It.Default,p){if(null!==a){if(1024&c[2]){const b=function Qu(a,c,u,h,p){let m=a,b=c;for(;null!==m&&null!==b&&1024&b[2]&&!(256&b[2]);){const T=Ns(m,b,u,h|It.Self,lr);if(T!==lr)return T;let S=m.parent;if(!S){const x=b[21];if(x){const O=x.get(u,lr,h);if(O!==lr)return O}S=qp(b),b=b[15]}m=S}return p}(a,c,u,h,lr);if(b!==lr)return b}const m=Ns(a,c,u,h,lr);if(m!==lr)return m}return La(c,u,h,p)}function Ns(a,c,u,h,p){const m=function Wu(a){if("string"==typeof a)return a.charCodeAt(0)||0;const c=a.hasOwnProperty(dl)?a[dl]:void 0;return"number"==typeof c?c>=0?255&c:Zp:c}(u);if("function"==typeof m){if(!zp(c,a,h))return h&It.Host?Ho(p,0,h):La(c,u,h,p);try{const b=m(h);if(null!=b||h&It.Optional)return b;Be()}finally{Hu()}}else if("number"==typeof m){let b=null,T=Ac(a,c),S=-1,x=h&It.Host?c[16][6]:null;for((-1===T||h&It.SkipSelf)&&(S=-1===T?kl(a,c):c[T+8],-1!==S&&Kr(h,!1)?(b=c[1],T=Ic(S),c=xc(S,c)):T=-1);-1!==T;){const O=c[1];if(Ku(m,T,O.data)){const H=Al(T,c,u,b,h,x);if(H!==lr)return H}S=c[T+8],-1!==S&&Kr(h,c[1].data[T+8]===x)&&Ku(m,T,c)?(b=O,T=Ic(S),c=xc(S,c)):T=-1}}return p}function Al(a,c,u,h,p,m){const b=c[1],T=b.data[a+8],O=Mc(T,b,u,null==h?Zr(T)&&co:h!=b&&0!=(3&T.type),p&It.Host&&m===T);return null!==O?Wr(c,b,O,T):lr}function Mc(a,c,u,h,p){const m=a.providerIndexes,b=c.data,T=1048575&m,S=a.directiveStart,O=m>>20,K=p?T+O:a.directiveEnd;for(let re=h?T:T+O;re<K;re++){const Ce=b[re];if(re<S&&u===Ce||re>=S&&Ce.type===u)return re}if(p){const re=b[S];if(re&&gr(re)&&re.type===u)return S}return null}function Wr(a,c,u,h){let p=a[u];const m=c.data;if(function Pr(a){return a instanceof Oa}(p)){const b=p;b.resolving&&function xe(a,c){const u=c?`. Dependency path: ${c.join(" > ")} > ${a}`:"";throw new me(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Ue(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Ae(a)}(m[u]));const T=Fo(b.canSeeViewProviders);b.resolving=!0;const S=b.injectImpl?Wn(b.injectImpl):null;zp(a,h,It.Default);try{p=a[u]=b.factory(void 0,m,a,h),c.firstCreatePass&&u>=h.directiveStart&&function _m(a,c,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=c.type.prototype;if(h){const b=Ta(c);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,p),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],c)}finally{null!==S&&Wn(S),Fo(T),b.resolving=!1,Hu()}}return p}function Ku(a,c,u){return!!(u[c+(a>>5)]&1<<a)}function Kr(a,c){return!(a&It.Self||a&It.Host&&c)}class Yr{constructor(c,u){this._tNode=c,this._lView=u}get(c,u,h){return $p(this._tNode,this._lView,c,Pt(h),u)}}function Zp(){return new Yr(Fi(),be())}function Yu(a){return ve(()=>{const c=a.prototype.constructor,u=c[Zi]||Rc(c),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[Zi]||Rc(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function Rc(a){return We(a)?()=>{const c=Rc(X(a));return c&&c()}:ko(a)}function qp(a){const c=a[1],u=c.type;return 2===u?c.declTNode:1===u?a[6]:null}function Ju(a){return function gh(a,c){if("class"===c)return a.classes;if("style"===c)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(Dl(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===c)return u[p+1];p+=2}}}return null}(Fi(),a)}const Ml="__parameters__";function Oc(a,c,u){return ve(()=>{const h=function _h(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(c);function p(...m){if(this instanceof p)return h.apply(this,m),this;const b=new p(...m);return T.annotation=b,T;function T(S,x,O){const H=S.hasOwnProperty(Ml)?S[Ml]:Object.defineProperty(S,Ml,{value:[]})[Ml];for(;H.length<=O;)H.push(null);return(H[O]=H[O]||[]).push(b),S}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class cn{constructor(c,u){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ut({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ps(a,c){a.forEach(u=>Array.isArray(u)?ps(u,c):c(u))}function Vc(a,c,u){c>=a.length?a.push(u):a.splice(c,0,u)}function Rl(a,c){return c>=a.length-1?a.pop():a.splice(c,1)[0]}function Va(a,c){const u=[];for(let h=0;h<a;h++)u.push(c);return u}function cr(a,c,u){let h=Ge(a,c);return h>=0?a[1|h]=u:(h=~h,function Jp(a,c,u,h){let p=a.length;if(p==c)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>c;)a[p]=a[p-2],p--;a[c]=u,a[c+1]=h}}(a,h,c,u)),h}function Nt(a,c){const u=Ge(a,c);if(u>=0)return a[1|u]}function Ge(a,c){return function Ol(a,c,u){let h=0,p=a.length>>u;for(;p!==h;){const m=h+(p-h>>1),b=a[m<<u];if(c===b)return m<<u;b>c?p=m:h=m+1}return~(p<<u)}(a,c,1)}const Ha=qt(Oc("Optional"),8),D=qt(Oc("SkipSelf"),4);var En=(()=>((En=En||{})[En.Important=1]="Important",En[En.DashCase=2]="DashCase",En))();const Vs=new Map;let Jr=0;const sf="__ngContext__";function li(a,c){fr(c)?(a[sf]=c[20],function Ch(a){Vs.set(a[20],a)}(c)):a[sf]=c}function Sh(a,c){return undefined(a,c)}function ja(a){const c=a[3];return $r(c)?c[3]:c}function ms(a){return xm(a[13])}function zc(a){return xm(a[4])}function xm(a){for(;null!==a&&!$r(a);)a=a[4];return a}function Vl(a,c,u,h,p){if(null!=h){let m,b=!1;$r(h)?m=h:fr(h)&&(b=!0,h=h[0]);const T=ai(h);0===a&&null!==u?null==p?qo(c,u,T):$a(c,u,T,p||null,!0):1===a&&null!==u?$a(c,u,T,p||null,!0):2===a?function Wo(a,c,u){const h=ad(a,c);h&&function xh(a,c,u,h){a.removeChild(c,u,h)}(a,h,c,u)}(c,T,b):3===a&&c.destroyNode(T),null!=m&&function F0(a,c,u,h,p){const m=u[7];m!==ai(u)&&Vl(c,a,h,m,p);for(let T=10;T<u.length;T++){const S=u[T];ld(S[1],S,a,c,h,m)}}(c,a,m,u,p)}}function id(a,c,u){return a.createElement(c,u)}function sd(a,c){const u=a[9],h=u.indexOf(c),p=c[3];512&c[2]&&(c[2]&=-513,wl(p,-1)),u.splice(h,1)}function Zo(a,c){if(a.length<=10)return;const u=10+c,h=a[u];if(h){const p=h[17];null!==p&&p!==a&&sd(p,h),c>0&&(a[u-1][4]=h[4]);const m=Rl(a,10+c);!function Am(a,c){ld(a,c,c[11],2,null,null),c[0]=null,c[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Rm(a,c){if(!(128&c[2])){const u=c[11];u.destroyNode&&ld(a,c,u,3,null,null),function $o(a){let c=a[13];if(!c)return Bl(a[1],a);for(;c;){let u=null;if(fr(c))u=c[13];else{const h=c[10];h&&(u=h)}if(!u){for(;c&&!c[4]&&c!==a;)fr(c)&&Bl(c[1],c),c=c[3];null===c&&(c=a),fr(c)&&Bl(c[1],c),u=c&&c[4]}c=u}}(c)}}function Bl(a,c){if(!(128&c[2])){c[2]&=-65,c[2]|=128,function Cv(a,c){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=c[u[h]];if(!(p instanceof Oa)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=p[m[b]],S=m[b+1];try{S.call(T)}finally{}}else try{m.call(p)}finally{}}}}(a,c),function Dh(a,c){const u=a.cleanup,h=c[7];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+3];b>=0?h[p=b]():h[p=-b].unsubscribe(),m+=2}else{const b=h[p=u[m+1]];u[m].call(b)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();c[7]=null}}(a,c),1===c[1].type&&c[11].destroy();const u=c[17];if(null!==u&&$r(c[3])){u!==c[3]&&sd(u,c);const h=c[19];null!==h&&h.detachView(a)}!function vv(a){Vs.delete(a[20])}(c)}}function od(a,c,u){return function jc(a,c,u){let h=c;for(;null!==h&&40&h.type;)h=(c=h).parent;if(null===h)return u[0];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:m}=a.data[h.directiveStart+p];if(m===on.None||m===on.Emulated)return null}return di(h,u)}}(a,c.parent,u)}function $a(a,c,u,h,p){a.insertBefore(c,u,h,p)}function qo(a,c,u){a.appendChild(c,u)}function Om(a,c,u,h,p){null!==h?$a(a,c,u,h,p):qo(a,c,u)}function ad(a,c){return a.parentNode(c)}function Nm(a,c,u){return kh(a,c,u)}let qa,gf,Gl,kh=function df(a,c,u){return 40&a.type?di(a,u):null};function Ah(a,c,u,h){const p=od(a,h,c),m=c[11],T=Nm(h.parent||c[6],h,c);if(null!=p)if(Array.isArray(u))for(let S=0;S<u.length;S++)Om(m,p,u[S],T,!1);else Om(m,p,u,T,!1)}function $c(a,c){if(null!==c){const u=c.type;if(3&u)return di(c,a);if(4&u)return br(-1,a[c.index]);if(8&u){const h=c.child;if(null!==h)return $c(a,h);{const p=a[c.index];return $r(p)?br(-1,p):ai(p)}}if(32&u)return Sh(c,a)()||ai(a[c.index]);{const h=Lm(a,c);return null!==h?Array.isArray(h)?h[0]:$c(ja(a[16]),h):$c(a,c.next)}}return null}function Lm(a,c){return null!==c?a[16][6].projection[c.projection]:null}function br(a,c){const u=10+a+1;if(u<c.length){const h=c[u],p=h[1].firstChild;if(null!==p)return $c(h,p)}return c[7]}function Hl(a,c,u,h,p,m,b){for(;null!=u;){const T=h[u.index],S=u.type;if(b&&0===c&&(T&&li(ai(T),h),u.flags|=2),32!=(32&u.flags))if(8&S)Hl(a,c,u.child,h,p,m,!1),Vl(c,a,p,T,m);else if(32&S){const x=Sh(u,h);let O;for(;O=x();)Vl(c,a,p,O,m);Vl(c,a,p,T,m)}else 16&S?Zc(a,c,h,u,p,m):Vl(c,a,p,T,m);u=b?u.projectionNext:u.next}}function ld(a,c,u,h,p,m){Hl(u,h,a.firstChild,c,p,m,!1)}function Zc(a,c,u,h,p,m){const b=u[16],S=b[6].projection[h.projection];if(Array.isArray(S))for(let x=0;x<S.length;x++)Vl(c,a,p,S[x],m);else Hl(a,c,S,b[3],p,m,!0)}function Yo(a,c,u){""===u?a.removeAttribute(c,"class"):a.setAttribute(c,"class",u)}function Ul(a,c,u){const{mergedAttrs:h,classes:p,styles:m}=u;null!==h&&On(a,c,h),null!==p&&Yo(a,c,p),null!==m&&function Tv(a,c,u){a.setAttribute(c,"style",u)}(a,c,m)}function Ka(a){return function Wa(){if(void 0===qa&&(qa=null,Gt.trustedTypes))try{qa=Gt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return qa}()?.createHTML(a)||a}function go(a){gf=a}function Qo(){if(void 0===Gl&&(Gl=null,Gt.trustedTypes))try{Gl=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Gl}function Vm(a){return Qo()?.createHTML(a)||a}function Bm(a){return Qo()?.createScriptURL(a)||a}class mf{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_t})`}}function C(a){return a instanceof mf?a.changingThisBreaksApplicationSecurity:a}function k(a,c){const u=function P(a){return a instanceof mf&&a.getTypeName()||null}(a);if(null!=u&&u!==c){if("ResourceURL"===u&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${u} (see ${_t})`)}return u===c}class Pi{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const u=(new window.DOMParser).parseFromString(Ka(c),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(c):(u.removeChild(u.firstChild),u)}catch{return null}}}class Hs{constructor(c){if(this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(c){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ka(c),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Ka(c),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(c){const u=c.attributes;for(let p=u.length-1;0<p;p--){const b=u.item(p).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&c.removeAttribute(b)}let h=c.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Um=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ud(a){return(a=String(a)).match(Um)?a:"unsafe:"+a}function Us(a){const c={};for(const u of a.split(","))c[u]=!0;return c}function Kc(...a){const c={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(c[h]=!0);return c}const _f=Us("area,br,col,hr,img,wbr"),yf=Us("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zm=Us("rp,rt"),jl=Kc(_f,Kc(yf,Us("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kc(zm,Us("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kc(zm,yf)),zs=Us("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ev=Kc(zs,Us("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Us("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mx=Us("script,style,template");class Rh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let u=c.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(c){const u=c.nodeName.toLowerCase();if(!jl.hasOwnProperty(u))return this.sanitizedSomething=!0,!mx.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=c.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),b=m.name,T=b.toLowerCase();if(!Ev.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let S=m.value;zs[T]&&(S=ud(S)),this.buf.push(" ",b,'="',bf(S),'"')}return this.buf.push(">"),!0}endElement(c){const u=c.nodeName.toLowerCase();jl.hasOwnProperty(u)&&!_f.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(c){this.buf.push(bf(c))}checkClobberedElement(c,u){if(u&&(c.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return u}}const V0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_x=/([^\#-~ |!])/g;function bf(a){return a.replace(/&/g,"&amp;").replace(V0,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(_x,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wf;function Zm(a){return"content"in a&&function Iv(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Ii=(()=>((Ii=Ii||{})[Ii.NONE=0]="NONE",Ii[Ii.HTML=1]="HTML",Ii[Ii.STYLE=2]="STYLE",Ii[Ii.SCRIPT=3]="SCRIPT",Ii[Ii.URL=4]="URL",Ii[Ii.RESOURCE_URL=5]="RESOURCE_URL",Ii))();function B0(a){const c=Yc();return c?Vm(c.sanitize(Ii.HTML,a)||""):k(a,"HTML")?Vm(C(a)):function Sv(a,c){let u=null;try{wf=wf||function Dt(a){const c=new Hs(a);return function Mh(){try{return!!(new window.DOMParser).parseFromString(Ka(""),"text/html")}catch{return!1}}()?new Pi(c):c}(a);let h=c?String(c):"";u=wf.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=wf.getInertBodyElement(h)}while(h!==m);return Ka((new Rh).sanitizeChildren(Zm(u)||u))}finally{if(u){const h=Zm(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function qc(){return void 0!==gf?gf:typeof document<"u"?document:void 0}(),Ae(a))}function Dv(a){const c=Yc();return c?c.sanitize(Ii.URL,a)||"":k(a,"URL")?C(a):ud(Ae(a))}function H0(a){const c=Yc();if(c)return Bm(c.sanitize(Ii.RESOURCE_URL,a)||"");if(k(a,"ResourceURL"))return Bm(C(a));throw new me(904,!1)}function kv(a,c,u){return function G0(a,c){return"src"===c&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===c&&("base"===a||"link"===a)?H0:Dv}(c,u)(a)}function Yc(){const a=be();return a&&a[12]}const Tf=new cn("ENVIRONMENT_INITIALIZER"),j0=new cn("INJECTOR",-1),$0=new cn("INJECTOR_DEF_TYPES");class Wm{get(c,u=Kn){if(u===Kn){const h=new Error(`NullInjectorError: No provider for ${pe(c)}!`);throw h.name="NullInjectorError",h}return u}}function aN(...a){return{\u0275providers:vx(0,a),\u0275fromNgModule:!0}}function vx(a,...c){const u=[],h=new Set;let p;return ps(c,m=>{const b=m;Z0(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&bx(p,u),u}function bx(a,c){for(let u=0;u<a.length;u++){const{providers:p}=a[u];Av(p,m=>{c.push(m)})}}function Z0(a,c,u,h){if(!(a=X(a)))return!1;let p=null,m=xr(a);const b=!m&&hn(a);if(m||b){if(b&&!b.standalone)return!1;p=a}else{const S=a.ngModule;if(m=xr(S),!m)return!1;p=S}const T=h.has(p);if(b){if(T)return!1;if(h.add(p),b.dependencies){const S="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const x of S)Z0(x,c,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let x;h.add(p);try{ps(m.imports,O=>{Z0(O,c,u,h)&&(x||(x=[]),x.push(O))})}finally{}void 0!==x&&bx(x,c)}if(!T){const x=ko(p)||(()=>new p);c.push({provide:p,useFactory:x,deps:At},{provide:$0,useValue:p,multi:!0},{provide:Tf,useValue:()=>Je(p),multi:!0})}const S=m.providers;null==S||T||Av(S,O=>{c.push(O)})}}return p!==a&&void 0!==a.providers}function Av(a,c){for(let u of a)ke(u)&&(u=u.\u0275providers),Array.isArray(u)?Av(u,c):c(u)}const wx=oe({provide:String,useValue:oe});function Mv(a){return null!==a&&"object"==typeof a&&wx in a}function Qc(a){return"function"==typeof a}const Rv=new cn("Set Injector scope."),Ym={},W0={};let Oh;function Qm(){return void 0===Oh&&(Oh=new Wm),Oh}class dd{}class hd extends dd{get destroyed(){return this._destroyed}constructor(c,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ov(c,b=>this.processProvider(b)),this.records.set(j0,Ya(void 0,this)),p.has("environment")&&this.records.set(dd,Ya(void 0,this));const m=this.records.get(Rv);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get($0.multi,At,It.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const u=$i(this),h=Wn(void 0);try{return c()}finally{$i(u),Wn(h)}}get(c,u=Kn,h=It.Default){this.assertNotDestroyed(),h=Pt(h);const p=$i(this),m=Wn(void 0);try{if(!(h&It.SkipSelf)){let T=this.records.get(c);if(void 0===T){const S=function Ix(a){return"function"==typeof a||"object"==typeof a&&a instanceof cn}(c)&&qn(c);T=S&&this.injectableDefInScope(S)?Ya(pd(c),Ym):null,this.records.set(c,T)}if(null!=T)return this.hydrate(c,T)}return(h&It.Self?Qm():this.parent).get(c,u=h&It.Optional&&u===Kn?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[jr]=b[jr]||[]).unshift(pe(c)),p)throw b;return function z(a,c,u,h){const p=a[jr];throw c[ls]&&p.unshift(c[ls]),a.message=function Y(a,c,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=pe(c);if(Array.isArray(c))p=c.map(pe).join(" -> ");else if("object"==typeof c){let m=[];for(let b in c)if(c.hasOwnProperty(b)){let T=c[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):pe(T)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(ma,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[jr]=null,a}(b,c,"R3InjectorError",this.source)}throw b}finally{Wn(m),$i(p)}}resolveInjectorInitializers(){const c=$i(this),u=Wn(void 0);try{const h=this.get(Tf.multi,At,It.Self);for(const p of h)p()}finally{$i(c),Wn(u)}}toString(){const c=[],u=this.records;for(const h of u.keys())c.push(pe(h));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(c){let u=Qc(c=X(c))?c:X(c&&c.provide);const h=function Tx(a){return Mv(a)?Ya(void 0,a.useValue):Ya(Ph(a),Ym)}(c);if(Qc(c)||!0!==c.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Ya(void 0,Ym,!0),p.factory=()=>Ut(p.multi),this.records.set(u,p)),u=c,p.multi.push(c)}this.records.set(u,h)}hydrate(c,u){return u.value===Ym&&(u.value=W0,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Sx(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(c){if(!c.providedIn)return!1;const u=X(c.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function pd(a){const c=qn(a),u=null!==c?c.factory:ko(a);if(null!==u)return u;if(a instanceof cn)throw new me(204,!1);if(a instanceof Function)return function Cx(a){const c=a.length;if(c>0)throw Va(c,"?"),new me(204,!1);const u=function hr(a){const c=a&&(a[ir]||a[Rn]);if(c){const u=function io(a){if(a.hasOwnProperty("name"))return a.name;const c=(""+a).match(/^function\s*([^\s(]+)/);return null===c?"":c[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),c}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new me(204,!1)}function Ph(a,c,u){let h;if(Qc(a)){const p=X(a);return ko(p)||pd(p)}if(Mv(a))h=()=>X(a.useValue);else if(function Gs(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Ut(a.deps||[]));else if(function Km(a){return!(!a||!a.useExisting)}(a))h=()=>Je(X(a.useExisting));else{const p=X(a&&(a.useClass||a.provide));if(!function Ex(a){return!!a.deps}(a))return ko(p)||pd(p);h=()=>new p(...Ut(a.deps))}return h}function Ya(a,c,u=!1){return{factory:a,value:c,multi:u?[]:void 0}}function Ov(a,c){for(const u of a)Array.isArray(u)?Ov(u,c):u&&ke(u)?Ov(u.\u0275providers,c):c(u)}class Dx{}class K0{}class Jm{resolveComponentFactory(c){throw function lN(a){const c=Error(`No component factory found for ${pe(a)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=a,c}(c)}}let Qa=(()=>{class a{}return a.NULL=new Jm,a})();function xx(){return Nh(Fi(),be())}function Nh(a,c){return new Sf(di(a,c))}let Sf=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=xx,a})();function kx(a){return a instanceof Sf?a.nativeElement:a}class J0{}let Ax=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function Mx(){const a=be(),u=Ri(Fi().index,a);return(fr(u)?u:a)[11]}(),a})(),Rx=(()=>{class a{}return a.\u0275prov=ut({token:a,providedIn:"root",factory:()=>null}),a})();class X0{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const Pv=new X0("15.1.2"),Nv={};function Df(a){return a.ngOriginalError}class Jc{constructor(){this._console=console}handleError(c){const u=this._findOriginalError(c);this._console.error("ERROR",c),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(c){let u=c&&Df(c);for(;u&&Df(u);)u=Df(u);return u||null}}function mo(a){return a instanceof Function?a():a}function sT(a,c,u){let h=a.length;for(;;){const p=a.indexOf(c,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=c.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}u=p+1}}const oT="ng-template";function aT(a,c,u){let h=0;for(;h<a.length;){let p=a[h++];if(u&&"class"===p){if(p=a[h],-1!==sT(p.toLowerCase(),c,0))return!0}else if(1===p){for(;h<a.length&&"string"==typeof(p=a[h++]);)if(p.toLowerCase()===c)return!0;return!1}}return!1}function lT(a){return 4===a.type&&a.value!==oT}function Vx(a,c,u){return c===(4!==a.type||u?a.value:oT)}function Bx(a,c,u){let h=4;const p=a.attrs||[],m=function uT(a){for(let c=0;c<a.length;c++)if(Dl(a[c]))return c;return a.length}(p);let b=!1;for(let T=0;T<c.length;T++){const S=c[T];if("number"!=typeof S){if(!b)if(4&h){if(h=2|1&h,""!==S&&!Vx(a,S,u)||""===S&&1===c.length){if(Jo(h))return!1;b=!0}}else{const x=8&h?S:c[++T];if(8&h&&null!==a.attrs){if(!aT(a.attrs,x,u)){if(Jo(h))return!1;b=!0}continue}const H=Hx(8&h?"class":S,p,lT(a),u);if(-1===H){if(Jo(h))return!1;b=!0;continue}if(""!==x){let K;K=H>m?"":p[H+1].toLowerCase();const re=8&h?K:null;if(re&&-1!==sT(re,x,0)||2&h&&x!==K){if(Jo(h))return!1;b=!0}}}}else{if(!b&&!Jo(h)&&!Jo(S))return!1;if(b&&Jo(S))continue;b=!1,h=S|1&h}}return Jo(h)||b}function Jo(a){return 0==(1&a)}function Hx(a,c,u,h){if(null===c)return-1;let p=0;if(h||!u){let m=!1;for(;p<c.length;){const b=c[p];if(b===a)return p;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=c[++p];for(;"string"==typeof T;)T=c[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=m?1:2}return-1}return function zx(a,c){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===c)return u;u++}return-1}(c,a)}function cT(a,c,u=!1){for(let h=0;h<c.length;h++)if(Bx(a,c[h],u))return!0;return!1}function dT(a,c){e:for(let u=0;u<c.length;u++){const h=c[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function Lv(a,c){return a?":not("+c.trim()+")":c}function dN(a){let c=a[0],u=1,h=2,p="",m=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const T=a[++u];p+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!Jo(b)&&(c+=Lv(m,p),p=""),h=b,m=m||!Jo(h);u++}return""!==p&&(c+=Lv(m,p)),c}const Qt={};function fT(a){gT(gn(),be(),ar()+a,!1)}function gT(a,c,u,h){if(!h)if(3==(3&c[2])){const m=a.preOrderCheckHooks;null!==m&&lo(c,m,u)}else{const m=a.preOrderHooks;null!==m&&Ma(c,m,0,u)}ka(u)}function bT(a,c=null,u=null,h){const p=Bv(a,c,u,h);return p.resolveInjectorInitializers(),p}function Bv(a,c=null,u=null,h,p=new Set){const m=[u||At,aN(a)];return h=h||("object"==typeof a?void 0:pe(a)),new hd(m,c||Qm(),h||null,p)}let Ja=(()=>{class a{static create(u,h){if(Array.isArray(u))return bT({name:""},h,u,"");{const p=u.name??"";return bT({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=Kn,a.NULL=new Wm,a.\u0275prov=ut({token:a,providedIn:"any",factory:()=>Je(j0)}),a.__NG_ELEMENT_ID__=-1,a})();function Xc(a,c=It.Default){const u=be();return null===u?Je(a,c):$p(Fi(),u,X(a),c)}function DT(){throw new Error("invalid")}function Xx(a,c){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const m=u[h+1];if(-1!==m){const b=a.data[m];Bu(u[h]),b.contentQueries(2,c[m],m)}}}function Vh(a,c,u,h,p,m,b,T,S,x,O){const H=c.blueprint.slice();return H[0]=p,H[2]=76|h,(null!==O||a&&1024&a[2])&&(H[2]|=1024),bl(H),H[3]=H[15]=a,H[8]=u,H[10]=b||a&&a[10],H[11]=T||a&&a[11],H[12]=S||a&&a[12]||null,H[9]=x||a&&a[9]||null,H[6]=m,H[20]=function Bi(){return Jr++}(),H[21]=O,H[16]=2==c.type?a[16]:H,H}function Bh(a,c,u,h,p){let m=a.data[c];if(null===m)m=function Hv(a,c,u,h,p){const m=Cl(),b=bc(),S=a.data[c]=function n1(a,c,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,c,h,p);return null===a.firstChild&&(a.firstChild=S),null!==m&&(b?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(a,c,u,h,p),function ch(){return zt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const b=function vc(){const a=zt.lFrame,c=a.currentTNode;return a.isParent?c:c.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return _r(m,!0),m}function Rf(a,c,u,h){if(0===u)return-1;const p=c.length;for(let m=0;m<u;m++)c.push(h),a.blueprint.push(h),a.data.push(null);return p}function o_(a,c,u){Tc(c);try{const h=a.viewQuery;null!==h&&Wv(1,h,u);const p=a.template;null!==p&&e1(a,c,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Xx(a,c),a.staticViewQueries&&Wv(2,a.viewQuery,u);const m=a.components;null!==m&&function kT(a,c){for(let u=0;u<c.length;u++)f1(a,c[u])}(c,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{c[2]&=-5,gm()}}function a_(a,c,u,h){const p=c[2];if(128!=(128&p)){Tc(c);try{bl(c),function ao(a){return zt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&e1(a,c,u,2,h);const b=3==(3&p);if(b){const x=a.preOrderCheckHooks;null!==x&&lo(c,x,null)}else{const x=a.preOrderHooks;null!==x&&Ma(c,x,0,null),Or(c,0)}if(function VT(a){for(let c=ms(a);null!==c;c=zc(c)){if(!c[2])continue;const u=c[9];for(let h=0;h<u.length;h++){const p=u[h];512&p[2]||wl(p[3],1),p[2]|=512}}}(c),function p1(a){for(let c=ms(a);null!==c;c=zc(c))for(let u=10;u<c.length;u++){const h=c[u],p=h[1];xa(h)&&a_(p,h,p.template,h[8])}}(c),null!==a.contentQueries&&Xx(a,c),b){const x=a.contentCheckHooks;null!==x&&lo(c,x)}else{const x=a.contentHooks;null!==x&&Ma(c,x,1),Or(c,1)}!function _N(a,c){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)ka(~p);else{const m=p,b=u[++h],T=u[++h];uh(b,m),T(2,c[m])}}}finally{ka(-1)}}(a,c);const T=a.components;null!==T&&function xT(a,c){for(let u=0;u<c.length;u++)BT(a,c[u])}(c,T);const S=a.viewQuery;if(null!==S&&Wv(2,S,h),b){const x=a.viewCheckHooks;null!==x&&lo(c,x)}else{const x=a.viewHooks;null!==x&&Ma(c,x,2),Or(c,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),c[2]&=-41,512&c[2]&&(c[2]&=-513,wl(c[3],-1))}finally{gm()}}}function e1(a,c,u,h,p){const m=ar(),b=2&h;try{ka(-1),b&&c.length>22&&gT(a,c,22,!1),u(h,p)}finally{ka(m)}}function AT(a,c,u){if(gl(c)){const p=c.directiveEnd;for(let m=c.directiveStart;m<p;m++){const b=a.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function gd(a,c,u){yc()&&(function l1(a,c,u,h){const p=u.directiveStart,m=u.directiveEnd;Zr(u)&&function $v(a,c,u){const h=di(c,a),p=Uv(u),m=a[10],b=l_(a,Vh(a,p,null,u.onPush?32:16,h,c,m,m.createRenderer(h,u),null,null,null));a[c.index]=b}(c,u,a.data[p+u.componentOffset]),a.firstCreatePass||Na(u,c),li(h,c);const b=u.initialInputs;for(let T=p;T<m;T++){const S=a.data[T],x=Wr(c,a,T,u);li(x,c),null!==b&&h1(0,T-p,x,S,0,b),gr(S)&&(Ri(u.index,c)[8]=Wr(c,a,T,u))}}(a,c,u,di(u,c)),64==(64&u.flags)&&LT(a,c,u))}function MT(a,c,u=di){const h=c.localNames;if(null!==h){let p=c.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],T=-1===b?u(c,a):a[b];a[p++]=T}}}function Uv(a){const c=a.tView;return null===c||c.incompleteFirstPass?a.tView=zv(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):c}function zv(a,c,u,h,p,m,b,T,S,x){const O=22+h,H=O+p,K=function t1(a,c){const u=[];for(let h=0;h<c;h++)u.push(h<a?null:Qt);return u}(O,H),re="function"==typeof x?x():x;return K[1]={type:a,blueprint:K,template:u,queries:null,viewQuery:T,declTNode:c,data:K.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:S,consts:re,incompleteFirstPass:!1}}function RT(a,c,u,h){const p=HT(c);null===u?p.push(h):(p.push(u),a.firstCreatePass&&UT(a).push(h,p.length-1))}function OT(a,c,u,h){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const m=a[p];null===h?PT(u,c,p,m):h.hasOwnProperty(p)&&PT(u,c,h[p],m)}return u}function PT(a,c,u,h){a.hasOwnProperty(u)?a[u].push(c,h):a[u]=[c,h]}function s1(a,c){const u=Ri(c,a);16&u[2]||(u[2]|=32)}function ys(a,c,u,h){let p=!1;if(yc()){const m=null===h?null:{"":-1},b=function u1(a,c){const u=a.directiveRegistry;let h=null,p=null;if(u)for(let m=0;m<u.length;m++){const b=u[m];if(cT(c,b.selectors,!1))if(h||(h=[]),gr(b))if(null!==b.findHostDirectiveDefs){const T=[];p=p||new Map,b.findHostDirectiveDefs(b,T,p),h.unshift(...T,b),jv(a,c,T.length)}else h.unshift(b),jv(a,c,0);else p=p||new Map,b.findHostDirectiveDefs?.(b,h,p),h.push(b)}return null===h?null:[h,p]}(a,u);let T,S;null===b?T=S=null:[T,S]=b,null!==T&&(p=!0,vs(a,c,u,T,m,S)),m&&function md(a,c,u){if(c){const h=a.localNames=[];for(let p=0;p<c.length;p+=2){const m=u[c[p+1]];if(null==m)throw new me(-301,!1);h.push(c[p],m)}}}(u,h,m)}return u.mergedAttrs=Ps(u.mergedAttrs,u.attrs),p}function vs(a,c,u,h,p,m){for(let x=0;x<h.length;x++)qu(Na(u,c),a,h[x].type);!function d1(a,c,u){a.flags|=1,a.directiveStart=c,a.directiveEnd=c+u,a.providerIndexes=c}(u,a.data.length,h.length);for(let x=0;x<h.length;x++){const O=h[x];O.providersResolver&&O.providersResolver(O)}let b=!1,T=!1,S=Rf(a,c,h.length,null);for(let x=0;x<h.length;x++){const O=h[x];u.mergedAttrs=Ps(u.mergedAttrs,O.hostAttrs),yd(a,u,c,S,O),_d(S,O,p),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const H=O.type.prototype;!b&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),b=!0),!T&&(H.ngOnChanges||H.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),T=!0),S++}!function r1(a,c,u){const p=c.directiveEnd,m=a.data,b=c.attrs,T=[];let S=null,x=null;for(let O=c.directiveStart;O<p;O++){const H=m[O],K=u?u.get(H):null,Ce=K?K.outputs:null;S=OT(H.inputs,O,S,K?K.inputs:null),x=OT(H.outputs,O,x,Ce);const je=null===S||null===b||lT(c)?null:Nf(S,O,b);T.push(je)}null!==S&&(S.hasOwnProperty("class")&&(c.flags|=8),S.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=T,c.inputs=S,c.outputs=x}(a,u,m)}function LT(a,c,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,b=function Fu(){return zt.lFrame.currentDirectiveIndex}();try{ka(m);for(let T=h;T<p;T++){const S=a.data[T],x=c[T];Vu(T),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&c1(S,x)}}finally{ka(-1),Vu(b)}}function c1(a,c){null!==a.hostBindings&&a.hostBindings(1,c)}function jv(a,c,u){c.componentOffset=u,(a.components||(a.components=[])).push(c.index)}function _d(a,c,u){if(u){if(c.exportAs)for(let h=0;h<c.exportAs.length;h++)u[c.exportAs[h]]=a;gr(c)&&(u[""]=a)}}function yd(a,c,u,h,p){a.data[h]=p;const m=p.factory||(p.factory=ko(p.type)),b=new Oa(m,gr(p),Xc);a.blueprint[h]=b,u[h]=b,function o1(a,c,u,h,p){const m=p.hostBindings;if(m){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const T=~c.index;(function a1(a){let c=a.length;for(;c>0;){const u=a[--c];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(u,h,m)}}(a,c,h,Rf(a,u,p.hostVars,Qt),p)}function $s(a,c,u,h,p,m){const b=di(a,c);!function Pf(a,c,u,h,p,m,b){if(null==m)a.removeAttribute(c,p,u);else{const T=null==b?Ae(m):b(m,h||"",p);a.setAttribute(c,p,T,u)}}(c[11],b,m,a.value,u,h,p)}function h1(a,c,u,h,p,m){const b=m[c];if(null!==b){const T=h.setInput;for(let S=0;S<b.length;){const x=b[S++],O=b[S++],H=b[S++];null!==T?h.setInput(u,H,x,O):u[O]=H}}}function Nf(a,c,u){let h=null,p=0;for(;p<u.length;){const m=u[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const b=a[m];for(let T=0;T<b.length;T+=2)if(b[T]===c){h.push(m,b[T+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function FT(a,c,u,h){return[a,!0,!1,c,null,0,h,u,null,null]}function BT(a,c){const u=Ri(c,a);if(xa(u)){const h=u[1];48&u[2]?a_(h,u,h.template,u[8]):u[5]>0&&Zv(u)}}function Zv(a){for(let h=ms(a);null!==h;h=zc(h))for(let p=10;p<h.length;p++){const m=h[p];if(xa(m))if(512&m[2]){const b=m[1];a_(b,m,b.template,m[8])}else m[5]>0&&Zv(m)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=Ri(u[h],a);xa(p)&&p[5]>0&&Zv(p)}}function f1(a,c){const u=Ri(c,a),h=u[1];(function g1(a,c){for(let u=c.length;u<a.blueprint.length;u++)c.push(a.blueprint[u])})(h,u),o_(h,u,u[8])}function l_(a,c){return a[13]?a[14][4]=c:a[13]=c,a[14]=c,c}function qv(a){for(;a;){a[2]|=32;const c=ja(a);if(ml(a)&&!c)return a;a=c}return null}function c_(a,c,u,h=!0){const p=c[10];p.begin&&p.begin();try{a_(a,c,a.template,u)}catch(b){throw h&&GT(c,b),b}finally{p.end&&p.end()}}function Wv(a,c,u){Bu(0),c(a,u)}function HT(a){return a[7]||(a[7]=[])}function UT(a){return a.cleanup||(a.cleanup=[])}function GT(a,c){const u=a[9],h=u?u.get(Jc,null):null;h&&h.handleError(c)}function Kv(a,c,u,h,p){for(let m=0;m<u.length;){const b=u[m++],T=u[m++],S=c[b],x=a.data[b];null!==x.setInput?x.setInput(S,p,h,T):S[T]=p}}function Zl(a,c,u){const h=Ro(c,a);!function km(a,c,u){a.setValue(c,u)}(a[11],h,u)}function u_(a,c,u){let h=u?a.styles:null,p=u?a.classes:null,m=0;if(null!==c)for(let b=0;b<c.length;b++){const T=c[b];"number"==typeof T?m=T:1==m?p=he(p,T):2==m&&(h=he(h,T+": "+c[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function d_(a,c,u,h,p=!1){for(;null!==u;){const m=c[u.index];if(null!==m&&h.push(ai(m)),$r(m))for(let T=10;T<m.length;T++){const S=m[T],x=S[1].firstChild;null!==x&&d_(S[1],S,x,h)}const b=u.type;if(8&b)d_(a,c,u.child,h);else if(32&b){const T=Sh(u,c);let S;for(;S=T();)h.push(S)}else if(16&b){const T=Lm(c,u);if(Array.isArray(T))h.push(...T);else{const S=ja(c[16]);d_(S[1],S,T,h,!0)}}u=p?u.projectionNext:u.next}return h}class Lf{get rootNodes(){const c=this._lView,u=c[1];return d_(u,c,u.firstChild,[])}constructor(c,u){this._lView=c,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(c){this._lView[8]=c}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[3];if($r(c)){const u=c[8],h=u?u.indexOf(this):-1;h>-1&&(Zo(c,h),Rl(u,h))}this._attachedToViewContainer=!1}Rm(this._lView[1],this._lView)}onDestroy(c){RT(this._lView[1],this._lView,null,c)}markForCheck(){qv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){c_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gc(a,c){ld(a,c,c[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=c}}class y1 extends Lf{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;c_(c[1],c,c[8],!1)}checkNoChanges(){}get context(){return null}}class jT extends Qa{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const u=hn(c);return new Ff(u,this.ngModule)}}function $T(a){const c=[];for(let u in a)a.hasOwnProperty(u)&&c.push({propName:a[u],templateName:u});return c}class b1{constructor(c,u){this.injector=c,this.parentInjector=u}get(c,u,h){h=Pt(h);const p=this.injector.get(c,Nv,h);return p!==Nv||u===Nv?p:this.parentInjector.get(c,u,h)}}class Ff extends K0{get inputs(){return $T(this.componentDef.inputs)}get outputs(){return $T(this.componentDef.outputs)}constructor(c,u){super(),this.componentDef=c,this.ngModule=u,this.componentType=c.type,this.selector=function hT(a){return a.map(dN).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!u}create(c,u,h,p){let m=(p=p||this.ngModule)instanceof dd?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new b1(c,m):c,T=b.get(J0,null);if(null===T)throw new me(407,!1);const S=b.get(Rx,null),x=T.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",H=h?function Of(a,c,u){return a.selectRootElement(c,u===on.ShadowDom)}(x,h,this.componentDef.encapsulation):id(x,O,function v1(a){const c=a.toLowerCase();return"svg"===c?"svg":"math"===c?"math":null}(O)),K=this.componentDef.onPush?288:272,re=zv(0,null,null,1,0,null,null,null,null,null),Ce=Vh(null,re,null,K,null,null,T,x,S,b,null);let je,rt;Tc(Ce);try{const yt=this.componentDef;let Bt,Fe=null;yt.findHostDirectiveDefs?(Bt=[],Fe=new Map,yt.findHostDirectiveDefs(yt,Bt,Fe),Bt.push(yt)):Bt=[yt];const Zt=function C1(a,c){const u=a[1];return a[22]=c,Bh(u,22,2,"#host",null)}(Ce,H),ti=function T1(a,c,u,h,p,m,b,T){const S=p[1];!function E1(a,c,u,h){for(const p of a)c.mergedAttrs=Ps(c.mergedAttrs,p.hostAttrs);null!==c.mergedAttrs&&(u_(c,c.mergedAttrs,!0),null!==u&&Ul(h,u,c))}(h,a,c,b);const x=m.createRenderer(c,u),O=Vh(p,Uv(u),null,u.onPush?32:16,p[a.index],a,m,x,T||null,null,null);return S.firstCreatePass&&jv(S,a,h.length-1),l_(p,O),p[a.index]=O}(Zt,H,yt,Bt,Ce,T,x);rt=Da(re,22),H&&function I1(a,c,u,h){if(h)On(a,u,["ng-version",Pv.full]);else{const{attrs:p,classes:m}=function pT(a){const c=[],u=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&c.push(m,a[++h]):8===p&&u.push(m);else{if(!Jo(p))break;p=m}h++}return{attrs:c,classes:u}}(c.selectors[0]);p&&On(a,u,p),m&&m.length>0&&Yo(a,u,m.join(" "))}}(x,yt,H,h),void 0!==u&&function D1(a,c,u){const h=a.projection=[];for(let p=0;p<c.length;p++){const m=u[p];h.push(null!=m?Array.from(m):null)}}(rt,this.ngContentSelectors,u),je=function S1(a,c,u,h,p,m){const b=Fi(),T=p[1],S=di(b,p);vs(T,p,b,u,null,h);for(let O=0;O<u.length;O++)li(Wr(p,T,b.directiveStart+O,b),p);LT(T,p,b),S&&li(S,p);const x=Wr(p,T,b.directiveStart+b.componentOffset,b);if(a[8]=p[8]=x,null!==m)for(const O of m)O(x,c);return AT(T,b,a),x}(ti,yt,Bt,Fe,Ce,[Yv]),o_(re,Ce,null)}finally{gm()}return new w1(this.componentType,je,Nh(rt,Ce),Ce,rt)}}class w1 extends Dx{constructor(c,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new y1(p),this.componentType=c}setInput(c,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[c])){const m=this._rootLView;Kv(m[1],m,p,c,u),s1(m,this._tNode.index)}}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function Yv(){const a=Fi();El(be()[1],a)}function Qv(a){let c=function ZT(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;c;){let p;if(gr(a))p=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new me(903,!1);p=c.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=Jv(a.inputs),b.declaredInputs=Jv(a.declaredInputs),b.outputs=Jv(a.outputs);const T=p.hostBindings;T&&qT(a,T);const S=p.viewQuery,x=p.contentQueries;if(S&&Vf(a,S),x&&Bf(a,x),ye(a.inputs,p.inputs),ye(a.declaredInputs,p.declaredInputs),ye(a.outputs,p.outputs),gr(p)&&p.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(a),T===Qv&&(u=!1)}}c=Object.getPrototypeOf(c)}!function x1(a){let c=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=c+=p.hostVars,p.hostAttrs=Ps(p.hostAttrs,u=Ps(u,p.hostAttrs))}}(h)}function Jv(a){return a===Yn?{}:a===At?[]:a}function Vf(a,c){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{c(h,p),u(h,p)}:c}function Bf(a,c){const u=a.contentQueries;a.contentQueries=u?(h,p,m)=>{c(h,p,m),u(h,p,m)}:c}function qT(a,c){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{c(h,p),u(h,p)}:c}let Hf=null;function Xr(){if(!Hf){const a=Gt.Symbol;if(a&&a.iterator)Hf=a.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<c.length;++u){const h=c[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Hf=h)}}}return Hf}function ws(a){return!!h_(a)&&(Array.isArray(a)||!(a instanceof Map)&&Xr()in a)}function h_(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function _o(a,c,u){return a[c]=u}function Uh(a,c){return a[c]}function Lr(a,c,u){return!Object.is(a[c],u)&&(a[c]=u,!0)}function vd(a,c,u,h){const p=Lr(a,c,u);return Lr(a,c+1,h)||p}function Uf(a,c,u,h,p){const m=vd(a,c,u,h);return Lr(a,c+2,p)||m}function ur(a,c,u,h,p,m){const b=vd(a,c,u,h);return vd(a,c+2,p,m)||b}function zf(a,c,u,h){const p=be();return Lr(p,Po(),c)&&(gn(),$s(Fn(),p,a,c,u,h)),zf}function wd(a,c,u,h,p,m){const T=vd(a,function yr(){return zt.lFrame.bindingIndex}(),u,p);return hs(2),T?c+Ae(u)+h+Ae(p)+m:Qt}function f_(a,c,u,h,p,m,b,T){const S=be(),x=gn(),O=a+22,H=x.firstCreatePass?function jf(a,c,u,h,p,m,b,T,S){const x=c.consts,O=Bh(c,a,4,b||null,Rs(x,T));ys(c,u,O,Rs(x,S)),El(c,O);const H=O.tViews=zv(2,O,h,p,m,c.directiveRegistry,c.pipeRegistry,null,c.schemas,x);return null!==c.queries&&(c.queries.template(c,O),H.queries=c.queries.embeddedTView(O)),O}(O,x,S,c,u,h,p,m,b):x.data[O];_r(H,!1);const K=S[11].createComment("");Ah(x,S,K,H),li(K,S),l_(S,S[O]=FT(K,S,K,H)),Iu(H)&&gd(x,S,H),null!=b&&MT(S,H,T)}function Qi(a){return Oo(function lh(){return zt.lFrame.contextLView}(),22+a)}function g_(a,c,u){const h=be();return Lr(h,Po(),c)&&function js(a,c,u,h,p,m,b,T){const S=di(c,u);let O,x=c.inputs;!T&&null!=x&&(O=x[h])?(Kv(a,u,O,h,p),Zr(c)&&s1(u,c.index)):3&c.type&&(h=function NT(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,c.value||"",h):p,m.setProperty(S,h,p))}(gn(),Fn(),h,a,c,h[11],u,!1),g_}function Xv(a,c,u,h,p){const b=p?"class":"style";Kv(a,u,c.inputs[b],b,h)}function m_(a,c,u,h){const p=be(),m=gn(),b=22+a,T=p[11],S=p[b]=id(T,c,function mm(){return zt.lFrame.currentNamespace}()),x=m.firstCreatePass?function R1(a,c,u,h,p,m,b){const T=c.consts,x=Bh(c,a,2,p,Rs(T,m));return ys(c,u,x,Rs(T,b)),null!==x.attrs&&u_(x,x.attrs,!1),null!==x.mergedAttrs&&u_(x,x.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,x),x}(b,m,p,0,c,u,h):m.data[b];return _r(x,!0),Ul(T,S,x),32!=(32&x.flags)&&Ah(m,p,S,x),0===function _c(){return zt.lFrame.elementDepthCount}()&&li(S,p),function Ru(){zt.lFrame.elementDepthCount++}(),Iu(x)&&(gd(m,p,x),AT(m,x,p)),null!==h&&MT(p,x),m_}function __(){let a=Fi();bc()?wc():(a=a.parent,_r(a,!1));const c=a;!function Ou(){zt.lFrame.elementDepthCount--}();const u=gn();return u.firstCreatePass&&(El(u,a),gl(a)&&u.queries.elementEnd(a)),null!=c.classesWithoutHost&&function Sl(a){return 0!=(8&a.flags)}(c)&&Xv(u,c,be(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function Sc(a){return 0!=(16&a.flags)}(c)&&Xv(u,c,be(),c.stylesWithoutHost,!1),__}function eb(a,c,u,h){return m_(a,c,u,h),__(),eb}function $f(a,c,u){const h=be(),p=gn(),m=a+22,b=p.firstCreatePass?function O1(a,c,u,h,p){const m=c.consts,b=Rs(m,h),T=Bh(c,a,8,"ng-container",b);return null!==b&&u_(T,b,!0),ys(c,u,T,Rs(m,p)),null!==c.queries&&c.queries.elementStart(c,T),T}(m,p,h,c,u):p.data[m];_r(b,!0);const T=h[m]=h[11].createComment("");return Ah(p,h,T,b),li(T,h),Iu(b)&&(gd(p,h,b),AT(p,b,h)),null!=u&&MT(h,b),$f}function Wl(){let a=Fi();const c=gn();return bc()?wc():(a=a.parent,_r(a,!1)),c.firstCreatePass&&(El(c,a),gl(a)&&c.queries.elementEnd(a)),Wl}function tb(a,c,u){return $f(a,c,u),Wl(),tb}function zh(){return be()}function nb(a){return!!a&&"function"==typeof a.then}function nE(a){return!!a&&"function"==typeof a.subscribe}const Gh=nE;function jh(a,c,u,h){const p=be(),m=gn(),b=Fi();return function rb(a,c,u,h,p,m,b){const T=Iu(h),x=a.firstCreatePass&&UT(a),O=c[8],H=HT(c);let K=!0;if(3&h.type||b){const je=di(h,c),rt=b?b(je):je,yt=H.length,Bt=b?Zt=>b(ai(Zt[h.index])):h.index;let Fe=null;if(!b&&T&&(Fe=function iE(a,c,u,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const b=p[m];if(b===u&&p[m+1]===h){const T=c[7],S=p[m+2];return T.length>S?T[S]:null}"string"==typeof b&&(m+=2)}return null}(a,c,p,h.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=m,Fe.__ngLastListenerFn__=m,K=!1;else{m=ob(h,c,O,m,!1);const Zt=u.listen(rt,p,m);H.push(m,Zt),x&&x.push(p,Bt,yt,yt+1)}}else m=ob(h,c,O,m,!1);const re=h.outputs;let Ce;if(K&&null!==re&&(Ce=re[p])){const je=Ce.length;if(je)for(let rt=0;rt<je;rt+=2){const ti=c[Ce[rt]][Ce[rt+1]].subscribe(m),Di=H.length;H.push(m,ti),x&&x.push(p,h.index,Di,-(Di+1))}}}(m,p,p[11],b,a,c,h),jh}function sb(a,c,u,h){try{return!1!==u(h)}catch(p){return GT(a,p),!1}}function ob(a,c,u,h,p){return function m(b){if(b===Function)return h;qv(a.componentOffset>-1?Ri(a.index,c):c);let S=sb(c,0,h,b),x=m.__ngNextListenerFn__;for(;x;)S=sb(c,0,x,b)&&S,x=x.__ngNextListenerFn__;return p&&!1===S&&(b.preventDefault(),b.returnValue=!1),S}}function ab(a=1){return function pv(a){return(zt.lFrame.contextLView=function ph(a,c){for(;a>0;)c=c[15],a--;return c}(a,zt.lFrame.contextLView))[8]}(a)}function rE(a,c){let u=null;const h=function Ux(a){const c=a.attrs;if(null!=c){const u=c.indexOf(5);if(!(1&u))return c[u+1]}return null}(a);for(let p=0;p<c.length;p++){const m=c[p];if("*"!==m){if(null===h?cT(a,m,!0):dT(h,m))return p}else u=p}return u}function y_(a){const c=be()[16][6];if(!c.projection){const h=c.projection=Va(a?a.length:1,null),p=h.slice();let m=c.child;for(;null!==m;){const b=a?rE(m,a):0;null!==b&&(p[b]?p[b].projectionNext=m:h[b]=m,p[b]=m),m=m.next}}}function lb(a,c=0,u){const h=be(),p=gn(),m=Bh(p,22+a,16,null,u||null);null===m.projection&&(m.projection=c),wc(),32!=(32&m.flags)&&function Ko(a,c,u){Zc(c[11],0,c,u,od(a,u,c),Nm(u.parent||c[6],u,c))}(p,h,m)}function qf(a,c){return a<<17|c<<2}function tu(a){return a>>17&32767}function C_(a){return 2|a}function nu(a){return(131068&a)>>2}function T_(a,c){return-131069&a|c<<2}function db(a){return 1|a}function hb(a,c,u,h,p){const m=a[u+1],b=null===c;let T=h?tu(m):nu(m),S=!1;for(;0!==T&&(!1===S||b);){const O=a[T+1];V1(a[T],c)&&(S=!0,a[T+1]=h?db(O):C_(O)),T=h?tu(O):nu(O)}S&&(a[u+1]=h?C_(m):db(m))}function V1(a,c){return null===a||null==c||(Array.isArray(a)?a[1]:a)===c||!(!Array.isArray(a)||"string"!=typeof c)&&Ge(a,c)>=0}const Ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uE(a){return a.substring(Ji.key,Ji.keyEnd)}function iu(a){return a.substring(Ji.value,Ji.valueEnd)}function dE(a,c){const u=Ji.textEnd;return u===c?-1:(c=Ji.keyEnd=function H1(a,c,u){for(;c<u&&a.charCodeAt(c)>32;)c++;return c}(a,Ji.key=c,u),Sd(a,c,u))}function Wf(a,c){const u=Ji.textEnd;let h=Ji.key=Sd(a,c,u);return u===h?-1:(h=Ji.keyEnd=function U1(a,c,u){let h;for(;c<u&&(45===(h=a.charCodeAt(c))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)c++;return c}(a,h,u),h=hE(a,h,u),h=Ji.value=Sd(a,h,u),h=Ji.valueEnd=function z1(a,c,u){let h=-1,p=-1,m=-1,b=c,T=b;for(;b<u;){const S=a.charCodeAt(b++);if(59===S)return T;34===S||39===S?T=b=E_(a,S,b,u):c===b-4&&85===m&&82===p&&76===h&&40===S?T=b=E_(a,41,b,u):S>32&&(T=b),m=p,p=h,h=-33&S}return T}(a,h,u),hE(a,h,u))}function Ed(a){Ji.key=0,Ji.keyEnd=0,Ji.value=0,Ji.valueEnd=0,Ji.textEnd=a.length}function Sd(a,c,u){for(;c<u&&a.charCodeAt(c)<=32;)c++;return c}function hE(a,c,u,h){return(c=Sd(a,c,u))<u&&c++,c}function E_(a,c,u,h){let p=-1,m=u;for(;m<h;){const b=a.charCodeAt(m++);if(b==c&&92!==p)return m;p=92==b&&92===p?0:b}throw new Error}function fb(a,c,u){return vo(a,c,u,!1),fb}function S_(a,c){return vo(a,c,null,!0),S_}function na(a){ra(Kl,pE,a,!1)}function pE(a,c){for(let u=function B1(a){return Ed(a),Wf(a,Sd(a,0,Ji.textEnd))}(c);u>=0;u=Wf(c,u))Kl(a,uE(c),iu(c))}function gb(a){ra(cr,ia,a,!0)}function ia(a,c){for(let u=function pb(a){return Ed(a),dE(a,Sd(a,0,Ji.textEnd))}(c);u>=0;u=dE(c,u))cr(a,uE(c),!0)}function vo(a,c,u,h){const p=be(),m=gn(),b=hs(2);m.firstUpdatePass&&_b(m,a,b,h),c!==Qt&&Lr(p,b,c)&&D_(m,m.data[ar()],p,p[11],a,p[b+1]=function yE(a,c){return null==a||("string"==typeof c?a+=c:"object"==typeof a&&(a=pe(C(a)))),a}(c,u),h,b)}function ra(a,c,u,h){const p=gn(),m=hs(2);p.firstUpdatePass&&_b(p,null,m,h);const b=be();if(u!==Qt&&Lr(b,m,u)){const T=p.data[ar()];if(si(T,h)&&!mb(p,m)){let S=h?T.classesWithoutHost:T.stylesWithoutHost;null!==S&&(u=he(S,u||"")),Xv(p,T,b,u,h)}else!function jn(a,c,u,h,p,m,b,T){p===Qt&&(p=At);let S=0,x=0,O=0<p.length?p[0]:null,H=0<m.length?m[0]:null;for(;null!==O||null!==H;){const K=S<p.length?p[S+1]:void 0,re=x<m.length?m[x+1]:void 0;let je,Ce=null;O===H?(S+=2,x+=2,K!==re&&(Ce=H,je=re)):null===H||null!==O&&O<H?(S+=2,Ce=O):(x+=2,Ce=H,je=re),null!==Ce&&D_(a,c,u,h,Ce,je,b,T),O=S<p.length?p[S]:null,H=x<m.length?m[x]:null}}(p,T,b,b[11],b[m+1],b[m+1]=function an(a,c,u){if(null==u||""===u)return At;const h=[],p=C(u);if(Array.isArray(p))for(let m=0;m<p.length;m++)a(h,p[m],!0);else if("object"==typeof p)for(const m in p)p.hasOwnProperty(m)&&a(h,m,p[m]);else"string"==typeof p&&c(h,p);return h}(a,c,u),h,m)}}function mb(a,c){return c>=a.expandoStartIndex}function _b(a,c,u,h){const p=a.data;if(null===p[u+1]){const m=p[ar()],b=mb(a,u);si(m,h)&&null===c&&!b&&(c=!1),c=function fE(a,c,u,h){const p=function Os(a){const c=zt.lFrame.currentDirectiveIndex;return-1===c?null:a[c]}(a);let m=h?c.residualClasses:c.residualStyles;if(null===p)0===(h?c.classBindings:c.styleBindings)&&(u=_n(u=Sn(null,a,c,u,h),c.attrs,h),m=null);else{const b=c.directiveStylingLast;if(-1===b||a[b]!==p)if(u=Sn(p,a,c,u,h),null===m){let S=function I_(a,c,u){const h=u?c.classBindings:c.styleBindings;if(0!==nu(h))return a[tu(h)]}(a,c,h);void 0!==S&&Array.isArray(S)&&(S=Sn(null,a,c,S[1],h),S=_n(S,c.attrs,h),function gE(a,c,u,h){a[tu(u?c.classBindings:c.styleBindings)]=h}(a,c,h,S))}else m=function mE(a,c,u){let h;const p=c.directiveEnd;for(let m=1+c.directiveStylingLast;m<p;m++)h=_n(h,a[m].hostAttrs,u);return _n(h,c.attrs,u)}(a,c,h)}return void 0!==m&&(h?c.residualClasses=m:c.residualStyles=m),u}(p,m,c,h),function F1(a,c,u,h,p,m){let b=m?c.classBindings:c.styleBindings,T=tu(b),S=nu(b);a[h]=u;let O,x=!1;if(Array.isArray(u)?(O=u[1],(null===O||Ge(u,O)>0)&&(x=!0)):O=u,p)if(0!==S){const K=tu(a[T+1]);a[h+1]=qf(K,T),0!==K&&(a[K+1]=T_(a[K+1],h)),a[T+1]=function N1(a,c){return 131071&a|c<<17}(a[T+1],h)}else a[h+1]=qf(T,0),0!==T&&(a[T+1]=T_(a[T+1],h)),T=h;else a[h+1]=qf(S,0),0===T?T=h:a[S+1]=T_(a[S+1],h),S=h;x&&(a[h+1]=C_(a[h+1])),hb(a,O,h,!0),hb(a,O,h,!1),function cE(a,c,u,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof c&&Ge(m,c)>=0&&(u[h+1]=db(u[h+1]))}(c,O,a,h,m),b=qf(T,S),m?c.classBindings=b:c.styleBindings=b}(p,m,c,u,b,h)}}function Sn(a,c,u,h,p){let m=null;const b=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<b&&(m=c[T],h=_n(h,m.hostAttrs,p),m!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function _n(a,c,u){const h=u?1:2;let p=-1;if(null!==c)for(let m=0;m<c.length;m++){const b=c[m];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),cr(a,b,!!u||c[++m]))}return void 0===a?null:a}function Kl(a,c,u){cr(a,c,C(u))}function D_(a,c,u,h,p,m,b,T){if(!(3&c.type))return;const S=a.data,x=S[T+1],O=function L1(a){return 1==(1&a)}(x)?_E(S,c,u,p,nu(x),b):void 0;ru(O)||(ru(m)||function P1(a){return 2==(2&a)}(x)&&(m=_E(S,null,u,p,T,b)),function Fm(a,c,u,h,p){if(c)p?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:En.DashCase;null==p?a.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=En.Important),a.setStyle(u,h,p,m))}}(h,b,Ro(ar(),u),p,m))}function _E(a,c,u,h,p,m){const b=null===c;let T;for(;p>0;){const S=a[p],x=Array.isArray(S),O=x?S[1]:S,H=null===O;let K=u[p+1];K===Qt&&(K=H?At:void 0);let re=H?Nt(K,h):O===h?K:void 0;if(x&&!ru(re)&&(re=Nt(S,h)),ru(re)&&(T=re,b))return T;const Ce=a[p+1];p=b?tu(Ce):nu(Ce)}if(null!==c){let S=m?c.residualClasses:c.residualStyles;null!=S&&(T=Nt(S,h))}return T}function ru(a){return void 0!==a}function si(a,c){return 0!=(a.flags&(c?8:16))}function rn(a,c=""){const u=be(),h=gn(),p=a+22,m=h.firstCreatePass?Bh(h,p,1,c,null):h.data[p],b=u[p]=function Ih(a,c){return a.createText(c)}(u[11],c);Ah(h,u,b,m),_r(m,!1)}function Tr(a){return x_("",a,""),Tr}function x_(a,c,u){const h=be(),p=function bd(a,c,u,h){return Lr(a,Po(),u)?c+Ae(u)+h:Qt}(h,a,c,u);return p!==Qt&&Zl(h,ar(),p),x_}function Kf(a,c,u,h,p){const m=be(),b=wd(m,a,c,u,h,p);return b!==Qt&&Zl(m,ar(),b),Kf}const xd=void 0;var Y1=["en",[["a","p"],["AM","PM"],xd],[["AM","PM"],xd,xd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xd,"{1} 'at' {0}",xd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xn(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let $h={};function Qf(a){const c=function Xf(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Zh(c);if(u)return u;const h=c.split("-")[0];if(u=Zh(h),u)return u;if("en"===h)return Y1;throw new me(701,!1)}function il(a){return Qf(a)[Vt.PluralCase]}function Zh(a){return a in $h||($h[a]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[a]),$h[a]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const ou="en-US";let Wh=ou;function G_(a,c,u,h,p){if(a=X(a),Array.isArray(a))for(let m=0;m<a.length;m++)G_(a[m],c,u,h,p);else{const m=gn(),b=be();let T=Qc(a)?a:X(a.provide),S=Ph(a);const x=Fi(),O=1048575&x.providerIndexes,H=x.directiveStart,K=x.providerIndexes>>20;if(Qc(a)||!a.multi){const re=new Oa(S,p,Xc),Ce=j_(T,c,p?O:O+K,H);-1===Ce?(qu(Na(x,b),m,T),Hb(m,a,c.length),c.push(T),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(re),b.push(re)):(u[Ce]=re,b[Ce]=re)}else{const re=j_(T,c,O+K,H),Ce=j_(T,c,O,O+K),rt=Ce>=0&&u[Ce];if(p&&!rt||!p&&!(re>=0&&u[re])){qu(Na(x,b),m,T);const yt=function wk(a,c,u,h,p){const m=new Oa(a,u,Xc);return m.multi=[],m.index=c,m.componentProviders=0,GE(m,p,h&&!u),m}(p?bk:Ub,u.length,p,h,S);!p&&rt&&(u[Ce].providerFactory=yt),Hb(m,a,c.length,0),c.push(T),x.directiveStart++,x.directiveEnd++,p&&(x.providerIndexes+=1048576),u.push(yt),b.push(yt)}else Hb(m,a,re>-1?re:Ce,GE(u[p?Ce:re],S,!p&&h));!p&&h&&rt&&u[Ce].componentProviders++}}}function Hb(a,c,u,h){const p=Qc(c),m=function Ef(a){return!!a.useClass}(c);if(p||m){const S=(m?X(c.useClass):c).prototype.ngOnDestroy;if(S){const x=a.destroyHooks||(a.destroyHooks=[]);if(!p&&c.multi){const O=x.indexOf(u);-1===O?x.push(u,[h,S]):x[O+1].push(h,S)}else x.push(u,S)}}}function GE(a,c,u){return u&&a.componentProviders++,a.multi.push(c)-1}function j_(a,c,u,h){for(let p=u;p<h;p++)if(c[p]===a)return p;return-1}function Ub(a,c,u,h){return zb(this.multi,[])}function bk(a,c,u,h){const p=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Wr(u,u[1],this.providerFactory.index,h);m=T.slice(0,b),zb(p,m);for(let S=b;S<T.length;S++)m.push(T[S])}else m=[],zb(p,m);return m}function zb(a,c){for(let u=0;u<a.length;u++)c.push((0,a[u])());return c}function jE(a,c=[]){return u=>{u.providersResolver=(h,p)=>function zE(a,c,u){const h=gn();if(h.firstCreatePass){const p=gr(a);G_(u,h.data,h.blueprint,p,!0),G_(c,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,c)}}class Od{}class hg{}function Gb(a,c){return new $E(a,c??null)}class $E extends Od{constructor(c,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jT(this);const h=qi(c);this._bootstrapComponents=mo(h.bootstrap),this._r3Injector=Bv(c,u,[{provide:Od,useValue:this},{provide:Qa,useValue:this.componentFactoryResolver}],pe(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class $_ extends hg{constructor(c){super(),this.moduleType=c}create(c){return new $E(this.moduleType,c)}}class jb extends Od{constructor(c,u,h){super(),this.componentFactoryResolver=new jT(this),this.instance=null;const p=new hd([...c,{provide:Od,useValue:this},{provide:Qa,useValue:this.componentFactoryResolver}],u||Qm(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function $b(a,c,u=null){return new jb(a,c,u).injector}let Tk=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=vx(0,u.type),p=h.length>0?$b([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=ut({token:a,providedIn:"environment",factory:()=>new a(Je(dd))}),a})();function ZE(a){a.getStandaloneInjector=c=>c.get(Tk).getOrCreateStandaloneInjector(a)}function XE(a,c,u){const h=wi()+a,p=be();return p[h]===Qt?_o(p,h,u?c.call(u):c()):Uh(p,h)}function eS(a,c,u,h){return nS(be(),wi(),a,c,u,h)}function Jb(a,c,u,h,p){return function tw(a,c,u,h,p,m,b){const T=c+u;return vd(a,T,p,m)?_o(a,T+2,b?h.call(b,p,m):h(p,m)):fg(a,T+2)}(be(),wi(),a,c,u,h,p)}function Yl(a,c,u,h,p,m){return function q_(a,c,u,h,p,m,b,T){const S=c+u;return Uf(a,S,p,m,b)?_o(a,S+3,T?h.call(T,p,m,b):h(p,m,b)):fg(a,S+3)}(be(),wi(),a,c,u,h,p,m)}function Xb(a,c,u,h,p,m,b){return function iS(a,c,u,h,p,m,b,T,S){const x=c+u;return ur(a,x,p,m,b,T)?_o(a,x+4,S?h.call(S,p,m,b,T):h(p,m,b,T)):fg(a,x+4)}(be(),wi(),a,c,u,h,p,m,b)}function ew(a,c,u,h,p,m,b,T){const S=wi()+a,x=be(),O=ur(x,S,u,h,p,m);return Lr(x,S+4,b)||O?_o(x,S+5,T?c.call(T,u,h,p,m,b):c(u,h,p,m,b)):Uh(x,S+5)}function Ql(a,c,u,h,p,m,b,T,S){const x=wi()+a,O=be(),H=ur(O,x,u,h,p,m);return vd(O,x+4,b,T)||H?_o(O,x+6,S?c.call(S,u,h,p,m,b,T):c(u,h,p,m,b,T)):Uh(O,x+6)}function pg(a,c,u,h,p,m,b,T,S,x){const O=wi()+a,H=be();let K=ur(H,O,u,h,p,m);return Uf(H,O+4,b,T,S)||K?_o(H,O+7,x?c.call(x,u,h,p,m,b,T,S):c(u,h,p,m,b,T,S)):Uh(H,O+7)}function tS(a,c,u,h){return function Jl(a,c,u,h,p,m){let b=c+u,T=!1;for(let S=0;S<p.length;S++)Lr(a,b++,p[S])&&(T=!0);return T?_o(a,b,h.apply(m,p)):fg(a,b)}(be(),wi(),a,c,u,h)}function fg(a,c){const u=a[c];return u===Qt?void 0:u}function nS(a,c,u,h,p,m){const b=c+u;return Lr(a,b,p)?_o(a,b+1,m?h.call(m,p):h(p)):fg(a,b+1)}function Xh(a,c){const u=gn();let h;const p=a+22;u.firstCreatePass?(h=function xk(a,c){if(c)for(let u=c.length-1;u>=0;u--){const h=c[u];if(a===h.name)return h}}(c,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=ko(h.type)),b=Wn(Xc);try{const T=Fo(!1),S=m();return Fo(T),function tE(a,c,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),c[u]=h}(u,be(),p,S),S}finally{Wn(b)}}function rS(a,c,u){const h=a+22,p=be(),m=Oo(p,h);return function lu(a,c){return a[1].data[c].pure}(p,h)?nS(p,wi(),c,m.transform,u,m):m.transform(u)}function cu(a){return c=>{setTimeout(a,void 0,c)}}const aa=class Ak extends s.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,u,h){let p=c,m=u||(()=>null),b=h;if(c&&"object"==typeof c){const S=c;p=S.next?.bind(S),m=S.error?.bind(S),b=S.complete?.bind(S)}this.__isAsync&&(m=cu(m),p&&(p=cu(p)),b&&(b=cu(b)));const T=super.subscribe({next:p,error:m,complete:b});return c instanceof ie.w0&&c.add(T),T}};function oS(){return this._results[Xr()]()}class K_{get changes(){return this._changes||(this._changes=new aa)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Xr(),h=K_.prototype;h[u]||(h[u]=oS)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,u){return this._results.reduce(c,u)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,u){const h=this;h.dirty=!1;const p=function vr(a){return a.flat(Number.POSITIVE_INFINITY)}(c);(this._changesDetected=!function nd(a,c,u){if(a.length!==c.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=c[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xl=(()=>{class a{}return a.__NG_ELEMENT_ID__=rw,a})();const Y_=Xl,iw=class extends Y_{constructor(c,u,h){super(),this._declarationLView=c,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(c,u){const h=this._declarationTContainer.tViews,p=Vh(this._declarationLView,h,c,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(p[19]=b.createEmbeddedView(h)),o_(h,p,c),new Lf(p)}};function rw(){return ep(Fi(),be())}function ep(a,c){return 4&a.type?new iw(c,a,Nh(a,c)):null}let Q_=(()=>{class a{}return a.__NG_ELEMENT_ID__=gg,a})();function gg(){return J_(Fi(),be())}const Mk=Q_,aS=class extends Mk{constructor(c,u,h){super(),this._lContainer=c,this._hostTNode=u,this._hostLView=h}get element(){return Nh(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){const c=kl(this._hostTNode,this._hostLView);if($u(c)){const u=xc(c,this._hostLView),h=Ic(c);return new Yr(u[1].data[h+8],u)}return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const u=lS(this._lContainer);return null!==u&&u[c]||null}get length(){return this._lContainer.length-10}createEmbeddedView(c,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const b=c.createEmbeddedView(u||{},m);return this.insert(b,p),b}createComponent(c,u,h,p,m){const b=c&&!function Fc(a){return"function"==typeof a}(c);let T;if(b)T=u;else{const H=u||{};T=H.index,h=H.injector,p=H.projectableNodes,m=H.environmentInjector||H.ngModuleRef}const S=b?c:new Ff(hn(c)),x=h||this.parentInjector;if(!m&&null==S.ngModule){const K=(b?x:this.parentInjector).get(dd,null);K&&(m=K)}const O=S.create(x,p,void 0,m);return this.insert(O.hostView,T),O}insert(c,u){const h=c._lView,p=h[1];if(function gc(a){return $r(a[3])}(h)){const O=this.indexOf(c);if(-1!==O)this.detach(O);else{const H=h[3],K=new aS(H,H[6],H[3]);K.detach(K.indexOf(c))}}const m=this._adjustIndex(u),b=this._lContainer;!function nn(a,c,u,h){const p=10+h,m=u.length;h>0&&(u[p-1][4]=c),h<m-10?(c[4]=u[p],Vc(u,10+h,c)):(u.push(c),c[4]=null),c[3]=u;const b=c[17];null!==b&&u!==b&&function rd(a,c){const u=a[9];c[16]!==c[3][3][16]&&(a[2]=!0),null===u?a[9]=[c]:u.push(c)}(b,c);const T=c[19];null!==T&&T.insertView(a),c[2]|=64}(p,h,b,m);const T=br(m,b),S=h[11],x=ad(S,b[7]);return null!==x&&function Mm(a,c,u,h,p,m){h[0]=p,h[6]=c,ld(a,h,u,1,p,m)}(p,b[6],S,h,x,T),c.attachToViewContainerRef(),Vc(mg(b),m,c),c}move(c,u){return this.insert(c,u)}indexOf(c){const u=lS(this._lContainer);return null!==u?u.indexOf(c):-1}remove(c){const u=this._adjustIndex(c,-1),h=Zo(this._lContainer,u);h&&(Rl(mg(this._lContainer),u),Rm(h[1],h))}detach(c){const u=this._adjustIndex(c,-1),h=Zo(this._lContainer,u);return h&&null!=Rl(mg(this._lContainer),u)?new Lf(h):null}_adjustIndex(c,u=0){return c??this.length+u}};function lS(a){return a[8]}function mg(a){return a[8]||(a[8]=[])}function J_(a,c){let u;const h=c[a.index];if($r(h))u=h;else{let p;if(8&a.type)p=ai(h);else{const m=c[11];p=m.createComment("");const b=di(a,c);$a(m,ad(m,b),p,function Pm(a,c){return a.nextSibling(c)}(m,b),!1)}c[a.index]=u=FT(h,c,p,a),l_(c,u)}return new aS(u,a,c)}class sw{constructor(c){this.queryList=c,this.matches=null}clone(){return new sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class X_{constructor(c=[]){this.queries=c}createEmbeddedView(c){const u=c.queries;if(null!==u){const h=null!==c.contentQueries?c.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);p.push(this.queries[b.indexInDeclarationView].clone())}return new X_(p)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let u=0;u<this.queries.length;u++)null!==dS(c,u).matches&&this.queries[u].setDirty()}}class cS{constructor(c,u,h=null){this.predicate=c,this.flags=u,this.read=h}}class ow{constructor(c=[]){this.queries=c}elementStart(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(c,u)}elementEnd(c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(c)}embeddedTView(c){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(c,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new ow(u):null}template(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(c,u)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class ey{constructor(c,u=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(c,u){this.isApplyingToNode(u)&&this.matchTNode(c,u)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,u){this.elementStart(c,u)}embeddedTView(c,u){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,u),new ey(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=c.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(c,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(c,u,aw(u,m)),this.matchTNodeWithReadOption(c,u,Mc(u,c,m,!1,!1))}else h===Xl?4&u.type&&this.matchTNodeWithReadOption(c,u,-1):this.matchTNodeWithReadOption(c,u,Mc(u,c,h,!1,!1))}matchTNodeWithReadOption(c,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Sf||p===Q_||p===Xl&&4&u.type)this.addMatch(u.index,-2);else{const m=Mc(u,c,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(c,u){null===this.matches?this.matches=[c,u]:this.matches.push(c,u)}}function aw(a,c){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===c)return u[h+1];return null}function cw(a,c,u,h){return-1===u?function lw(a,c){return 11&a.type?Nh(a,c):4&a.type?ep(a,c):null}(c,a):-2===u?function ty(a,c,u){return u===Sf?Nh(c,a):u===Xl?ep(c,a):u===Q_?J_(c,a):void 0}(a,c,h):Wr(a,a[1],u,c)}function uu(a,c,u,h){const p=c[19].queries[h];if(null===p.matches){const m=a.data,b=u.matches,T=[];for(let S=0;S<b.length;S+=2){const x=b[S];T.push(x<0?null:cw(c,m[x],b[S+1],u.metadata.read))}p.matches=T}return p.matches}function _g(a,c,u,h){const p=a.queries.getByIndex(u),m=p.matches;if(null!==m){const b=uu(a,c,p,u);for(let T=0;T<m.length;T+=2){const S=m[T];if(S>0)h.push(b[T/2]);else{const x=m[T+1],O=c[-S];for(let H=10;H<O.length;H++){const K=O[H];K[17]===K[3]&&_g(K[1],K,x,h)}if(null!==O[9]){const H=O[9];for(let K=0;K<H.length;K++){const re=H[K];_g(re[1],re,x,h)}}}}}return h}function uw(a){const c=be(),u=gn(),h=dh();Bu(h+1);const p=dS(u,h);if(a.dirty&&function vl(a){return 4==(4&a[2])}(c)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?_g(u,c,h,[]):uu(u,c,p,h);a.reset(m,kx),a.notifyOnChanges()}return!0}return!1}function uS(a,c,u){const h=gn();h.firstCreatePass&&(ny(h,new cS(a,c,u),-1),2==(2&c)&&(h.staticViewQueries=!0)),tp(h,be(),c)}function yg(a,c,u,h){const p=gn();if(p.firstCreatePass){const m=Fi();ny(p,new cS(c,u,h),m.index),function Ok(a,c){const u=a.contentQueries||(a.contentQueries=[]);c!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,c)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}tp(p,be(),u)}function dw(){return function Rk(a,c){return a[19].queries[c].queryList}(be(),dh())}function tp(a,c,u){const h=new K_(4==(4&u));RT(a,c,h,h.destroy),null===c[19]&&(c[19]=new X_),c[19].queries.push(new sw(h))}function ny(a,c,u){null===a.queries&&(a.queries=new ow),a.queries.track(new ey(c,u))}function dS(a,c){return a.queries.getByIndex(c)}function hS(a,c){return ep(a,c)}function sp(...a){}const Cw=new cn("Application Initializer");let ay=(()=>{class a{constructor(u){this.appInits=u,this.resolve=sp,this.reject=sp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(nb(m))u.push(m);else if(Gh(m)){const b=new Promise((T,S)=>{m.subscribe({complete:T,error:S})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Je(Cw,8))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Tw=new cn("AppId",{providedIn:"root",factory:function Ew(){return`${ly()}${ly()}${ly()}`}});function ly(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ts=new cn("Platform Initializer"),cy=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ic=new cn("appBootstrapListener"),wo=new cn("AnimationModuleType");let Fd=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Tg=new cn("LocaleId",{providedIn:"root",factory:()=>dt(Tg,It.Optional|It.SkipSelf)||function kS(){return typeof $localize<"u"&&$localize.locale||ou}()}),Vd=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Iw{constructor(c,u){this.ngModuleFactory=c,this.componentFactories=u}}let Zk=(()=>{class a{compileModuleSync(u){return new $_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=mo(qi(u).declarations).reduce((b,T)=>{const S=hn(T);return S&&b.push(new Ff(S)),b},[]);return new Iw(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const AS=(()=>Promise.resolve(0))();function dy(a){typeof Zone>"u"?AS.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Ks{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function MS(){let a=Gt.requestAnimationFrame,c=Gt.cancelAnimationFrame;if(typeof Zone<"u"&&a&&c){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Qk(a){const c=()=>{!function Yk(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Gt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Dw(a),a.isCheckStableRunning=!0,hy(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Dw(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,b,T)=>{try{return xw(a),u.invokeTask(p,m,b,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&c(),RS(a)}},onInvoke:(u,h,p,m,b,T,S)=>{try{return xw(a),u.invoke(p,m,b,T,S)}finally{a.shouldCoalesceRunChangeDetection&&c(),RS(a)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,Dw(a),hy(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new me(909,!1)}run(c,u,h){return this._inner.run(c,u,h)}runTask(c,u,h,p){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+p,c,la,sp,sp);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(c,u,h){return this._inner.runGuarded(c,u,h)}runOutsideAngular(c){return this._outer.run(c)}}const la={};function hy(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Dw(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function xw(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function RS(a){a._nesting--,hy(a)}class Jk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(c,u,h){return c.apply(u,h)}runGuarded(c,u,h){return c.apply(u,h)}runOutsideAngular(c){return c()}runTask(c,u,h,p){return c.apply(u,h)}}const OS=new cn(""),PS=new cn("");let kw,Xk=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kw||(function eA(a){kw=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),dy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dy(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)(Je(Ks),Je(NS),Je(PS))},a.\u0275prov=ut({token:a,factory:a.\u0275fac}),a})(),NS=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return kw?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})(),du=null;const LS=new cn("AllowMultipleToken"),Aw=new cn("PlatformDestroyListeners");class iA{constructor(c,u){this.name=c,this.token=u}}function Mw(a,c,u=[]){const h=`Platform: ${c}`,p=new cn(h);return(m=[])=>{let b=Ow();if(!b||b.injector.get(LS,!1)){const T=[...u,...m,{provide:p,useValue:!0}];a?a(T):function rA(a){if(du&&!du.get(LS,!1))throw new me(400,!1);du=a;const c=a.get(BS);(function FS(a){const c=a.get(ts,null);c&&c.forEach(u=>u())})(a)}(function Rw(a=[],c){return Ja.create({name:c,providers:[{provide:Rv,useValue:"platform"},{provide:Aw,useValue:new Set([()=>du=null])},...a]})}(T,h))}return function sA(a){const c=Ow();if(!c)throw new me(401,!1);return c}()}}function Ow(){return du?.get(BS)??null}let BS=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function Pw(a,c){let u;return u="noop"===a?new Jk:("zone.js"===a?void 0:a)||new Ks(c),u}(h?.ngZone,function HS(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:Ks,useValue:p}];return p.run(()=>{const b=Ja.create({providers:m,parent:this.injector,name:u.moduleType.name}),T=u.create(b),S=T.injector.get(Jc,null);if(!S)throw new me(402,!1);return p.runOutsideAngular(()=>{const x=p.onError.subscribe({next:O=>{S.handleError(O)}});T.onDestroy(()=>{Sg(this._modules,T),x.unsubscribe()})}),function US(a,c,u){try{const h=u();return nb(h)?h.catch(p=>{throw c.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw c.runOutsideAngular(()=>a.handleError(h)),h}}(S,p,()=>{const x=T.injector.get(ay);return x.runInitializers(),x.donePromise.then(()=>(function xE(a){ot(a,"Expected localeId to be defined"),"string"==typeof a&&(Wh=a.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Tg,ou)||ou),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const p=zS({},h);return function tA(a,c,u){const h=new $_(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(Nw);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new me(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Aw,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Je(Ja))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function zS(a,c){return Array.isArray(c)?c.reduce(zS,a):{...a,...c}}let Nw=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new F.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),dy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ae.T)(m,b.pipe((0,le.B)()))}bootstrap(u,h){const p=u instanceof K0;if(!this._injector.get(ay).done)throw!p&&ci(u),new me(405,false);let b;b=p?u:this._injector.get(Qa).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const T=function nA(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Od),x=b.create(Ja.NULL,[],h||b.selector,T),O=x.location.nativeElement,H=x.injector.get(OS,null);return H?.registerApplication(O),x.onDestroy(()=>{this.detachView(x.hostView),Sg(this.components,x),H?.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Sg(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(ic,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Sg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new me(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)(Je(Ks),Je(dd),Je(Jc))},a.\u0275prov=ut({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Sg(a,c){const u=a.indexOf(c);u>-1&&a.splice(u,1)}function aA(){return!1}let lA=(()=>{class a{}return a.__NG_ELEMENT_ID__=cA,a})();function cA(a){return function NN(a,c,u){if(Zr(a)&&!u){const h=Ri(a.index,c);return new Lf(h,h)}return 47&a.type?new Lf(c[16],c):null}(Fi(),be(),16==(16&a))}class fy{constructor(){}supports(c){return ws(c)}create(c){return new gy(c)}}const $S=(a,c)=>c;class gy{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||$S}forEachItem(c){let u;for(u=this._itHead;null!==u;u=u._next)c(u)}forEachOperation(c){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<my(h,p,m)?u:h,T=my(b,p,m),S=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{m||(m=[]);const x=T-p,O=S-p;if(x!=O){for(let K=0;K<x;K++){const re=K<m.length?m[K]:m[K]=0,Ce=re+K;O<=Ce&&Ce<x&&(m[K]=re+1)}m[b.previousIndex]=O-x}}T!==S&&c(b,T,S)}}forEachPreviousItem(c){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachMovedItem(c){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}forEachIdentityChange(c){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)c(u)}diff(c){if(null==c&&(c=[]),!ws(c))throw new me(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p,m,b,u=this._itHead,h=!1;if(Array.isArray(c)){this.length=c.length;for(let T=0;T<this.length;T++)m=c[T],b=this._trackByFn(T,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,T)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,T),h=!0),u=u._next}else p=0,function Xo(a,c){if(Array.isArray(a))for(let u=0;u<a.length;u++)c(a[u]);else{const u=a[Xr()]();let h;for(;!(h=u.next()).done;)c(h.value)}}(c,T=>{b=this._trackByFn(p,T),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,T,b,p)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,u,h,p){let m;return null===c?m=this._itTail:(m=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._reinsertAfter(c,m,p)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._moveAfter(c,m,p)):c=this._addAfter(new _A(u,h),m,p),c}_verifyReinsertion(c,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?c=this._reinsertAfter(m,c._prev,p):c.currentIndex!=p&&(c.currentIndex=p,this._addToMoves(c,p)),c}_truncate(c){for(;null!==c;){const u=c._next;this._addToRemovals(this._unlink(c)),c=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const p=c._prevRemoved,m=c._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(c,u,h),this._addToMoves(c,h),c}_moveAfter(c,u,h){return this._unlink(c),this._insertAfter(c,u,h),this._addToMoves(c,h),c}_addAfter(c,u,h){return this._insertAfter(c,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,u,h){const p=null===u?this._itHead:u._next;return c._next=p,c._prev=u,null===p?this._itTail=c:p._prev=c,null===u?this._itHead=c:u._next=c,null===this._linkedRecords&&(this._linkedRecords=new ZS),this._linkedRecords.put(c),c.currentIndex=h,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const u=c._prev,h=c._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,c}_addToMoves(c,u){return c.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZS),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,u){return c.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class _A{constructor(c,u){this.item=c,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UN{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,c))return h;return null}remove(c){const u=c._prevDup,h=c._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class ZS{constructor(){this.map=new Map}put(c){const u=c.trackById;let h=this.map.get(u);h||(h=new UN,this.map.set(u,h)),h.add(c)}get(c,u){const p=this.map.get(c);return p?p.get(c,u):null}remove(c){const u=c.trackById;return this.map.get(u).remove(c)&&this.map.delete(u),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function my(a,c,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+c+p}class yA{constructor(){}supports(c){return c instanceof Map||h_(c)}create(){return new zN}}class zN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let u;for(u=this._mapHead;null!==u;u=u._next)c(u)}forEachPreviousItem(c){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)c(u)}forEachChangedItem(c){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}diff(c){if(c){if(!(c instanceof Map||h_(c)))throw new me(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(c,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,u){if(c){const h=c._prev;return u._next=c,u._prev=h,c._prev=u,h&&(h._next=u),c===this._mapHead&&(this._mapHead=u),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(c,u){if(this._records.has(c)){const p=this._records.get(c);this._maybeAddToChanges(p,u);const m=p._prev,b=p._next;return m&&(m._next=b),b&&(b._prev=m),p._next=null,p._prev=null,p}const h=new vA(c);return this._records.set(c,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,u){Object.is(u,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=u,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,u){c instanceof Map?c.forEach(u):Object.keys(c).forEach(h=>u(c[h],h))}}class vA{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qS(){return new WS([new fy])}let WS=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||qS()),deps:[[a,new D,new Ha]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new me(901,!1)}}return a.\u0275prov=ut({token:a,providedIn:"root",factory:qS}),a})();function bA(){return new KS([new yA])}let KS=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||bA()),deps:[[a,new D,new Ha]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new me(901,!1)}}return a.\u0275prov=ut({token:a,providedIn:"root",factory:bA}),a})();const Bw=Mw(null,"core",[]);let YS=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Je(Nw))},a.\u0275mod=Qn({type:a}),a.\u0275inj=Bn({}),a})();function wA(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}},3942:(bt,Ie,V)=>{V.d(Ie,{Z:()=>tt});var s=V(2090),ie=V(4859),F=V(9681),ae=V(1877);class le{constructor(me,Me){this._delegate=me,this.firebase=Me,(0,F._addComponent)(me,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(me,Me=F._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(me);return!Ue.isInitialized()&&"EXPLICIT"===(null===(Ae=Ue.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:Me})}_removeServiceInstance(me,Me=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Me)}_addComponent(me){(0,F._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,F._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function he(){const _t=function pe(_t){const me={},Me={__esModule:!0,initializeApp:function xe(Ve,G={}){const Ee=F.initializeApp(Ve,G);if((0,s.r3)(me,Ee.name))return me[Ee.name];const qe=new _t(Ee,Me);return me[Ee.name]=qe,qe},app:Ue,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Re(Ve){const G=Ve.name,Ee=G.replace("-compat","");if(F._registerComponent(Ve)&&"PUBLIC"===Ve.type){const qe=(it=Ue())=>{if("function"!=typeof it[Ee])throw ye.create("invalid-app-argument",{appName:G});return it[Ee]()};void 0!==Ve.serviceProps&&(0,s.ZB)(qe,Ve.serviceProps),Me[Ee]=qe,_t.prototype[Ee]=function(...it){return this._getService.bind(this,G).apply(this,Ve.multipleInstances?it:[])}}return"PUBLIC"===Ve.type?Me[Ee]:null},removeApp:function Ae(Ve){delete me[Ve]},useAsService:function Be(Ve,G){return"serverAuth"===G?null:G},modularAPIs:F}};function Ue(Ve){if(!(0,s.r3)(me,Ve=Ve||F._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Ve});return me[Ve]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function Se(){return Object.keys(me).map(Ve=>me[Ve])}}),Ue.App=_t,Me}(le);return _t.INTERNAL=Object.assign(Object.assign({},_t.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function me(Me){(0,s.ZB)(_t,Me)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),_t}(),W=new ae.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _t=self.firebase.SDK_VERSION;_t&&_t.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=q;!function ke(_t){(0,F.registerVersion)("@firebase/app-compat","0.2.3",_t)}()},9681:(bt,Ie,V)=>{V.r(Ie),V.d(Ie,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>hr,_DEFAULT_ENTRY_NAME:()=>ze,_addComponent:()=>Cn,_addOrOverwriteComponent:()=>Mt,_apps:()=>ot,_clearComponents:()=>Bn,_components:()=>nt,_getProvider:()=>ut,_registerComponent:()=>mn,_removeServiceInstance:()=>jt,deleteApp:()=>ro,getApp:()=>xr,getApps:()=>ir,initializeApp:()=>io,onLog:()=>It,registerVersion:()=>pr,setLogLevel:()=>ks});var s=V(5861),ie=V(4859),F=V(1877),ae=V(2090),le=V(8766);class oe{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(dt=>{if(function ye(Je){return"VERSION"===Je.getComponent()?.type}(dt)){const Pt=dt.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(dt=>dt).join(" ")}}const pe="@firebase/app",q=new F.Yd("@firebase/app"),ze="[DEFAULT]",Ke={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,nt=new Map;function Cn(Je,De){try{Je.container.addComponent(De)}catch(dt){q.debug(`Component ${De.name} failed to register with FirebaseApp ${Je.name}`,dt)}}function Mt(Je,De){Je.container.addOrOverwriteComponent(De)}function mn(Je){const De=Je.name;if(nt.has(De))return q.debug(`There were multiple attempts to register component ${De}.`),!1;nt.set(De,Je);for(const dt of ot.values())Cn(dt,Je);return!0}function ut(Je,De){const dt=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return dt&&dt.triggerHeartbeat(),Je.container.getProvider(De)}function jt(Je,De,dt=ze){ut(Je,De).clearInstance(dt)}function Bn(){nt.clear()}const Hn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Un{constructor(De,dt,Pt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},dt),this._name=dt.name,this._automaticDataCollectionEnabled=dt.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const hr="9.17.1";function io(Je,De={}){let dt=Je;"object"!=typeof De&&(De={name:De});const Pt=Object.assign({name:ze,automaticDataCollectionEnabled:!1},De),Ut=Pt.name;if("string"!=typeof Ut||!Ut)throw Hn.create("bad-app-name",{appName:String(Ut)});if(dt||(dt=(0,ae.aH)()),!dt)throw Hn.create("no-options");const qt=ot.get(Ut);if(qt){if((0,ae.vZ)(dt,qt.options)&&(0,ae.vZ)(Pt,qt.config))return qt;throw Hn.create("duplicate-app",{appName:Ut})}const $=new ie.H0(Ut);for(const Y of nt.values())$.addComponent(Y);const z=new Un(dt,Pt,$);return ot.set(Ut,z),z}function xr(Je=ze){const De=ot.get(Je);if(!De&&Je===ze)return io();if(!De)throw Hn.create("no-app",{appName:Je});return De}function ir(){return Array.from(ot.values())}function ro(Je){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,s.Z)(function*(Je){const De=Je.name;ot.has(De)&&(ot.delete(De),yield Promise.all(Je.container.getProviders().map(dt=>dt.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function pr(Je,De,dt){var Pt;let Ut=null!==(Pt=Ke[Je])&&void 0!==Pt?Pt:Je;dt&&(Ut+=`-${dt}`);const qt=Ut.match(/\s|\//),$=De.match(/\s|\//);if(qt||$){const z=[`Unable to register library "${Ut}" with version "${De}":`];return qt&&z.push(`library name "${Ut}" contains illegal characters (whitespace or "/")`),qt&&$&&z.push("and"),$&&z.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void q.warn(z.join(" "))}mn(new ie.wA(`${Ut}-version`,()=>({library:Ut,version:De}),"VERSION"))}function It(Je,De){if(null!==Je&&"function"!=typeof Je)throw Hn.create("invalid-log-argument");(0,F.Am)(Je,De)}function ks(Je){(0,F.Ub)(Je)}const ji="firebase-heartbeat-store";let so=null;function Gt(){return so||(so=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(Je,De)=>{0===De&&Je.createObjectStore(ji)}}).catch(Je=>{throw Hn.create("idb-open",{originalErrorMessage:Je.message})})),so}function Ot(){return(Ot=(0,s.Z)(function*(Je){try{return(yield Gt()).transaction(ji).objectStore(ji).get(zn(Je))}catch(De){if(De instanceof ae.ZR)q.warn(De.message);else{const dt=Hn.create("idb-get",{originalErrorMessage:De?.message});q.warn(dt.message)}}})).apply(this,arguments)}function As(Je,De){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,s.Z)(function*(Je,De){try{const Pt=(yield Gt()).transaction(ji,"readwrite");return yield Pt.objectStore(ji).put(De,zn(Je)),Pt.done}catch(dt){if(dt instanceof ae.ZR)q.warn(dt.message);else{const Pt=Hn.create("idb-set",{originalErrorMessage:dt?.message});q.warn(Pt.message)}}})).apply(this,arguments)}function zn(Je){return`${Je.name}!${Je.options.appId}`}class ma{constructor(De){this.container=De,this._heartbeatsCache=null;const dt=this.container.getProvider("app").getImmediate();this._storage=new dn(dt),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var De=this;return(0,s.Z)(function*(){const Pt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ut=bn();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Ut&&!De._heartbeatsCache.heartbeats.some(qt=>qt.date===Ut))return De._heartbeatsCache.heartbeats.push({date:Ut,agent:Pt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(qt=>{const $=new Date(qt.date).valueOf();return Date.now()-$<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,s.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const dt=bn(),{heartbeatsToSend:Pt,unsentEntries:Ut}=function ls(Je,De=1024){const dt=[];let Pt=Je.slice();for(const Ut of Je){const qt=dt.find($=>$.agent===Ut.agent);if(qt){if(qt.dates.push(Ut.date),$i(dt)>De){qt.dates.pop();break}}else if(dt.push({agent:Ut.agent,dates:[Ut.date]}),$i(dt)>De){dt.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:dt,unsentEntries:Pt}}(De._heartbeatsCache.heartbeats),qt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Pt}));return De._heartbeatsCache.lastSentHeartbeatDate=dt,Ut.length>0?(De._heartbeatsCache.heartbeats=Ut,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),qt})()}}function bn(){return(new Date).toISOString().substring(0,10)}class dn{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,s.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function kt(Je){return Ot.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var dt=this;return(0,s.Z)(function*(){var Pt;if(yield dt._canUseIndexedDBPromise){const qt=yield dt.read();return As(dt.app,{lastSentHeartbeatDate:null!==(Pt=De.lastSentHeartbeatDate)&&void 0!==Pt?Pt:qt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var dt=this;return(0,s.Z)(function*(){var Pt;if(yield dt._canUseIndexedDBPromise){const qt=yield dt.read();return As(dt.app,{lastSentHeartbeatDate:null!==(Pt=De.lastSentHeartbeatDate)&&void 0!==Pt?Pt:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...De.heartbeats]})}})()}}function $i(Je){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function cs(Je){mn(new ie.wA("platform-logger",De=>new oe(De),"PRIVATE")),mn(new ie.wA("heartbeat",De=>new ma(De),"PRIVATE")),pr(pe,"0.9.3",Je),pr(pe,"0.9.3","esm2017"),pr("fire-js","")}("")},4859:(bt,Ie,V)=>{V.d(Ie,{H0:()=>pe,wA:()=>F,zt:()=>le});var s=V(5861),ie=V(2090);class F{constructor(q,W,X){this.name=q,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ae="[DEFAULT]";class le{constructor(q,W){this.name=q,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const W=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(W)){const X=new ie.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:W});We&&X.resolve(We)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(q){var W;const X=this.normalizeInstanceIdentifier(q?.identifier),We=null!==(W=q?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(ke){if(We)return null;throw ke}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ye(he){return"EAGER"===he.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(W);try{const ke=this.getOrInitializeService({instanceIdentifier:We});X.resolve(ke)}catch{}}}}clearInstance(q=ae){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,s.Z)(function*(){const W=Array.from(q.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ae){return this.instances.has(q)}getOptions(q=ae){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:W={}}=q,X=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[ke,tt]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(ke)&&tt.resolve(We);return We}onInit(q,W){var X;const We=this.normalizeInstanceIdentifier(W),ke=null!==(X=this.onInitCallbacks.get(We))&&void 0!==X?X:new Set;ke.add(q),this.onInitCallbacks.set(We,ke);const tt=this.instances.get(We);return tt&&q(tt,We),()=>{ke.delete(q)}}invokeOnInitCallbacks(q,W){const X=this.onInitCallbacks.get(W);if(X)for(const We of X)try{We(q,W)}catch{}}getOrInitializeService({instanceIdentifier:q,options:W={}}){let X=this.instances.get(q);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(he=q,he===ae?void 0:he),options:W}),this.instances.set(q,X),this.instancesOptions.set(q,W),this.invokeOnInitCallbacks(X,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,X)}catch{}var he;return X||null}normalizeInstanceIdentifier(q=ae){return this.component?this.component.multipleInstances?q:ae:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const W=this.getProvider(q.name);if(W.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);W.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const W=new le(q,this);return this.providers.set(q,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Ie,V)=>{V.d(Ie,{Am:()=>he,Ub:()=>pe,Yd:()=>ye,in:()=>ie});const s=[];var ie=(()=>{return(q=ie||(ie={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",ie;var q})();const F={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},ae=ie.INFO,le={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},oe=(q,W,...X)=>{if(W<q.logLevel)return;const We=(new Date).toISOString(),ke=le[W];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[ke](`[${We}]  ${q.name}:`,...X)};class ye{constructor(W){this.name=W,this._logLevel=ae,this._logHandler=oe,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in ie))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...W),this._logHandler(this,ie.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...W),this._logHandler(this,ie.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...W),this._logHandler(this,ie.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...W),this._logHandler(this,ie.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...W),this._logHandler(this,ie.ERROR,...W)}}function pe(q){s.forEach(W=>{W.setLogLevel(q)})}function he(q,W){for(const X of s){let We=null;W&&W.level&&(We=F[W.level]),X.userLogHandler=null===q?null:(ke,tt,..._t)=>{const me=_t.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");tt>=(We??ke.logLevel)&&q({level:ie[tt].toLowerCase(),message:me,args:_t,type:ke.name})}}}},259:(bt,Ie,V)=>{V.d(Ie,{C6:()=>s.getApps,Mq:()=>s.getApp});var s=V(9681);(0,s.registerVersion)("firebase","9.17.1","app")},9260:(bt,Ie,V)=>{V.d(Ie,{Z:()=>s.Z});var s=V(3942);s.Z.registerVersion("firebase","9.17.1","app-compat")},407:(bt,Ie,V)=>{V.r(Ie);var s=V(5861),ie=V(3942),F=V(2090),ae=V(9681),le=V(1877),oe=V(655),ye=V(4859);const tt=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_t=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new le.Yd("@firebase/auth");function Ue(v,...g){Ae.logLevel<=le.in.ERROR&&Ae.error(`Auth (${ae.SDK_VERSION}): ${v}`,...g)}function xe(v,...g){throw Ve(v,...g)}function Se(v,...g){return Ve(v,...g)}function Re(v,g,_){const C=Object.assign(Object.assign({},_t()),{[g]:_});return new F.LL("auth","Firebase",C).create(g,{appName:v.name})}function Be(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&xe(v,"argument-error"),Re(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return me.create(v,...g)}function G(v,g,..._){if(!v)throw Ve(g,..._)}function Ee(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ue(g),new Error(g)}function qe(v,g){v||Ee(g)}const it=new Map;function Tt(v){qe(v instanceof Function,"Expected a class definition");let g=it.get(v);return g?(qe(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,it.set(v,g),g)}function fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Te(){return"http:"===Oe()||"https:"===Oe()}function Oe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ot{constructor(g,_){this.shortDelay=g,this.longDelay=_,qe(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ze(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Te()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nt(v,g){qe(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Cn{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new ot(3e4,6e4);function ut(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function jt(v,g,_,C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,s.Z)(function*(v,g,_,C,k={}){return qn(v,k,(0,s.Z)(function*(){let P={},J={};C&&("GET"===g?J=C:P={body:JSON.stringify(C)});const ge=(0,F.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),Xe=yield v._getAdditionalHeaders();return Xe["Content-Type"]="application/json",v.languageCode&&(Xe["X-Firebase-Locale"]=v.languageCode),Cn.fetch()(io(v,v.config.apiHost,_,ge),Object.assign({method:g,headers:Xe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function qn(v,g,_){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,s.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},Mt),g);try{const k=new xr(v),P=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const J=yield P.json();if("needConfirmation"in J)throw ir(v,"account-exists-with-different-credential",J);if(P.ok&&!("errorMessage"in J))return J;{const ge=P.ok?J.errorMessage:J.error.message,[Xe,ht]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw ir(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===Xe)throw ir(v,"email-already-in-use",J);if("USER_DISABLED"===Xe)throw ir(v,"user-disabled",J);const Ft=C[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(ht)throw Re(v,Ft,ht);xe(v,Ft)}}catch(k){if(k instanceof F.ZR)throw k;xe(v,"network-request-failed")}})).apply(this,arguments)}function Un(v,g,_,C){return hr.apply(this,arguments)}function hr(){return(hr=(0,s.Z)(function*(v,g,_,C,k={}){const P=yield jt(v,g,_,C,k);return"mfaPendingCredential"in P&&xe(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function io(v,g,_,C){const k=`${g}${_}?${C}`;return v.config.emulator?nt(v.config,k):`${v.config.apiScheme}://${k}`}class xr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Se(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ir(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const k=Se(v,g,C);return k.customData._tokenResponse=_,k}function Rn(){return(Rn=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function pr(v,g){return It.apply(this,arguments)}function It(){return(It=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ks(v,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Wn(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Gt(){return(Gt=(0,s.Z)(function*(v,g=!1){const _=(0,F.m9)(v),C=yield _.getIdToken(g),k=Ot(C);G(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const P="object"==typeof k.firebase?k.firebase:void 0,J=P?.sign_in_provider;return{claims:k,token:C,authTime:Wn(kt(k.auth_time)),issuedAtTime:Wn(kt(k.iat)),expirationTime:Wn(kt(k.exp)),signInProvider:J||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function kt(v){return 1e3*Number(v)}function Ot(v){const[g,_,C]=v.split(".");if(void 0===g||void 0===_||void 0===C)return Ue("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,F.tV)(_);return k?JSON.parse(k):(Ue("Failed to decode base64 JWT payload"),null)}catch(k){return Ue("Caught error parsing JWT payload as JSON",k?.toString()),null}}function Kn(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,s.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof F.ZR&&jr(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function jr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Li{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,s.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,s.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class ma{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wn(this.lastLoginAt),this.creationTime=Wn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bn(v){return ls.apply(this,arguments)}function ls(){return(ls=(0,s.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),k=yield Kn(v,ks(_,{idToken:C}));G(k?.users.length,_,"internal-error");const P=k.users[0];v._notifyReloadListener(P);const J=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?Je(P.providerUserInfo):[],ge=cs(v.providerData,J),Ft=!!v.isAnonymous&&!(v.email&&P.passwordHash||ge?.length),Dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ge,metadata:new ma(P.createdAt,P.lastLoginAt),isAnonymous:Ft};Object.assign(v,Dt)})).apply(this,arguments)}function $i(){return($i=(0,s.Z)(function*(v){const g=(0,F.m9)(v);yield bn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function cs(v,g){return[...v.filter(C=>!g.some(k=>k.providerId===C.providerId)),...g]}function Je(v){return v.map(g=>{var{providerId:_}=g,C=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function dt(){return(dt=(0,s.Z)(function*(v,g){const _=yield qn(v,{},(0,s.Z)(function*(){const C=(0,F.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:P}=v.config,J=io(v,k,"/v1/token",`key=${P}`),ge=yield v._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(J,{method:"POST",headers:ge,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function As(v){const g=Ot(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,s.Z)(function*(){return G(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,s.Z)(function*(){const{accessToken:k,refreshToken:P,expiresIn:J}=yield function De(v,g){return dt.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(k,P,Number(J))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:k,expirationTime:P}=_,J=new Pt;return C&&(G("string"==typeof C,"internal-error",{appName:g}),J.refreshToken=C),k&&(G("string"==typeof k,"internal-error",{appName:g}),J.accessToken=k),P&&(G("number"==typeof P,"internal-error",{appName:g}),J.expirationTime=P),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Pt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Ut(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class qt{constructor(g){var{uid:_,auth:C,stsTokenManager:k}=g,P=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ma(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,s.Z)(function*(){const C=yield Kn(_,_.stsTokenManager.getToken(_.auth,g));return G(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function so(v){return Gt.apply(this,arguments)}(this,g)}reload(){return function dn(v){return $i.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,s.Z)(function*(){let k=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),k=!0),_&&(yield bn(C)),yield C.auth._persistUserIfCurrent(C),k&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,s.Z)(function*(){const _=yield g.getIdToken();return yield Kn(g,function ro(v,g){return Rn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,k,P,J,ge,Xe,ht,Ft;const Dt=null!==(C=_.displayName)&&void 0!==C?C:void 0,Pi=null!==(k=_.email)&&void 0!==k?k:void 0,Hs=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Mh=null!==(J=_.photoURL)&&void 0!==J?J:void 0,Um=null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,ud=null!==(Xe=_._redirectEventId)&&void 0!==Xe?Xe:void 0,Us=null!==(ht=_.createdAt)&&void 0!==ht?ht:void 0,Kc=null!==(Ft=_.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:_f,emailVerified:yf,isAnonymous:zm,providerData:Gm,stsTokenManager:jm}=_;G(_f&&jm,g,"internal-error");const $m=Pt.fromJSON(this.name,jm);G("string"==typeof _f,g,"internal-error"),Ut(Dt,g.name),Ut(Pi,g.name),G("boolean"==typeof yf,g,"internal-error"),G("boolean"==typeof zm,g,"internal-error"),Ut(Hs,g.name),Ut(Mh,g.name),Ut(Um,g.name),Ut(ud,g.name),Ut(Us,g.name),Ut(Kc,g.name);const jl=new qt({uid:_f,auth:g,email:Pi,emailVerified:yf,displayName:Dt,isAnonymous:zm,photoURL:Mh,phoneNumber:Hs,tenantId:Um,stsTokenManager:$m,createdAt:Us,lastLoginAt:Kc});return Gm&&Array.isArray(Gm)&&(jl.providerData=Gm.map(zs=>Object.assign({},zs))),ud&&(jl._redirectEventId=ud),jl}static _fromIdTokenResponse(g,_,C=!1){return(0,s.Z)(function*(){const k=new Pt;k.updateFromServerResponse(_);const P=new qt({uid:_.localId,auth:g,stsTokenManager:k,isAnonymous:C});return yield bn(P),P})()}}const z=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(_,C){var k=this;return(0,s.Z)(function*(){k.storage[_]=C})()}_get(_){var C=this;return(0,s.Z)(function*(){const k=C.storage[_];return void 0===k?null:k})()}_remove(_){var C=this;return(0,s.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function Y(v,g,_){return`firebase:${v}:${g}:${_}`}class ve{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:k,name:P}=this.auth;this.fullUserKey=Y(this.userKey,k.apiKey,P),this.fullPersistenceKey=Y("persistence",k.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,s.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?qt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,s.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,s.Z)(function*(){if(!_.length)return new ve(Tt(z),g,C);const k=(yield Promise.all(_.map(function(){var ht=(0,s.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return ht.apply(this,arguments)}}()))).filter(ht=>ht);let P=k[0]||Tt(z);const J=Y(C,g.config.apiKey,g.name);let ge=null;for(const ht of _)try{const Ft=yield ht._get(J);if(Ft){const Dt=qt._fromJSON(g,Ft);ht!==P&&(ge=Dt),P=ht;break}}catch{}const Xe=k.filter(ht=>ht._shouldAllowMigration);return P._shouldAllowMigration&&Xe.length?(P=Xe[0],ge&&(yield P._set(J,ge.toJSON())),yield Promise.all(_.map(function(){var ht=(0,s.Z)(function*(Ft){if(Ft!==P)try{yield Ft._remove(J)}catch{}});return function(Ft){return ht.apply(this,arguments)}}())),new ve(P,g,C)):new ve(P,g,C)})()}}function se(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Yn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ft(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mi(g))return"Blackberry";if(Jt(g))return"Webos";if(Wt(g))return"Safari";if((g.includes("chrome/")||on(g))&&!g.includes("edge/"))return"Chrome";if(At(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function ft(v=(0,F.z$)()){return/firefox\//i.test(v)}function Wt(v=(0,F.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function on(v=(0,F.z$)()){return/crios\//i.test(v)}function Yn(v=(0,F.z$)()){return/iemobile/i.test(v)}function At(v=(0,F.z$)()){return/android/i.test(v)}function Mi(v=(0,F.z$)()){return/blackberry/i.test(v)}function Jt(v=(0,F.z$)()){return/webos/i.test(v)}function vi(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Fp(v=(0,F.z$)()){return vi(v)||At(v)||Jt(v)||Mi(v)||/windows phone/i.test(v)||Yn(v)}function lc(v,g=[]){let _;switch(v){case"Browser":_=se((0,F.z$)());break;case"Worker":_=`${se((0,F.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${ae.SDK_VERSION}/${C}`}class Tu{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=P=>new Promise((J,ge)=>{try{J(g(P))}catch(Xe){ge(Xe)}});C.onAbort=_,this.queue.push(C);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,s.Z)(function*(){if(_.auth.currentUser===g)return;const C=[];try{for(const k of _.queue)yield k(g),k.onAbort&&C.push(k.onAbort)}catch(k){C.reverse();for(const P of C)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class Xd{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eh(this),this.idTokenSubscription=new eh(this),this.beforeStateQueue=new Tu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=Tt(_)),this._initializationPromise=this.queue((0,s.Z)(function*(){var k,P;if(!C._deleted&&(C.persistenceManager=yield ve.create(C,g),!C._deleted)){if(null!==(k=C._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,s.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,s.Z)(function*(){var C;const k=yield _.assertedPersistence.getCurrentUser();let P=k,J=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ge=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Xe=P?._redirectEventId,ht=yield _.tryRedirectSignIn(g);(!ge||ge===Xe)&&ht?.user&&(P=ht.user,J=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ge){P=k,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ge))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var _=this;return(0,s.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,s.Z)(function*(){try{yield bn(g)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,s.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,s.Z)(function*(){const C=g?(0,F.m9)(g):null;return C&&G(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,s.Z)(function*(){if(!C._deleted)return g&&G(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,s.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,s.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,s.Z)(function*(){yield _.assertedPersistence.setPersistence(Tt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new F.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,s.Z)(function*(){const k=yield C.getOrInitRedirectPersistenceManager(_);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,s.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&Tt(g)||_._popupRedirectResolver;G(C,_,"argument-error"),_.redirectPersistenceManager=yield ve.create(_,[Tt(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,s.Z)(function*(){var C,k;return _._isInitialized&&(yield _.queue((0,s.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,s.Z)(function*(){if(g===_.currentUser)return _.queue((0,s.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,k){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return G(J,this,"internal-error"),J.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,k):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,s.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=lc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,s.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return k&&(C["X-Firebase-Client"]=k),C})()}}function Qn(v){return(0,F.m9)(v)}class eh{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pl(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function hn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class oi{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,_){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function ci(v,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:resetPassword",ut(v,g))})).apply(this,arguments)}function kr(v,g){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pt(v,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:update",ut(v,g))})).apply(this,arguments)}function Ms(){return(Ms=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithPassword",ut(v,g))})).apply(this,arguments)}function ui(v,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:sendOobCode",ut(v,g))})).apply(this,arguments)}function Jn(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,s.Z)(function*(v,g){return ui(v,g)})).apply(this,arguments)}function pn(v,g){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,s.Z)(function*(v,g){return ui(v,g)})).apply(this,arguments)}function Su(v,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,s.Z)(function*(v,g){return ui(v,g)})).apply(this,arguments)}function cc(v,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,s.Z)(function*(v,g){return ui(v,g)})).apply(this,arguments)}function va(){return(va=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithEmailLink",ut(v,g))})).apply(this,arguments)}function Mr(){return(Mr=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithEmailLink",ut(v,g))})).apply(this,arguments)}class Tn extends oi{constructor(g,_,C,k=null){super("password",C),this._email=g,this._password=_,this._tenantId=k}static _fromEmailAndPassword(g,_){return new Tn(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Tn(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,s.Z)(function*(){switch(_.signInMethod){case"password":return function rr(v,g){return Ms.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Wi(v,g){return va.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:xe(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,s.Z)(function*(){switch(C.signInMethod){case"password":return kr(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Io(v,g){return Mr.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function wn(v,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithIdp",ut(v,g))})).apply(this,arguments)}class Rr extends oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Rr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:k}=_,P=(0,oe._T)(_,["providerId","signInMethod"]);if(!C||!k)return null;const J=new Rr(C,k);return J.idToken=P.idToken||void 0,J.accessToken=P.accessToken||void 0,J.secret=P.secret,J.nonce=P.nonce,J.pendingToken=P.pendingToken||null,J}_getIdTokenResponse(g){return wn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,wn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,wn(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,F.xO)(_)}return g}}function th(v,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:sendVerificationCode",ut(v,g))})).apply(this,arguments)}function sr(){return(sr=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,g))})).apply(this,arguments)}function nh(){return(nh=(0,s.Z)(function*(v,g){const _=yield Un(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,g));if(_.temporaryProof)throw ir(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const fr={USER_NOT_FOUND:"user-not-found"};function gl(){return(gl=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithPhoneNumber",ut(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),fr)})).apply(this,arguments)}class Zr extends oi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Zr({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Zr({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Do(v,g){return sr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Ki(v,g){return nh.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function $r(v,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:k}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:k,temporaryProof:P}=g;return C||_||k||P?new Zr({verificationId:_,verificationCode:C,phoneNumber:k,temporaryProof:P}):null}}class ml{constructor(g){var _,C,k,P,J,ge;const Xe=(0,F.zd)((0,F.pd)(g)),ht=null!==(_=Xe.apiKey)&&void 0!==_?_:null,Ft=null!==(C=Xe.oobCode)&&void 0!==C?C:null,Dt=function Iu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Xe.mode)&&void 0!==k?k:null);G(ht&&Ft&&Dt,"argument-error"),this.apiKey=ht,this.operation=Dt,this.code=Ft,this.continueUrl=null!==(P=Xe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(J=Xe.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(ge=Xe.tenantId)&&void 0!==ge?ge:null}static parseLink(g){const _=function gr(v){const g=(0,F.zd)((0,F.pd)(v)).link,_=g?(0,F.zd)((0,F.pd)(g)).deep_link_id:null,C=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(C?(0,F.zd)((0,F.pd)(C)).link:null)||C||_||g||v}(g);try{return new ml(_)}catch{return null}}}let Du=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return Tn._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const k=ml.parseLink(C);return G(k,"argument-error"),Tn._fromEmailAndCode(_,k.code,k.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class qr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class wa extends qr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class _l extends wa{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Rr._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return _l.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return _l.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:k,pendingToken:P,nonce:J,providerId:ge}=g;if(!C&&!k&&!_&&!P||!ge)return null;try{return new _l(ge)._credential({idToken:_,accessToken:C,nonce:J,pendingToken:P})}catch{return null}}}let xu=(()=>{class v extends wa{constructor(){super("facebook.com")}static credential(_){return Rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Bp=(()=>{class v extends wa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:k}=_;if(!C&&!k)return null;try{return v.credential(C,k)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Hp=(()=>{class v extends wa{constructor(){super("github.com")}static credential(_){return Rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ca extends oi{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return wn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,wn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,wn(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:k,pendingToken:P}=_;return C&&k&&P&&C===k?new Ca(C,P):null}static _create(g,_){return new Ca(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ds extends qr{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ds.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ds.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ca.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Ca._create(C,_)}catch{return null}}}let pm=(()=>{class v extends wa{constructor(){super("twitter.com")}static credential(_,C){return Rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:k}=_;if(!C||!k)return null;try{return v.credential(C,k)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function fn(v,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signUp",ut(v,g))})).apply(this,arguments)}class or{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,k=!1){return(0,s.Z)(function*(){const P=yield qt._fromIdTokenResponse(g,C,k),J=Au(C);return new or({user:P,providerId:J,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,s.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const k=Au(C);return new or({user:g,providerId:k,_tokenResponse:C,operationType:_})})()}}function Au(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function rh(){return(rh=(0,s.Z)(function*(v){var g;const _=Qn(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new or({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield fn(_,{returnSecureToken:!0}),k=yield or._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class uc extends F.ZR{constructor(g,_,C,k){var P;super(_.code,_.message),this.operationType=C,this.user=k,Object.setPrototypeOf(this,uc.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,k){return new uc(g,_,C,k)}}function ko(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?uc._fromErrorAndOperation(v,P,g,C):P})}function Ao(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Ta(){return(Ta=(0,s.Z)(function*(v,g){const _=(0,F.m9)(v);yield Mo(!0,_,g);const{providerUserInfo:C}=yield pr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),k=Ao(C||[]);return _.providerData=_.providerData.filter(P=>k.has(P.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function hc(v,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,s.Z)(function*(v,g,_=!1){const C=yield Kn(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return or._forOperation(v,"link",C)})).apply(this,arguments)}function Mo(v,g,_){return yl.apply(this,arguments)}function yl(){return(yl=(0,s.Z)(function*(v,g,_){yield bn(g);const k=!1===v?"provider-already-linked":"no-such-provider";G(Ao(g.providerData).has(_)===v,g.auth,k)})).apply(this,arguments)}function sh(v,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,s.Z)(function*(v,g,_=!1){const{auth:C}=v,k="reauthenticate";try{const P=yield Kn(v,ko(C,k,g,v),_);G(P.idToken,C,"internal-error");const J=Ot(P.idToken);G(J,C,"internal-error");const{sub:ge}=J;return G(v.uid===ge,C,"user-mismatch"),or._forOperation(v,k,P)}catch(P){throw"auth/user-not-found"===P?.code&&xe(C,"user-mismatch"),P}})).apply(this,arguments)}function Ia(v,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,s.Z)(function*(v,g,_=!1){const C="signIn",k=yield ko(v,C,g),P=yield or._fromIdTokenResponse(v,C,k);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ii(v,g){return pc.apply(this,arguments)}function pc(){return(pc=(0,s.Z)(function*(v,g){return Ia(Qn(v),g)})).apply(this,arguments)}function ai(v,g){return fc.apply(this,arguments)}function fc(){return(fc=(0,s.Z)(function*(v,g){const _=(0,F.m9)(v);return yield Mo(!1,_,g.providerId),hc(_,g)})).apply(this,arguments)}function Ro(v,g){return di.apply(this,arguments)}function di(){return(di=(0,s.Z)(function*(v,g){return sh((0,F.m9)(v),g)})).apply(this,arguments)}function Mu(v,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,s.Z)(function*(v,g){return Un(v,"POST","/v1/accounts:signInWithCustomToken",ut(v,g))})).apply(this,arguments)}function Ri(){return(Ri=(0,s.Z)(function*(v,g){const _=Qn(v),C=yield Mu(_,{token:g,returnSecureToken:!0}),k=yield or._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class vl{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?xa._fromServerResponse(g,_):xe(g,"internal-error")}}class xa extends vl{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new xa(_)}}function gc(v,g,_){var C;G((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function bl(){return(bl=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v),k={requestType:"PASSWORD_RESET",email:g};_&&gc(C,k,_),yield pn(C,k)})).apply(this,arguments)}function zt(){return(zt=(0,s.Z)(function*(v,g,_){yield ci((0,F.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function oh(){return(oh=(0,s.Z)(function*(v,g){yield pt((0,F.m9)(v),{oobCode:g})})).apply(this,arguments)}function _c(v,g){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,s.Z)(function*(v,g){const _=(0,F.m9)(v),C=yield ci(_,{oobCode:g}),k=C.requestType;switch(G(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(C.mfaInfo,_,"internal-error");default:G(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=vl._fromServerResponse(Qn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:k}})).apply(this,arguments)}function yc(){return(yc=(0,s.Z)(function*(v,g){const{data:_}=yield _c((0,F.m9)(v),g);return _.email})).apply(this,arguments)}function Pu(){return(Pu=(0,s.Z)(function*(v,g,_){const C=Qn(v),k=yield fn(C,{returnSecureToken:!0,email:g,password:_}),P=yield or._fromIdTokenResponse(C,"signIn",k);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function Nu(){return(Nu=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v),k={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,C,"argument-error"),_&&gc(C,k,_),yield Su(C,k)})).apply(this,arguments)}function Cl(){return(Cl=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v),k=Du.credentialWithLink(g,_||fe());return G(k._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ii(C,k)})).apply(this,arguments)}function vc(v,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:createAuthUri",ut(v,g))})).apply(this,arguments)}function wc(){return(wc=(0,s.Z)(function*(v,g){const C={identifier:g,continueUri:Te()?fe():"http://localhost"},{signinMethods:k}=yield vc((0,F.m9)(v),C);return k||[]})).apply(this,arguments)}function Lu(){return(Lu=(0,s.Z)(function*(v,g){const _=(0,F.m9)(v),k={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&gc(_.auth,k,g);const{email:P}=yield Jn(_.auth,k);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function wi(){return(wi=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&gc(C.auth,P,_);const{email:J}=yield cc(C.auth,P);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function yr(v,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,s.Z)(function*(v,g){return jt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function hs(){return(hs=(0,s.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,F.m9)(v),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},J=yield Kn(C,yr(C.auth,P));C.displayName=J.displayName||null,C.photoURL=J.photoUrl||null;const ge=C.providerData.find(({providerId:Xe})=>"password"===Xe);ge&&(ge.displayName=C.displayName,ge.photoURL=C.photoURL),yield C._updateTokensIfNecessary(J)})).apply(this,arguments)}function uh(v,g,_){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,s.Z)(function*(v,g,_){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const J=yield Kn(v,kr(C,P));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class Os{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class dh extends Os{constructor(g,_,C,k){super(g,_,C),this.username=k}}class Bu extends Os{constructor(g,_){super(g,"facebook.com",_)}}class hh extends dh{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class zp extends Os{constructor(g,_){super(g,"google.com",_)}}class Tc extends dh{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Gp(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Vu(v){var g,_;if(!v)return null;const{providerId:C}=v,k=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const J=null===(_=null===(g=Ot(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new Os(P,"anonymous"!==J&&"custom"!==J?J:null)}if(!C)return null;switch(C){case"facebook.com":return new Bu(P,k);case"github.com":return new hh(P,k);case"google.com":return new zp(P,k);case"twitter.com":return new Tc(P,k,v.screenName||null);case"custom":case"anonymous":return new Os(P,null);default:return new Os(P,C,k)}}(_)}class Aa{constructor(g,_,C){this.type=g,this.credential=_,this.auth=C}static _fromIdtoken(g,_){return new Aa("enroll",g,_)}static _fromMfaPendingCredential(g){return new Aa("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Aa._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return Aa._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Uu{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=Qn(g),k=_.customData._serverResponse,P=(k.mfaInfo||[]).map(ge=>vl._fromServerResponse(C,ge));G(k.mfaPendingCredential,C,"internal-error");const J=Aa._fromMfaPendingCredential(k.mfaPendingCredential);return new Uu(J,P,function(){var ge=(0,s.Z)(function*(Xe){const ht=yield Xe._process(C,J);delete k.mfaInfo,delete k.mfaPendingCredential;const Ft=Object.assign(Object.assign({},k),{idToken:ht.idToken,refreshToken:ht.refreshToken});switch(_.operationType){case"signIn":const Dt=yield or._fromIdTokenResponse(C,_.operationType,Ft);return yield C._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return G(_.user,C,"internal-error"),or._forOperation(_.user,_.operationType,Ft);default:xe(C,"internal-error")}});return function(Xe){return ge.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,s.Z)(function*(){return _.signInResolver(g)})()}}function jp(v,g){return jt(v,"POST","/v2/accounts/mfaEnrollment:start",ut(v,g))}class El{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>vl._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new El(g)}getSession(){var g=this;return(0,s.Z)(function*(){return Aa._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var C=this;return(0,s.Z)(function*(){const k=g,P=yield C.getSession(),J=yield Kn(C.user,k._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(J),C.user.reload()})()}unenroll(g){var _=this;return(0,s.Z)(function*(){const C="string"==typeof g?g:g.uid,k=yield _.user.getIdToken();try{const P=yield Kn(_.user,function _m(v,g){return jt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",ut(v,g))}(_.user.auth,{idToken:k,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==C),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const lo=new WeakMap,Or="__sak";class zu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Or,"1"),this.storage.removeItem(Or),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gu=(()=>{class v extends zu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ec(){const v=(0,F.z$)();return Wt(v)||vi(v)}()&&function hl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fp(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const k=this.storage.getItem(C),P=this.localCache[C];k!==P&&_(C,P,k)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ge,Xe,ht)=>{this.notifyListeners(ge,ht)});const k=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(k);if(_.newValue!==ge)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!C)return}const P=()=>{const ge=this.storage.getItem(k);!C&&this.localCache[k]===ge||this.notifyListeners(k,ge)},J=this.storage.getItem(k);!function dl(){return(0,F.w1)()&&10===document.documentMode}()||J===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const k=this.listeners[_];if(k)for(const P of Array.from(k))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var k=()=>super._set,P=this;return(0,s.Z)(function*(){yield k().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,k=this;return(0,s.Z)(function*(){const P=yield C().call(k,_);return k.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,k=this;return(0,s.Z)(function*(){yield C().call(k,_),delete k.localCache[_]})()}}return v.type="LOCAL",v})(),No=(()=>{class v extends zu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Sc=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const k=new v(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,s.Z)(function*(){const k=_,{eventId:P,eventType:J,data:ge}=k.data,Xe=C.handlersMap[J];if(!Xe?.size)return;k.ports[0].postMessage({status:"ack",eventId:P,eventType:J});const ht=Array.from(Xe).map(function(){var Dt=(0,s.Z)(function*(Pi){return Pi(k.origin,ge)});return function(Pi){return Dt.apply(this,arguments)}}()),Ft=yield function Sl(v){return Promise.all(v.map(function(){var g=(0,s.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(ht);k.ports[0].postMessage({status:"done",eventId:P,eventType:J,response:Ft})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Il(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class ju{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var k=this;return(0,s.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let J,ge;return new Promise((Xe,ht)=>{const Ft=Il("",20);P.port1.start();const Dt=setTimeout(()=>{ht(new Error("unsupported_event"))},C);ge={messageChannel:P,onMessage(Pi){const Hs=Pi;if(Hs.data.eventId===Ft)switch(Hs.data.status){case"ack":clearTimeout(Dt),J=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),Xe(Hs.data.response);break;default:clearTimeout(Dt),clearTimeout(J),ht(new Error("invalid_response"))}}},k.handlers.add(ge),P.port1.addEventListener("message",ge.onMessage),k.target.postMessage({eventType:g,eventId:Ft,data:_},[P.port2])}).finally(()=>{ge&&k.removeMessageHandler(ge)})})()}}function On(){return window}function Lo(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function xl(){return(xl=(0,s.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dc="firebaseLocalStorageDb",co="firebaseLocalStorage",Fo="fbase_key";class Vo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function uo(v,g){return v.transaction([co],g?"readwrite":"readonly").objectStore(co)}function Zu(){const v=indexedDB.open(Dc,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(co,{keyPath:Fo})}catch(k){_(k)}}),v.addEventListener("success",(0,s.Z)(function*(){const C=v.result;C.objectStoreNames.contains(co)?g(C):(C.close(),yield function Pa(){const v=indexedDB.deleteDatabase(Dc);return new Vo(v).toPromise()}(),g(yield Zu()))}))})}function lr(v,g,_){return kc.apply(this,arguments)}function kc(){return(kc=(0,s.Z)(function*(v,g,_){const C=uo(v,!0).put({[Fo]:g,value:_});return new Vo(C).toPromise()})).apply(this,arguments)}function Bo(){return(Bo=(0,s.Z)(function*(v,g){const _=uo(v,!1).get(g),C=yield new Vo(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Ac(v,g){const _=uo(v,!0).delete(g);return new Vo(_).toPromise()}const Ho=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,s.Z)(function*(){return _.db||(_.db=yield Zu()),_.db})()}_withRetries(_){var C=this;return(0,s.Z)(function*(){let k=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(k++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,s.Z)(function*(){return Lo()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,s.Z)(function*(){_.receiver=Sc._getInstance(function Ic(){return Lo()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,s.Z)(function*(k,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(k,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,s.Z)(function*(k,P){return["keyChanged"]});return function(k,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,s.Z)(function*(){var C,k;if(_.activeServiceWorker=yield function Ps(){return xl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ju(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(C=P[0])&&void 0!==C&&C.fulfilled&&null!==(k=P[0])&&void 0!==k&&k.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,s.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function $u(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Zu();return yield lr(_,Or,"1"),yield Ac(_,Or),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,s.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var k=this;return(0,s.Z)(function*(){return k._withPendingWrite((0,s.Z)(function*(){return yield k._withRetries(P=>lr(P,_,C)),k.localCache[_]=C,k.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,s.Z)(function*(){const k=yield C._withRetries(P=>function Na(v,g){return Bo.apply(this,arguments)}(P,_));return C.localCache[_]=k,k})()}_remove(_){var C=this;return(0,s.Z)(function*(){return C._withPendingWrite((0,s.Z)(function*(){return yield C._withRetries(k=>Ac(k,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,s.Z)(function*(){const C=yield _._withRetries(J=>{const ge=uo(J,!1).getAll();return new Vo(ge).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const k=[],P=new Set;for(const{fbase_key:J,value:ge}of C)P.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(ge)&&(_.notifyListeners(J,ge),k.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!P.has(J)&&(_.notifyListeners(J,null),k.push(J));return k})()}notifyListeners(_,C){this.localCache[_]=C;const k=this.listeners[_];if(k)for(const P of Array.from(k))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function La(v,g){return jt(v,"POST","/v2/accounts/mfaSignIn:start",ut(v,g))}function Al(){return(Al=(0,s.Z)(function*(v){return(yield jt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wr(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=k=>{const P=Se("internal-error");P.customData=k,_(P)},C.type="text/javascript",C.charset="UTF-8",function Mc(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function Wu(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Yr=1e12;class Zp{constructor(g){this.auth=g,this.counter=Yr,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Yu(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Yr;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Yr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,s.Z)(function*(){var C;return null===(C=_._widgets.get(g||Yr))||void 0===C||C.execute(),""})()}}class Yu{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;G(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qu=Wu("rcb"),qp=new ot(3e4,6e4);class Uo{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=On().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function Ml(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(On().grecaptcha):new Promise((C,k)=>{const P=On().setTimeout(()=>{k(Se(g,"network-request-failed"))},qp.get());On()[Qu]=()=>{On().clearTimeout(P),delete On()[Qu];const ge=On().grecaptcha;if(!ge)return void k(Se(g,"internal-error"));const Xe=ge.render;ge.render=(ht,Ft)=>{const Dt=Xe(ht,Ft);return this.counter++,Dt},this.hostLanguage=_,C(ge)},Wr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Qu,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),k(Se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=On().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fa{load(g){return(0,s.Z)(function*(){return new Zp(g)})()}clearedOneInstance(){}}const mh="recaptcha",_h={theme:"light",type:"image"};class Oc{constructor(g,_=Object.assign({},_h),C){this.parameters=_,this.type=mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qn(C),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;G(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fa:new Uo,this.validateStartingState()}verify(){var g=this;return(0,s.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const J=ge=>{ge&&(g.tokenChangeListeners.delete(J),P(ge))};g.tokenChangeListeners.add(J),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=On()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,s.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,s.Z)(function*(){G(Te()&&!Lo(),g.auth,"internal-error"),yield function fv(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ns(v){return Al.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xu{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Zr._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ed(){return(ed=(0,s.Z)(function*(v,g,_){const C=Qn(v),k=yield yh(C,g,(0,F.m9)(_));return new Xu(k,P=>ii(C,P))})).apply(this,arguments)}function Pc(){return(Pc=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v);yield Mo(!1,C,"phone");const k=yield yh(C.auth,g,(0,F.m9)(_));return new Xu(k,P=>ai(C,P))})).apply(this,arguments)}function Kp(){return(Kp=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v),k=yield yh(C.auth,g,(0,F.m9)(_));return new Xu(k,P=>Ro(C,P))})).apply(this,arguments)}function yh(v,g,_){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,s.Z)(function*(v,g,_){var C;const k=yield _.verify();try{let P;if(G("string"==typeof k,v,"argument-error"),G(_.type===mh,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const J=P.session;if("phoneNumber"in P)return G("enroll"===J.type,v,"internal-error"),(yield jp(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{G("signin"===J.type,v,"internal-error");const ge=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return G(ge,v,"missing-multi-factor-info"),(yield La(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield th(v,{phoneNumber:P.phoneNumber,recaptchaToken:k});return J}}finally{_._reset()}})).apply(this,arguments)}function Qp(){return(Qp=(0,s.Z)(function*(v,g){yield hc((0,F.m9)(v),g)})).apply(this,arguments)}let td=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Qn(_)}verifyPhoneNumber(_,C){return yh(this.auth,_,(0,F.m9)(C))}static credential(_,C){return Zr._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:k}=_;return C&&k?Zr._fromTokenResponse(C,k):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Vn(v,g){return g?Tt(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Lc extends oi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return wn(g,this._buildIdpRequest())}_linkToIdToken(g,_){return wn(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return wn(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Fc(v){return Ia(v.auth,new Lc(v),v.bypassAuthState)}function nd(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),sh(_,new Lc(v),v.bypassAuthState)}function vr(v){return ps.apply(this,arguments)}function ps(){return(ps=(0,s.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),hc(_,new Lc(v),v.bypassAuthState)})).apply(this,arguments)}class Vc{constructor(g,_,C,k,P=!1){this.auth=g,this.resolver=C,this.user=k,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,s.Z)(function*(C,k){g.pendingPromise={resolve:C,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,k){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,s.Z)(function*(){const{urlResponse:C,sessionId:k,postBody:P,tenantId:J,error:ge,type:Xe}=g;if(ge)return void _.reject(ge);const ht={auth:_.auth,requestUri:C,sessionId:k,tenantId:J||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Xe)(ht))}catch(Ft){_.reject(Ft)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Fc;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return nd;default:xe(this.auth,"internal-error")}}resolve(g){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rl=new ot(2e3,1e4);function Bc(){return(Bc=(0,s.Z)(function*(v,g,_){const C=Qn(v);Be(v,g,qr);const k=Vn(C,_);return new Nt(C,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function Jp(){return(Jp=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v);Be(C.auth,g,qr);const k=Vn(C.auth,_);return new Nt(C.auth,"reauthViaPopup",g,k,C).executeNotNull()})).apply(this,arguments)}function cr(){return(cr=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v);Be(C.auth,g,qr);const k=Vn(C.auth,_);return new Nt(C.auth,"linkViaPopup",g,k,C).executeNotNull()})).apply(this,arguments)}let Nt=(()=>{class v extends Vc{constructor(_,C,k,P,J){super(_,C,P,J),this.provider=k,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,s.Z)(function*(){const C=yield _.execute();return G(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,s.Z)(function*(){qe(1===_.filter.length,"Popup operations only handle one event");const C=Il();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(Se(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,k;this.pollId=null!==(k=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Rl.get())};_()}}return v.currentPopupAction=null,v})();const Ba=new Map;class Ol extends Vc{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,s.Z)(function*(){let C=Ba.get(_.auth._key());if(!C){try{const P=(yield function Xp(v,g){return xn.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(k){C=()=>Promise.reject(k)}Ba.set(_.auth._key(),C)}return _.bypassAuthState||Ba.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,s.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const k=yield C.auth._redirectUserForId(g.eventId);if(k)return C.user=k,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function xn(){return(xn=(0,s.Z)(function*(v,g){const _=Ls(g),C=Pn(v);if(!(yield C._isAvailable()))return!1;const k="true"===(yield C._get(_));return yield C._remove(_),k})).apply(this,arguments)}function Hc(v,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,s.Z)(function*(v,g){return Pn(v)._set(Ls(g),"true")})).apply(this,arguments)}function ef(v,g){Ba.set(v._key(),g)}function Pn(v){return Tt(v._redirectPersistence)}function Ls(v){return Y("pendingRedirect",v.config.apiKey,v.name)}function I(){return(I=(0,s.Z)(function*(v,g,_){const C=Qn(v);Be(v,g,qr),yield C._initializationPromise;const k=Vn(C,_);return yield Hc(k,C),k._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v);Be(C.auth,g,qr),yield C.auth._initializationPromise;const k=Vn(C.auth,_);yield Hc(k,C.auth);const P=yield Pe(C);return k._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function _e(){return(_e=(0,s.Z)(function*(v,g,_){const C=(0,F.m9)(v);Be(C.auth,g,qr),yield C.auth._initializationPromise;const k=Vn(C.auth,_);yield Mo(!1,C,g.providerId),yield Hc(k,C.auth);const P=yield Pe(C);return k._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(v,g){return yield Qn(v)._initializationPromise,Qe(v,g,!1)})).apply(this,arguments)}function Qe(v,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(v,g,_=!1){const C=Qn(v),k=Vn(C,g),J=yield new Ol(C,k,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield C._persistUserIfCurrent(J.user),yield C._setRedirectUser(null,g)),J})).apply(this,arguments)}function Pe(v){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,s.Z)(function*(v){const g=Il(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class po{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Qr(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ua(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!Ua(g)){const k=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Se(this.auth,k))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oi(g))}saveEventToCache(g){this.cachedEventUids.add(Oi(g)),this.lastProcessedEventTime=Date.now()}}function Oi(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Ua({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Fs(v){return zo.apply(this,arguments)}function zo(){return(zo=(0,s.Z)(function*(v,g={}){return jt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const tf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_v=/^https?/;function gt(){return(gt=(0,s.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Fs(v);for(const _ of g)try{if(vm(_))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function vm(v){const g=fe(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===C}if(!_v.test(_))return!1;if(tf.test(v))return C===v;const k=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(C)}const O0=new ot(3e4,6e4);function vh(){const v=On().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let kn=null;function P0(v){return kn=kn||function bm(v){return new Promise((g,_)=>{var C,k,P;function J(){vh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{vh(),_(Se(v,"network-request-failed"))},timeout:O0.get()})}if(null!==(k=null===(C=On().gapi)||void 0===C?void 0:C.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(P=On().gapi)||void 0===P||!P.load){const ge=Wu("iframefcb");return On()[ge]=()=>{gapi.load?J():_(Se(v,"network-request-failed"))},Wr(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Xe=>_(Xe))}J()}}).catch(g=>{throw kn=null,g})}(v),kn}const wm=new ot(5e3,15e3),bh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cm(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?nt(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:v.name,v:ae.SDK_VERSION},k=N0.get(v.config.apiHost);k&&(C.eid=k);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,F.xO)(C).slice(1)}`}function wh(){return wh=(0,s.Z)(function*(v){const g=yield P0(v),_=On().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:Cm(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bh,dontclear:!0},C=>new Promise(function(){var k=(0,s.Z)(function*(P,J){yield C.restyle({setHideOnLeave:!1});const ge=Se(v,"network-request-failed"),Xe=On().setTimeout(()=>{J(ge)},wm.get());function ht(){On().clearTimeout(Xe),P(C)}C.ping(ht).then(ht,()=>{J(ge)})});return function(P,J){return k.apply(this,arguments)}}()))}),wh.apply(this,arguments)}const Tm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class En{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vs(v,g,_,C,k,P){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:ae.SDK_VERSION,eventId:k};if(g instanceof qr){g.setDefaultLanguage(v.languageCode),J.providerId=g.providerId||"",(0,F.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Xe,ht]of Object.entries(P||{}))J[Xe]=ht}if(g instanceof wa){const Xe=g.getScopes().filter(ht=>""!==ht);Xe.length>0&&(J.scopes=Xe.join(","))}v.tenantId&&(J.tid=v.tenantId);const ge=J;for(const Xe of Object.keys(ge))void 0===ge[Xe]&&delete ge[Xe];return`${function Jr({config:v}){return v.emulator?nt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(ge).slice(1)}`}const Bi="webStorageSupport",Th=class Ch{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=No,this._completeRedirectFn=Qe,this._overrideRedirectResult=ef}_openPopup(g,_,C,k){var P=this;return(0,s.Z)(function*(){var J;qe(null===(J=P.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const ge=Vs(g,_,C,fe(),k);return function rf(v,g,_,C=500,k=600){const P=Math.max((window.screen.availHeight-k)/2,0).toString(),J=Math.max((window.screen.availWidth-C)/2,0).toString();let ge="";const Xe=Object.assign(Object.assign({},Tm),{width:C.toString(),height:k.toString(),top:P,left:J}),ht=(0,F.z$)().toLowerCase();_&&(ge=on(ht)?"_blank":_),ft(ht)&&(g=g||"http://localhost",Xe.scrollbars="yes");const Ft=Object.entries(Xe).reduce((Pi,[Hs,Mh])=>`${Pi}${Hs}=${Mh},`,"");if(function Zi(v=(0,F.z$)()){var g;return vi(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ht)&&"_self"!==ge)return function Em(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ge),new En(null);const Dt=window.open(g||"",ge,Ft);G(Dt,v,"popup-blocked");try{Dt.focus()}catch{}return new En(Dt)}(g,ge,Il())})()}_openRedirect(g,_,C,k){var P=this;return(0,s.Z)(function*(){return yield P._originValidation(g),function Dl(v){On().location.href=v}(Vs(g,_,C,fe(),k)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:k,promise:P}=this.eventManagers[_];return k?Promise.resolve(k):(qe(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,s.Z)(function*(){const C=yield function za(v){return wh.apply(this,arguments)}(g),k=new po(g);return C.register("authEvent",P=>(G(P?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:k},_.iframes[g._key()]=C,k})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Bi,{type:Bi},k=>{var P;const J=null===(P=k?.[0])||void 0===P?void 0:P[Bi];void 0!==J&&_(!!J),xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Nl(v){return gt.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Fp()||Wt()||vi()}};class vv{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class Bs extends vv{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Bs(g)}_finalizeEnroll(g,_,C){return function mm(v,g){return jt(v,"POST","/v2/accounts/mfaEnrollment:finalize",ut(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function $p(v,g){return jt(v,"POST","/v2/accounts/mfaSignIn:finalize",ut(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ei=(()=>{class v{constructor(){}static assertion(_){return Bs._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Si="@firebase/auth";class sf{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,s.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gs(){return window}function lf(){return(lf=(0,s.Z)(function*(v,g,_){var C;const{BuildInfo:k}=gs();qe(g.sessionId,"AuthEvent did not contain a session ID");const P=yield Yi(g.sessionId),J={};return vi()?J.ibi=k.packageName:At()?J.apn=k.packageName:xe(v,"operation-not-supported-in-this-environment"),k.displayName&&(J.appDisplayName=k.displayName),J.sessionId=P,Vs(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,J)})).apply(this,arguments)}function Nr(){return(Nr=(0,s.Z)(function*(v){const{BuildInfo:g}=gs(),_={};vi()?_.iosBundleId=g.packageName:At()?_.androidPackageName=g.packageName:xe(v,"operation-not-supported-in-this-environment"),yield Fs(v,_)})).apply(this,arguments)}function ja(){return(ja=(0,s.Z)(function*(v,g,_){const{cordova:C}=gs();let k=()=>{};try{yield new Promise((P,J)=>{let ge=null;function Xe(){var Dt;P();const Pi=null===(Dt=C.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof Pi&&Pi(),"function"==typeof _?.close&&_.close()}function ht(){ge||(ge=window.setTimeout(()=>{J(Se(v,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&ht()}g.addPassiveListener(Xe),document.addEventListener("resume",ht,!1),At()&&document.addEventListener("visibilitychange",Ft,!1),k=()=>{g.removePassiveListener(Xe),document.removeEventListener("resume",ht,!1),document.removeEventListener("visibilitychange",Ft,!1),ge&&window.clearTimeout(ge)}})}finally{k()}})).apply(this,arguments)}function Yi(v){return ms.apply(this,arguments)}function ms(){return(ms=(0,s.Z)(function*(v){const g=zc(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zc(v){if(qe(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}(0,F.Pz)("authIdTokenMaxAge"),function Ll(v){(0,ae._registerComponent)(new ye.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:P,authDomain:J}=C.options;return((ge,Xe)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ge.name}),G(!J?.includes(":"),"argument-error",{appName:ge.name});const ht={apiKey:P,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lc(v)},Ft=new Xd(ge,Xe,ht);return function ue(v,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(Tt);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,g?.popupRedirectResolver)}(Ft,_),Ft})(C,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ye.wA("auth-internal",g=>{const _=Qn(g.getProvider("auth").getImmediate());return new sf(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(Si,"0.21.3",function li(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ae.registerVersion)(Si,"0.21.3","esm2017")}("Browser");class Vl extends po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,s.Z)(function*(){yield g.initPromise})()}}function cf(v){return id.apply(this,arguments)}function id(){return(id=(0,s.Z)(function*(v){const g=yield Gc()._get($o(v));return g&&(yield Gc()._remove($o(v))),g})).apply(this,arguments)}function Mm(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function Gc(){return Tt(Gu)}function $o(v){return Y("authEvent",v.config.apiKey,v.name)}function sd(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,F.zd)(_.join("?"))}const Bl=class Rm{constructor(){this._redirectPersistence=No,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qe,this._overrideRedirectResult=ef}_initialize(g){var _=this;return(0,s.Z)(function*(){const C=g._key();let k=_.eventManagers.get(C);return k||(k=new Vl(g),_.eventManagers.set(C,k),_.attachCallbackListeners(g,k)),k})()}_openPopup(g){xe(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,k){var P=this;return(0,s.Z)(function*(){!function L0(v){var g,_,C,k,P,J,ge,Xe,ht,Ft;const Dt=gs();G("function"==typeof(null===(g=Dt?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Dt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(k=null===(C=Dt?.cordova)||void 0===C?void 0:C.plugins)||void 0===k?void 0:k.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Xe=null===(ge=null===(J=Dt?.cordova)||void 0===J?void 0:J.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Xe?void 0:Xe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ft=null===(ht=Dt?.cordova)||void 0===ht?void 0:ht.InAppBrowser)||void 0===Ft?void 0:Ft.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const J=yield P._initialize(g);yield J.initialized(),J.resetRedirect(),function mv(){Ba.clear()}(),yield P._originValidation(g);const ge=function Ih(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Mm(),postBody:null,tenantId:v.tenantId,error:Se(v,"no-auth-event")}}(g,C,k);yield function km(v,g){return Gc()._set($o(v),g)}(g,ge);const Xe=yield function Fl(v,g,_){return lf.apply(this,arguments)}(g,ge,_),ht=yield function Sh(v){const{cordova:g}=gs();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let k=null;C?g.plugins.browsertab.openUrl(v):k=g.InAppBrowser.open(v,function _a(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(k)})})}(Xe);return function Dm(v,g,_){return ja.apply(this,arguments)}(g,J,ht)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function wv(v){return Nr.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:k,BuildInfo:P}=gs(),J=setTimeout((0,s.Z)(function*(){yield cf(g),_.onEvent(Dh())}),500),ge=function(){var Ft=(0,s.Z)(function*(Dt){clearTimeout(J);const Pi=yield cf(g);let Hs=null;Pi&&Dt?.url&&(Hs=function Am(v,g){var _,C;const k=function rd(v){const g=sd(v),_=g.link?decodeURIComponent(g.link):void 0,C=sd(_).link,k=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return sd(k).link||k||C||_||v}(g);if(k.includes("/__/auth/callback")){const P=sd(k),J=P.firebaseError?function nn(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ge=null===(C=null===(_=J?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Xe=ge?Se(ge):null;return Xe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:k,postBody:null}}return null}(Pi,Dt.url)),_.onEvent(Hs||Dh())});return function(Pi){return Ft.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,ge);const Xe=k,ht=`${P.packageName.toLowerCase()}://`;gs().handleOpenURL=function(){var Ft=(0,s.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(ht)&&ge({url:Dt}),"function"==typeof Xe)try{Xe(Dt)}catch(Pi){console.error(Pi)}});return function(Dt){return Ft.apply(this,arguments)}}()}};function Dh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}function qo(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function xh(v=(0,F.z$)()){return!("file:"!==qo()&&"ionic:"!==qo()&&"capacitor:"!==qo()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function df(){try{const v=self.localStorage,g=Il();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Nm(v=(0,F.z$)()){return function ad(){return(0,F.w1)()&&11===document?.documentMode}()||function Pm(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return kh()&&(0,F.hl)()}return!1}function kh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Za(){return(function Om(){return"http:"===qo()||"https:"===qo()}()||(0,F.ru)()||xh())&&!function uf(){return(0,F.b$)()||(0,F.UG)()}()&&df()&&!kh()}function hf(){return xh()&&typeof document<"u"}function $c(){return($c=(0,s.Z)(function*(){return!!hf()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const br={LOCAL:"local",NONE:"none",SESSION:"session"},Wo=G,Hl="persistence";function Ko(v){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,s.Z)(function*(v){yield v._initializationPromise;const g=Fm(),_=Y(Hl,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function Fm(){var v;try{return(null===(v=function Lm(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Tv=G;class Yo{constructor(){this.browserResolver=Tt(Th),this.cordovaResolver=Tt(Bl),this.underlyingResolver=null,this._redirectPersistence=No,this._completeRedirectFn=Qe,this._overrideRedirectResult=ef}_initialize(g){var _=this;return(0,s.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,k){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,_,C,k)})()}_openRedirect(g,_,C,k){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,_,C,k)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return hf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,s.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Ah(){return $c.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function Ul(v){return v.unwrap()}function Wa(v){return pf(v)}function pf(v){const{_tokenResponse:g}=v instanceof F.ZR?v.customData:v;if(!g)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return td.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let C;switch(_){case"google.com":C=Bp;break;case"facebook.com":C=xu;break;case"github.com":C=Hp;break;case"twitter.com":C=pm;break;default:const{oauthIdToken:k,oauthAccessToken:P,oauthTokenSecret:J,pendingToken:ge,nonce:Xe}=g;return P||J||k||ge?ge?_.startsWith("saml.")?Ca._create(_,ge):Rr._fromParams({providerId:_,signInMethod:_,pendingToken:ge,idToken:k,accessToken:P}):new _l(_).credential({idToken:k,accessToken:P,rawNonce:Xe}):null}return v instanceof F.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function wr(v,g){return g.catch(_=>{throw _ instanceof F.ZR&&function Ka(v,g){var _;const C=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new gf(v,function Vi(v,g){var _;const C=(0,F.m9)(v),k=g;return G(g.customData.operationType,C,"argument-error"),G(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Uu._fromError(C,k)}(v,g));else if(C){const k=pf(g),P=g;k&&(P.credential=k,P.tenantId=C.tenantId||void 0,P.email=C.email||void 0,P.phoneNumber=C.phoneNumber||void 0)}}(v,_),_}).then(_=>{const k=_.user;return{operationType:_.operationType,credential:Wa(_),additionalUserInfo:Gp(_),user:go.getOrCreate(k)}})}function zl(v,g){return ff.apply(this,arguments)}function ff(){return(ff=(0,s.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>wr(v,_.confirm(C))}})).apply(this,arguments)}class gf{constructor(g,_){this.resolver=_,this.auth=function qa(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return wr(Ul(this.auth),this.resolver.resolveSignIn(g))}}class go{constructor(g){this._delegate=g,this.multiFactor=function Ma(v){const g=(0,F.m9)(v);return lo.has(g)||lo.set(g,El._fromUser(g)),lo.get(g)}(g)}static getOrCreate(g){return go.USER_MAP.has(g)||go.USER_MAP.set(g,new go(g)),go.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,ai(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,s.Z)(function*(){return zl(C.auth,function ym(v,g,_){return Pc.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,function gv(v,g,_){return cr.apply(this,arguments)}(_._delegate,g,Yo))})()}linkWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield Ko(Qn(_.auth)),function te(v,g,_){return function ne(v,g,_){return _e.apply(this,arguments)}(v,g,_)}(_._delegate,g,Yo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,Ro(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return zl(this.auth,function Wp(v,g,_){return Kp.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return wr(this.auth,function R0(v,g,_){return Jp.apply(this,arguments)}(this._delegate,g,Yo))}reauthenticateWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield Ko(Qn(_.auth)),function D(v,g,_){return function R(v,g,_){return U.apply(this,arguments)}(v,g,_)}(_._delegate,g,Yo)})()}sendEmailVerification(g){return function lh(v,g){return Lu.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,s.Z)(function*(){return yield function dc(v,g){return Ta.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function ch(v,g){return uh((0,F.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Tl(v,g){return uh((0,F.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Nc(v,g){return Qp.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Po(v,g){return hs.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Cc(v,g,_){return wi.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}go.USER_MAP=new WeakMap;const qc=G;let Gl=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=_.options;qc(k,"invalid-api-key",{appName:_.name}),qc(k,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?Yo:void 0;this._delegate=C.initialize({options:{persistence:Vm(k,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(tt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function Eu(v,g,_){const C=Qn(v);G(C._canInitEmulator,C,"emulator-config-failed"),G(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const k=!!_?.disableWarnings,P=pl(g),{host:J,port:ge}=function fl(v){const g=pl(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(C);if(k){const P=k[1];return{host:P,port:hn(C.substr(P.length+1))}}{const[P,J]=C.split(":");return{host:P,port:hn(J)}}}(g);C.config.emulator={url:`${P}//${J}${null===ge?"":`:${ge}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:J,port:ge,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function bi(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function mc(v,g){return oh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return _c(this._delegate,_)}confirmPasswordReset(_,C){return function wl(v,g,_){return zt.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var k=this;return(0,s.Z)(function*(){return wr(k._delegate,function Up(v,g,_){return Pu.apply(this,arguments)}(k._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function bc(v,g){return wc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function ah(v,g){return"EMAIL_SIGNIN"===ml.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,s.Z)(function*(){qc(Za(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function Ye(v,g){return wt.apply(this,arguments)}(_._delegate,Yo);return C?wr(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Cv(v,g){Qn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,k){const{next:P,error:J,complete:ge}=Qo(_,C,k);return this._delegate.onAuthStateChanged(P,J,ge)}onIdTokenChanged(_,C,k){const{next:P,error:J,complete:ge}=Qo(_,C,k);return this._delegate.onIdTokenChanged(P,J,ge)}sendSignInLinkToEmail(_,C){return function gn(v,g,_){return Nu.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function Rs(v,g,_){return bl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,s.Z)(function*(){let k;switch(function ld(v,g){Wo(Object.values(br).includes(g),v,"invalid-persistence-type"),(0,F.b$)()?Wo(g!==br.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Wo(g===br.NONE,v,"unsupported-persistence-type"):kh()?Wo(g===br.NONE||g===br.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Wo(g===br.NONE||df(),v,"unsupported-persistence-type")}(C._delegate,_),_){case br.SESSION:k=No;break;case br.LOCAL:k=(yield Tt(Ho)._isAvailable())?Ho:Gu;break;case br.NONE:k=z;break;default:return xe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return wr(this._delegate,function ih(v){return rh.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return wr(this._delegate,ii(this._delegate,_))}signInWithCustomToken(_){return wr(this._delegate,function Oo(v,g){return Ri.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return wr(this._delegate,function be(v,g,_){return ii((0,F.m9)(v),Du.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return wr(this._delegate,function Fi(v,g,_){return Cl.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return zl(this._delegate,function cn(v,g,_){return ed.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,s.Z)(function*(){return qc(Za(),C._delegate,"operation-not-supported-in-this-environment"),wr(C._delegate,function Va(v,g,_){return Bc.apply(this,arguments)}(C._delegate,_,Yo))})()}signInWithRedirect(_){var C=this;return(0,s.Z)(function*(){return qc(Za(),C._delegate,"operation-not-supported-in-this-environment"),yield Ko(C._delegate),function Pl(v,g,_){return function Ha(v,g,_){return I.apply(this,arguments)}(v,g,_)}(C._delegate,_,Yo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Ou(v,g){return yc.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=br,v})();function Qo(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const k=C;return{next:J=>k(J&&go.getOrCreate(J)),error:g,complete:_}}function Vm(v,g){const _=function F0(v,g){const _=Fm();if(!_)return[];const C=Y(Hl,v,g);switch(_.getItem(C)){case br.NONE:return[z];case br.LOCAL:return[Ho,No];case br.SESSION:return[No];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(Ho)&&_.push(Ho),typeof window<"u")for(const C of[Gu,No])_.includes(C)||_.push(C);return _.includes(z)||_.push(z),_}class Wc{constructor(){this.providerId="phone",this._delegate=new td(Ul(ie.Z.auth()))}static credential(g,_){return td.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Wc.PHONE_SIGN_IN_METHOD=td.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=td.PROVIDER_ID;const Bm=G;class mf{constructor(g,_,C=ie.Z.app()){var k;Bm(null===(k=C.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new Oc(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cd(v){v.INTERNAL.registerComponent(new ye.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new Gl(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Du,FacebookAuthProvider:xu,GithubAuthProvider:Hp,GoogleAuthProvider:Bp,OAuthProvider:_l,SAMLAuthProvider:ds,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:Ei,RecaptchaVerifier:mf,TwitterAuthProvider:pm,Auth:Gl,AuthCredential:oi,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.3")}(ie.Z)},8766:(bt,Ie,V)=>{V.d(Ie,{Lj:()=>xe,X3:()=>Ue});var s=V(5861);let F,ae;const ye=new WeakMap,pe=new WeakMap,he=new WeakMap,q=new WeakMap,W=new WeakMap;let ke={get(G,Ee,qe){if(G instanceof IDBTransaction){if("done"===Ee)return pe.get(G);if("objectStoreNames"===Ee)return G.objectStoreNames||he.get(G);if("store"===Ee)return qe.objectStoreNames[1]?void 0:qe.objectStore(qe.objectStoreNames[0])}return Me(G[Ee])},set:(G,Ee,qe)=>(G[Ee]=qe,!0),has:(G,Ee)=>G instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in G};function me(G){return"function"==typeof G?function _t(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ee){return G.apply(Ae(this),Ee),Me(ye.get(this))}:function(...Ee){return Me(G.apply(Ae(this),Ee))}:function(Ee,...qe){const it=G.call(Ae(this),Ee,...qe);return he.set(it,Ee.sort?Ee.sort():[Ee]),Me(it)}}(G):(G instanceof IDBTransaction&&function We(G){if(pe.has(G))return;const Ee=new Promise((qe,it)=>{const Tt=()=>{G.removeEventListener("complete",ct),G.removeEventListener("error",ue),G.removeEventListener("abort",ue)},ct=()=>{qe(),Tt()},ue=()=>{it(G.error||new DOMException("AbortError","AbortError")),Tt()};G.addEventListener("complete",ct),G.addEventListener("error",ue),G.addEventListener("abort",ue)});pe.set(G,Ee)}(G),((G,Ee)=>Ee.some(qe=>G instanceof qe))(G,function le(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,ke):G)}function Me(G){if(G instanceof IDBRequest)return function X(G){const Ee=new Promise((qe,it)=>{const Tt=()=>{G.removeEventListener("success",ct),G.removeEventListener("error",ue)},ct=()=>{qe(Me(G.result)),Tt()},ue=()=>{it(G.error),Tt()};G.addEventListener("success",ct),G.addEventListener("error",ue)});return Ee.then(qe=>{qe instanceof IDBCursor&&ye.set(qe,G)}).catch(()=>{}),W.set(Ee,G),Ee}(G);if(q.has(G))return q.get(G);const Ee=me(G);return Ee!==G&&(q.set(G,Ee),W.set(Ee,G)),Ee}const Ae=G=>W.get(G);function Ue(G,Ee,{blocked:qe,upgrade:it,blocking:Tt,terminated:ct}={}){const ue=indexedDB.open(G,Ee),fe=Me(ue);return it&&ue.addEventListener("upgradeneeded",Te=>{it(Me(ue.result),Te.oldVersion,Te.newVersion,Me(ue.transaction))}),qe&&ue.addEventListener("blocked",()=>qe()),fe.then(Te=>{ct&&Te.addEventListener("close",()=>ct()),Tt&&Te.addEventListener("versionchange",()=>Tt())}).catch(()=>{}),fe}function xe(G,{blocked:Ee}={}){const qe=indexedDB.deleteDatabase(G);return Ee&&qe.addEventListener("blocked",()=>Ee()),Me(qe).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],Be=new Map;function Ve(G,Ee){if(!(G instanceof IDBDatabase)||Ee in G||"string"!=typeof Ee)return;if(Be.get(Ee))return Be.get(Ee);const qe=Ee.replace(/FromIndex$/,""),it=Ee!==qe,Tt=Re.includes(qe);if(!(qe in(it?IDBIndex:IDBObjectStore).prototype)||!Tt&&!Se.includes(qe))return;const ct=function(){var ue=(0,s.Z)(function*(fe,...Te){const Oe=this.transaction(fe,Tt?"readwrite":"readonly");let ze=Oe.store;return it&&(ze=ze.index(Te.shift())),(yield Promise.all([ze[qe](...Te),Tt&&Oe.done]))[0]});return function(Te){return ue.apply(this,arguments)}}();return Be.set(Ee,ct),ct}!function tt(G){ke=G(ke)}(G=>({...G,get:(Ee,qe,it)=>Ve(Ee,qe)||G.get(Ee,qe,it),has:(Ee,qe)=>!!Ve(Ee,qe)||G.has(Ee,qe)}))},5861:(bt,Ie,V)=>{function s(F,ae,le,oe,ye,pe,he){try{var q=F[pe](he),W=q.value}catch(X){return void le(X)}q.done?ae(W):Promise.resolve(W).then(oe,ye)}function ie(F){return function(){var ae=this,le=arguments;return new Promise(function(oe,ye){var pe=F.apply(ae,le);function he(W){s(pe,oe,ye,he,q,"next",W)}function q(W){s(pe,oe,ye,he,q,"throw",W)}he(void 0)})}}V.d(Ie,{Z:()=>ie})}},bt=>{bt(bt.s=1441)}]);